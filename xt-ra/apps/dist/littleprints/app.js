!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),a=e[t[0]];return function(e,t,o){a.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n(598);var o=n(3),r=a(o),i=n(34),s=a(i),u=n(100),l=a(u),d=n(72),c=n(435),p=a(c),g=n(495),f=a(g),h=["en","cn"],m=h.hasOwnProperty(navigator.language)?navigator.language:"en",M=(0,f.default)(),v=document.getElementById("app");(0,l.default)("manifest.json?"+Date.now()).then(function(e){return e.json()}).then(function(e){var t=e[m+".yml"];(0,l.default)(t).then(function(e){return e.json()}).then(function(e){s.default.render(r.default.createElement(d.Provider,{store:M},r.default.createElement(p.default,{translations:e})),v)}).catch(function(e){return console.error(e)})})},function(e,t){e.exports=vendor},function(e,t,n){e.exports=n(1)(700)},function(e,t,n){e.exports=n(1)(2)},function(e,t,n){e.exports=n(1)(55)},function(e,t,n){e.exports=n(1)(87)},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){e.exports=n(1)(57)},function(e,t,n){e.exports=n(1)(58)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.webClientId=1,t.clientType="H5",t.elementTypes={photo:"PhotoElement",text:"TextElement",calendar:"CalendarElement",style:"StyleElement"},t.pageTypes={top:"topPage",bottom:"bottomPage",cover:"coverPage"},t.productTypes={WC:"WC",DC:"DC",PC:"PC",LC:"LC",LPS:"LPS"},t.bookShapeTypes={landscape:"landscape",square:"square",portrait:"portrait"},t.RESIZE_LIMIT=300,t.filterOptions={TOP:"top picks",MY:"my layouts",TEXT:"text",MORE_THAN_NINE:"9+",MORE_THAN_FIVE:"5+"},t.mouseWheel={width:50,height:50},t.ratioTypes={coverWorkspace:"coverWorkspace",innerWorkspace:"innerWorkspace",innerWorkspaceLandscape:"innerWorkspaceLandscape",previewCoverWorkspace:"previewCoverWorkspace",previewInnerWorkspace:"previewInnerWorkspace",coverWorkspaceForArrangePages:"coverWorkspaceForArrangePages",innerWorkspaceForArrangePages:"innerWorkspaceForArrangePages",previewInnerWorkspaceLandscape:"previewInnerWorkspaceLandscape",coverWorkspaceForUpgrade:"coverWorkspaceForUpgrade",innerWorkspaceForUpgrade:"innerWorkspaceForUpgrade",innerWorkspaceForUpgradeLandscape:"innerWorkspaceForUpgradeLandscape"},t.percent={lg:.93,big:.9,normal:.75,sm:.5,xs:.4},t.smallViewWidthInArrangePages=290,t.smallViewHeightInNavPages=70,t.downloadStatus={DOWNLOADING:0,DOWNLOAD_SUCCESS:1,DOWNLOAD_FAIL:2},t.shapeType={controlElement:"ELEMENT_CONTROL",backgroundElement:"BACKGROUND_ELEMENT",backgroundRect:"BACKGROUND_RECT",cameoElement:"CAMEO_ELEMENT",cameoElementEffect:"CAMEO_ELEMENT_EFFECT",elementBorder:"ELEMENT_BORDER",iCon:"ICON"},t.dragTypes={template:"TEMPLATE"},t.defaultFrameOptions={default:{value:.25,whRatio:2}},t.elementAction={MOVE:"MOVE",ROTATE:"ROTATE",RESIZE:"RESIZE"},t.pageNumPerRow={WC:5,LC:6,DC:4,LPS:5},t.pageStepMap={WC:2,LC:1,DC:1,LPS:1},t.templateTypes={WC:6,LC:11,DC:5},t.sideBarWidth=280,t.dragElementSelector={photo:".photo-element-thumbnail"},t.dragPageSelector={targetPage:".book-page-thumbnail",clonedPage:"book-page-thumbnail-cloned"},t.defaultStyle={brightness:0,effectId:0,opacity:100},t.innerPageHeightShowRatio={WC:.58,DC:1,LC:1,LPS:1},t.orderType="commonProduct",t.loginPath="/sign-in.html",t.smallViewWidthInMyProjects=400,t.defaultFontSetting={fontSize:23,color:"#000000",fontFamilyId:"roboto",fontId:"roboto"},t.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.limitedPageNum=12},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_REQUEST="API_REQUEST",t.API_SUCCESS="API_SUCCESS",t.API_FAILURE="API_FAILURE",t.GET_SPEC_DATA="GET_SPEC_DATA",t.INIT_SPEC_DATA="INIT_SPEC_DATA",t.PARSER_QUERYSTRING="PARSER_QUERYSTRING",t.ADD_TRACKER="ADD_TRACKER",t.SHOW_NOTIFY="SHOW_NOTIFY",t.HIDE_NOTIFY="HIDE_NOTIFY",t.SHOW_CONFIRM="SHOW_CONFIRM",t.HIDE_CONFIRM="HIDE_CONFIRM",t.SHOW_ALERT_MODAL="SHOW_ALERT_MODAL",t.HIDE_ALERT_MODAL="HIDE_ALERT_MODAL",t.SHOW_UPGRADE="SHOW_UPGRADE",t.HIDE_UPGRADE="HIDE_UPGRADE",t.SHOW_LOADING="SHOW_LOADING",t.HIDE_LOADING="HIDE_LOADING",t.SHOW_PREVIEW="SHOW_PREVIEW",t.HIDE_PREVIEW="HIDE_PREVIEW",t.ADD_NOTIFICATION="ADD_NOTIFICATION",t.REMOVE_NOTIFICATION="REMOVE_NOTIFICATION",t.CLEAR_NOTIFICATION="CLEAR_NOTIFICATION",t.INIT_NOTIFICATION_SYSTEM="INIT_NOTIFICATION_SYSTEM",t.CLEAR_ORDER_INFO="CLEAR_ORDER_INFO",t.SHOW_CLONE_MODAL="SHOW_CLONE_MODAL",t.HIDE_CLONE_MODAL="HIDE_CLONE_MODAL",t.SET_COVER="SET_COVER",t.SET_PAGE_ARRAY="SET_PAGE_ARRAY",t.SET_VARIABLE_MAP="SET_VARIABLE_MAP",t.SET_PARAMETER_MAP="SET_PARAMETER_MAP",t.SET_IMAGE_ARRAY="SET_IMAGE_ARRAY",t.SET_IMAGE_USED_MAP="SET_IMAGE_USED_MAP",t.SET_OPTION_MAP="SET_OPTION_MAP",t.CLEAR_IMAGE_USED_MAP="CLEAR_IMAGE_USED_MAP",t.INIT_CALENDAR_SETTING="INIT_CALENDAR_SETTING",t.CHANGE_CALENDAR_SETTING="CHANGE_CALENDAR_SETTING",t.CREATE_ELEMENTS="CREATE_ELEMENTS",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.UPDATE_ELEMENTS="UPDATE_ELEMENTS",t.DELETE_ELEMENT="DELETE_ELEMENT",t.DELETE_ELEMENTS="DELETE_ELEMENTS",t.DELETE_ALL="DELETE_ALL",t.APPLY_TEMPLATE="APPLY_TEMPLATE",t.APPLY_TEMPLATE_TO_PAGES="APPLY_TEMPLATE_TO_PAGES",t.UPDATE_PAGE_TEMPLATE_ID="UPDATE_PAGE_TEMPLATE_ID",t.MOVE_PAGE_BEFORE="MOVE_PAGE_BEFORE",t.INIT_PROJECT_SETTING="INIT_PROJECT_SETTING",t.CHANGE_PROJECT_SETTING="CHANGE_PROJECT_SETTING",t.PROJECT_LOAD_COMPLETED="PROJECT_LOAD_COMPLETED",t.UPDATE_PROJECT_ID="UPDATE_PROJECT_ID",t.CHANGE_PROJECT_TITLE="CHANGE_PROJECT_TITLE",t.CHANGE_PROJECT_PROPERTY="CHANGE_PROJECT_PROPERTY",t.UPLOAD_COMPLETE="UPLOAD_COMPLETE",t.DELETE_PROJECT_IMAGE="DELETE_PROJECT_IMAGE",t.UPDATE_IMAGE_USED_COUNT="UPDATE_IMAGE_USED_COUNT",t.SWITCH_SHEET="SWITCH_SHEET",t.SWITCH_PAGE="SWITCH_PAGE",t.ADD_IMAGES="ADD_IMAGES",t.RETRY_IMAGE="RETRY_IMAGE",t.AUTO_ADD_PHOTO_TO_CANVAS="AUTO_ADD_PHOTO_TO_CANVAS",t.CHANGE_TAB_IN_SIDEBAR="CHANGE_TAB_IN_SIDEBAR",t.UPDATE_RATIO="UPDATE_RATIO",t.ADD_ALBUM="ADD_ALBUM",t.GET_USER_ALBUM_ID="GET_USER_ALBUM_ID",t.TOGGLE_UPLOAD="TOGGLE_UPLOAD",t.UPDATE_IMAGEID="UPDATE_IMAGEID",t.UPDATE_PERCENT="UPDATE_PERCENT",t.UPDATE_FIELDS="UPDATE_FIELDS",t.CLEAR_IMAGES="CLEAR_IMAGES",t.DELETE_IMAGE="DELETE_IMAGE",t.ERROR_TO_FIRST="ERROR_TO_FIRST",t.SHOW_CONTACT_US_MODAL="SHOW_CONTACT_US_MODAL",t.HIDE_CONTACT_US_MODAL="HIDE_CONTACT_US_MODAL",t.SET_CAPABILITIES="SET_CAPABILITIES",t.SHOW_IMAGE_EDIT_MODAL="SHOW_IMAGE_EDIT_MODAL",t.HIDE_IMAGE_EDIT_MODAL="HIDE_IMAGE_EDIT_MODAL",t.CLEAR_TEMPLATE_LIST="CLEAR_TEMPLATE_LIST",t.ADD_TEMPLATE="ADD_TEMPLATE",t.IS_IN_APPLY_TEMPLATE="IS_IN_APPLY_TEMPLATE",t.SET_TEMPLATE_LIST="SET_TEMPLATE_LIST",t.SHOW_TEXT_EDIT_MODAL="SHOW_TEXT_EDIT_MODAL",t.HIDE_TEXT_EDIT_MODAL="HIDE_TEXT_EDIT_MODAL"},function(e,t,n){e.exports=n(1)(803)},function(e,t,n){var a=n(509),o=n(153),r=o(function(e,t,n){a(e,t,n)});e.exports=r},function(e,t,n){e.exports=n(1)(26)},function(e,t,n){e.exports={default:n(188),__esModule:!0}},function(e,t,n){e.exports=n(1)(1023)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_BASE="/",t.materialBasePath="./materials",t.ORDER_PATH="/<%=orderType%>/addShoppingCart.html?projectGUID=<%=projectId%>",t.GET_PROJECT_DATA="<%=baseUrl%>userid/<%=userId%>/project/<%=projectId%>?autoRandomNum=<%=autoRandomNum%>",t.GET_PREVIEW_PROJECT_DATA="<%=uploadBaseUrl%>upload/Preview/GetPhotobookXmlByProjectId?projectId=<%=projectId%>",t.GET_MAIN_PROJECT_IMAGE="<%=baseUrl%>clientH5/project/imageInfo?projectId=<%=mainProjectUid%>&autoRandomNum=<%=autoRandomNum%>",t.SUBMIT_CHECK_FAIL_PROJECT="<%=baseUrl%>userid/<%=userId%>/submitCheckFailProject/<%=projectId%>?redirectParentBook=false&isParentBook=false",t.GET_FONTS="<%=baseUrl%>api/product/text/fontmap",t.GET_FONT_THUMBNAIL="<%=baseUrl%>prod-assets/static/font_thumbnail/<%=fontName%>.png",t.NEW_PROJECT="<%=baseUrl%>general/json/<%=userId%>/project/<%=projectType%>",t.SAVE_PROJECT="<%=baseUrl%>general/json/<%=userId%>/project/<%=projectId%>/<%=projectType%>",t.GET_PROJECT_TITLE="<%=baseUrl%>web-api/customerId/<%=userId%>/getProjectNameByProjectId?projectId=<%=projectId%>",t.SAVE_PROJECT_TITLE="<%=baseUrl%>web-api/customerId/<%=userId%>/updateProjectAndAlbumTitle?projectId=<%=projectId%>&projectName=<%=projectName%>",t.LOGIN="<%=baseUrl%>phone/nativeLogin.ep?username=<%=username%>&password=<%=password%>",t.ORDER="<%=baseUrl%>image-box/addShoppingCart.html?projectGUID=<%=projectId%>",t.GET_IMAGE_IDS="<%=baseUrl%>phone/getBatchImageIds.ep?imageIdCount=<%=imageIdCount%>&autoRandomNum=<%=autoRandomNum%>",t.MY_PHOTOS="<%=baseUrl%>web-api/customer/getMyPhotosInfo",t.GET_ENV="<%=baseUrl%>userid/getEnv",t.GET_SESSION_USER_INFO="<%=baseUrl%>BigPhotoBookServlet/getSessionUserInfo?webClientId=<%=webClientId%>&autoRandomNum=<%=autoRandomNum%>",t.HEART_BEAT="<%=baseUrl%>userid/<%=userId%>/heartbeat",t.TEXT_SRC="<%=baseUrl%>api/product/text/textImage?ratio=<%=ratio%>&textAutoWrap=%7B%22autoWrapType%22%3A%22noWrap%22%2C%22autowrapPosition%22%3A%5B%5D%7D&text=<%=text%>&font=<%=fontFamily%>&fontSize=<%=fontSize%>&color=<%=fontColor%>&align=<%=textAlign%>&verticalTextAlign=<%=verticalTextAlign%>&width=<%=width%>&height=<%=height%>&originalWidth=<%=originalWidth%>&originalHeight=<%=originalHeight%>&originalFontSize=<%=originalFontSize%>",t.PAINETEXT_SRC="<%=baseUrl%>api/product/text/textImage?&ratio=<%=ratio%>&color=<%=color%>&align=center&font=<%=fontFamily%>&height=<%=height%>&text=<%=text%>&width=<%=width%>",t.IMAGES_CROPPER="<%=baseUrl%>imgservice/op/crop",t.IMAGES_CROPPER_PARAMS="?encImgId=<%=encImgId%>&px=<%=px%>&py=<%=py%>&pw=<%=pw%>&ph=<%=ph%>&width=<%=width%>&height=<%=height%>&rotation=<%=rotation%>&timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>&encProjectId=<%=encProjectId%>",t.IMAGES_API="<%=baseUrl%>imgservice/op/crop",t.IMAGES_FILTER_PARAMS="?encImgId=<%=encImgId%>&px=<%=px%>&py=<%=py%>&pw=<%=pw%>&ph=<%=ph%>&width=<%=width%>&height=<%=height%>&rotation=<%=rotation%>&effectId=<%=effectId%>&opacity=<%=opacity%>&flop=<%=imgFlip%>&shape=<%=shape%>&timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>&encProjectId=<%=encProjectId%>",t.CALENDAR_IMAGE="<%=baseUrl%>artwork/dateimage/<%=dateStyle%>/<%=productType%>_<%=size%>_<%=year%>-<%=month%>_<%=imageSize%>.png",t.GET_SPEC_VERSION_DATA="<%=productBaseURL%>product/spec/product-spec?productType=4",t.GET_PROJECT_ORDERED_STATUS="<%=baseUrl%>userid/<%=userId%>/getProjectOrderedState/<%=projectId%>",t.ADD_ALBUM="<%=baseUrl%>userid/<%=userId%>/addOrUpdateAlbum?albumName=<%=albumName%>&webClientId=<%=webClientId%>&autoRandomNum=<%=autoRandomNum%>",t.GET_USER_ALBUM_ID="<%=baseUrl%>userid/<%=userId%>/getAlbumId?albumName=<%=albumName%>",t.CONTACT_US="<%=baseUrl%>userid/service/feedback",t.UPLOAD_IMAGES="<%=uploadBaseUrl%>upload/UploadServer/uploadImg",t.IMAGE_SRC="upload/UploadServer/PicRender",t.GET_ENCODE_IMAGE_IDS="<%=baseUrl%>userid/getEncImgIds",t.GET_TEMPLATE_LIST="<%=baseUrl%>template/global/list?designSize=<%=designSize%>&imageNum=0&autoRandomNum=<%=autoRandomNum%>&customerId=<%=customerId%>&webClientId=1&productType=<%=productType%>",t.APPLY_LAYOUT="<%=baseUrl%>/template/global/item/guid/viewData",t.GET_STYLE_LIST="<%=baseUrl%>calendarStyle/getCalendarStyleList?size=<%=size%>&autoRandomNum=<%=autoRandomNum%>&webClientId=1&type=<%=productType%>",t.TEMPLATE_SRC="<%=templateThumbnailPrefx%>TemplateThumbnail/<%=size%>/<%=guid%>.jpg?size=<%=size%>&randomMumber=<%=randomMumber%>",t.GET_PRODUCT_PRICE="<%=baseUrl%>clientH5/product/book/price?product=<%=product%>&options=<%=options%>",t.CHECK_PROJECT_TITLE="<%=baseUrl%>frontPages/checkProjectName.ep",t.UPLOAD_COVER_IMAGE="<%=uploadBaseUrl%>upload/servlet/UploadCoverImgServlet?timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>",t.DELETE_SERVER_PHOTOS="<%=baseUrl%>web-api/album/deleteImages"},function(e,t,n){e.exports=n(1)(56)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Math.random()*(t-e)+e}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e,t){var n=String(e),a=n.indexOf(".");return a!==-1?n.substr(0,a+t+1):n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(isNaN(e))return 0;var n=Math.pow(10,2),a=Math.round(e*n)/n;return parseFloat(i(a,t))}function u(e){return/\.\d+/.test(""+e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce(function(e,t){return e+t});return e.length?t/e.length:0}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=l(e),n=e.reduce(function(e,n){return e+Math.pow(n-t,2)},0);return e.length?n/e.length:0}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePropertiesToInt=t.parsePropertiesToFloat=t.toInt=t.toFloat=t.guid=t.makeId=t.hexToRgb=t.decToHex=t.hexToDec=t.getPxByMM=t.getPxByPt=t.getPtByPx=t.getInchByMM=t.getPxByInch=t.getInchByPx=t.getRandomNum=void 0;var c=n(12),p=a(c);t.getRandomArbitrary=o,t.getRandomInt=r,t.toFixed=i,t.round=s,t.isDecimal=u,t.avg=l,t.dev=d;var g=n(610),f=a(g),h=t.getRandomNum=function(){return Math.round(1e13*Math.random())},m=(t.getInchByPx=function(e){var t=parseFloat(e)||0;return t/300},t.getPxByInch=function(e){var t=parseFloat(e)||0;return 300*t},t.getInchByMM=function(e){var t=parseFloat(e)||0,n=parseFloat(30*t/2.54);return parseFloat((n/300).toFixed(7))},t.getPtByPx=function(e){var t=parseFloat(e)||0;return t/300*72},t.getPxByPt=function(e){var t=parseFloat(e)||0;return 300*t/72},t.getPxByMM=function(e){var t=parseFloat(e)||0;return 30*t/2.54},t.hexToDec=function(e){return parseInt(e.replace("#",""),16)},t.decToHex=function(e){if(0===e)return"#000000";if(!e)return"#ffffff";for(var t=e.toString(16);t.length<6;)t="0"+t;return"#"+t},t.hexToRgb=function(e){return(0,f.default)(e)},t.makeId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ID",t=h();return e+"_"+t},t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.toFloat=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseFloat(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t}),M=t.toInt=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseInt(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t};t.parsePropertiesToFloat=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=m(e[t])}),(0,p.default)({},e,n)},t.parsePropertiesToInt=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=M(e[t])}),(0,p.default)({},e,n)}},function(e,t,n){e.exports=n(1)(412)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertObjOut=t.convertObjIn=void 0;var o=n(596),r=a(o),i=n(101),s=a(i),u=n(44),l=a(u),d=n(156),c=a(d),p=n(69),g=a(p);t.convertObjIn=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=(0,l.default)(t)?[]:{};return(0,s.default)(t,function(t,o){n.indexOf(o)!==-1?a[o]=t:(0,g.default)(t)?a[o]=e(t,n):"true"===t||"false"===t?a[o]=Boolean("true"===t):"null"===t?a[o]=null:(0,c.default)(t)?a[o]=t:isNaN((0,r.default)(t))?a[o]=t:a[o]=(0,r.default)(t)}),a},t.convertObjOut=function e(t){var n=(0,l.default)(t)?[]:{};return(0,s.default)(t,function(t,a){(0,c.default)(t)?n[a]=t?"true":"false":(0,g.default)(t)?n[a]=e(t):n[a]=t}),n}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getFitCrop=t.getCropOptions=t.getCropLRByOptions=t.getCropOptionsByLR=t.covertCropSizeToLimit=void 0;var o=n(12),r=a(o),i=n(9),s=n(110),u=t.covertCropSizeToLimit=function(e,t,n){var a=e,o=t;if(a>n){var r=n/a;a=n,o=Math.round(o*r)}if(o>n){var i=n/o;o=n,a=Math.round(a*i)}return{width:a,height:o}},l=(t.getCropOptionsByLR=function(e,t,n,a,o,r){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.cropLimitedSize,l=e,d=t,c=n-e,p=a-t,g=Math.round(o/c),f=Math.round(r/p);if(s){var h=u(g,f,s);g=h.width,f=h.height}return{px:l,py:d,pw:c,ph:p,width:g,height:f}},t.getCropLRByOptions=function(e,t,n,a){var o=e,r=t,i=o+n,s=r+a;return{cropLUX:o,cropLUY:r,cropRLX:i,cropRLY:s}});t.getCropOptions=function(e,t,n,a,o){var d=void 0,c=void 0;90===Math.abs(o)?(d=t,c=e):(d=e,c=t);var p=(0,s.getDefaultCrop)(d,c,n,a),g=p.px,f=p.py,h=p.pw,m=p.ph,M=l(g,f,h,m),v=M.cropLUX,y=M.cropLUY,I=M.cropRLX,T=M.cropRLY,w=Math.round(n/h),E=Math.round(a/m);if(i.cropLimitedSize){var D=u(w,E,i.cropLimitedSize);w=D.width,E=D.height}return(0,r.default)({},{px:g,py:f,pw:h,ph:m,cropLUX:v,cropLUY:y,cropRLX:I,cropRLY:T,width:w,height:E})},t.getFitCrop=function(e,t,n,a,o,r,i,s,u,l){var d=e*o,c=t*r,p=e*n,g=t*a,f=d/c,h=u/l,m=0,M=0;h>f?(M=c,m=M*h):(m=d,M=m/h),m>=e&&(m=e,M=m/h),M>=t&&(M=t,m=M*h);var v=d-m,y=c-M,I=p+v/2>=0?p+v/2:0,T=g+y/2>=0?g+y/2:0;I+m>=e&&(I=e-m),T+M>=t&&(T=t-M);var w=I/e,E=T/t,D=(I+m)/e,N=(T+M)/t;return{cropLUX:w,cropLUY:E,cropRLX:D,cropRLY:N}}},function(e,t,n){e.exports=n(1)(405)},function(e,t,n){function a(e,t,n){var a=g.imports._.templateSettings||g;n&&d(e,t,n)&&(t=void 0),e=f(e),t=o({},t,a,s);var T,w,E=o({},t.imports,a.imports,s),D=c(E),N=i(E,D),S=0,b=t.interpolate||y,A="__p += '",C=RegExp((t.escape||y).source+"|"+b.source+"|"+(b===p?v:y).source+"|"+(t.evaluate||y).source+"|$","g"),x="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(C,function(t,n,a,o,r,i){return a||(a=o),A+=e.slice(S,i).replace(I,u),n&&(T=!0,A+="' +\n__e("+n+") +\n'"),r&&(w=!0,A+="';\n"+r+";\n__p += '"),a&&(A+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),S=i+t.length,t}),A+="';\n";var P=t.variable;P||(A="with (obj) {\n"+A+"\n}\n"),A=(w?A.replace(h,""):A).replace(m,"$1").replace(M,"$1;"),A="function("+(P||"obj")+") {\n"+(P?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(w?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+A+"return __p\n}";var L=r(function(){return Function(D,x+"return "+A).apply(void 0,N)});if(L.source=A,l(L))throw L;return L}var o=n(527),r=n(528),i=n(614),s=n(519),u=n(521),l=n(157),d=n(91),c=n(568),p=n(154),g=n(535),f=n(169),h=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,v=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,y=/($^)/,I=/['\n\r\u2028\u2029\\]/g;e.exports=a},function(e,t,n){e.exports=n(1)(128)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,p.default)(e.name)(e.params),a={method:"GET",credentials:"same-origin"};return fetch(n,(0,d.default)({},a,t)).then(function(e){return e.text().then(function(t){return{text:t,response:e}})},function(e){return u.default.reject(e)}).then(function(e){var t=e.text,n=e.response;if(!n.ok)return u.default.reject(n);var a=null;try{a=JSON.parse(t)}catch(e){a=h.default.xml2js(t)}finally{return a}})}Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_API=void 0;var r=n(600),i=a(r),s=n(14),u=a(s),l=n(19),d=a(l),c=n(23),p=a(c);n(100);var g=n(10),f=n(39),h=a(f),m=t.CALL_API=(0,i.default)("Call API");t.default=function(e){return function(e){return function(t){var n=t[m];if("undefined"==typeof n)return e(t);var a=n.apiPattern,r=n.options;return e({apiPattern:a,type:g.API_REQUEST,options:r}),o(a,r).then(function(t){return e({apiPattern:a,type:g.API_SUCCESS,response:t}),t},function(t){return e({apiPattern:a,type:g.API_FAILURE,result:t}),u.default.reject(t)})}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(0,i.default)(e,"project.data.setting"),n=(0,i.default)(e,"project.data.pageArray"),a=(0,i.default)(e,"project.data.cover"),o=a.get("containers"),r=(0,i.default)(e,"project.data.imageArray"),s=(0,i.default)(e,"project.data.property"),l=(0,i.default)(e,"project.data.calendarSetting"),d=(0,i.default)(e,"project.data.parameterMap"),c=(0,i.default)(e,"project.data.variableMap"),p=(0,i.default)(e,"spec.data.configurableOptionArray"),g=(0,i.default)(e,"spec.data.parameterArray"),f=(0,i.default)(e,"spec.data.variableArray"),h=(0,i.default)(e,"spec.data.allOptionMap"),m=(0,i.default)(e,"system.env.urls"),M=(0,i.default)(e,"system.env.qs"),v=(0,i.default)(e,"system.global.pagination").get("pageId"),y=(0,i.default)(e,"system.global.snipping"),I=(0,i.default)(e,"system.global.ratio"),T=null,w=null,E=u.default.List(),D=u.default.Map();n&&n.size&&n.forEach(function(e){e.get("id")===v&&(T=e),e.get("elements").forEach(function(t){D=D.set(t.get("id"),e.get("id"))}),E=E.concat(e.get("elements"))}),o&&o.size&&o.forEach(function(e){e.get("id")===v&&(w=e),e.get("elements").forEach(function(t){D=D.set(t.get("id"),e.get("id"))}),E=E.concat(e.get("elements"))});var N=T||w,S=(0,i.default)(e,"system.env.userInfo").get("id"),b=(0,i.default)(e,"system.fontList");return{setting:t,calendarSetting:l,cover:a,containers:o,elementArray:E,pageArray:n,imageArray:r,property:s,parameterMap:d,variableMap:c,elementPageIdMap:D,configurableOptionArray:p,parameterArray:g,variableArray:f,allOptionMap:h,queryStringObj:M,urls:m,currentPage:N,snipping:y,ratioMap:I,userId:S,fontList:b}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=a(r);t.getDataFromState=o;var s=n(2),u=a(s)},function(e,t,n){e.exports=n(1)(970)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(201);var v=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.onClicked,o=e.width,r=e.height,i=e.disabled,s=e.id,u=(0,M.default)("button",n,{disabled:i});return h.default.createElement("button",{id:s,className:u,onClick:a,style:{width:o?o+"px":"",height:r?r+"px":""},disabled:i},t)}}]),t}(f.Component);t.default=v,v.propTypes={onClicked:f.PropTypes.func,className:f.PropTypes.string,width:f.PropTypes.number,height:f.PropTypes.number,disabled:f.PropTypes.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(212);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.stopEvent=n.stopEvent.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.onBackDropClick=n.onBackDropClick.bind(n),n.stopDragEvent=function(e){var t=e||window.event;t.stopPropagation(),t.preventDefault()},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t){var n=e.opened,a=this.props.opened;n!==a&&a&&this.modalContainer.focus()}},{key:"handleKeyDown",value:function(e){this.props.escapeClose&&27===e.keyCode&&(e.preventDefault(),this.props.onClosed()),this.stopEvent(e)}},{key:"onBackDropClick",value:function(){var e=this.props,t=e.closeByBackDropClick,n=e.onClosed;t&&n()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,o=t.opened,r=t.onClosed,i=t.onMinimized,s=t.isHideIcon,u=t.isHideMinimize,l=void 0===u||u,d=t.styles,c=(0,M.default)("x-modal",{show:o}),p=(0,M.default)("icon-close",{hide:s}),g=(0,M.default)("icon-minimize",{hide:l}),f=(0,M.default)("content",a);return h.default.createElement("div",{ref:function(t){e.modalContainer=t},tabIndex:"-1",className:c,onClick:this.stopEvent,onMouseDown:this.stopEvent,onKeyDown:this.handleKeyDown,onKeyUp:this.stopEvent,onKeyPress:this.stopEvent},h.default.createElement("div",{className:"backdrop",onClick:this.onBackDropClick}),h.default.createElement("div",{className:f,style:d,onDragStart:this.stopDragEvent},h.default.createElement("span",{className:g,onClick:i}),h.default.createElement("span",{className:p,onClick:r}),n))}}]),t}(f.Component);t.default=v,v.defaultProps={escapeClose:!0,closeByBackDropClick:!1},v.propTypes={onClosed:f.PropTypes.func.isRequired,className:f.PropTypes.string,opened:f.PropTypes.bool.isRequired,escapeClose:f.PropTypes.bool,isHideIcon:f.PropTypes.bool,closeByBackDropClick:f.PropTypes.bool}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneDragNode=t.getTransferDataByNode=t.getTransferData=t.setTransferDragNode=t.setTransferDataByNode=t.setTransferData=void 0;var o=n(46),r=a(o),i=!!document.documentMode;!i&&!!window.StyleMedia,t.setTransferData=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";if(t){var a=(0,r.default)(t);e&&e.dataTransfer?e.dataTransfer.setData(n,a):document.querySelector("body").setAttribute("data-drag",a)}},t.setTransferDataByNode=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(e){var t=(0,r.default)(e);document.querySelector("body").setAttribute("data-drag",t)}},t.setTransferDragNode=function(e,t){t&&t.nodeType===Node.ELEMENT_NODE&&e.dataTransfer&&e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t,0,0)},t.getTransferData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=void 0;if(e&&e.dataTransfer){var a=e.dataTransfer.getData(t);try{n=a.trim()?JSON.parse(a):{}}catch(e){n=""}}else{var o=document.querySelector("body").getAttribute("data-drag");n=o?JSON.parse(o):{},document.querySelector("body").removeAttribute("data-drag")}return n},t.getTransferDataByNode=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",void 0),a=document.querySelector("body").getAttribute("data-drag");return n=a?JSON.parse(a):{},t&&document.querySelector("body").removeAttribute("data-drag"),n},t.cloneDragNode=function(e,t){if(e&&e.nodeType===Node.ELEMENT_NODE){var n=e.cloneNode(!0);return n.setAttribute("id",t),n.style.position="absolute",n.style.top="-100000px",document.body.appendChild(n),n}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},a="",o="",r="",i="";Object.defineProperty(n,"customerId",{get:function(){return a},set:function(e){a=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"token",{get:function(){return o},set:function(e){o=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"timestamp",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"encProjectId",{get:function(){return i},set:function(e){i=e},enumerable:!0,configurable:!0}),t.default=n},function(e,t){"use strict";function n(e,t,n){var a=e<<16|t<<8|n;return function(e){return"#"+new Array(7-e.length).join("0")+e}(a.toString(16).toUpperCase())}function a(e){var t=e.replace(/^#/,""),n=t.split("");return 3===t.length&&(n[5]=t[2],n[4]=t[2],n[3]=t[1],n[2]=t[1],n[1]=t[0],n[0]=t[0]),parseInt(n.join(""),16)}function o(e){var t=a(e),n=t>>16,o=t>>8&255,r=255&t;return[n,o,r]}function r(e,t){var n=a(e),o=n>>16,r=n>>8&255,i=255&n;return"rgba("+o+", "+r+", "+i+", "+t/100+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.RGBToHex=n,t.hexString2Number=a,t.hexToRGB=o,t.hexToRGBA=r;t.numberToHex=function(e){for(var t=parseInt(e).toString(16).toUpperCase();t.length<6;)t="0"+t;return"#"+t}},function(e,t){"use strict";t.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.bind=function(e,t){return function(){return e.apply(t,arguments)}},t.decode64=function(e){var t,n,a,o,r,i,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=e.length,c="";for(t=0;t<d;t+=4)n=l.indexOf(e[t]),a=l.indexOf(e[t+1]),o=l.indexOf(e[t+2]),r=l.indexOf(e[t+3]),i=n<<2|a>>4,s=(15&a)<<4|o>>2,u=(3&o)<<6|r,c+=64===o?String.fromCharCode(i):64===r||r===-1?String.fromCharCode(i,s):String.fromCharCode(i,s,u);return c},t.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+n,left:t.left,width:n,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},t.offsetBounds=function(e){var n=e.offsetParent?t.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+n.top,bottom:e.offsetTop+e.offsetHeight+n.top,right:e.offsetLeft+n.left+e.offsetWidth,left:e.offsetLeft+n.left,width:e.offsetWidth,height:e.offsetHeight}},t.parseBackgrounds=function(e){var t,n,a,o,r,i,s,u=" \r\n\t",l=[],d=0,c=0,p=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&(o=t.indexOf("-",1)+1)>0&&(a=t.substr(0,o),t=t.substr(o)),l.push({prefix:a,method:t.toLowerCase(),value:r,args:s,image:null})),s=[],t=a=n=r=""};return s=[],t=a=n=r="",e.split("").forEach(function(e){if(!(0===d&&u.indexOf(e)>-1)){switch(e){case'"':i?i===e&&(i=null):i=e;break;case"(":if(i)break;if(0===d)return d=1,void(r+=e);c++;break;case")":if(i)break;if(1===d){if(0===c)return d=0,r+=e,void p();c--}break;case",":if(i)break;if(0===d)return void p();if(1===d&&0===c&&!t.match(/^url$/i))return s.push(n),n="",void(r+=e)}r+=e,0===d?t+=e:n+=e}}),p(),l}},function(e,t,n){e.exports=n(1)(22)},function(e,t,n){e.exports=n(1)(46)},function(e,t,n){e.exports=n(1)(820)},function(e,t){"use strict";var n=function e(){e.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-e.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(182),r=a(o),i=n(181),s=a(i);t.default=function(){function e(e,t){var n=[],a=!0,o=!1,r=void 0;try{for(var i,u=(0,s.default)(e);!(a=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){o=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(575),r=a(o),i=new r.default({attributePrefix:""});t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSpineMaxDep=t.getIntersection=t.findCameoElementData=t.findElementData=t.getBackgroundElementOptions=t.getRenderElementOptions=t.sortElementsByZIndex=void 0;var o=n(533),r=a(o),i=n(52),s=n(500),u=n(9),l=(t.sortElementsByZIndex=function(e){var t=l(e);return t.sort(function(e,t){var n=e.get("dep"),a=t.get("dep");return n>a?1:n<a?-1:0})},t.getRenderElementOptions=function(e){var t=e.get("computed"),n={x:t?Math.round(t.get("width")/2):0,y:t?Math.round(t.get("height")/2):0},a=t?t.get("imgUrl"):"",o=t?t.get("left")+n.x:0,r=t?t.get("top")+n.y:0,i=t?Math.floor(t.get("width")):0,s=t?Math.floor(t.get("height")):0,u=e?e.get("dep"):0,l=e.get("rot"),d=e.get("id");return{imgUrl:a,offset:n,x:o,y:r,width:i,height:s,zIndex:u,rot:l,id:d}},t.getBackgroundElementOptions=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.defaultTextColor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,o=e.props.data,r=o.ratio,s=o.page,l=s?s.get("width")*r.workspace:0,d=s?s.get("height")*r.workspace:0,c=20;return{x:0,y:d/2-c,fill:n,fontFamily:"Gotham SSm A",width:l,align:"center",id:u.shapeType.backgroundElement,padding:c,text:t,fontSize:a,name:i.backgroundTextElementName
}},t.findElementData=function(e,t){var n=e.state.elementArray;return n?n.find(function(e){return e.get("id")===t}):null},t.findCameoElementData=function(e){var t=e.state.elementArray;return t?t.find(function(e){return e.get("type")===u.elementTypes.cameo}):null},t.getIntersection=function(e,t){var n=t.sort(function(e,t){return t.get("dep")-e.get("dep")});return n.find(function(t){var n=t.get("computed");if(!n)return!1;var a=t.get("rot")||0;return(0,s.inPointInBox)(e,{x:n.get("left"),y:n.get("top"),width:n.get("width"),height:n.get("height"),degree:a})})},t.setSpineMaxDep=function(e){var t=[],n=null,a=null;if(e.forEach(function(e,n){t[n]=e.get("dep"),e.get("isSpineText")&&(a=e)}),a){var o=(0,r.default)(t),i=e.findIndex(function(e){return e.get("isSpineText")});return n=e.setIn([String(i),"dep"],o+1)}return e})},function(e,t,n){e.exports=n(1)(413)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(553),M=a(m),v=n(552),y=a(v),I=n(104),T=(a(I),n(13)),w=a(T);n(211);var E=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.hasText,a=e.zIndex,o=(0,w.default)("x-loading",{show:t}),r={zIndex:a||2e9},i={};a&&(i.zIndex=a);var s=n?y.default:M.default;return h.default.createElement("div",{className:o,"data-html2canvas-ignore":"true",style:i},h.default.createElement("div",{className:"load-mask",style:i}),h.default.createElement("div",{className:"load-content",style:r},h.default.createElement("img",{src:s})))}}]),t}(f.Component);E.propTypes={isShown:f.PropTypes.bool.isRequired},E.defaultProps={isShown:!0},t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(4),r=a(o),i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e);var n=t.type,a=void 0===n?"PhotoElement":n,o=t.elType,i=void 0===o?"image":o,s=t.x,u=void 0===s?0:s,l=t.y,d=void 0===l?0:l,c=t.width,p=void 0===c?0:c,g=t.height,f=void 0===g?0:g,h=t.px,m=void 0===h?0:h,M=t.py,v=void 0===M?0:M,y=t.pw,I=void 0===y?1:y,T=t.ph,w=void 0===T?1:T,E=t.dep,D=void 0===E?0:E,N=t.imageid,S=void 0===N?"":N,b=t.encImgId,A=void 0===b?"":b,C=t.rot,x=void 0===C?0:C,P=t.imgRot,L=void 0===P?0:P,_=t.imgFlip,O=void 0!==_&&_,j=t.cropLUX,z=void 0===j?0:j,k=t.cropLUY,R=void 0===k?0:k,U=t.cropRLX,B=void 0===U?0:U,Y=t.cropRLY,W=void 0===Y?0:Y,Q=t.border,F=void 0===Q?{color:"#000000",size:0,opacity:100}:Q,G=t.lastModified,H=void 0===G?Date.now():G;this.type=a,this.elType=i,this.x=u,this.y=d,this.width=p,this.height=f,this.px=m,this.py=v,this.pw=I,this.ph=w,this.dep=D,this.imageid=S,this.encImgId=A,this.rot=x,this.imgRot=L,this.imgFlip=O,this.cropLUX=z,this.cropLUY=R,this.cropRLX=B,this.cropRLY=W,this.border=F,this.lastModified=H};t.default=i},function(e,t,n){e.exports=n(1)(25)},function(e,t,n){e.exports=n(1)(417)},function(e,t,n){e.exports={default:n(185),__esModule:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(3),M=a(m),v=n(34),y=n(28),I=a(y),T=n(284),w=a(T),E=n(13),D=a(E);n(205);var N=function(e){function t(e){return(0,l.default)(this,t),(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.resetOpenState;e.isAutoOpen&&(this.onClickInput(),t())}},{key:"onClickInput",value:function(){var e=this.props.uploadFileClicked,t=(0,v.findDOMNode)(this.refs.fileInput);e&&e(),t.click()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=e.multiple,o=e.accept,r=void 0===o?"image/jpeg,image/x-png,image/png":o,i=e.inputId,s=e.id,u=(0,D.default)("upload-button",t);return M.default.createElement(I.default,{className:u,onClicked:this.onClickInput.bind(this),id:s},M.default.createElement(w.default,{type:"file",ref:"fileInput",id:i,accept:r,onChange:this.handleSelectFile.bind(this),multiple:a}),M.default.createElement("span",null,n))}},{key:"handleSelectFile",value:function(e){var t=this.props.onSelectFile;if(e.target.value){var n=this.props,a=n.boundUploadedImagesActions,o=n.toggleModal,i=n.useNewUpload,s=void 0!==i&&i;!s&&o("upload",!0);var u=[].concat((0,r.default)(e.target.files));t&&t(u),a.addImages(u)}var l=(0,v.findDOMNode)(this.refs.fileInput);l.value=""}}]),t}(m.Component);N.propTypes={className:m.PropTypes.string,children:m.PropTypes.string,multiple:m.PropTypes.string,accept:m.PropTypes.string,id:m.PropTypes.string},t.default=N},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.toDecode=function(e){var t=e;try{t=decodeURIComponent(e)}catch(e){}return t},a=(t.isEncode=function(e){return"string"==typeof e&&(n(e)!==e||a(e)===e)},t.toEncode=function(e){return e?encodeURIComponent(n(e)):""})},function(e,t,n){"use strict";function a(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function o(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function r(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function i(e){return e.toString().indexOf("%")!==-1}function s(e){return e.replace("px","")}function u(e){return parseFloat(e)}var l=n(77),d=n(33),c=d.getBounds,p=d.parseBackgrounds,g=d.offsetBounds;a.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},a.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},a.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},a.prototype.isElementVisible=function(e){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:!("none"===this.css("display")||"hidden"===this.css("visibility")||this.node.hasAttribute("data-html2canvas-ignore")||this.node.hasAttribute("data-html2canvas-manual-ignore")&&e&&e.isManualIgnore||"INPUT"===this.node.nodeName&&"hidden"===this.node.getAttribute("type"))},a.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},a.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],n=this.css(e);return void 0===n&&t.some(function(t){return n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==n},this),void 0===n?null:n},a.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},a.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},a.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new l(this.css(e)))},a.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},a.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},a.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},a.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=p(this.css("backgroundImage")))},a.prototype.cssList=function(e,t){var n=(this.css(e)||"").split(",");return n=n[t||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&&(n=[n[0],i(n[0])?"auto":n[0]]),n},a.prototype.parseBackgroundSize=function(e,t,n){var a,o,r=this.cssList("backgroundSize",n);if(i(r[0]))a=e.width*parseFloat(r[0])/100;else{if(/contain|cover/.test(r[0])){var s=e.width/e.height,u=t.width/t.height;return s<u^"contain"===r[0]?{width:e.height*u,height:e.height}:{width:e.width,height:e.width/u}}a=parseInt(r[0],10)}return o="auto"===r[0]&&"auto"===r[1]?t.height:"auto"===r[1]?a/t.width*t.height:i(r[1])?e.height*parseFloat(r[1])/100:parseInt(r[1],10),"auto"===r[0]&&(a=o/t.height*t.width),{width:a,height:o}},a.prototype.parseBackgroundPosition=function(e,t,n,a){var o,r,s=this.cssList("backgroundPosition",n);return o=i(s[0])?(e.width-(a||t).width)*(parseFloat(s[0])/100):parseInt(s[0],10),r="auto"===s[1]?o/t.width*t.height:i(s[1])?(e.height-(a||t).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(o=r/t.height*t.width),{left:o,top:r}},a.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},a.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var n=e.match(this.TEXT_SHADOW_PROPERTY),a=0;n&&a<n.length;a++){var o=n[a].match(this.TEXT_SHADOW_VALUES);t.push({color:new l(o[0]),offsetX:o[1]?parseFloat(o[1].replace("px","")):0,offsetY:o[2]?parseFloat(o[2].replace("px","")):0,blur:o[3]?o[3].replace("px",""):0})}return t},a.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(s).map(u);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},a.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?r(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix},a.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?g(this.node):c(this.node))},a.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},a.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=o(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("•")),0===e.length?this.node.placeholder||"":e},a.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,a.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,a.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,a.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.webClientId=1,t.supportedImagesTypes=["image/jpeg","image/jpg","image/png","image/x-png","image/png"],t.leastUploadImagesCount=24,t.uploadFailTypes={timeExpired:"timeExpired",overSize:"overSize",emptyFile:"emptyFile",colorSpace:"colorSpace",invalidFileType:"invalidFileType"},t.invalidElementKeys=["dateSelected","isDisabled","isSelected","computed","elements"],t.paintedTextTypes={front:"Front",back:"Back",spine:"Spine",none:"None"},t.uploadStatus={PENDING:"PENDING",DONE:"DONE",PROGRESS:"PROGRESS",FAIL:"FAIL"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=l.default.Map();return e.forEach(function(e,a){if(a===t&&e&&(n=n.set(String(e),1)),e&&e.size){var r=o(e,t);r.forEach(function(e,t){var a=String(t);n=(0,s.default)(n.get(t))?n.set(a,r.get(t)):n.set(a,n.get(a)+r.get(a))})}}),n}function r(e){return o(e,"encImgId")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(168),s=a(i);t.getImageUsedMap=r;var u=n(2),l=a(u)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultImageFrame={fill:"#000",stroke:"#dfdfdf",strokeWidth:4},t.defaultTextFrame={stroke:"#7b7b7b",dash:[4,4],strokeWidth:1},t.defaultCameoRectFrame={fill:"#fff",offset:{x:0,y:0}},t.backgroundTextElementName="backgroundTextElementName",t.defaultTextColor="#b7b7b7"},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterFonts=t.createNewElementsByTemplate=t.updateElementsByTemplate=t.recomputedTextElementOptions=t.recomputedElementOptions=t.recomputedElementOptionsWithImage=void 0;var o=n(66),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=n(2),c=n(21),p=n(9),g=n(18),f=n(32),h=n(43),m=a(h),M=.4,v=function(e,t){var n=null,a=e.get("encImgId");return t.length&&a&&(n=t.find(function(e){return e.encImgId===a})),n},y=function(e,t,n,a){var o=t,r=a;if(t>M){var i=e/t,s=i/2;o=(e-s)/s,r=n/s}return{px:o,pw:r}},I=function(e){var t=0;if(e&&e.size){var n=e.min(function(e){return e.get("px")});n&&(t=n.get("px"))}return t},T=t.recomputedElementOptionsWithImage=function(e,t,n,a){var o=n.get("width"),i=n.get("height"),u=o*t.pw,l=i*t.ph,d={cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0},p=0,g=!1;a&&(p=a.get("imgRot"),g=a.get("imgFlip"));var f=(0,r.default)(t.rot)?t.rot:0;e&&(d=(0,c.getCropOptions)((0,s.default)(e,"width"),(0,s.default)(e,"height"),u,l,p));var h=d,m=h.cropLUX,M=h.cropLUY,v=h.cropRLX,y=h.cropRLY;return{x:o*t.px,y:i*t.py,dep:t.dep,px:t.px,py:t.py,pw:t.pw,ph:t.ph,cropLUX:m,cropLUY:M,cropRLX:v,cropRLY:y,rot:f,imgRot:p,imgFlip:g,width:o*t.pw,height:i*t.ph}},w=t.recomputedElementOptions=function(e,t,n,a){var o=v(t,e);return T(o,n,a,t)},E=t.recomputedTextElementOptions=function(e,t){var n=t.get("width"),a=t.get("height");return{type:p.elementTypes.text,elType:"text",x:n*e.px,y:a*e.py,dep:e.dep,rot:e.rot,px:e.px,py:e.py,pw:e.pw,ph:e.ph,width:n*e.pw,height:a*e.ph,fontColor:(0,f.numberToHex)(e.color),fontFamily:decodeURI(e.fontFamily),fontSize:e.fontSize,fontWeight:e.fontWeight,textAlign:e.textAlign,textVAlign:e.textVAlign}};t.updateElementsByTemplate=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t.sort(function(e,t){return t.get("encImgId")>e.get("encImgId")}),i=r.filter(function(e){return e.get("type")===p.elementTypes.text}),s=r.filter(function(e){return e.get("type")===p.elementTypes.photo}),u=r.filter(function(e){return e.get("type")===p.elementTypes.calendar}),c=0,f=0,h=(a.bgColor,a.elements),v=e.get("type")===p.pageTypes.front,T=I((0,d.fromJS)(h)),D=v&&o&&T>M,N=h.filter(function(e){return e.type===p.elementTypes.text}),S=(0,d.List)([]);return h.forEach(function(t,a){switch(t.type){case p.elementTypes.photo:if(++c<=s.length){var o=s[c-1],r=t;if(D){var u=y(t.x,t.px,t.width,t.pw);r=(0,l.default)({},t,u)}var h=o.merge(w(n,o,r,e));S=S.push(h)}else{var M=t;if(D){var v=y(t.x,t.px,t.width,t.pw);M=(0,l.default)({},t,v)}var I=new m.default(w(n,(0,d.Map)({}),M,e));S=S.push((0,d.Map)((0,l.default)(I,{id:(0,g.guid)()})))}break;case p.elementTypes.text:if(++f<=i.length){var T=i[f-1],N=t;if(D){var b=y(t.x,t.px,t.width,t.pw);N=(0,l.default)({},t,b)}var A=T.merge(E(N,e));S=S.push(A)}else{var C=t;if(D){var x=y(t.x,t.px,t.width,t.pw);C=(0,l.default)({},t,x)}var P=E(C,e);S=S.push((0,d.Map)((0,l.default)(P,{id:(0,g.guid)()})))}}}),!N.length&&i.length&&i.forEach(function(e){S=S.push((0,d.Map)((0,l.default)(e,{id:(0,g.guid)()})))}),u.forEach(function(e){S=S.push((0,d.Map)((0,l.default)(e,{id:(0,g.guid)()})))}),(0,d.fromJS)(S.toJS())},t.createNewElementsByTemplate=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[],i=(e.get("width")*a,e.get("height")*a,n.bgColor,n.elements),s=e.get("type")===p.pageTypes.front,u=I((0,d.fromJS)(i)),c=s&&o&&u>M;i=i.map(function(e){if(c){var t=y(e.x,e.px,e.width,e.pw);return(0,l.default)({},e,t)}return e});var f=i.sort(function(e,t){return e.width/e.height>t.width/t.height}),h=t.sort(function(e,t){return e.get("width")/e.get("height")>t.get("width")/t.get("height")}),v=i.find(function(e){return e.type===p.elementTypes.text});if(v){var w=E(v,e);r.push((0,d.Map)((0,l.default)({},w,{id:(0,g.guid)(),type:p.elementTypes.text})))}return f.forEach(function(t,n){if(h.size>n&&t.type===p.elementTypes.photo){var a=h.get(n).toJS(),o=new m.default(T(a,t,e));r.push((0,d.Map)((0,l.default)({},o,{id:(0,g.guid)(),type:p.elementTypes.photo,encImgId:a.encImgId,imageid:a.imageid})))}else log("照片数小于模板的元素总数.")}),r},t.filterFonts=function(e,t){return e.forEach(function(e){var n=t.find(function(t){return t.name===e.fontFamily&&!!t.deprecated});n&&(e.fontFamily=p.DEFAULT_FONT_FAMILY_ID)}),e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderAllSpreads=t.computedSizeForUpgrade=t.computedSizeForSpecialView=t.getRenderSize=t.getBgParams=t.getRenderPaginationSpread=t.getInnerPageSize=t.getRenderPagination=t.convertCoverSummaryPages=void 0;var o=n(17),r=a(o),i=n(12),s=a(i),u=n(11),l=a(u),d=n(2),c=a(d),p=n(9),g=t.convertCoverSummaryPages=function(e,t,n){var a=c.default.List(),o=c.default.Map(),r=e.get("bgImageUrl"),i=e.get("bleed"),s=e.get("height"),u=e.get("width"),l=e.get("id"),d=e.get("containers"),g=!0,f=void 0;d&&(f=d.find(function(e){return e.get("type")===p.pageTypes.cover})),o=o.merge({bgImageUrl:r,bleed:i,height:s,width:u,id:l,month:f&&f.get("month")||0,year:f&&f.get("year")||0});var h={isPageDraggable:!1,isPageDropable:!1};return e&&f&&(a=a.push(f.merge(h,{bgColor:g?e.get("bgColor"):"transparent",offset:{top:0,left:0},enabled:!0,isActive:f.get("id")===n.pageId}))),{summary:o,pages:a}},f=function(e,t,n,a,o,r,i,s){var u=c.default.List([]),l=e.get(t),d=e.get(n),g=!0,f=!1;return u=u.push(l.merge({width:l.get("width"),height:l.get("height"),offset:{top:0,left:0},enabled:g,isActive:l.get("id")===s.pageId,isPageDraggable:!1,isPageDropable:!1})),l.get("type")===p.pageTypes.top&&(u=u.push(d.merge({width:d.get("width"),height:d.get("height"),offset:{top:0,left:0},enabled:f,isActive:d.get("id")===s.pageId,isPageDraggable:!1,isPageDropable:!1}))),u},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i={container:{width:0,height:0},sheet:{width:0,height:0}},s=t?t.getIn(["pageBleed","left"]):0,u=t?t.getIn(["pageBleed","right"]):0,d=t?t.getIn(["pageBleed","top"]):0,c=t?t.getIn(["pageBleed","bottom"]):0;return i.container.width=Math.floor((e.get("width")+(s+u))*n),i.container.height=Math.floor((e.get("height")+(d+c))*n),i.container.left=-Math.floor(s*n),i.container.top=-Math.floor(d*n),i.sheet.width=Math.floor(e.get("width")*n),i.sheet.height=Math.floor(e.get("height")*n),o?r?(i.sheet.top=Math.floor((0,l.default)(a,"allPageCoverBgParams.top")*n),i.sheet.left=Math.floor((0,l.default)(a,"allPageCoverBgParams.left")*n)):(i.sheet.top=Math.floor((0,l.default)(a,"coverBgParams.top")*n),i.sheet.left=Math.floor((0,l.default)(a,"coverBgParams.left")*n)):r?(i.sheet.topPageTop=Math.floor((0,l.default)(a,"allPageInnerBgParams.topPageTop")*n),i.sheet.topPageLeft=Math.floor((0,l.default)(a,"allPageInnerBgParams.topPageLeft")*n),i.sheet.bottomPageTop=Math.floor((0,l.default)(a,"allPageInnerBgParams.bottomPageTop")*n),i.sheet.bottomPageLeft=Math.floor((0,l.default)(a,"allPageInnerBgParams.bottomPageLeft")*n)):(i.sheet.topPageTop=Math.floor((0,l.default)(a,"innerBgParams.topPageTop")*n),i.sheet.topPageLeft=Math.floor((0,l.default)(a,"innerBgParams.topPageLeft")*n),i.sheet.bottomPageTop=Math.floor((0,l.default)(a,"innerBgParams.bottomPageTop")*n),i.sheet.bottomPageLeft=Math.floor((0,l.default)(a,"innerBgParams.bottomPageLeft")*n)),i},m=(t.getRenderPagination=function(e,t,n){var a=0,o=0,r=(0,l.default)(n,"spec.product"),i=p.pageStepMap[r];return t&&t.size&&(a=t.size/i),(0,s.default)({},e.toJS(),{total:a,current:o,pageStep:i})},t.getInnerPageSize=function(e,t){var n=t.left+t.right,a=t.top+t.bottom;return{width:e.width+n,height:e.height+a}},t.getRenderPaginationSpread=function(e,t,n,a,o){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=(0,l.default)(a,"spec.product"),s=(0,l.default)(a,"spec.cover"),u=p.pageStepMap[i],d=c.default.Map({isCover:!0,pageId:"",sheetIndex:o.sheetIndex}),h=c.default.List(),m=c.default.List(),M=c.default.Map(),v=e.size,y=r?0:o.sheetIndex;if(0===y){if(t){var I=g(t,a,o);d=d.merge(I.summary),m=m.merge(I.pages),m.forEach(function(e){return h=h.push(e.get("id"))})}}else if(2===u){if(v>2*(y-1)+1){d=d.set("isCover",!1);var T=2*(y-1),w=2*(y-1)+1;m=f(e,T,w,i,s,o.total,y,o),d=d.set("month",m.getIn(["0","month"])),d=d.set("year",m.getIn(["0","year"])),h=h.push(e.getIn([T.toString(),"id"])),h=h.push(e.getIn([w.toString(),"id"]))}}else if(1===u&&v>=y){d=d.set("isCover",!1);var E=e.get(y-1);d=d.set("month",E.get("month")),d=d.set("year",E.get("year")),m=m.push(E.merge({offset:{top:0,left:0},enabled:!0,isActive:E.get("id")===o.pageId,isPageDraggable:!1,isPageDropable:!1})),h=h.push(e.getIn([(y-1).toString(),"id"]))}m.size>o.pageIndex&&(d=d.set("pageId",m.getIn([String(o.pageIndex),"id"]))),n&&n.size&&n.forEach(function(e){M=M.set(String(e.get("encImgId")),e)});var D=c.default.List(),N=c.default.Map({summary:d,pages:m,images:M,pageNumber:D,pageIds:h,id:h.get(0)});return N}),M=t.getBgParams=function(e,t){if(!e.get("width"))return{width:0,height:0,bgX:0,bgY:0};var n=t.get("coverForeground"),a=t.get("innerForeground"),o=t.get("allPageCoverForeground"),r=t.get("allPageInnerForeground"),i=e.get("width"),s=e.get("height"),u=n.get("width")-n.get("left")-n.get("right"),l=n.get("height")-n.get("top")-n.get("bottom"),d=u/i,c=l/s,p={width:n.get("width")/d,height:n.get("height")/c,left:n.get("left")/d,top:n.get("top")/c},g=a.get("width")-a.get("bottomPageLeft")-a.get("bottomPageRight"),f=a.get("height")-a.get("bottomPageTop")-a.get("bottomPageBottom"),h=g/i,m=f/s,M={width:a.get("width")/h,height:a.get("height")/m,topPageLeft:a.get("topPageLeft")/h,topPageTop:a.get("topPageTop")/m,bottomPageLeft:a.get("bottomPageLeft")/h,bottomPageTop:a.get("bottomPageTop")/m},v=a.get("hwidth")-a.get("hbottomPageLeft")-a.get("hbottomPageRight"),y=a.get("hheight")-a.get("hbottomPageTop")-a.get("hbottomPageBottom"),I=v/s,T=y/i,w={width:a.get("hwidth")/I,height:a.get("hheight")/T,topPageLeft:a.get("htopPageLeft")/I,topPageTop:a.get("htopPageTop")/T,bottomPageLeft:a.get("hbottomPageLeft")/I,bottomPageTop:a.get("hbottomPageTop")/T},E=o.get("width")-o.get("left")-o.get("right"),D=o.get("height")-o.get("top")-o.get("bottom"),N=E/i,S=D/s,b={width:o.get("width")/N,height:o.get("height")/S,left:o.get("left")/N,top:o.get("top")/S},A=r.get("width")-r.get("bottomPageLeft")-r.get("bottomPageRight"),C=r.get("height")-r.get("bottomPageTop")-r.get("bottomPageBottom"),x=A/i,P=C/s,L={width:r.get("width")/x,height:r.get("height")/P,topPageLeft:r.get("topPageLeft")/x,topPageTop:r.get("topPageTop")/P,bottomPageLeft:r.get("bottomPageLeft")/x,bottomPageTop:r.get("bottomPageTop")/P},_=r.get("hwidth")-r.get("hbottomPageLeft")-r.get("hbottomPageRight"),O=r.get("hheight")-r.get("hbottomPageTop")-r.get("hbottomPageBottom"),j=_/s,z=O/i,k={width:r.get("hwidth")/j,height:r.get("hheight")/z,topPageLeft:r.get("htopPageLeft")/j,topPageTop:r.get("htopPageTop")/z,bottomPageLeft:r.get("hbottomPageLeft")/j,bottomPageTop:r.get("hbottomPageTop")/z};return{coverBgParams:p,innerBgParams:M,innerBgParamsLandscape:w,allPageCoverBgParams:b,allPageInnerBgParams:L,allPageInnerBgParamsLandscape:k}};t.getRenderSize=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=n.get("baseSize");if(!i||!a.size)return{};var u=M(i,a),d=e.setting.get("product"),c=o?1:p.innerPageHeightShowRatio[d],g=u.coverBgParams,f=u.innerBgParams,m=u.innerBgParamsLandscape,v=t.coverWorkspace?{width:Math.ceil(g.width*t.coverWorkspace),height:Math.ceil(g.height*t.coverWorkspace)}:g,y=t.innerWorkspace?{width:Math.ceil(f.width*t.innerWorkspace),height:Math.ceil(f.height*t.innerWorkspace)}:f,I=t.innerWorkspaceLandscape?{width:Math.ceil(m.width*t.innerWorkspaceLandscape),height:Math.ceil(m.height*t.innerWorkspaceLandscape)}:m,T=t.innerWorkspace?{width:Math.ceil(f.width*t.innerWorkspace),height:Math.ceil(f.height*c*t.innerWorkspace)}:f,w=t.innerWorkspaceLandscape?{width:Math.ceil(m.width*t.innerWorkspaceLandscape),height:Math.ceil(m.height*c*t.innerWorkspaceLandscape)}:m,E=h(i,n,t.coverWorkspace,u,!0),D=h(i,n,t.innerWorkspace,u),N=(0,s.default)({},u,{innerBgParams:m}),S=h(i,n,t.innerWorkspaceLandscape,N,!1,!1),b=(0,r.default)({renderCoverSize:v,renderInnerSize:y,renderInnerSizeLandscape:I,renderInnerContainerSize:T,renderInnerContainerSizeLandscape:w,baseWidth:i.get("width"),baseHeight:i.get("height")},u,{renderCoverSheetSize:E.container,renderCoverSheetSizeWithoutBleed:E.sheet,renderInnerSheetSize:D.container,renderInnerSheetSizeWithoutBleed:D.sheet,renderInnerSheetSizeLandscape:(0,s.default)({},S.container,{width:(0,l.default)(S,"container.height"),height:(0,l.default)(S,"container.width")}),renderInnerSheetSizeWithoutBleedLandscape:(0,s.default)({},S.sheet,{width:(0,l.default)(S,"sheet.height"),height:(0,l.default)(S,"sheet.width")})});return b},t.computedSizeForSpecialView=function(e,t,n,a,o){var i=a.get("baseSize");if(!i||!o.size)return{};var u=M(i,o),d=e.setting.get("product"),c=p.innerPageHeightShowRatio[d],g=u.allPageInnerBgParams,f=u.allPageCoverBgParams,m=u.allPageInnerBgParamsLandscape,v=n.coverWorkspaceForArrangePages?{width:Math.ceil(f.width*n.coverWorkspaceForArrangePages),height:Math.ceil(f.height*n.coverWorkspaceForArrangePages)}:f,y=n.innerWorkspaceForArrangePages?{width:Math.ceil(g.width*n.innerWorkspaceForArrangePages),height:Math.ceil(g.height*n.innerWorkspaceForArrangePages)}:g,I=n.innerWorkspaceForArrangePages?{width:Math.ceil(m.width*n.innerWorkspaceForArrangePages),height:Math.ceil(m.height*n.innerWorkspaceForArrangePages)}:m,T=n.innerWorkspaceForArrangePages?{width:Math.ceil(g.width*n.innerWorkspaceForArrangePages),height:Math.ceil(g.height*c*n.innerWorkspaceForArrangePages)}:g,w=n.innerWorkspaceForArrangePages?{width:Math.ceil(m.width*n.innerWorkspaceForArrangePages),height:Math.ceil(m.height*c*n.innerWorkspaceForArrangePages)}:m,E=h(i,a,n.coverWorkspaceForArrangePages,u,!0,!0),D=h(i,a,n.innerWorkspaceForArrangePages,u,!1,!0),N=(0,s.default)({},u,{allPageInnerBgParams:m}),S=h(i,a,n.innerWorkspaceForArrangePages,N,!1,!0),b=(0,r.default)({renderCoverSize:v,renderInnerSize:y,renderInnerSizeLandscape:I,renderInnerContainerSize:T,renderInnerContainerSizeLandscape:w,baseWidth:i.get("width"),baseHeight:i.get("height")},u,{renderCoverSheetSize:E.container,renderCoverSheetSizeWithoutBleed:E.sheet,renderInnerSheetSize:D.container,renderInnerSheetSizeWithoutBleed:D.sheet,renderInnerSheetSizeLandscape:(0,s.default)({},S.container,{width:(0,l.default)(S,"container.height"),height:(0,l.default)(S,"container.width")}),renderInnerSheetSizeWithoutBleedLandscape:(0,s.default)({},S.sheet,{width:(0,l.default)(S,"sheet.height"),height:(0,l.default)(S,"sheet.width")})});return b},t.computedSizeForUpgrade=function(e,t,n,a,o){var i=a.get("baseSize");if(!i||!o.size)return{};var u=M(i,o),d=e.setting.get("product"),c=p.innerPageHeightShowRatio[d],g=u.coverBgParams,f=u.innerBgParams,m=u.innerBgParamsLandscape,v=n.coverWorkspaceForUpgrade?{width:Math.ceil(g.width*n.coverWorkspaceForUpgrade),height:Math.ceil(g.height*n.coverWorkspaceForUpgrade)}:g,y=n.innerWorkspaceForUpgrade?{width:Math.ceil(f.width*n.innerWorkspaceForUpgrade),height:Math.ceil(f.height*n.innerWorkspaceForUpgrade)}:f,I=n.innerWorkspaceForUpgradeLandscape?{width:Math.ceil(m.width*n.innerWorkspaceForUpgradeLandscape),height:Math.ceil(m.height*n.innerWorkspaceForUpgradeLandscape)}:m,T=n.innerWorkspaceForUpgrade?{width:Math.ceil(f.width*n.innerWorkspaceForUpgrade),height:Math.ceil(f.height*c*n.innerWorkspaceForUpgrade)}:f,w=n.innerWorkspaceForUpgradeLandscape?{width:Math.ceil(m.width*n.innerWorkspaceForUpgradeLandscape),height:Math.ceil(m.height*c*n.innerWorkspaceForUpgradeLandscape)}:m,E=h(i,a,n.coverWorkspaceForUpgrade,u,!0),D=h(i,a,n.innerWorkspaceForUpgrade,u),N=(0,s.default)({},u,{innerBgParams:m}),S=h(i,a,n.innerWorkspaceForUpgradeLandscape,N),b=(0,r.default)({renderCoverSize:v,renderInnerSize:y,renderInnerSizeLandscape:I,renderInnerContainerSize:T,renderInnerContainerSizeLandscape:w,baseWidth:i.get("width"),baseHeight:i.get("height")},u,{renderCoverSheetSize:E.container,renderCoverSheetSizeWithoutBleed:E.sheet,renderInnerSheetSize:D.container,renderInnerSheetSizeWithoutBleed:D.sheet,renderInnerSheetSizeLandscape:(0,s.default)({},S.container,{width:(0,l.default)(S,"container.height"),height:(0,l.default)(S,"container.width")}),renderInnerSheetSizeWithoutBleedLandscape:(0,s.default)({},S.sheet,{width:(0,l.default)(S,"sheet.height"),height:(0,l.default)(S,"sheet.width")})});return b},t.getRenderAllSpreads=function(e,t,n,a){for(var o=(0,l.default)(a,"spec.product"),r=p.pageStepMap[o],i=e.size/r+1,s=c.default.List([]),u=0;u<i;u++){var d=m(e,t,n,a,{sheetIndex:u,pageStep:r,total:e.size/r});s=s.push(d)}return s}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterCoverTemplates=t.formatTemplateInstance=t.convertResultToJson=void 0;var o=n(24),r=a(o),i=n(44),s=a(i),u=n(11),l=a(u),d=n(12),c=a(d),p=n(39),g=a(p),f=n(20),h=n(32),m=n(9),M=function(e){var t=.001,n=e.find(function(e){var n=e.width,a=e.height,o=e.pw,r=e.ph;return 0===n||0===a||o<t||r<t});return!n};t.convertResultToJson=function(e){var t=(0,l.default)(e,"data"),n=[];return t&&t.length&&t.forEach(function(e){var t=(0,c.default)({},{id:e.id,template:g.default.xml2js(e.template)});n.push(t)}),n},t.formatTemplateInstance=function(e,t,n){var a=[];return t&&t.length&&t.forEach(function(t){var o=t+"_"+n,i=e.find(function(e){return e.id===t});if(i){var u=(0,f.convertObjIn)((0,l.default)(i,"template.templateView.spread.elements.element")),d=(0,s.default)(u)?u:[u];M(d)&&a.push((0,r.default)({},o,{id:i.id,bgColor:(0,h.numberToHex)((0,l.default)(i,"template.templateView.spread.bgColor")),type:(0,l.default)(i,"template.templateView.spread.type"),elements:d}))}}),a},t.filterCoverTemplates=function(e,t){var n=!0,a=!0,o=[];return n?o=e.filter(function(e){return"hc"===e.sheetType.toLowerCase()&&"full"===e.pageType.toLowerCase()&&(0!==e.customerId||e.imageNum>0&&e.imageNum<=m.limitImageNumberInHalfPageTemplate)}):a&&(o=e.filter(function(e){return"cc"===e.sheetType.toLowerCase()&&"full"===e.pageType.toLowerCase()&&(0!==e.customerId||e.imageNum>0&&e.imageNum<=m.limitImageNumberInHalfPageTemplate)})),o}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){if(!e)return"";var a=[];return n&&(0,l.default)(n,function(e,t){a.push(t+"="+e)}),t?e+"/"+t+"?"+a.join("&"):e+"?"+a.join("&")}function r(){var e={initGuid:-1,webClientId:1,product:"",size:"",paper:"",paperThickness:"",title:"",numberOfMonth:"",mainProjectUid:-1},t=c.default.parse(window.location.search.substr(1));return(0,s.default)({},e,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),s=a(i),u=n(92),l=a(u);t.combine=o,t.getQueryStingObj=r;var d=n(36),c=a(d)},function(e,t,n){e.exports=n(1)(129)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(14),r=a(o);t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){function a(o,i){try{var s=t[o](i),u=s.value}catch(e){return void n(e)}return s.done?void e(u):r.default.resolve(u).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}},function(e,t,n){e.exports=n(550)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=new Date(e),a=n.getFullYear(),o=String(n.getMonth()+1),r=String(n.getDate());
return o.length<2&&(o="0"+o),r.length<2&&(r="0"+r),[a,o,r].join(t)},a=t.formatTime=function(e){var t=new Date(e),n=String(t.getHours()),a=String(t.getMinutes()),o=String(t.getSeconds());return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[n,a,o].join(":")};t.formatDateTime=function(e){return e?n(e)+" "+a(e):""}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParam=t.getUrl=t.combine=void 0;var o=n(11),r=a(o),i=n(92),s=a(i);t.combine=function(e,t,n){if(!e||!t)return"";var a=e;a.endsWith("/")&&(a=a.slice(0,a.length-1));var o=[];return n&&(0,s.default)(n,function(e,t){o.push(t+"="+e)}),a+"/"+t+"?"+o.join("&")},t.getUrl=function(e,t){return(0,r.default)(e,t)||""},t.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=4,o=120,r=P(e.get("fontSize"),(0,A.getPxByPt)(a)/n,(0,A.getPxByPt)(o)/n);return e.merge({x:e.get("px")*t,y:e.get("py")*n,width:e.get("pw")*t,height:e.get("ph")*n,fontSize:r})}function i(e,t,n,a){var o=e.get("pw")*n,r=e.get("ph")*a,i=e.get("px")*n,s=e.get("py")*a,u=t.find(function(t){return t.get("encImgId")===e.get("encImgId")}),l={width:o,height:r,x:i,y:s};if(u){var d=e.get("imgRot"),c=90===Math.abs(d)?u.get("height"):u.get("width"),p=90===Math.abs(d)?u.get("width"):u.get("height"),g=(0,D.getFitCrop)(c,p,e.get("cropLUX"),e.get("cropLUY"),e.get("cropRLX")-e.get("cropLUX"),e.get("cropRLY")-e.get("cropLUY"),e.get("width"),e.get("height"),o,r);l=(0,m.default)({},l,{cropLUX:g.cropLUX,cropLUY:g.cropLUY,cropRLX:g.cropRLX,cropRLY:g.cropRLY})}return e.merge(l)}function s(e,t,n){var a=I.default.List(),o=e.get("elements"),s=e.get("width"),u=e.get("height");return o.forEach(function(e){var o=null;switch(e.get("type")){case E.elementTypes.text:o=r(e,s,u);break;case E.elementTypes.photo:o=i(e,t,s,u);break;case E.elementTypes.calendar:o=e.merge({x:n.get("x"),y:n.get("y"),width:n.get("width"),height:n.get("height"),px:n.get("x")/s,py:n.get("y")/u,pw:n.get("width")/s,ph:n.get("height")/u});break;default:o=e.merge({x:e.get("px")*s,y:e.get("py")*u,width:e.get("pw")*s,height:e.get("ph")*u})}a=a.push(o)}),a}function u(e,t,n,a){var o=t.first(),r=n.get("calendarArea"),i=e.map(function(e){var t=e.get("width")>e.get("height");return e.merge({width:t?o.get("height"):o.get("width"),height:t?o.get("width"):o.get("height"),bleed:o.get("bleed")})}).slice(0);return i.forEach(function(e,t){i=i.setIn([String(t),"elements"],s(e,a,r))}),i}function l(e,t,n,a){var o=e,r=e.get("containers").first(),i=n.get("containers").map(function(e){return e.merge({width:r.get("width"),height:r.get("height"),bleed:r.get("bleed")})});return i.forEach(function(e,t){i=i.setIn([String(t),"elements"],s(e,a))}),o.set("containers",i)}function d(e){if(!(0,v.default)(e)){var t=e.baseSize,n=(0,m.default)({},e);return n.baseSize={height:Math.round((0,A.getPxByInch)(t.heightInInch)),width:Math.round((0,A.getPxByInch)(t.widthInInch))},n}return null}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.configurableOptionArray,o=e.parameterArray,r=e.variableArray,i=e.property,s=e.calendarSetting,u=e.allOptionMap,l=e.setting,c=!n&&i.get("projectId")===-1,p=l.toJS(),g=null;g=c?b.default.getDefaultProjectSetting(p,a):b.default.getNewProjectSetting(p,t,a);var f=b.default.getParameters(g,o),h=d(f),m=g.product,M=(0,C.generatePageArray)(m,h),v=b.default.getVariables(g,r),y=(0,C.generateCover)(m,h,s),I=b.default.getAvailableOptionMap(g,a,u,[]);return{pageArray:M,variableMap:v,cover:y,setting:g,parameterMap:h,availableOptionMap:I}}function p(e){return"dateStyle"in e?{type:w.CHANGE_PROJECT_SETTING,setting:e}:function(t,n){if(!(0,v.default)(e)){var a=(0,N.getDataFromState)(n()),o=I.default.fromJS(c(a,e,!0));if(t({type:w.CHANGE_PROJECT_SETTING,setting:o.get("setting")}),t({type:w.SET_VARIABLE_MAP,variableMap:o.get("variableMap")}),t({type:w.SET_PARAMETER_MAP,parameterMap:o.get("parameterMap")}),t({type:w.SET_IMAGE_USED_MAP,imageUsedMap:(0,x.getImageUsedMap)((0,N.getDataFromState)(n()).elementArray)}),e.size){var r=a.cover,i=a.pageArray,s=a.imageArray,d=u(i,o.get("pageArray"),o.get("parameterMap"),s),p=l(o.get("cover"),o.get("parameterMap"),r,s);t({type:w.SET_COVER,cover:p}),t({type:w.SET_PAGE_ARRAY,pageArray:d})}return f.default.resolve(o.get("setting"))}return f.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var g=n(14),f=o(g),h=n(12),m=o(h),M=n(177),v=o(M);t.transformPageArray=u,t.transformCover=l,t.computeNewData=c,t.changeProjectSetting=p;var y=n(2),I=o(y),T=n(10),w=a(T),E=n(9),D=n(21),N=n(26),S=n(79),b=o(S),A=n(18),C=n(88),x=n(51),P=function(e,t,n){return Math.max(Math.min(e,n),t)}},function(e,t){"use strict";function n(e,t){var a=null;return e.children&&!a&&e.children.forEach(function(e){e.attrs.id===t?a=e:a||(a=n(e,t))}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.findKonvaObjectById=n},function(e,t){"use strict";function n(e){var t=e.imageDetail,n=e.width,a=e.height,o=e.cropRLX,r=e.cropLUX,i=e.cropRLY,s=e.cropLUY,u=t.get("width")*Math.abs(o-r),l=n/u,d=t.get("height")*Math.abs(i-s),c=a/d;return Math.round(100*Math.max(l,c))}function a(e,t){var n=e.x,a=e.y,o=e.width,r=e.height,i=e.scale,s={x:0,y:0},u=i.x-1,l=i.y-1,d=o*u,c=r*l,p=o+d,g=r+c,f=n-d/2,h=a-c/2;if(t){var m=[{x:n,y:a},{x:n+o,y:a},{x:n+o,y:a+r},{x:n,y:a+r}],M=[{x:f,y:h},{x:f+p,y:h},{x:f+p,y:h+g},{x:f,y:h+g}];s.x=m[t].x-M[t].x,s.y=m[t].y-M[t].y}return{x:f+s.x,y:h+s.y,width:p,height:g}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScale=n,t.getScaledRect=a},function(e,t,n){function a(e,t){return i(r(e,t,o),e+"")}var o=n(95),r=n(523),i=n(526);e.exports=a},function(e,t,n){function a(e){return"number"==typeof e||r(e)&&o(e)==i}var o=n(102),r=n(71),i="[object Number]";e.exports=a},function(e,t,n){e.exports=n(1)(341)},function(e,t,n){e.exports=n(1)(42)},function(e,t,n){e.exports=n(1)(51)},function(e,t,n){e.exports=n(1)(59)},function(e,t,n){e.exports=n(1)(84)},function(e,t,n){e.exports=n(1)(988)},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onDragStarted,a=e.onDragEntered,o=e.onDragLeaved,r=e.onDragOvered,i=e.onDragEnded,s=e.isDisabled,u=void 0!==s&&s;return h.default.createElement("div",{onDragStart:n,onDragEnter:a,onDragLeave:o,onDragOver:r,onDragEnd:i,draggable:!u},t)}}]),t}(f.Component);t.default=m,m.propTypes={onDragStarted:f.PropTypes.func.isRequired,onDragEntered:f.PropTypes.func,onDragLeaved:f.PropTypes.func,onDragOvered:f.PropTypes.func,onDragEnded:f.PropTypes.func,isDisabled:f.PropTypes.bool}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,a=(t.isFirefox="undefined"!=typeof InstallTrigger,t.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,t.isIE=!!document.documentMode),o=(t.isEdge=!a&&!!window.StyleMedia,t.isChrome=!!window.chrome&&!!window.chrome.webstore);t.isBlink=(o||n)&&!!window.CSS,t.isMac="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getImgRatioFromProjectSize=t.convertToTwoDimenArr=t.computedItemsCountInRowByFixedWidth=t.computedItemCountdAndWidthInRow=t.setElementToHorizontalCenter=t.setElementStyles=t.getScreenSize=t.getSize=t.getLimitSize=void 0;var o=n(92),r=a(o),i=(t.getLimitSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,a=e.height,o=n,r=a,i=Math.min(o,r);if(i<t){var s=o/r;o<r?(o=t,r=t/s):(r=t,o=t*s)}return{width:o,height:r,wR:n/o,hR:a/r}},t.getSize=function(e){var t=e||document.documentElement||document.body;return{width:t.clientWidth,height:t.clientHeight}}),s=(t.getScreenSize=function(){var e=window.screen;return{width:e.width,height:e.height}},t.setElementStyles=function(e,t){e&&t&&(0,r.default)(t,function(t,n){e.style[n]=t})});t.setElementToHorizontalCenter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e){var a=i(e),o=t||document.documentElement||document.body,r=i(o),u=n+(r.width-n-a.width)/2;s(e,{position:"absolute",left:u+"px"})}},t.computedItemCountdAndWidthInRow=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=30,i=e-(t+n-r),s=0,u=0;return i&&a&&(i<=a?(s=a,u=1):(u=Math.floor((o+i)/(a+o)),s=(i-(u-1)*o)/u)),{width:s,count:u}},t.computedItemsCountInRowByFixedWidth=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25,r=0,i=0;if(e&&t){var s=e-o;s<=n?(r=1,i=0):(r=Math.floor((s+n)/(t+n)),i=Math.floor((s-(t*r+n*(r-1)))/2),i<a&&(r-=1,i=Math.floor((s-(t*r+n*(r-1)))/2)),i-=2)}return{count:r,margin:i}},t.convertToTwoDimenArr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return[];var n=[],a=[];return e.forEach(function(e){a.length===t&&(n.push(a),a=[]),a.push(e)}),a.length&&(n.push(a),a=[]),n},t.getImgRatioFromProjectSize=function(e){var t=[];return t=e.split("X"),t[0]/(2*t[1])}},function(e,t){"use strict";function n(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}n.prototype.darken=function(e){var t=1-e;return new n([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var a=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var o=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var r=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(e){var t=null;return null!==(t=e.match(r))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var i=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(e){var t=null;return null!==(t=e.match(i))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(e){e=e.toLowerCase();var t=s[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},n.prototype.isColor=!0;var s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a="withCredentials"in new XMLHttpRequest;if(!t)return p.default.reject("No proxy configured");var o=s(a),r=u(t,e,o);return a?g(r):i(n,r,o).then(function(e){return M(e.content)})}function r(e,t,n){var a="crossOrigin"in new Image,o=s(a),r=u(t,e,o);return a?p.default.resolve(r):i(n,r,o).then(function(e){return"data:"+e.type+";base64,"+e.content})}function i(e,t,n){return new p.default(function(a,o){var r=e.createElement("script"),i=function(){delete window.html2canvas.proxy[n],e.body.removeChild(r)};window.html2canvas.proxy[n]=function(e){i(),a(e)},r.src=t,r.onerror=function(e){i(),o(e)},e.body.appendChild(r)})}function s(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++v+"_"+Math.round(1e5*Math.random())}function u(e,t,n){return e+"?url="+encodeURIComponent(t)+(n.length?"&callback=html2canvas.proxy."+n:"")}function l(e){return function(t){var n,a=new DOMParser;try{n=a.parseFromString(t,"text/html")}catch(e){h("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var o=n.querySelector("base");if(!o||!o.href.host){var r=n.createElement("base");r.href=e,n.head.insertBefore(r,n.head.firstChild)}return n}}function d(e,t,n,a,r,i){return new o(e,t,window.document).then(l(e)).then(function(e){return m(e,n,a,r,i,0,0)})}var c=n(14),p=a(c),g=n(116),f=n(33),h=n(37),m=n(111),M=f.decode64,v=0;t.Proxy=o,t.ProxyURL=r,t.loadUrlDocument=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=!0;return(0,S.default)(t.key,function(t,a){if(t.indexOf(e[a])===-1&&t.indexOf("*")===-1)return n=!1,!1}),n}function r(e,t,n){var a=e.defaultValue,o=(0,A.default)(a,"0")||(0,A.default)(e,"value.0");if(n){var r=n.find(function(e){return e.id===t});if(r){var i=n.filter(function(e){return e.id!==r.id&&e.name&&e.name===r.name}),s=i.map(function(e){return e.id}),u=(0,I.default)(s,e.value);if(u.length)return u[0]}}return e.value.indexOf(t)===-1?o:null}function i(e,t,n){if((0,D.default)(e))return{};if(!(0,w.default)(t)||!t.length)return e;var a=(0,x.default)({},e),i=t.map(function(e){return(0,v.default)({},e,{count:0})});i.forEach(function(e){e.keyPattern.forEach(function(e){var t=i.find(function(t){return t.id===e});t&&(t.count+=1)})});var s=i.sort(function(e,t){return t.count-e.count});return s.forEach(function(e){e.entry.forEach(function(t){var i=o(a,t);if(i){var s=a[e.id],u=null;n&&(u=n[e.id]);var l=r(t,s,u);l&&(a[e.id]=l)}})}),a}function s(e,t){if((0,D.default)(e)||!t)return{};var n={},a=t.sort(function(e,t){return e.keyPattern.length-t.keyPattern.length});return a.forEach(function(t){t.entry.forEach(function(a){var r=o(e,a);if(r){var i={};(0,S.default)(a,function(e,t){"key"!==t&&((0,w.default)(e)&&1===e.length?i[t]=e[0]:i[t]=e)});var s=(0,P.convertObjIn)(i),u=(0,m.default)(s);u.length>1?n[t.id]=s:n[t.id]=s[u[0]]}})}),n}function u(e,t){return s(e,t)}function l(e,t,n){var a=(0,x.default)({},e),o=t.filter(function(e){return 1===e.keyPattern.length});o.forEach(function(t){t.entry.forEach(function(n){n.value.forEach(function(o){if(o===e[t.id]){var r=t.keyPattern[0];a[r]||(a[r]=n.key[r][0])}})})});var r=i(a,t,n);return(0,x.default)({},a,r)}function d(e,t){var n={};return t.forEach(function(t){t.entry.forEach(function(a){var r=o(e,a);r&&(n[t.id]=a.value)})}),n}function c(e,t,n,a){var r={},i=d(e,a);return t.forEach(function(t){t.entry.forEach(function(a){var s=o(e,a);if(s){var u=t.id,l=n[u],d=i[u]||[],c=[];a.value.forEach(function(t){var n=l.find(function(e){return e.id===t});n=(0,x.default)({},n,{disabled:d.indexOf(t)!==-1}),d.indexOf(t)!==-1?e[u]===t&&c.push(n):c.push(n)}),r[t.id]=c}})}),r}function p(e,t,n){return t.forEach(function(a){if(a.keyPattern.indexOf(e.id)!==-1){var o=n.find(function(e){return e.id===a.id});o||n.push(a),p(a,t,n)}}),n}function g(e,t,n,a){var o=(0,m.default)(t),r=[];n.forEach(function(e){(0,S.default)(o,function(t){if(e.keyPattern.indexOf(t)!==-1){var n=r.find(function(t){return t.id===e.id});n||r.push(e)}})});var s=r.concat([]);r.forEach(function(e){p(e,n,s)});var u=(0,x.default)({},e,t),l=i(u,s,a);return(0,x.default)({},u,l)}function f(e,t,n,a){var o=[];return a.some(function(a){if(a.id===e){var r=a.entry;r.forEach(function(e){e.value.indexOf(t)!==-1&&(o=o.concat(e.key[n]))})}}),o}Object.defineProperty(t,"__esModule",{value:!0});var h=n(73),m=a(h),M=n(17),v=a(M),y=n(530),I=a(y),T=n(44),w=a(T),E=n(177),D=a(E),N=n(101),S=a(N),b=n(11),A=a(b),C=n(12),x=a(C),P=n(20);t.default={isEntryMatched:o,getParameters:s,getVariables:u,getProjectSetting:i,getDefaultProjectSetting:l,getNewProjectSetting:g,getAvailableOptionMap:c,getDisableOptionMap:d,getKeyPatternsByValue:f}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(27),M=n(554),v=a(M),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n.onMouseDown=n.onMouseDown.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"onMouseDown",value:function(){var e=this.props.tryToDownload;e()}},{key:"componentWillMount",value:function(){var e=this,t=new window.Image;t.src=v.default,t.onload=function(){e.setState({imageObj:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,o=(t.x,t.y,a/6>30?a/6:30),r=.8*o,i=o,s=this.state.imageObj,u=12,l={ref:function(t){return e.imageNode=t},onMouseDown:this.onMouseDown,width:n,height:a,x:0,y:0},d=!1;(n<=80||a<=80)&&(d=!0);var c={x:0,y:(a-u)/2+i/2,width:n,fill:"#7B7B7B",fontFamily:"Gotham SSm A",align:"center",text:"Photo load failed. \n Click to retry",fontSize:u},p={image:s,x:(n-r)/2,y:d?(a-i)/2:(a-i)/2-i/2,width:r,height:i},g={width:n,height:a,x:0,y:0,fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};return h.default.createElement(m.Group,l,h.default.createElement(m.Rect,g),h.default.createElement(m.Image,p),d?null:h.default.createElement(m.Text,c))}}]),t}(f.Component);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(12),M=a(m),v=n(13),y=a(v),I=n(15),T=n(3),w=a(T),E=n(27);n(222);var D=n(358),N=a(D),S=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.data,o=n.boundTemplateActions,r=n.boundPaginationActions,i=n.boundProjectActions,s=n.boundImageEditModalActions,u=n.boundImagesActions,l=n.boundUploadImagesActions,d=n.boundTextEditModalActions,c=n.boundTrackerActions,p=n.switchSheet,g=n.setMouseHoverDomNode,f=a.urls,m=a.size,v=a.ratios,I=a.styles,T=a.variables,D=a.template,S=a.pagination,b=a.paginationSpread,A=a.settings,C=a.parameters,x=a.allImages,P=a.userId,L=a.project,_=a.isPreview,O=a.capability,j=a.useInUpgrade,z=a.isUpgradeTo8X6,k=a.isForUpgradeScreenshot,R=b.get("summary"),U=b.get("images"),B=(0,y.default)("book-cover-screenshot"),Y=(0,h.default)(A,"spec.product"),W=(0,h.default)(A,"spec.size"),Q=!0,F=!1,G=m,H={boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundTrackerActions:c,boundTemplateActions:o,switchSheet:p,setMouseHoverDomNode:g},Z={workspace:j?v.innerWorkspaceForUpgrade:v.coverWorkspace},X=[];if(L.cover.get("containers")){var J=L.cover.get("containers");J.forEach(function(e,t){var n={isPreview:_,urls:f,summary:R,page:e,images:U,elements:e.get("elements"),pagination:S,ratio:Z,index:t,settings:A,template:D,paginationSpread:b,parameters:C,size:(0,M.default)(m),variables:T,allImages:x,userId:P,project:L,capability:O,x:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.left")+(0,h.default)(m,"renderCoverSheetSize.left"),y:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.top")+(0,h.default)(m,"renderCoverSheetSize.top")};X.push(w.default.createElement(N.default,{key:t+"screenshot",actions:H,data:n}))})}0===X.length&&L.pageArray&&L.pageArray.some(function(e,t){F=e.get("width")>e.get("height"),F&&(G=(0,M.default)({},m,{renderCoverSheetSize:(0,h.default)(m,"renderCoverSheetSize"),renderInnerSize:(0,h.default)(m,"renderInnerSizeLandscape"),renderInnerContainerSize:(0,h.default)(m,"renderInnerContainerSizeLandscape"),renderInnerSheetSize:(0,h.default)(m,"renderInnerSheetSizeLandscape"),renderInnerSheetSizeWithoutBleed:(0,h.default)(m,"renderInnerSheetSizeWithoutBleedLandscape")}));var n={workspace:j?F?(0,h.default)(v,"innerWorkspaceForUpgradeLandscape"):(0,h.default)(v,"innerWorkspaceForUpgrade"):F?(0,h.default)(v,"innerWorkspaceLandscape"):(0,h.default)(v,"innerWorkspace")},a={isPreview:_,urls:f,summary:R,page:e,images:U,elements:e.get("elements"),pagination:S,ratio:n,index:t,settings:A,template:D,paginationSpread:b,parameters:C,size:G,variables:T,allImages:x,userId:P,project:L,capability:O,x:(0,h.default)(G,"renderCoverSheetSizeWithoutBleed.left")+(0,h.default)(G,"renderCoverSheetSize.left")+2,y:(0,h.default)(G,"renderCoverSheetSizeWithoutBleed.top")+(0,h.default)(G,"renderCoverSheetSize.top"),isUpgradeTo8X6:z};if(0===t)return Q=!1,X.push(w.default.createElement(N.default,{key:t+"screenshot",actions:H,data:a}))});var V=(0,y.default)("book-page",{enabled:!1,disabled:!0,cover:!0,inner:!1}),K=j?"upgradecover":"cover";K=k?"cover":K;var q=F?"_landscape":"",$=Y?"./assets/"+Y+"/"+W+"/"+K+q+".png":"",ee=Q?(0,h.default)(G,"renderCoverSize"):(0,h.default)(G,"renderInnerSize"),te={ref:function(t){return e.stage=t},width:(0,h.default)(ee,"width"),height:(0,h.default)(ee,"height"),className:V},ne=(0,M.default)({},{},{width:(0,h.default)(ee,"width")+"px",height:(0,h.default)(ee,"height")+"px",cursor:"default"},I,j?{display:"block"}:{}),ae=new window.Image;ae.src=$;var oe={x:0,y:0,width:(0,h.default)(ee,"width"),height:(0,h.default)(ee,"height"),image:ae},re={x:0,y:0,width:(0,h.default)(ee,"width"),height:(0,h.default)(ee,"height")},ie={x:0,y:0,width:(0,h.default)(ee,"width"),height:(0,h.default)(ee,"height"),fill:"#fff"};return w.default.createElement("div",{key:"cover",className:B,style:ne,draggable:"false",onDragStart:this.stopDragEvent,ref:function(t){e.componentRef=t}},w.default.createElement("div",{className:"cover-overflow-container",style:ne},w.default.createElement(E.Stage,te,w.default.createElement(E.Layer,{ref:function(t){return e.layerNodeOfElements=t}},w.default.createElement(E.Group,re,w.default.createElement(E.Rect,ie)),X,w.default.createElement(E.Group,re,w.default.createElement(E.Image,oe))))))}}]),t}(T.Component);S.propTypes={},S.defaultProps={},t.default=(0,I.translate)("Screenshot")(S)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(555),M=a(m),v=n(27),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.onload=function(){e.state&&e.setState({imageObj:t})},t.src=M.default}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.x,o=e.y,r=this.state.imageObj,i=46,s=67;t<s&&(s=t,i=t*i/67);var u={image:r,x:(t-s)/2,y:(n-i)/2,width:s,height:i},l={x:a||0,y:o||0,width:t,height:n,fill:"#F6F6F6",opacity:.9};return h.default.createElement(v.Group,null,h.default.createElement(v.Rect,l),h.default.createElement(v.Image,u))}}]),t}(f.Component);t.default=y},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(17),i=o(r),s=n(6),u=o(s),l=n(4),d=o(l),c=n(5),p=o(c),g=n(8),f=o(g),h=n(7),m=o(h),M=n(12),v=o(M),y=n(13),I=o(y),T=n(3),w=o(T),E=n(9),D=n(383),N=o(D),S=n(380),b=a(S);n(232);var A=function(e){function t(e){(0,d.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.onMouseUp=function(e){return b.onMouseUp(n,e)},n.onMouseEnter=function(e){return b.onMouseEnter(n,e)},n.onMouseOut=function(e){return b.onMouseOut(n,e)},n.onMouseOver=function(e){return b.onMouseOver(n,e)},n.onMouseLeave=function(e){return b.onMouseLeave(n,e)},n}return(0,m.default)(t,e),(0,p.default)(t,[{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.actions,o=t.children,r=n.className,s=n.style,u=n.handlerStyle,l=n.setCursorDefault,d=(0,I.default)("element",r),c=n.element,p=n.product,g=c.get("id"),f=(a.removeImage,{style:(0,v.default)({},u,{cursor:c.get("encImgId")||c.get("type")===E.elementTypes.text?"pointer":"auto"}),element:c,product:p});l?f.style.cursor="default":null;var h=(0,v.default)({},a,{handleMouseUp:this.onMouseUp,handleMouseEnter:this.onMouseEnter,handleMouseOut:this.onMouseOut,handleMouseLeave:this.onMouseLeave,handleMouseOver:this.onMouseOver}),m={},M=c.get("text");return(c.get("type")===E.elementTypes.text&&!M||c.get("type")===E.elementTypes.photo&&!c.get("encImgId")||c.get("type")===E.elementTypes.paintedText&&!M)&&(m["data-html2canvas-ignore"]=!0),w.default.createElement("div",(0,i.default)({},m,{className:d,style:s,"data-guid":g,ref:function(t){e.element=t},onMouseUp:this.stopEvent}),w.default.createElement("div",{className:"selected-border","data-html2canvas-ignore":"true"}),o,w.default.createElement(N.default,{data:f,actions:h}))}}]),t}(T.Component);t.default=A,A.propTypes={}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mapAppDispatchToProps=void 0;var r=n(22),i=n(337),s=o(i),u=n(338),l=o(u),d=n(342),c=o(d),p=n(345),g=o(p),f=n(352),h=o(f),m=n(344),M=o(m),v=n(348),y=o(v),I=n(341),T=o(I),w=n(353),E=o(w),D=n(336),N=o(D),S=n(340),b=o(S),A=n(333),C=o(A),x=n(343),P=o(x),L=n(350),_=o(L),O=n(349),j=o(O),z=n(335),k=o(z),R=n(332),U=o(R),B=n(347),Y=o(B),W=n(334),Q=o(W),F=n(346),G=o(F),H=n(339),Z=o(H),X=n(351),J=o(X),V=n(326),K=a(V),q=n(331),$=o(q);t.mapAppDispatchToProps=function(e){return{boundEnvActions:(0,r.bindActionCreators)(s,e),boundQueryStringActions:(0,r.bindActionCreators)(l,e),boundProjectActions:(0,r.bindActionCreators)(K.default,e),boundTrackerActions:(0,r.bindActionCreators)(c,e),boundNotificationActions:(0,r.bindActionCreators)(g,e),boundSpecActions:(0,r.bindActionCreators)($,e),boundImagesActions:(0,r.bindActionCreators)(M,e),boundSidebarActions:(0,r.bindActionCreators)(y,e),boundUploadImagesActions:(0,r.bindActionCreators)(E,e),boundContactUsActions:(0,r.bindActionCreators)(N,e),boundRatioActions:(0,r.bindActionCreators)(T,e),boundUpgradeModalActions:(0,r.bindActionCreators)(h,e),boundPaginationActions:(0,r.bindActionCreators)(b,e),boundCapabilitiesActions:(0,r.bindActionCreators)(C,e),boundImageEditModalActions:(0,r.bindActionCreators)(P,e),boundTemplateActions:(0,r.bindActionCreators)(_,e),boundConfirmModalActions:(0,r.bindActionCreators)(k,e),boundStyleActions:(0,r.bindActionCreators)(j,e),boundAlertModalActions:(0,r.bindActionCreators)(U,e),boundPriceActions:(0,r.bindActionCreators)(Y,e),boundCloneModalActions:(0,r.bindActionCreators)(Q,e),boundFontActions:(0,r.bindActionCreators)(Z,e),boundTextEditModalActions:(0,r.bindActionCreators)(J,e),boundPreviewModalActions:(0,r.bindActionCreators)(G,e)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=void 0;var o=n(12),r=a(o),i=n(11),s=a(i),u=(n(2),n(574)),l=n(54),d=function(e){return(0,s.default)(e,"system.env")},c=function(e){return(0,s.default)(e,"system.capabilities")},p=function(e){return(0,s.default)(e,"system.modals.confirmModal")},g=function(e){return(0,s.default)(e,"system.global.pagination")},f=function(e){return(0,s.default)(e,"system.global.ratio")},h=function(e){return(0,
s.default)(e,"system.template")},m=function(e){return(0,s.default)(e,"system.styles")},M=function(e){return(0,s.default)(e,"project.data")},v=function(e){return(0,s.default)(e,"system.sidebar")},y=function(e){return(0,s.default)(e,"system.modals.upload")},I=function(e){return(0,s.default)(e,"system.images.uploading")},T=function(e){return(0,s.default)(e,"system.fontList")},w=function(e){return(0,s.default)(e,"system.images.autoAddPhotoToCanvas")},E=function(e){return(0,s.default)(e,"system.modals.contactUsModal")},D=function(e){return(0,s.default)(e,"system.modals.imageEditModal")},N=function(e){return(0,s.default)(e,"system.modals.alertModal")},S=function(e){return(0,s.default)(e,"system.modals.cloneModal")},b=function(e){return(0,s.default)(e,"system.modals.previewModal")},A=function(e){return(0,s.default)(e,"system.modals.textEditModal")},C=function(e){return(0,s.default)(e,"system.modals.upgradeModal")},x=function(e){return(0,s.default)(e,"system.price.price")},P=function(e){return(0,s.default)(e,"spec.data")},L=function(e){return(0,s.default)(e,"project.data.imageArray").toJS()},_=(0,u.createSelector)(d,function(e){return e}),O=(0,u.createSelector)(_,function(e){return(0,s.default)(e,"urls").toJS()}),j=(0,u.createSelector)(p,function(e){return e}),z=(0,u.createSelector)(C,function(e){return e}),k=(0,u.createSelector)(c,function(e){return e}),R=(0,u.createSelector)(k,_,function(e,t){return"designer"===t.qs.get("source")?e.get("designerPages"):e.get("editPages")}),U=(0,u.createSelector)(M,function(e){return e}),B=(0,u.createSelector)(P,function(e){return e}),Y=(0,u.createSelector)(U,function(e){return e.imageArray}),W=(0,u.createSelector)(U,function(e){return e.pageArray}),Q=(0,u.createSelector)(U,function(e){return e.imageUsedMap}),F=(0,u.createSelector)(U,function(e){return e.variableMap}),G=(0,u.createSelector)(U,function(e){return e.parameterMap}),H=(0,u.createSelector)(h,function(e){return e}),Z=(0,u.createSelector)(m,function(e){return e}),X=(0,u.createSelector)(T,function(e){return e}),J=(0,u.createSelector)(y,function(e){return e}),V=(0,u.createSelector)(w,function(e){return e}),K=(0,u.createSelector)(I,function(e){return e}),q=(0,u.createSelector)(E,function(e){return e}),$=(0,u.createSelector)(D,function(e){return e}),ee=(0,u.createSelector)(N,function(e){return e}),te=(0,u.createSelector)(S,function(e){return e}),ne=(0,u.createSelector)(b,function(e){return e}),ae=(0,u.createSelector)(A,function(e){return e}),oe=(0,u.createSelector)(x,function(e){return e}),re=(0,u.createSelector)(U,function(e){return e.cover}),ie=(0,u.createSelector)(L,function(e){return e}),se=(0,u.createSelector)(U,function(e){return{spec:e.setting.toJS(),calendarSetting:e.calendarSetting.toJS()}}),ue=(0,u.createSelector)(g,W,se,function(e,t,n){return(0,l.getRenderPagination)(e,t,n)}),le=(0,u.createSelector)(f,ue,function(e,t){var n=t.sheetIndex,a=(0,r.default)({},e.toJS(),{workspace:0===n?e.get("coverWorkspace"):e.get("innerWorkspace")});return a}),de=(0,u.createSelector)(U,le,G,F,function(e,t,n,a){var o=(0,l.getRenderSize)(e,t,n,a);return o}),ce=(0,u.createSelector)(U,de,le,G,F,function(e,t,n,a,o){var r=(0,l.computedSizeForUpgrade)(e,t,n,a,o);return r}),pe=(0,u.createSelector)(U,de,le,G,F,function(e,t,n,a,o){var r=(0,l.computedSizeForSpecialView)(e,t,n,a,o);return r}),ge=(0,u.createSelector)(W,re,Y,se,ue,function(e,t,n,a,o){return(0,l.getRenderPaginationSpread)(e,t,n,a,o)}),fe=(0,u.createSelector)(le,ue,function(e,t){var n=t.sheetIndex;return(0,r.default)({},e,{workspace:0===n?e.previewCoverWorkspace:e.previewInnerWorkspace,coverWorkspace:e.previewCoverWorkspace,innerWorkspace:e.previewInnerWorkspace,innerWorkspaceLandscape:e.previewInnerWorkspaceLandscape})}),he=(0,u.createSelector)(M,fe,G,F,function(e,t,n,a){return(0,l.getRenderSize)(e,t,n,a,!0)}),me=(0,u.createSelector)(v,function(e){return e}),Me=(0,u.createSelector)(W,re,Y,se,function(e,t,n,a){return(0,l.getRenderAllSpreads)(e,t,n,a)});t.mapStateToProps=function(e){return{autoAddPhotoToCanvas:V(e),uploadingImages:K(e),project:U(e),upload:J(e),settings:se(e),imageUsedMap:Q(e),variables:F(e),parameters:G(e),spec:B(e),env:_(e),urls:O(e),size:de(e),ratios:le(e),pagination:ue(e),paginationSpread:ge(e),confirmModal:j(e),sidebar:me(e),uploadedImages:ie(e),contactUsModal:q(e),imageEditModal:$(e),capability:R(e),capabilities:k(e),allImages:Y(e),previewRatios:fe(e),previewSize:he(e),arrangePagesSize:pe(e),allSheets:Me(e),template:H(e),styles:Z(e),alertModal:ee(e),cloneModal:te(e),previewModal:ne(e),fontList:X(e),textEditModal:ae(e),price:oe(e),upgradeModal:z(e),upgradeSize:ce(e)}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(73),r=a(o),i=n(14),s=a(i);n(100);var u=n(39),l=a(u),d=n(20);t.default=function(e,t,n){if(!e)return null;var a=e.replace(/\/textImage\?/,"/textinfo?"),o=fetch(a).then(function(e){return e.ok?e.text():s.default.reject(new Error(e.statusText))}).then(function(e){return(0,d.convertObjIn)(l.default.xml2js(e))}).catch(function(e){return s.default.reject(new Error(e))}),i=fetch(e).then(function(e){return e.ok?e.blob():s.default.reject(new Error(e.statusText))}).catch(function(e){return s.default.reject(new Error(e))});return s.default.all([o,i]).then(function(e){if((0,r.default)(e[0]).length){var a=e[0].textInfo,o=URL.createObjectURL(e[1]),i=a.textAreaIdeaWidth>t||a.textAreaIdeaHeight>n;return s.default.resolve({isShowTextNotFit:i,blobUrl:o})}return s.default.reject()},function(){return s.default.reject()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImgWithBase64=t.loadImg=void 0;var o=n(14),r=a(o),i=n(12),s=a(i),u=t.loadImg=function(e){var t=new r.default(function(t,n){if(e){var a=new Image;a.onload=function(){t({msg:"done",url:e,img:a})},a.onerror=function(t){n({msg:t.message,url:e,img:null})},a.src=e}else n({msg:"url is not empty",url:e,img:null})});return t};t.loadImgWithBase64=function(e,t,n){u(e).then(function(e){var n=document.createElement("CANVAS"),a=n.getContext("2d");n.height=e.img.height,n.width=e.img.width,a.drawImage(e.img,0,0);var o=n.toDataURL();t&&t((0,s.default)({},e,{img:o}))},function(e){n&&n(e)})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.baseSize,a=e.pageBleed,o=(0,S.getInnerPageSize)(n,a),r=[];return t===N.pageTypes.bottom&&r.push({id:(0,w.guid)(),type:N.elementTypes.photo,x:0,y:0,width:(0,T.default)(o,"width"),height:(0,T.default)(o,"height"),px:0,py:0,pw:1,ph:1,rot:0,dep:1,cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0,imgFlip:!1,encImgId:"",imageid:""}),(0,g.default)({id:(0,w.guid)()},o,{type:t,styleId:"",styleItemId:"",bleed:(0,g.default)({},a),elements:r,template:{},backend:{isPrint:!0,slice:!1}})}function r(e,t,n){if(!t)return{};var a=t.baseSize,r=t.pageBleed,i=(0,S.getInnerPageSize)(a,r),s=[],u={month:0,year:Number(n.get("startYear"))};if(e!==N.productTypes.LC&&e!==N.productTypes.LPS){var l=o(t,N.pageTypes.cover,u);s.push(l)}return(0,g.default)({id:(0,w.guid)()},i,{bleed:(0,g.default)({},r),containers:s})}function i(e,t){if(!t)return[];for(var n=[],a=0;a<N.limitedPageNum;a+=1){var r=o(t,N.pageTypes.bottom);n.push(r)}return n}function s(e){var t=e,n=["x","y","width","height","px","py","pw","ph","cropLUX","cropLUY","cropRLX","cropRLY","dep","rot","imgRot","fontSize"],a=["text","fontWeight","fontFamily","fontColor","textAlign","textVAlign"],o=["imgFlip"];t.forEach(function(e,r){n.indexOf(r)===-1||(0,y.default)(e)&&!isNaN(e)||(t=t.set(r,0)),a.indexOf(r)===-1||(0,M.default)(e)||(t=t.set(r,"")),o.indexOf(r)===-1||(0,h.default)(e)||(t=t.set(r,!1))});var r=t.get("fontFamily"),i=t.get("text");return r&&(t=t.set("fontFamily",(0,D.toEncode)(r))),i&&(t=t.set("text",(0,D.toEncode)(i))),t}function u(e){var t=e;return e.forEach(function(e,n){e.get("elements").forEach(function(e,a){t=t.setIn([String(n),"elements",String(a)],s(e))})}),t}function l(e){var t=e.get("containers");return t&&t.forEach(function(e,n){var a=e;a.get("elements").forEach(function(e,a){t=t.setIn([String(n),"elements",String(a)],s(e))})}),t.first()}function d(e,t,n,a){var o=e.property,r=e.setting,i=e.imageArray,s=e.calendarSetting,d=u(e.pageArray),c=l(e.cover),p=r.get("product");p!==N.productTypes.LC&&p!==N.productTypes.LPS&&(d=d.unshift(c));var g=o.get("projectId"),f=new Date,h=new Date(o.get("createdDate"));isNaN(h.getTime())&&(h=new Date);var m={project:{version:n,clientId:"web-h5",createAuthor:"web-h5|1.1|1",userId:t.get("id"),title:a,artisan:t.get("firstName"),createdDate:(0,E.formatDateTime)(h),updatedDate:(0,E.formatDateTime)(f),calendarSetting:s.toJS(),summary:{},spec:r.toJS(),pages:d.toJS(),images:i.toJS()}};return g!==-1&&(m.project.guid=g),m}function c(e){var t=e.project,n=t.version,a=t.clientId,o=t.createAuthor,r=t.userId,i=t.artisan,s=t.spec,u={project:(0,g.default)({version:n,clientId:a,createAuthor:o,userId:r,artisan:i},s)};return u}Object.defineProperty(t,"__esModule",{value:!0}),t.generateSku=t.generateProject=t.generatePageArray=t.generatePage=t.generateCover=void 0;var p=n(17),g=a(p),f=n(156),h=a(f),m=n(628),M=a(m),v=n(66),y=a(v),I=n(11),T=a(I),w=n(18),E=n(60),D=n(48),N=n(9),S=n(54);t.generateCover=r,t.generatePage=o,t.generatePageArray=i,t.generateProject=d,t.generateSku=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={},a={},o=t.get("width"),r=t.get("height"),i=e.get("x"),s=e.get("y"),u=e.get("width"),l=e.get("height"),d=e.get("px"),c=e.get("py"),p=e.get("pw"),f=e.get("ph");return!(0,g.default)(d)&&(0,g.default)(i)?n.px=i/o:(0,g.default)(d)&&(a.x=d*o),!(0,g.default)(c)&&(0,g.default)(s)?n.py=s/r:(0,g.default)(c)&&(a.y=c*r),!(0,g.default)(p)&&(0,g.default)(u)?n.pw=u/o:(0,g.default)(p)&&(a.width=p*o),!(0,g.default)(f)&&(0,g.default)(l)?n.ph=l/r:(0,g.default)(f)&&(a.height=f*r),e.merge(n,a,{lastModified:Date.now()})}function r(e,t){var n={},a=e.get("fontSize");return a&&a>1&&(n.fontSize=e.get("fontSize")/t.get("height")),o(e,t).merge(n)}function i(e){var t={},n={color:"#000000",size:0,opacity:100},a={effectId:0,opacity:100},o=["border","imgFlip","imgRot","style"];return o.forEach(function(o){switch(o){case"border":(0,c.default)(e.get(o))&&(t.border=n);break;case"imgFlip":(0,c.default)(e.get(o))&&(t.imgFlip=!1);break;case"imgRot":(0,c.default)(e.get(o))&&(t.imgRot=0);break;case"style":(0,c.default)(e.get(o))&&(t.style=a)}}),t}function s(e,t,n){var a={},r=e.get("encImgId"),s=e.get("width"),u=e.get("height"),l=e.get("id"),d=t.get("elements").find(function(t){return t.get("id")===e.get("id")});if(r||l&&(s||u)&&d&&d.get("encImgId")){var c=n.find(function(e){return e.get("encImgId")===(r||d.get("encImgId"))}),p=0,g=0,h=0;"undefined"!=typeof s?p=s:d&&(p=d.get("width")||0),"undefined"!=typeof u?g=u:d&&(g=d.get("height")||0),"undefined"!=typeof e.get("imgRot")?h=e.get("imgRot"):d&&(h=d.get("imgRot")||0);var m=d?d.get("width")/d.get("height"):1,M=p/g,v=d?d.get("encImgId"):null;if(c&&(!d||c.get("encImgId")!==v||Math.abs(m-M)>5e-4||h!==d.get("imgRot"))){var y=(0,f.getCropOptions)(c.get("width"),c.get("height"),p,g,h),I=y.cropLUX,T=y.cropLUY,w=y.cropRLX,E=y.cropRLY;a.cropLUX=I,a.cropLUY=T,a.cropRLX=w,a.cropRLY=E}}return o(e,t).merge(a).merge(i(e.merge(d)))}function u(e){var t=e,n=["x","y","width","height","px","py","pw","ph","cropLUX","cropLUY","cropRLX","cropRLY"];e.forEach(function(e,a){n.indexOf(a)===-1||(0,g.default)(e)||(t=t.remove(a))});var a=t.get("fontFamily"),o=t.get("text");return a&&(t=t.set("fontFamily",(0,m.toEncode)(a))),o&&(t=t.set("text",(0,m.toEncode)(o))),t}function l(e,t,n){var a=u(e);switch(a.get("type")){case h.elementTypes.text:a=a.merge(r(a,t));break;case h.elementTypes.photo:a=a.merge(s(a,t,n));break;default:a=a.merge(o(a,t))}return a}Object.defineProperty(t,"__esModule",{value:!0});var d=n(168),c=a(d),p=n(66),g=a(p);t.default=l;var f=n(21),h=n(9),m=n(48)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return[t,e]}function r(e){var t=e.get("width"),n=e.get("height"),a=e.get("image"),r=e.get("imgRot");if(a&&(t=a.get("width"),n=a.get("height"),r%90===0&&r%180)){var i=o(t,n),s=(0,l.default)(i,2);t=s[0],n=s[1]}return t/n}function i(e,t){var n=-1,a=1/0;return e.forEach(function(e,o){var r=Math.abs(e.get("aspectRatio")-t);r<a&&(a=r,n=o)}),n}function s(e,t,n){if(!c.default.Map.isMap(e)||!c.default.List.isList(t)||!c.default.List.isList(n))return null;var a=e.get("elements").filter(function(e){return e.get("encImgId")}).map(function(e){var t=n.find(function(t){return t.get("encImgId")===e.get("encImgId")}),a=e.set("image",t),o=r(a);return e.set("aspectRatio",o)}),o=t.filter(function(e){return e.get("type")===h.elementTypes.photo}).map(function(e){var t=r(e);return e.set("aspectRatio",t)}),s=e.get("width"),u=e.get("height"),l=c.default.List();return a.forEach(function(t){var a=t.get("aspectRatio"),r=i(o,a),d=o.get(r);o=o.delete(r);var p=c.default.Map({id:(0,f.guid)(),type:d.get("type"),x:d.get("px")*s,y:d.get("py")*u,width:d.get("pw")*s,height:d.get("ph")*u,dep:d.get("dep"),rot:d.get("rot"),encImgId:t.get("encImgId"),imgRot:t.get("imgRot"),imgFlip:t.get("imgFlip"),border:t.get("border"),style:t.get("style")});l=l.push((0,g.default)(p,e,n))}),l=l.concat(o.map(function(t){var a=c.default.Map({id:(0,f.guid)(),type:t.get("type"),x:t.get("px")*s,y:t.get("py")*u,width:t.get("pw")*s,height:t.get("ph")*u,dep:t.get("dep"),rot:t.get("rot"),encImgId:""});return(0,g.default)(a,e,n)})),l.concat(t.filter(function(e){return e.get("type")!==h.elementTypes.photo}))}Object.defineProperty(t,"__esModule",{value:!0});var u=n(38),l=a(u);t.mergeTemplateElements=s;var d=n(2),c=a(d),p=n(89),g=a(p),f=n(18),h=n(9)},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function a(e,t){return null==e?e:o(e,r(t),i)}var o=n(174),r=n(594),i=n(67);e.exports=a},function(e,t,n){var a=n(506),o=n(511),r=n(65),i=n(91),s=r(function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,a(t,1),[])});e.exports=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),p=n(3),g=a(p),f=n(597),h=a(f),m=n(34),M=a(m),v=n(13),y=a(v),I=n(542),T=a(I),w=n(544),E=a(w),D=n(539),N=a(D),S=n(541),b=a(S),A=n(540),C=a(A),x=n(543),P=a(x),L=n(547),_=a(L),O=n(548),j=a(O),z=n(546),k=n(549),R=a(k),U=n(545),B=a(U),Y=(0,T.default)(s=(0,E.default)(s=(0,N.default)(s=(0,b.default)(s=(0,C.default)(s=(0,P.default)((l=u=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={place:"top",type:"dark",effect:"float",show:!1,border:!1,placeholder:"",offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:(0,z.parseAria)(e),isEmptyTip:!1,disable:!1},n.bind(["showTooltip","updateTooltip","hideTooltip","globalRebuild","globalShow","globalHide","onWindowResize"]),n.mount=!0,n.delayShowLoop=null,n.delayHideLoop=null,n.intervalUpdateContent=null,n}return i(t,e),c(t,[{key:"bind",value:function(e){var t=this;e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.insecure,n=e.resizeHide;t&&this.setStyleHeader(),this.bindListener(),this.bindWindowEvents(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.ariaProps,n=(0,z.parseAria)(e),a=Object.keys(n).some(function(e){return n[e]!==t[e]});a&&this.setState({ariaProps:n})}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(),this.unbindWindowEvents()}},{key:"getTargetArray",value:function(e){var t=void 0;if(e){var n=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t=document.querySelectorAll('[data-tip][data-for="'+n+'"]')}else t=document.querySelectorAll("[data-tip]:not([data-for])");return(0,R.default)(t)}},{key:"bindListener",value:function(){var e=this,t=this.props,n=t.id,a=t.globalEventOff,o=this.getTargetArray(n);o.forEach(function(t){var n=e.isCapture(t),a=e.getEffect(t);return null===t.getAttribute("currentItem")&&t.setAttribute("currentItem","false"),e.unbindBasicListener(t),e.isCustomEvent(t)?void e.customBindListener(t):(t.addEventListener("mouseenter",e.showTooltip,n),"float"===a&&t.addEventListener("mousemove",e.updateTooltip,n),void t.addEventListener("mouseleave",e.hideTooltip,n))}),a&&(window.removeEventListener(a,this.hideTooltip),window.addEventListener(a,this.hideTooltip,!1)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var e=this,t=this.props,n=t.id,a=t.globalEventOff,o=this.getTargetArray(n);o.forEach(function(t){e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)}),a&&window.removeEventListener(a,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"showTooltip",value:function(e,t){var n=this;if(t){var a=this.getTargetArray(this.props.id),o=a.some(function(t){return t===e.currentTarget});if(!o||this.state.show)return}var r=this.props,i=r.children,s=r.multiline,u=r.getContent,l=e.currentTarget.getAttribute("data-tip"),d=e.currentTarget.getAttribute("data-multiline")||s||!1,c=void 0;u&&(c=Array.isArray(u)?u[0]&&u[0]():u());var p=(0,j.default)(l,i,c,d),g="string"==typeof p&&""===p||null===p,f=e instanceof window.FocusEvent||t,h=!0;e.currentTarget.getAttribute("data-scroll-hide")?h="true"===e.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(h=this.props.scrollHide),this.clearTimer(),this.setState({placeholder:p,isEmptyTip:g,place:e.currentTarget.getAttribute("data-place")||this.props.place||"top",type:e.currentTarget.getAttribute("data-type")||this.props.type||"dark",effect:f&&"solid"||this.getEffect(e.currentTarget),offset:e.currentTarget.getAttribute("data-offset")||this.props.offset||{},html:e.currentTarget.getAttribute("data-html")?"true"===e.currentTarget.getAttribute("data-html"):this.props.html||!1,delayShow:e.currentTarget.getAttribute("data-delay-show")||this.props.delayShow||0,delayHide:e.currentTarget.getAttribute("data-delay-hide")||this.props.delayHide||0,border:e.currentTarget.getAttribute("data-border")?"true"===e.currentTarget.getAttribute("data-border"):this.props.border||!1,extraClass:e.currentTarget.getAttribute("data-class")||this.props.class||this.props.className||"",disable:e.currentTarget.getAttribute("data-tip-disable")?"true"===e.currentTarget.getAttribute("data-tip-disable"):this.props.disable||!1},function(){h&&n.addScrollListener(e),n.updateTooltip(e),u&&Array.isArray(u)&&(n.intervalUpdateContent=setInterval(function(){if(n.mount){var e=n.props.getContent,t=(0,j.default)(l,e[0](),d),a="string"==typeof t&&""===t;n.setState({placeholder:t,isEmptyTip:a})}},u[1]))})}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,a=n.delayShow,o=n.show,r=n.isEmptyTip,i=n.disable,s=this.props.afterShow,u=this.state.placeholder,l=o?0:parseInt(a,10),d=e.currentTarget;if(!r&&!i){var c=function(){(Array.isArray(u)&&u.length>0||u)&&!function(){var n=!t.state.show;t.setState({currentEvent:e,currentTarget:d,show:!0},function(){t.updatePosition(),n&&s&&s()})}()};clearTimeout(this.delayShowLoop),a?this.delayShowLoop=setTimeout(c,l):c()}}},{key:"hideTooltip",value:function(e,t){var n=this,a=this.state,o=a.delayHide,r=a.isEmptyTip,i=a.disable,s=this.props.afterHide;if(this.mount&&!r&&!i){if(t){var u=this.getTargetArray(this.props.id),l=u.some(function(t){return t===e.currentTarget});if(!l||!this.state.show)return}var d=function(){var e=n.state.show;n.setState({show:!1},function(){n.removeScrollListener(),e&&s&&s()})};this.clearTimer(),o?this.delayHideLoop=setTimeout(d,parseInt(o,10)):d()}}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e.currentTarget);window.addEventListener("scroll",this.hideTooltip,t)}},{key:"removeScrollListener",value:function(){window.removeEventListener("scroll",this.hideTooltip)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,a=t.currentTarget,o=t.place,r=t.effect,i=t.offset,s=M.default.findDOMNode(this),u=(0,_.default)(n,a,s,o,r,i);return u.isNewState?this.setState(u.newState,function(){e.updatePosition()}):(s.style.left=u.position.left+"px",void(s.style.top=u.position.top+"px"))}},{key:"setStyleHeader",value:function(){if(!document.getElementsByTagName("head")[0].querySelector('style[id="react-tooltip"]')){var e=document.createElement("style");e.id="react-tooltip",e.innerHTML=B.default,document.getElementsByTagName("head")[0].appendChild(e)}}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearInterval(this.intervalUpdateContent)}},{key:"render",value:function(){var e=this.state,n=e.placeholder,a=e.extraClass,o=e.html,r=e.ariaProps,i=e.disable,s=e.isEmptyTip,u=(0,y.default)("__react_component_tooltip",{show:this.state.show&&!i&&!s},{border:this.state.border},{"place-top":"top"===this.state.place},{"place-bottom":"bottom"===this.state.place},{"place-left":"left"===this.state.place},{"place-right":"right"===this.state.place},{"type-dark":"dark"===this.state.type},{"type-success":"success"===this.state.type},{"type-warning":"warning"===this.state.type},{"type-error":"error"===this.state.type},{"type-info":"info"===this.state.type},{"type-light":"light"===this.state.type}),l=this.props.wrapper;return t.supportedWrappers.indexOf(l)<0&&(l=t.defaultProps.wrapper),o?g.default.createElement(l,d({className:u+" "+a},r,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:n}})):g.default.createElement(l,d({className:u+" "+a},r,{"data-id":"tooltip"}),n)}}]),t}(p.Component),u.propTypes={children:h.default.any,place:h.default.string,type:h.default.string,effect:h.default.string,offset:h.default.object,multiline:h.default.bool,border:h.default.bool,insecure:h.default.bool,class:h.default.string,className:h.default.string,id:h.default.string,html:h.default.bool,delayHide:h.default.number,delayShow:h.default.number,event:h.default.string,eventOff:h.default.string,watchWindow:h.default.bool,isCapture:h.default.bool,globalEventOff:h.default.string,getContent:h.default.any,afterShow:h.default.func,afterHide:h.default.func,disable:h.default.bool,scrollHide:h.default.bool,resizeHide:h.default.bool,wrapper:h.default.string},u.defaultProps={insecure:!0,resizeHide:!0,wrapper:"div"},u.supportedWrappers=["div","span"],s=l))||s)||s)||s)||s)||s)||s;e.exports=Y},function(e,t,n){e.exports=n(1)(121)},function(e,t,n){e.exports=n(1)(163)},function(e,t,n){e.exports=n(1)(213)},function(e,t,n){e.exports=n(1)(265)},function(e,t,n){e.exports=n(1)(463)},function(e,t,n){e.exports=n(1)(701)},function(e,t,n){e.exports=n(1)(802)},function(e,t,n){e.exports=n(1)(82)},function(e,t,n){e.exports=n(1)(88)},function(e,t,n){e.exports=n(1)(975)},function(e,t,n){var a=n(173),o=n(35),r=n(576);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),a(a.S+a.F*r(function(){n(1)}),"Object",i)}},function(e,t,n){var a,o,r,i=n(96),s=n(191),u=n(601),l=n(588),d=n(70),c=d.process,p=d.setImmediate,g=d.clearImmediate,f=d.MessageChannel,h=0,m={},M="onreadystatechange",v=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},y=function(e){v.call(e.data)};p&&g||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++h]=function(){s("function"==typeof e?e:Function(e),t)},a(h),h},g=function(e){delete m[e]},"process"==n(163)(c)?a=function(e){c.nextTick(i(v,e,1))}:f?(o=new f,r=o.port2,o.port1.onmessage=y,a=i(r.postMessage,r,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(a=function(e){d.postMessage(e+"","*")},d.addEventListener("message",y,!1)):a=M in l("script")?function(e){u.appendChild(l("script"))[M]=function(){u.removeChild(this),v.call(e)}}:function(e){setTimeout(i(v,e,1),0)}),e.exports={set:p,clear:g}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m),v=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"onDrapOvered",value:function(e){var t=this.props.onDragOvered;e.preventDefault(),t&&t()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onDroped,a=e.onDragEntered,o=e.onDragLeaved,r=e.onDragEnded,i=e.data,s=void 0===i?{}:i,u=s.dropActiveClassName,l=s.isShowDropActive,d=void 0!==l&&l,c=(0,M.default)("drop-active",u);return h.default.createElement("div",{className:"on-drop",onDrop:n,onDragOver:this.onDrapOvered.bind(this),onDragEnter:a,onDragEnd:r,onDragLeave:o},d?h.default.createElement("div",{className:c}):null,t)}}]),t}(f.Component);t.default=v,v.propTypes={onDroped:f.PropTypes.func.isRequired,onDragEntered:f.PropTypes.func,onDragLeaved:f.PropTypes.func,onDragEnded:f.PropTypes.func}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(569),M=a(m);n(273);var v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChanged,n=e.optionComponent,a=e.options,o=e.searchable,r=e.placeholder,i=e.arrowRenderer,s=e.value,u=e.valueComponent,l=e.matchPos;return h.default.createElement(M.default,{arrowRenderer:i,onChange:t,optionComponent:n,options:a,placeholder:r,value:s,searchable:o,valueComponent:u,matchPos:l})}}]),t}(f.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(216);var v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.hasText,t=(0,M.default)("icon",{"has-text":e});return this.props.isShown?h.default.createElement("div",{className:"text-loading"},h.default.createElement("i",{className:t})):null}}]),t}(f.Component);v.propTypes={isShown:f.PropTypes.bool.isRequired},t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getDefaultCrop=function(e,t,n,a){if(e&&t&&n&&a){var o=e/t,r=n/a,i=void 0,s=void 0,u=void 0,l=void 0;if(o>r){var d=t,c=d*r,p=(e-c)/2;i=p/e,s=0,u=c/e,l=1}else{var g=e,f=g/r,h=(t-f)/2;i=0,s=h/t,u=1,l=f/t}return{px:i,py:s,pw:u,ph:l}}return{px:0,py:0,pw:1,ph:1}};t.getRotatedAngle=function(e,t){var n=e,a=t;return void 0!==n&&null!=n?(a=parseFloat(a)||90,n+=a,n=n>180?n-=360:n,n=n<-90?n+=360:n):0},t.getDefaultCropLRXY=function(e,t,a,o){var r=n(e,t,a,o),i=r.px,s=r.py,u=r.pw,l=r.ph;return{cropLUX:i,cropLUY:s,cropRLX:i+u,cropRLY:s+l}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}function r(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){d("Unable to copy canvas content from",e,t)}}function i(e,t){if(!e)return e;for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),a=e.firstChild;a;)t!==!0&&1===a.nodeType&&"SCRIPT"===a.nodeName||n.appendChild(i(a,t)),a=a.nextSibling;return 1===e.nodeType&&(n._scrollTop=e.scrollTop,n._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?r(e,n):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value)),n}function s(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)s(t),t=t.nextSibling}}var u=n(14),l=a(u),d=n(37);e.exports=function(e,t,n,a,r,u,d){var c=i(e.documentElement,r.javascriptEnabled),p=t.createElement("iframe");return p.className="html2canvas-container",p.style.visibility="hidden",p.style.position="fixed",p.style.left="-10000px",p.style.top="0px",p.style.border="0",p.width=n,p.height=a,p.scrolling="no",t.body.appendChild(p),new l.default(function(t){var n=p.contentWindow.document;p.contentWindow.onload=p.onload=function(){var e=setInterval(function(){n.body.childNodes.length>0&&(s(n.documentElement),clearInterval(e),"view"===r.type&&(p.contentWindow.scrollTo(u,d),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.contentWindow.scrollY===d&&p.contentWindow.scrollX===u||(n.documentElement.style.top=-d+"px",n.documentElement.style.left=-u+"px",n.documentElement.style.position="absolute")),t(p))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),o(e,u,d),n.replaceChild(n.adoptNode(c),n.documentElement),n.close()})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,o){return T(e,e,n,a,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(i){y("Document cloned");var s=D+o,u="["+s+"='"+o+"']",l=e.querySelector(u);l&&l.removeAttribute(s);var d=i.contentWindow,c=d.document.querySelector(u),p="function"==typeof t.onclone?g.default.resolve(t.onclone(d.document)):g.default.resolve(!0);return p.then(function(){return r(c,i,t,n,a)})})}function r(e,t,n,a,o){var r=t.contentWindow,d=new f(r.document),c=new m(n,d),p=E(e),g="view"===n.type?a:u(r.document),h="view"===n.type?o:l(r.document),v=new n.renderer(g,h,c,n,document),I=new M(e,v,d,c,n);return I.ready.then(function(){y("Finished rendering");var a;return a="view"===n.type?s(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0}):e===r.document.body||e===r.document.documentElement||null!=n.canvas?v.canvas:s(v.canvas,{width:null!=n.width?n.width:p.width,height:null!=n.height?n.height:p.height,top:p.top,left:p.left,x:0,y:0}),i(t,n),a})}function i(e,t){t.removeContainer&&(e.parentNode.removeChild(e),y("Cleaned up container"))}function s(e,t){var n=document.createElement("canvas"),a=Math.min(e.width-1,Math.max(0,t.left)),o=Math.min(e.width,Math.max(1,t.left+t.width)),r=Math.min(e.height-1,Math.max(0,t.top)),i=Math.min(e.height,Math.max(1,t.top+t.height));n.width=t.width,n.height=t.height;var s=o-a,u=i-r;return y("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",u),y("Resulting crop with width",t.width,"and height",t.height,"with x",a,"and y",r),n.getContext("2d").drawImage(e,a,r,s,u,t.x,t.y,s,u),n}function u(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth));
}function l(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function d(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}function c(e,t){var n=N++;if(t=t||{},t.logging&&(y.options.logging=!0,y.options.start=Date.now()),t.async="undefined"==typeof t.async||t.async,t.allowTaint="undefined"!=typeof t.allowTaint&&t.allowTaint,t.removeContainer="undefined"==typeof t.removeContainer||t.removeContainer,t.javascriptEnabled="undefined"!=typeof t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout="undefined"==typeof t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:h,t.strict=!!t.strict,t.isManualIgnore="undefined"!=typeof t.isManualIgnore,"string"==typeof e){if("string"!=typeof t.proxy)return g.default.reject("Proxy must be used when rendering url");var a=null!=t.width?t.width:window.innerWidth,i=null!=t.height?t.height:window.innerHeight;return w(d(e),t.proxy,document,a,i,t).then(function(e){return r(e.contentWindow.document.documentElement,e,t,a,i)})}var s=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return s.setAttribute(D+n,n),o(s.ownerDocument,t,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(e){return"function"==typeof t.onrendered&&(y("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}Object.defineProperty(t,"__esModule",{value:!0});var p=n(14),g=a(p);t.html2canvas=c;var f=n(310),h=n(308),m=n(303),M=n(304),v=n(49),y=n(37),I=n(33),T=n(111),w=n(78).loadUrlDocument,E=I.getBounds,D="data-html2canvas-node",N=0;c.CanvasRenderer=h,c.NodeContainer=v,c.log=y,c.utils=I},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=i.default.resolve(!0)}var r=n(14),i=a(r);o.TYPES={LINEAR:1,RADIAL:2},o.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){s.apply(this,arguments),this.type=s.TYPES.LINEAR;var t=o.REGEXP_DIRECTION.test(e.args[0])||!s.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,a=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=a,this.y1=n;break;case"center":break;default:var o=.01*parseFloat(e,10);if(isNaN(o))break;0===t?(this.y0=o,this.y1=1-this.y0):(this.x0=o,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(s.REGEXP_COLORSTOP),n=+t[2],a=0===n?"%":t[3];return{color:new u(t[1]),stop:"%"===a?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(n,a){return null!==n.stop&&(e.stop=(n.stop-this.colorStops[t-1].stop)/(a+1)+this.colorStops[t-1].stop,!0)},this)},this)}var r=n(41),i=a(r),s=n(113),u=n(77);o.prototype=(0,i.default)(s.prototype),o.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?i.default.resolve(t.inlineFormatting(e)):s(e)}).then(function(e){return new i.default(function(n){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,n))})})}var r=n(14),i=a(r),s=n(116),u=n(33).decode64;o.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?i.default.resolve():i.default.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},o.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},o.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},o.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},o.prototype.createCanvas=function(e){var t=this;return function(n,a){var o=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=o.lowerCanvasEl,o.setWidth(a.width).setHeight(a.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,a)).renderAll(),e(o.lowerCanvasEl)}},o.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):u(e)},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return new i.default(function(t,n){var a=new XMLHttpRequest;a.open("GET",e),a.onload=function(){200===a.status?t(a.responseText):n(new Error(a.statusText))},a.onerror=function(){n(new Error("Network Error"))},a.send()})}var r=n(14),i=a(r);e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},a=function(e){return e.wheelDelta?-e.wheelDelta/120:e.detail/3};t.addMouseWheelEvent=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.addEventListener("mousewheel",function(e){o&&n(e),t(a(e))},!1),e.addEventListener("DOMMouseScroll",function(e){o&&n(e),t(a(e))},!1)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.transform=function(e,t){var n=e.x,a=e.y,o=e.width,r=e.height,i=Math.sqrt(Math.pow(o,2)+Math.pow(r,2))/2,s=Math.round(180*Math.atan(r/o)/Math.PI),u=180-t-s,l=s-t,d={x:n+o/2+i*Math.cos(u*Math.PI/180),y:a+r/2-i*Math.sin(u*Math.PI/180)},c={x:n+o/2+i*Math.cos(l*Math.PI/180),y:a+r/2-i*Math.sin(l*Math.PI/180)},p={x:n+o/2-i*Math.cos(u*Math.PI/180),y:a+r/2+i*Math.sin(u*Math.PI/180)},g={x:n+o/2-i*Math.cos(l*Math.PI/180),y:a+r/2+i*Math.sin(l*Math.PI/180)},f=Math.min(d.x,c.x,p.x,g.x),h=Math.max(d.x,c.x,p.x,g.x),m=Math.min(d.y,c.y,p.y,g.y),M=Math.max(d.y,c.y,p.y,g.y);return{point:{topLeft:d,topRight:c,bottomLeft:g,bottomRight:p},width:h-f,height:M-m,left:f,right:h,top:m,bottom:M}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.get("width"),a=e.get("height"),o=e.get("id");return new s.default(function(e,r){(0,p.default)(t,n,a).then(function(t){var n=t.isShowTextNotFit,a=t.blobUrl,i=new window.Image;i.onload=function(){e({elementId:o,imageObj:i,isShowTextNotFit:n,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},i.onerror=function(){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},i.src=a},function(){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})}).catch(function(e){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})})})}function r(e,t){var n=e.get("id");return new s.default(function(e,a){var o=new window.Image;o.onload=function(){e({elementId:n,imageObj:o,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},o.onerror=function(){a({elementId:n,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},o.src=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.toDownload=void 0;var i=n(14),s=a(i),u=n(2),l=a(u),d=n(9),c=n(86),p=a(c);t.toDownload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(e.props.data.page,e.state.downloadData),i=a,s=[];t&&t.size&&t.forEach(function(e){var t=e.get("id"),a=e.getIn(["computed","imgUrl"]),u=i.get(t)||l.default.Map();if(a&&(u.get("downloadUrl")!==a||u.get("downloadStatus")!==d.downloadStatus.DOWNLOAD_SUCCESS))switch(i=i.set(t,u.merge({downloadStatus:d.downloadStatus.DOWNLOADING,downloadUrl:a})),e.get("type")){case d.elementTypes.photo:var c=n?a+"&randomNumber="+Math.random():a;s.push(r(e,c));break;case d.elementTypes.calendar:s.push(r(e,a));break;case d.elementTypes.text:if(e.get("isSpineText"))return;s.push(o(e,a))}});var u=function(t){var n=e.state.downloadData,a=t.elementId;delete t.elementId;var o=n.get(a)||l.default.Map();e.setState({downloadData:n.set(a,o.merge(t))})};s.forEach(function(e){e.then(u,u)}),e.setState({downloadData:i})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t,dateSelected:Date.now()})})}function r(e,t,n){var a=e.state.elementArray,r=t.get("id"),i=a.find(function(e){return e.get("isSelected")&&e.get("isSpineText")}),s=a;!n.ctrlKey&&!n.metaKey||i?t.get("isSelected")||(s=o(a,r),e.clicksObj.clickElementId=r):s=a.map(function(e){if(e.get("isSpineText"))return e;if(r===e.get("id")){var t=!e.get("isSelected"),n={isSelected:t};return t&&(n.dateSelected=Date.now()),e.merge(n)}return e}),e.setState({elementArray:s})}function i(e){if(!e||e.indexOf("?")===-1)return"";var t=e.split("?"),n=t[0],a=d.default.parse(t[1]);return a.px=0,a.py=0,a.pw=1,a.ph=1,n+"?"+d.default.stringify(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=t.onExchangeDragEnd=t.onExchangeDragMove=t.onExchangeDragStart=t.onExchangeClick=t.onDrop=t.handleDragEnd=t.handleDragLeave=t.handleDragEnter=t.handleDragOver=t.onMouseMove=t.onMouseOut=t.onMouseOver=t.onMouseLeave=t.onMouseEnter=t.onMouseUp=void 0;var s=n(12),u=a(s);t.selectElements=r;var l=n(36),d=a(l),c=(n(21),n(9)),p=n(30),g=n(63),f=(t.onMouseUp=function(e,t,n){e.setState({tooltip:{isShown:!1}})},t.onMouseEnter=function(e,t,n){var a=e.props,o=a.t,r=a.data,i=r.capability,s=e.state.elementArray,u=s.filter(function(e){return e.get("isSelected")}),l=u.filter(function(e){return e.get("id")===t.get("id")}).size,d=[c.elementTypes.text,c.elementTypes.paintedText];if(!t.get("text")&&!l&&d.indexOf(t.get("type"))!==-1){var p=(0,g.findKonvaObjectById)(e.unselectElements,t.get("id")),f=p.getParent(),h=f.getClientRect(),m=r.summary,M=r.size,v=m.get("isCover"),y=0;y=v?M.renderCoverSheetSizeWithoutBleed.height+(M.renderCoverSheetSize.height-M.renderInnerSheetSizeWithoutBleed.height)/2:M.renderInnerSheetSizeWithoutBleed.height+(M.renderInnerSheetSize.height-M.renderInnerSheetSizeWithoutBleed.height)/2,e.setState({tooltip:{isShown:!0,content:o("DOUBLE_CLICK_TO_EDIT_TEXT"),elementRect:h,containerHeight:y}})}if(c.elementTypes.photo===t.get("type")&&i.get("canShowSnackBar")&&t.get("encImgId")){var I=r.page,T=r.ratio,w=(r.project,r.summary),E=t.get("computed"),D=t.get("templateId"),N=(E.get("isLeft"),46),S=I.get("bleed"),b=S.map(function(e){return Math.floor(e*T.workspace)}),A=Math.round(I.get("height")*T.workspace),C=A-N-b.get("bottom"),x=E.get("top")+E.get("height")-N,P=E.get("left"),L=(w.get("isCover"),E.get("width"));e.setState({snackBar:{isShown:!0,left:P,top:x>C?C:x,width:L,templateId:D},currentPointPhotoElementId:t.get("id")}),e.clearHideSnackBarTimer()}},t.onMouseLeave=function(e,t,n){e.setState({tooltip:{isShown:!1}}),c.elementTypes.photo===t.get("type")&&e.delayHideSnackBar()},t.onMouseOver=function(e,t,n){var a=e.props.data.capability;t&&a.get("canSelectElement")&&(t.getStage().content.style.cursor="pointer")},t.onMouseOut=function(e,t,n){t&&(t.getStage().content.style.cursor="default");var a=e.props.data.capability;a.get("canShowOriginalPhotoLayer")&&e.setState({originalPhotoLayer:{isShown:!1}})},t.onMouseMove=function(e,t,n){var a=e.props.data.capability;if(a.get("canShowOriginalPhotoLayer")){var o=30,r=n.evt,s=r.pageX+o,u=r.pageY+o;s+500>window.innerWidth&&(s=r.pageX-500-o),e.setState({originalPhotoLayer:{isShown:!0,x:s,y:u,imageUrl:i(t.getIn(["computed","imgUrl"]))}})}},t.handleDragOver=function(e,t){f(t)},t.handleDragEnter=function(e,t){e.setState({isDragOver:!0})},t.handleDragLeave=function(e,t){e.setState({isDragOver:!1})},t.handleDragEnd=function(e,t){e.setState({isDragOver:!1})},t.onDrop=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=e.state.downloadedImages,s=o.page,l=(o.ratio,o.paginationSpread,o.pagination),d=(o.parameters,r.boundProjectActions),g=r.boundPaginationActions,h=o.elements,m=h.maxBy(function(e){return e.get("dep")}),M=((m?m.get("dep"):0)+1,n||window.event),v=(0,p.getTransferData)(M);if(v){if(s&&l.pageId!==s.get("id")&&s.get("type")!==c.pageTypes.spine){var y=1===l.pageIndex?0:1;g.switchPage(y,s.get("id"))}if(v.length){var I=v[0],T=t.get("id"),w={id:T,encImgId:I.encImgId,imageid:I.imageid,imgRot:0,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1};d.updateElement(w)}var E=(0,u.default)({},i);E[t.get("id")]=null,e.setState({isDragOver:!1,downloadedImages:E}),f(n)}},t.onExchangeClick=function(e){e.setState({showVisualExchange:!0})},t.onExchangeDragStart=function(e,t,n,a,o){var r=o.evt||window.event;(0,p.setTransferDataByNode)({pageId:t,elementId:n}),e.setState({isExchangeImage:!0,exchangeImageThumbnail:a}),__app.isExchangeImage=!0,f(r)},t.onExchangeDragMove=function(e,t){var n=t.evt||window.event,a=n.pageX,o=n.pageY,r={x:a,y:o};e.setState({exchangeThumbnailRect:r})},t.onExchangeDragEnd=function(e,t){var n=t.evt||window.event;e.setState({isExchangeImage:!1,isDragOver:!1}),(0,p.getTransferDataByNode)(n),delete __app.isExchangeImage},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=t.get("encImgId");if(a){var o=e.props,r=o.data,i=o.actions,s=i.boundProjectActions,u=r.paginationSpread,l=u.get("images"),d=l.get(a),c=d.get("width")/d.get("height"),p={id:t.get("id")};p=t.get("width")>t.get("height")?(0,h.default)({},p,{height:t.get("width")/c}):(0,h.default)({},p,{width:t.get("height")*c}),s.updateElement(p)}}function r(e,t){var n=t.minBy(function(e){return e.get("x")}),a=n.get("x"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){e.get("x")!==a&&(i=i.push(y.default.Map({id:e.get("id"),x:a})))}),i.size&&r.updateElements(i)}function i(e,t){var n=t.maxBy(function(e){return e.get("width")}),a=e.props.actions,o=a.boundProjectActions,r=y.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("x")+n.get("width")/2,a=t-e.get("width")/2;if(e.get("x")!==a){var o=y.default.Map({id:e.get("id"),x:a});r=r.push(o)}}}),r.size&&o.updateElements(r)}function s(e,t){var n=t.maxBy(function(e){return e.get("x")+e.get("width")}),a=n.get("x")+n.get("width"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){var t=a-e.get("width");e.get("x")!==t&&(i=i.push(y.default.Map({id:e.get("id"),x:t})))}),i.size&&r.updateElements(i)}function u(e,t){var n=t.minBy(function(e){return e.get("y")}),a=n.get("y"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){e.get("y")!==a&&(i=i.push(y.default.Map({id:e.get("id"),y:a})))}),i.size&&r.updateElements(i)}function l(e,t){var n=t.maxBy(function(e){return e.get("height")}),a=e.props.actions,o=a.boundProjectActions,r=y.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("y")+n.get("height")/2,a=t-e.get("height")/2;if(e.get("y")!==a){var o=y.default.Map({id:e.get("id"),y:a});r=r.push(o)}}}),r.size&&o.updateElements(r)}function d(e,t){var n=t.maxBy(function(e){return e.get("y")+e.get("height")}),a=n.get("y")+n.get("height"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){var t=a-e.get("height");e.get("y")!==t&&(i=i.push(y.default.Map({id:e.get("id"),y:t})))}),i.size&&r.updateElements(i)}function c(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("x")-t.get("x")}),a=0;n.forEach(function(e,t){var o=t-1;if(o>=0){var r=n.get(t-1),i=e.get("x")-(r.get("x")+r.get("width"));a+=i}});var o=n.size,r=a/(o-1),i=e.props.actions,s=i.boundProjectActions,u=y.default.List();n.forEach(function(e,t){if(0===t||t===o-1)u=u.push(null);else{var a=n.get(t-1),i=u.get(t-1),s=a.get("x");i&&(s=i.get("x"));var l=s+a.get("width")+r;if(e.get("x").toFixed(12)!==l.toFixed(12)){var d=y.default.Map({id:e.get("id"),x:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function p(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("y")-t.get("y")}),a=0;n.forEach(function(e,t){var o=t-1;if(o>=0){var r=n.get(t-1),i=e.get("y")-(r.get("y")+r.get("height"));a+=i}});var o=n.size,r=a/(o-1),i=e.props.actions,s=i.boundProjectActions,u=y.default.List();n.forEach(function(e,t){if(0===t||t===o-1)u=u.push(null);else{var a=n.get(t-1),i=u.get(t-1),s=a.get("y");i&&(s=i.get("y"));var l=s+a.get("height")+r;if(e.get("y").toFixed(12)!==l.toFixed(12)){var d=y.default.Map({id:e.get("id"),y:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function g(e,t){var n=e.props,a=(n.data,n.actions);a.boundProjectActions.deleteElements(t.map(function(e){return e.get("id")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.onMatchFirstSelectWidthAndHeight=t.onMatchShortestHeight=t.onMatchTallestHeight=t.onMatchNarrowestWidth=t.onMatchWidestWidth=t.toggleModal=t.onEditText=t.onSendBackward=t.onBringForward=t.onSendToback=t.onBringToFront=t.onUploadImage=t.onRemoveImage=t.onFilter=t.onExpandToRightPage=t.onExpandToLeftPage=t.onExpandToFullSheet=t.onFlipImage=t.onRotateImage=t.onEditImage=void 0;var f=n(19),h=a(f),m=n(12),M=a(m);t.onFitFrameToImage=o,t.onAlignLeft=r,t.onAlignCenter=i,t.onAlignRight=s,t.onAlignTop=u,t.onAlignMiddle=l,t.onAlignBottom=d,t.onSpaceHorizontal=c,t.onSpaceVertical=p,t.onClearAll=g;var v=n(2),y=a(v),I=n(34),T=n(21),w=n(9),E=n(144),D=function(e,t,n,a,o,r){var i=e.props,s=i.data,u=i.actions,l=u.boundProjectActions;s.images;l.updateElement({id:t.get("id"),x:n,y:a,rot:0,width:o,height:r})},N=(t.onEditImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundImageEditModalActions,s=r.boundProjectActions,u=o.images,l=(o.elements,o.ratio),d=(t.get("width"),t.get("height"),t.toJS()),c=d.computed,p=d.encImgId,g=d.imgRot,f=d.imageid,h=d.cropLUX,m=d.cropLUY,v=d.cropRLX,y=d.cropRLY,I=c.width,T=c.height,w=u.get(p),E=w.toJS(),D=E.width,N=E.height,S=E.name;i.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:p,imageId:p?0:f,rotation:g,imageWidth:D,imageHeight:N,imageName:S,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:h,cropLUY:m,cropRLX:v,cropRLY:y},onDoneClick:function(e,n,a){s.updateElement((0,M.default)({},n,{imgRot:a,id:t.get("id")}))}})},t.onRotateImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i={0:90,90:180,180:-90,"-90":0},s=r.boundProjectActions,u=(o.page,o.ratio,o.images),l=t.toJS(),d=l.imgRot,c=l.encImgId,p=u.get(c),g=t.getIn(["computed","width"]),f=t.getIn(["computed","height"]),h=p.toJS(),m=h.width,M=h.height,v=i[d],y=(0,T.getCropOptions)(m,M,g,f,v),I=(0,T.getCropLRByOptions)(y.px,y.py,y.pw,y.ph);s.updateElement({id:t.get("id"),imgRot:v,cropLUX:I.cropLUX,cropLUY:I.cropLUY,cropRLX:I.cropRLX,cropRLY:I.cropRLY})},t.onFlipImage=function(e,t,n){var a=e.props.actions,o=a.boundProjectActions,r=t.get("imgFlip");o.updateElement({id:t.get("id"),imgFlip:!r})},t.onExpandToFullSheet=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width"),i=o.get("height");D(e,t,0,0,r,i)},t.onExpandToLeftPage=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width")/2,i=o.get("height");D(e,t,0,0,r,i)},t.onExpandToRightPage=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width")/2,i=o.get("height");D(e,t,o.get("width")/2,0,r,i)},t.onFilter=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.images,s=(o.page,o.ratio),u=(t.get("computed"),r.boundPropertyModalActions),l=i.get(t.get("encImgId")).toJS(),d=l.name.split(".")[0];u.showPropertyModal({isShown:!0,imgWidth:l.width,imgHeight:l.height,element:t.toJS(),ratio:s.workspace,filename:d,onPropertyModalClosed:function(){e.elementControlsNode.needRedrawElementControlsRect()}})},t.onRemoveImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.page,s=r.boundProjectActions;t.get("type")===w.elementTypes.photo?t.get("encImgId")?s.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0}):s.deleteElement(t.get("id"),i.get("id")).then(function(){}):s.deleteElement(t.get("id"),i.get("id"))},t.onUploadImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions;(0,I.findDOMNode)(e.fileUpload).click();var i=r.boundImagesActions,s=o.page,u=t.get("pw")*s.get("width"),l=t.get("ph")*s.get("height"),d=t.get("id"),c=t.get("imgRot");i.autoAddPhotoToCanvas({status:!0,elementId:d,elementWidth:u,elementHeight:l,imgRot:c})},t.onBringToFront=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundProjectActions,s=o.elements,u=s.maxBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")+1})},t.onSendToback=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundProjectActions,s=o.elements,u=s.minBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")-1})},t.onBringForward=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")>t.get("dep")}),l=N(u,t),d=l.minBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")<d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.maxBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")>t.get("dep")})),g=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var f=1;u.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")-f,f++):n-=p.size,g.push({id:e.get("id"),dep:n})})}s.updateElements(g)}},t.onSendBackward=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")<t.get("dep")}),l=N(u,t),d=l.maxBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")>d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.minBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")<t.get("dep")})),g=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var f=1;c.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")+f,f++):n+=p.size,g.push({id:e.get("id"),dep:n})})}s.updateElements(g)}},t.onEditText=function(e,t,n){var a=e.props,o=a.actions,r=(a.data,o.boundTextEditModalActions);r.showTextEditModal({element:t})},function(e,t){var n=(0,v.List)([]),a={x:t.get("x"),y:t.get("y"),width:t.get("width"),height:t.get("height")};return e.forEach(function(e){var o={x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height")},r=(0,E.collision)(a,o);e.get("id")!==t.get("id")&&r&&(n=n.push(e))}),n});t.toggleModal=function(e,t,n){var a=e.props.actions,o=a.boundUploadImagesActions;o.toggleUpload(n)},t.onMatchWidestWidth=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.maxBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==o.get("width")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),width:o.get("width")})});i.size&&a.updateElements(i)},t.onMatchNarrowestWidth=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.minBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==o.get("width")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),width:o.get("width")})});i.size&&a.updateElements(i)},t.onMatchTallestHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.maxBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==o.get("height")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),height:o.get("height")})});i.size&&a.updateElements(i)},t.onMatchShortestHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.minBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==o.get("height")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),height:o.get("height")})});i.size&&a.updateElements(i)},t.onMatchFirstSelectWidthAndHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.sort(function(e,t){return e.get("dateSelected")-t.get("dateSelected")}),r=o.first(),i=t.filter(function(e){return e.get("width")!==r.get("width")||e.get("height")!==r.get("height")}),s=i.map(function(e){return y.default.Map({id:e.get("id"),width:r.get("width"),height:r.get("height")})});s.size&&a.updateElements(s)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=u.default.List(),o=t||e.props,r=o.data,i=e.state.elementArray,s=r.page.get("elements"),l=r.settings;return s.forEach(function(t){var r=e.computedElementOptions(o,t,n,l),s=i.find(function(e){return e.get("id")===t.get("id")}),u={isDisabled:!1,isSelected:!1};s&&(u.isDisabled=s.get("isDisabled"),u.isSelected=s.get("isSelected")),a=a.push(t.merge({computed:r},u))}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.changeCurrentElement=t.onPageDroped=t.onPageDragLeave=t.onPageDragMove=t.onPageDragOver=t.componentWillReceiveProps=t.componentWillMount=t.activePage=t.switchPage=t.getOffset=t.stopEvent=void 0;var r=n(19),i=a(r),s=n(2),u=a(s),l=n(9),d=n(43),c=a(d),p=n(21),g=n(30),f=n(119),h=t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()},m=t.getOffset=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,a=0;if(e){var o=e.get("width"),r=l.defaultFrameOptions.default.value;e.get("type")!==l.pageTypes.page&&e.get("type")!==l.pageTypes.back&&e.get("type")!==l.pageTypes.front||(r=l.defaultFrameOptions.ps.value),n=o*r,a=n/t,t<1&&(a=n,n=a*t)}return{width:n,height:a}},v=function(e,t,n,a,o,r){var s=e.props,u=s.data,d=(s.actions,u.ratio),g=u.elements,f=u.paginationSpread,h=u.pagination,v=u.parameters,y=u.settings,I=n.width,T=n.height,w=n.width/n.height,E=M(t,w),D=E.width,N=E.height,S=80,b=D*d.workspace,A=N*d.workspace,C=t.get("width")*d.workspace,x=t.get("height")*d.workspace,P=m(document.querySelector(".spreads-list .inner-sheet")?document.querySelector(".spreads-list .inner-sheet"):document.querySelector(".spreads-list .cover-sheet")),L=o-P.left,_=r-P.top,O=a*S,j=a*S,z=f.getIn(["pages",0]),k=v.get("pageBleed"),R=(z.get("width")-k.get("left")-k.get("right"))*d.workspace;h.pageIndex>=1&&(L-=R),L<=0&&(L=0),_<=0&&(_=0),L>=C-b&&(L=C-b,O-=2*S),_>=x-A&&(_=x-A,j-=2*S);var U=L/d.workspace+O,B=_/d.workspace+j,Y={x:U,y:B},W=(0,p.getCropOptions)(I,T,D*d.workspace,N*d.workspace,0),Q=(W.cropLUX,W.cropLUY,W.cropRLX,W.cropRLY,g.maxBy(function(e){return e.get("dep")})),F=(Q?Q.get("dep"):0)+1+a,G=void 0;if(n.type===l.elementTypes.photo){var H=y.calendarSetting,Z=H.border;G=new c.default({type:l.elementTypes.photo,x:Y.x,y:Y.y,width:D,height:N,encImgId:n.encImgId,imageid:n.imageid,dep:F,border:Z,px:null,py:null,pw:null,ph:null})}else n.type===l.elementTypes.sticker&&(G={type:l.elementTypes.decoration,x:Y.x,y:Y.y,width:D,height:N,decorationid:n.guid,decorationtype:l.elementTypes.sticker,rot:0,dep:F});return(0,i.default)({},G)},y=function(e,t,n,a){var o=e.props.data,r=o.pagination,i=o.paginationSpread,s=r.pageId,u=i.get("pages"),l=u.find(function(e){return e.get("id")===s}),d=[];return t.map(function(t,o){d.push(v(e,l,t,o,n,a))}),d},I=function(e,t,n,a,o){var r=e.props,i=r.data,s=r.actions,u=(i.settings,i.pagination),l=i.paginationSpread,d=s.boundProjectActions,c=u.pageId,p=l.get("pages"),g=p.find(function(e){return e.get("id")===c}),f=v(e,g,t,0,a,o);return d.createElement(f)},T=t.switchPage=function(e,t,n){var a=e.props,o=a.actions,r=a.data,i=o.boundPaginationActions,s=r.page,u=r.index,l=r.pagination;i&&s&&s.get("enabled")&&l.pageId!==s.get("id")&&i.switchPage(u,s.get("id")).then(function(){n&&n()})};t.activePage=function(e){var t=e.props,n=t.actions,a=t.data,o=a.page;n.activePage(o.get("id"))},t.componentWillMount=function(e){var t=e.props.data,n=(t.page,t.ratio);t.paginationSpread,t.size;e.setState({elementArray:o(e,e.props,n.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data,a=t.data,r=n.paginationSpread,i=a.paginationSpread,s=n.isUpgradeTo8X6,l=a.isUpgradeTo8X6,d=n.page,c=a.page,p=d.get("elements"),g=c.get("elements"),h=n.ratio.workspace,m=a.ratio.workspace,M=n.pagination.pageId,v=a.pagination.pageId,y=n.activePageId,I=a.activePageId;if(!u.default.is(p,g)||h!==m||!u.default.is(r,i)||s!==l){var T=o(e,t,m);e.setState({elementArray:T}),(0,f.toDownload)(e,T)}if(M!==v||y!==I){var w=o(e,t,m);e.setState({elementArray:w.map(function(e){return e.set("isSelected",!1)})},function(){(0,f.toDownload)(e)})}},t.onPageDragOver=function(e,t){e.setState({isDragOver:!0}),h(t)},t.onPageDragMove=function(e,t){e.setState({isDragOver:!0}),h(t)},t.onPageDragLeave=function(e,t){e.setState({isDragOver:!1}),h(t)},t.onPageDroped=function(e,t){var n=t||window.event,a=e.props,o=a.data,r=(a.actions,o.ratio,o.paginationSpread,o.pagination),i=(o.parameters,o.page),s=(o.elements,n.pageX),u=n.pageY,d=void 0;if(d=(0,g.getTransferData)(n)){1===r.pageIndex?0:1;if(d.length)if(i&&r.pageId!==i.get("id"))i.get("type")!==l.pageTypes.spine&&T(e,t,function(){var t=y(e,d,s,u);e.doAutoLayout(t)});else{var c=y(e,d,s,u);e.doAutoLayout(c)}else if(d.type===l.elementTypes.sticker)i&&r.pageId!==i.get("id")?i.get("type")!==l.pageTypes.spine&&T(e,t,function(){I(e,d,0,s,u)}):I(e,d,0,s,u);else if(d.type===l.dragTypes.template)if(i&&r.pageId!==i.get("id"))i.get("type")!==l.pageTypes.spine&&T(e,t,function(){var t=d,n=t.guid;e.applyTemplate(n)});else{var p=d,f=p.guid;e.applyTemplate(f)}e.setState({isDragOver:!1}),h(n)}},t.changeCurrentElement=function(e,t){e.setState({currentPointPhotoElementId:t})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.get("width"),a=e.get("height"),o=e.get("id");return new s.default(function(e,r){(0,p.default)(t,n,a).then(function(t){var n=t.isShowTextNotFit,a=t.blobUrl,i=new window.Image;i.onload=function(){e({elementId:o,imageObj:i,isShowTextNotFit:n,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},i.onerror=function(){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},i.src=a},function(){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})}).catch(function(e){r({elementId:o,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})})})}function r(e,t){var n=e.get("id");return new s.default(function(e,a){var o=new window.Image;o.onload=function(){e({elementId:n,imageObj:o,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},o.onerror=function(){a({elementId:n,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},o.src=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.toDownload=void 0;var i=n(14),s=a(i),u=n(2),l=a(u),d=n(9),c=n(86),p=a(c);t.toDownload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.props.data.page;if(a.get("type")!==d.pageTypes.spine){var i=e.state.downloadData,s=i,u=[];t&&t.size&&t.forEach(function(e){var t=e.get("id"),a=e.getIn(["computed","imgUrl"]),i=s.get(t)||l.default.Map();if(a&&(i.get("downloadUrl")!==a||i.get("downloadStatus")!==d.downloadStatus.DOWNLOAD_SUCCESS))switch(s=s.set(t,i.merge({downloadStatus:d.downloadStatus.DOWNLOADING,downloadUrl:a})),e.get("type")){case d.elementTypes.photo:var c=n?a+"&randomNumber="+Math.random():a;
u.push(r(e,c));break;case d.elementTypes.calendar:u.push(r(e,a));break;case d.elementTypes.text:u.push(o(e,a))}});var c=function(t){var n=e.state.downloadData,a=t.elementId;delete t.elementId;var o=n.get(a)||l.default.Map();e.setState({downloadData:n.set(a,o.merge(t))})};u.forEach(function(e){e.then(c,c)}),e.setState({downloadData:s})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t,dateSelected:Date.now()})})}function r(e,t,n){if(t.get("type")===g.elementTypes.calendar)return null;var a=e.state.elementArray,r=t.get("id"),i=a.find(function(e){return e.get("isSelected")&&e.get("isSpineText")}),s=a;!n.ctrlKey&&!n.metaKey||i?t.get("isSelected")||(s=o(a,r),e.clicksObj.clickElementId=r):s=a.map(function(e){if(e.get("isSpineText"))return e;if(r===e.get("id")){var t=!e.get("isSelected"),n={isSelected:t};return t&&(n.dateSelected=Date.now()),e.merge(n)}return e}),e.setState({elementArray:s})}function i(e){if(!e||e.indexOf("?")===-1)return"";var t=e.split("?"),n=t[0],a=p.default.parse(t[1]);return a.px=0,a.py=0,a.pw=1,a.ph=1,n+"?"+p.default.stringify(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=t.onExchangeDragEnd=t.onExchangeDragMove=t.onExchangeDragStart=t.onExchangeClick=t.onDrop=t.handleDragEnd=t.handleDragLeave=t.handleDragEnter=t.handleDragOver=t.onMouseMove=t.onMouseOut=t.onMouseOver=t.onMouseLeave=t.onMouseEnter=t.onMouseUp=void 0;var s=n(11),u=a(s),l=n(12),d=a(l);t.selectElements=r;var c=n(36),p=a(c),g=(n(21),n(9)),f=n(30),h=n(63),m=(t.onMouseUp=function(e,t,n){e.setState({tooltip:{isShown:!1}})},t.onMouseEnter=function(e,t,n){var a=e.props,o=a.t,r=a.data,i=r.capability,s=e.state.elementArray,l=s.filter(function(e){return e.get("isSelected")}),d=l.filter(function(e){return e.get("id")===t.get("id")}).size,c=[g.elementTypes.text,g.elementTypes.paintedText];if(!t.get("text")&&!d&&c.indexOf(t.get("type"))!==-1){var p=(0,h.findKonvaObjectById)(e.unselectElements,t.get("id")),f=p.getParent(),m=f.getClientRect(),M=r.summary,v=r.size,y=M.get("isCover"),I=0;I=y?v.renderCoverSheetSizeWithoutBleed.height+(v.renderCoverSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2:v.renderInnerSheetSizeWithoutBleed.height+(v.renderInnerSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2,e.setState({tooltip:{isShown:!0,content:o("DOUBLE_CLICK_TO_EDIT_TEXT"),elementRect:m,containerHeight:I}})}if(g.elementTypes.photo===t.get("type")&&i.get("canShowSnackBar")&&t.get("encImgId")){var T=r.page,w=r.ratio,E=r.settings,D=r.summary,N=D.get("isCover"),S=t.get("computed"),b=t.get("templateId"),A=(S.get("isLeft"),46),C=T.get("bleed"),x=(0,u.default)(E,"spec.product"),P=x===g.productTypes.WC&&!N,L=P?.965:1,_=C.map(function(e){return Math.floor(e*w.workspace)}),O=Math.round(T.get("height")*w.workspace),j=O*L-A-_.get("bottom"),z=S.get("top")+S.get("height")-A,k=S.get("left"),R=S.get("width");e.setState({snackBar:{isShown:!0,left:k,top:z>j?j:z,width:R,templateId:b},currentPointPhotoElementId:t.get("id")}),e.clearHideSnackBarTimer()}},t.onMouseLeave=function(e,t,n){e.setState({tooltip:{isShown:!1}}),g.elementTypes.photo===t.get("type")&&e.delayHideSnackBar()},t.onMouseOver=function(e,t,n,a){var o=e.props.data.capability;t&&o.get("canSelectElement")&&(n.get("encImgId")||n.get("type")===g.elementTypes.text)&&(t.getStage().content.style.cursor="pointer")},t.onMouseOut=function(e,t,n){t&&(t.getStage().content.style.cursor="default");var a=e.props.data.capability;a.get("canShowOriginalPhotoLayer")&&e.setState({originalPhotoLayer:{isShown:!1}})},t.onMouseMove=function(e,t,n){var a=e.props.data.capability;if(a.get("canShowOriginalPhotoLayer")){var o=30,r=n.evt,s=r.pageX+o,u=r.pageY+o;s+500>window.innerWidth&&(s=r.pageX-500-o),e.setState({originalPhotoLayer:{isShown:!0,x:s,y:u,imageUrl:i(t.getIn(["computed","imgUrl"]))}})}},t.handleDragOver=function(e,t){m(t)},t.handleDragEnter=function(e,t){e.setState({isDragOver:!0})},t.handleDragLeave=function(e,t){e.setState({isDragOver:!1})},t.handleDragEnd=function(e,t){e.setState({isDragOver:!1})},t.onDrop=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=e.state.downloadedImages,s=o.page,u=(o.ratio,o.paginationSpread,o.pagination),l=(o.parameters,r.boundProjectActions),c=r.boundPaginationActions,p=o.elements,h=p.maxBy(function(e){return e.get("dep")}),M=((h?h.get("dep"):0)+1,n||window.event),v=(0,f.getTransferData)(M);if(v){if(s&&u.pageId!==s.get("id")&&s.get("type")!==g.pageTypes.spine){var y=1===u.pageIndex?0:1;c.switchPage(y,s.get("id"))}if(v.length){var I=v[0],T=t.get("id"),w={id:T,encImgId:I.encImgId,imageid:I.imageid,imgRot:0,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1};l.updateElement(w)}var E=(0,d.default)({},i);E[t.get("id")]=null,e.setState({isDragOver:!1,downloadedImages:E}),m(n)}},t.onExchangeClick=function(e){e.setState({showVisualExchange:!0})},t.onExchangeDragStart=function(e,t,n,a,o){var r=o.evt||window.event;(0,f.setTransferDataByNode)({pageId:t,elementId:n}),e.setState({isExchangeImage:!0,exchangeImageThumbnail:a}),__app.isExchangeImage=!0,m(r)},t.onExchangeDragMove=function(e,t){var n=t.evt||window.event,a=n.pageX,o=n.pageY,r={x:a,y:o};e.setState({exchangeThumbnailRect:r})},t.onExchangeDragEnd=function(e,t){var n=t.evt||window.event;e.setState({isExchangeImage:!1,isDragOver:!1}),(0,f.getTransferDataByNode)(n),delete __app.isExchangeImage},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=t.get("encImgId");if(a){var o=e.props,r=o.data,i=o.actions,s=i.boundProjectActions,u=r.paginationSpread,l=u.get("images"),d=l.get(a),c=d.get("width")/d.get("height"),p={id:t.get("id")};p=t.get("width")>t.get("height")?(0,h.default)({},p,{height:t.get("width")/c}):(0,h.default)({},p,{width:t.get("height")*c}),s.updateElement(p)}}function r(e,t){var n=t.minBy(function(e){return e.get("x")}),a=n.get("x"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){e.get("x")!==a&&(i=i.push(y.default.Map({id:e.get("id"),x:a})))}),i.size&&r.updateElements(i)}function i(e,t){var n=t.maxBy(function(e){return e.get("width")}),a=e.props.actions,o=a.boundProjectActions,r=y.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("x")+n.get("width")/2,a=t-e.get("width")/2;if(e.get("x")!==a){var o=y.default.Map({id:e.get("id"),x:a});r=r.push(o)}}}),r.size&&o.updateElements(r)}function s(e,t){var n=t.maxBy(function(e){return e.get("x")+e.get("width")}),a=n.get("x")+n.get("width"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){var t=a-e.get("width");e.get("x")!==t&&(i=i.push(y.default.Map({id:e.get("id"),x:t})))}),i.size&&r.updateElements(i)}function u(e,t){var n=t.minBy(function(e){return e.get("y")}),a=n.get("y"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){e.get("y")!==a&&(i=i.push(y.default.Map({id:e.get("id"),y:a})))}),i.size&&r.updateElements(i)}function l(e,t){var n=t.maxBy(function(e){return e.get("height")}),a=e.props.actions,o=a.boundProjectActions,r=y.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("y")+n.get("height")/2,a=t-e.get("height")/2;if(e.get("y")!==a){var o=y.default.Map({id:e.get("id"),y:a});r=r.push(o)}}}),r.size&&o.updateElements(r)}function d(e,t){var n=t.maxBy(function(e){return e.get("y")+e.get("height")}),a=n.get("y")+n.get("height"),o=e.props.actions,r=o.boundProjectActions,i=y.default.List();t.forEach(function(e){var t=a-e.get("height");e.get("y")!==t&&(i=i.push(y.default.Map({id:e.get("id"),y:t})))}),i.size&&r.updateElements(i)}function c(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("x")-t.get("x")}),a=0;n.forEach(function(e,t){var o=t-1;if(o>=0){var r=n.get(t-1),i=e.get("x")-(r.get("x")+r.get("width"));a+=i}});var o=n.size,r=a/(o-1),i=e.props.actions,s=i.boundProjectActions,u=y.default.List();n.forEach(function(e,t){if(0===t||t===o-1)u=u.push(null);else{var a=n.get(t-1),i=u.get(t-1),s=a.get("x");i&&(s=i.get("x"));var l=s+a.get("width")+r;if(e.get("x").toFixed(12)!==l.toFixed(12)){var d=y.default.Map({id:e.get("id"),x:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function p(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("y")-t.get("y")}),a=0;n.forEach(function(e,t){var o=t-1;if(o>=0){var r=n.get(t-1),i=e.get("y")-(r.get("y")+r.get("height"));a+=i}});var o=n.size,r=a/(o-1),i=e.props.actions,s=i.boundProjectActions,u=y.default.List();n.forEach(function(e,t){if(0===t||t===o-1)u=u.push(null);else{var a=n.get(t-1),i=u.get(t-1),s=a.get("y");i&&(s=i.get("y"));var l=s+a.get("height")+r;if(e.get("y").toFixed(12)!==l.toFixed(12)){var d=y.default.Map({id:e.get("id"),y:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function g(e,t){var n=e.props,a=(n.data,n.actions);a.boundProjectActions.deleteElements(t.map(function(e){return e.get("id")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.onMatchFirstSelectWidthAndHeight=t.onMatchShortestHeight=t.onMatchTallestHeight=t.onMatchNarrowestWidth=t.onMatchWidestWidth=t.toggleModal=t.onEditText=t.onSendBackward=t.onBringForward=t.onSendToback=t.onBringToFront=t.onUploadImage=t.onRemoveImage=t.onFilter=t.onExpandToRightPage=t.onExpandToLeftPage=t.onExpandToFullSheet=t.onFlipImage=t.onRotateImage=t.onEditImage=void 0;var f=n(19),h=a(f),m=n(12),M=a(m);t.onFitFrameToImage=o,t.onAlignLeft=r,t.onAlignCenter=i,t.onAlignRight=s,t.onAlignTop=u,t.onAlignMiddle=l,t.onAlignBottom=d,t.onSpaceHorizontal=c,t.onSpaceVertical=p,t.onClearAll=g;var v=n(2),y=a(v),I=n(34),T=n(21),w=n(9),E=n(144),D=n(31),N=a(D),S=function(e,t,n,a,o,r){var i=e.props,s=i.data,u=i.actions,l=u.boundProjectActions;s.images;l.updateElement({id:t.get("id"),x:n,y:a,rot:0,width:o,height:r})},b=(t.onEditImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundImageEditModalActions,s=r.boundProjectActions,u=o.images,l=(o.elements,o.ratio),d=(t.get("width"),t.get("height"),t.toJS()),c=d.computed,p=d.encImgId,g=d.imgRot,f=d.imageid,h=d.cropLUX,m=d.cropLUY,v=d.cropRLX,y=d.cropRLY,I=c.width,T=c.height,w=u.get(p),E=w.toJS(),D=E.width,S=E.height,b=E.name;i.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:p,imageId:p?0:f,rotation:g,imageWidth:D,imageHeight:S,imageName:b,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:h,cropLUY:m,cropRLX:v,cropRLY:y},securityString:N.default,onDoneClick:function(e,n,a){s.updateElement((0,M.default)({},n,{imgRot:a,id:t.get("id")}))}})},t.onRotateImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i={0:90,90:180,180:-90,"-90":0},s=r.boundProjectActions,u=(o.page,o.ratio,o.images),l=t.toJS(),d=l.imgRot,c=l.encImgId,p=u.get(c),g=t.getIn(["computed","width"]),f=t.getIn(["computed","height"]),h=p.toJS(),m=h.width,M=h.height,v=i[d],y=(0,T.getCropOptions)(m,M,g,f,v),I=(0,T.getCropLRByOptions)(y.px,y.py,y.pw,y.ph);s.updateElement({id:t.get("id"),imgRot:v,cropLUX:I.cropLUX,cropLUY:I.cropLUY,cropRLX:I.cropRLX,cropRLY:I.cropRLY})},t.onFlipImage=function(e,t,n){var a=e.props.actions,o=a.boundProjectActions,r=t.get("imgFlip");o.updateElement({id:t.get("id"),imgFlip:!r})},t.onExpandToFullSheet=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width"),i=o.get("height");S(e,t,0,0,r,i)},t.onExpandToLeftPage=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width")/2,i=o.get("height");S(e,t,0,0,r,i)},t.onExpandToRightPage=function(e,t,n){var a=e.props.data,o=a.page,r=o.get("width")/2,i=o.get("height");S(e,t,o.get("width")/2,0,r,i)},t.onFilter=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.images,s=(o.page,o.ratio),u=(t.get("computed"),r.boundPropertyModalActions),l=i.get(t.get("encImgId")).toJS(),d=l.name.split(".")[0];u.showPropertyModal({isShown:!0,imgWidth:l.width,imgHeight:l.height,element:t.toJS(),ratio:s.workspace,filename:d,onPropertyModalClosed:function(){e.elementControlsNode.needRedrawElementControlsRect()}})},t.onRemoveImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.page,s=r.boundProjectActions,u=r.boundTrackerActions;t.get("type")===w.elementTypes.photo?t.get("encImgId")?(u.addTracker("ClickDeleteImage,SinglePage"),s.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0})):s.deleteElement(t.get("id"),i.get("id")).then(function(){}):s.deleteElement(t.get("id"),i.get("id"))},t.onUploadImage=function(e,t,n){var a=e.props,o=a.data,r=a.actions;(0,I.findDOMNode)(e.fileUpload).click();var i=r.boundImagesActions,s=o.page,u=t.get("pw")*s.get("width"),l=t.get("ph")*s.get("height"),d=t.get("id"),c=t.get("imgRot");i.autoAddPhotoToCanvas({status:!0,elementId:d,elementWidth:u,elementHeight:l,imgRot:c})},t.onBringToFront=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundProjectActions,s=o.elements,u=s.maxBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")+1})},t.onSendToback=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=r.boundProjectActions,s=o.elements,u=s.minBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")-1})},t.onBringForward=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")>t.get("dep")}),l=b(u,t),d=l.minBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")<d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.maxBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")>t.get("dep")})),g=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var f=1;u.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")-f,f++):n-=p.size,g.push({id:e.get("id"),dep:n})})}s.updateElements(g)}},t.onSendBackward=function(e,t,n){var a=e.props,o=a.data,r=a.actions,i=o.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")<t.get("dep")}),l=b(u,t),d=l.maxBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")>d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.minBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")<t.get("dep")})),g=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var f=1;c.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")+f,f++):n+=p.size,g.push({id:e.get("id"),dep:n})})}s.updateElements(g)}},t.onEditText=function(e,t,n){var a=e.props,o=a.actions,r=a.data,i=o.boundTextEditModalActions,s=o.boundPaintedTextModalActions;r.page.get("type")===w.pageTypes.spine||t.get("isSpineText")?s.showPaintedTextModal({element:t}):i.showTextEditModal({element:t})},function(e,t){var n=(0,v.List)([]),a={x:t.get("x"),y:t.get("y"),width:t.get("width"),height:t.get("height")};return e.forEach(function(e){var o={x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height")},r=(0,E.collision)(a,o);e.get("id")!==t.get("id")&&r&&(n=n.push(e))}),n});t.toggleModal=function(e,t,n){var a=e.props.actions,o=a.boundUploadImagesActions;o.toggleUpload(n)},t.onMatchWidestWidth=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.maxBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==o.get("width")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),width:o.get("width")})});i.size&&a.updateElements(i)},t.onMatchNarrowestWidth=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.minBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==o.get("width")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),width:o.get("width")})});i.size&&a.updateElements(i)},t.onMatchTallestHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.maxBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==o.get("height")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),height:o.get("height")})});i.size&&a.updateElements(i)},t.onMatchShortestHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.minBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==o.get("height")}),i=r.map(function(e){return y.default.Map({id:e.get("id"),height:o.get("height")})});i.size&&a.updateElements(i)},t.onMatchFirstSelectWidthAndHeight=function(e,t){var n=e.props.actions,a=n.boundProjectActions,o=t.sort(function(e,t){return e.get("dateSelected")-t.get("dateSelected")}),r=o.first(),i=t.filter(function(e){return e.get("width")!==r.get("width")||e.get("height")!==r.get("height")}),s=i.map(function(e){return y.default.Map({id:e.get("id"),width:r.get("width"),height:r.get("height")})});s.size&&a.updateElements(s)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=s.default.List(),o=t||e.props,r=o.data,i=e.state.elementArray,u=r.page.get("elements"),l=r.settings;return u.forEach(function(t){var r=e.computedElementOptions(o,t,n,l),s=i.find(function(e){return e.get("id")===t.get("id")}),u={isDisabled:!1,isSelected:!1};s&&(u.isDisabled=s.get("isDisabled"),u.isSelected=s.get("isSelected")),a=a.push(t.merge({computed:r},u))}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.changeCurrentElement=t.onPageDroped=t.onPageDragLeave=t.onPageDragMove=t.onPageDragOver=t.componentWillReceiveProps=t.componentWillMount=t.activePage=t.switchPage=t.getOffset=t.stopEvent=void 0;var r=n(19),i=(a(r),n(2)),s=a(i),u=(n(9),n(43)),l=(a(u),n(21),n(30),n(123)),d=t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()};t.getOffset=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}},t.switchPage=function(e,t,n){var a=e.props,o=a.actions,r=a.data,i=o.boundPaginationActions,s=r.page,u=r.index,l=r.pagination;i&&s&&s.get("enabled")&&l.pageId!==s.get("id")&&i.switchPage(u,s.get("id")).then(function(){n&&n()})},t.activePage=function(e){var t=e.props,n=t.actions,a=t.data,o=a.page;n.activePage(o.get("id"))},t.componentWillMount=function(e){var t=e.props.data,n=(t.page,t.ratio);t.paginationSpread,t.size;n.workspace&&e.setState({elementArray:o(e,e.props,n.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data,a=t.data,r=n.paginationSpread,i=a.paginationSpread,u=n.page,d=a.page,c=u.get("elements"),p=d.get("elements"),g=n.ratio.workspace,f=a.ratio.workspace,h=n.pagination.pageId,m=a.pagination.pageId,M=n.activePageId,v=a.activePageId;if(!s.default.is(c,p)||g!==f||!s.default.is(r,i)){var y=o(e,t,f);e.setState({elementArray:y}),(0,l.toDownload)(e,y)}if(h!==m||M!==v){var I=o(e,t,f);e.setState({elementArray:I.map(function(e){return e.set("isSelected",!1)})},function(){(0,l.toDownload)(e)})}},t.onPageDragOver=function(e,t){e.setState({isDragOver:!0}),d(t)},t.onPageDragMove=function(e,t){e.setState({isDragOver:!0}),d(t)},t.onPageDragLeave=function(e,t){e.setState({isDragOver:!1}),d(t)},t.onPageDroped=function(e,t){return null},t.changeCurrentElement=function(e,t){e.setState({currentPointPhotoElementId:t})}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(19),u=o(s),l=n(6),d=o(l),c=n(4),p=o(c),g=n(5),f=o(g),h=n(8),m=o(h),M=n(7),v=o(M),y=n(12),I=o(y),T=n(2),w=o(T),E=n(13),D=o(E),N=n(3),S=o(N),b=n(15),A=n(27),C=n(118),x=n(79),P=(o(x),n(9)),L=n(52),_=a(L),O=n(361),j=a(O),z=n(126),k=a(z),R=n(362),U=a(R),B=n(125),Y=a(B),W=n(360),Q=a(W),F=n(40),G=a(F),H=n(359),Z=a(H),X=n(124),J=a(X),V=n(123),K=n(363),q=(o(K),n(129)),$=o(q),ee=n(131),te=o(ee),ne=n(128),ae=o(ne),oe=n(140),re=o(oe),ie=n(47),se=o(ie),ue=n(63);n(221);var le=function(e){function t(e){(0,p.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));n.computedElementOptions=function(e,t,a,o){return j.computedElementOptions(n,e,t,a,o)},n.doAutoLayout=function(e){return Q.doAutoLayout(n,e)},n.applyTemplate=function(e){return Q.applyTemplate(n,e)},n.getRenderHtml=n.getRenderHtml.bind(n),n.toDownload=function(e,t){return(0,V.toDownload)(n,e,t)},n.addEventsToLayerOfElements=function(){return Z.addEventsToLayerOfElements(n)},n.createNewPhotoFrame=function(){return Z.createNewPhotoFrame(n)},n.setEndPosition=function(e){return Z.setEndPosition(n,e)},n.onMouseUp=function(e,t){return J.onMouseUp(n,e,t)},n.onMouseEnter=function(e,t){return J.onMouseEnter(n,e,t)},n.onMouseLeave=function(e,t){return J.onMouseLeave(n,e,t)},n.onMouseOver=function(e,t,a){return J.onMouseOver(n,e,t,a)},n.onMouseOut=function(e,t,a){return J.onMouseOut(n,e,t,a)},n.onMouseMove=function(e,t){return J.onMouseMove(n,e,t)},n.onClick=function(e,t){return J.onClick(n,e,t)};return n.stopEvent=function(e){return k.stopEvent(e)},n.changeCurrentElement=function(e){return k.changeCurrentElement(n,e)},n.switchPage=function(e){return k.switchPage(n,e)},n.state={elementArray:w.default.List(),downloadData:w.default.Map(),tooltip:{isShown:!1,content:"",elementRect:{},containerHeight:0},snackBar:{isShown:!1,left:0,bottom:0,width:0,templateId:0},containerRect:null,isDragOver:!1,hoverBoxStyle:{},controlRectRot:0,isExchangeImage:!1,exchangeImageThumbnail:null,exchangeThumbnailRect:{},draggingCreatePhotoFrame:{startPosition:{x:0,y:0},endPosition:{x:0,y:0}},originalPhotoLayer:{isShown:!1,x:0,y:0,imageUrl:""},hideSnackBarTimer:null,currentPointPhotoElementId:-1},n.onElementArrayChange=n.onElementArrayChange.bind(n),n.updateElement=n.updateElement.bind(n),n.clearHideSnackBarTimer=n.clearHideSnackBarTimer.bind(n),n.delayHideSnackBar=n.delayHideSnackBar.bind(n),n.updateOffset=n.updateOffset.bind(n),n.delayUpdateOffset=n.delayUpdateOffset.bind(n),n.submitElementArray=n.submitElementArray.bind(n),n.syncControlDegree=n.syncControlDegree.bind(n),n.checkTextElementOverflowPage=n.checkTextElementOverflowPage.bind(n),n.clearSelected=n.clearSelected.bind(n),n.actionbarActions={onEditImage:function(e){return Y.onEditImage(n,e)},onRemoveImage:function(e){return Y.onRemoveImage(n,e)}},window.addEventListener("mousedown",n.clearSelected),window.addEventListener("mousemove",n.setEndPosition),window.addEventListener("mouseup",n.createNewPhotoFrame),window.addEventListener("resize",n.delayUpdateOffset),n.clicksObj={num:0,clickElementId:null},n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){k.componentWillMount(this)}},{key:"componentDidMount",value:function(){this.toDownload(this.state.elementArray),this.addEventsToLayerOfElements(),this.delayUpdateOffset()}},{key:"componentWillReceiveProps",value:function(e){k.componentWillReceiveProps(this,e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.clearSelected),window.removeEventListener("mousemove",this.setEndPosition),window.removeEventListener("mouseup",this.createNewPhotoFrame),window.removeEventListener("resize",this.delayUpdateOffset)}},{key:"updateOffset",value:function(){var e=this.props.data,t=(e.page,e.ratio,e.paginationSpread,e.size,e.parameters,{});this.stage&&(t=this.stage.getStage().getContainer().getBoundingClientRect()),this.elementControlsNode&&this.elementControlsNode.needRedrawElementControlsRect(),this.setState({containerRect:t})}},{key:"delayUpdateOffset",value:function(){var e=this;clearTimeout(this.updateOffsetTimer),this.updateOffsetTimer=setTimeout(function(){e.updateOffset()},500)}},{key:"clearSelected",value:function(){var e=this.state.elementArray,t=e.map(function(e){return e.set("isSelected",!1)});w.default.is(e,t)||this.setState({elementArray:t})}},{key:"onKeyDown",value:function(e){var t=e||window.event;if(t.ctrlKey)switch(t.keyCode){case 90:case 89:U.unSelectElements(this)}}},{key:"syncControlDegree",value:function(e){this.setState({controlRectRot:e})}},{key:"checkTextElementOverflowPage",value:function(e){var t=this.props.data,n=t.page,a=t.size,o=t.summary,r=t.ratio,i=!1;if(this.unselectElements){var s=(0,ue.findKonvaObjectById)(this.unselectElements,e.get("id"));if(s){var u=o.get("isCover"),l=u?a.renderCoverSheetSizeWithoutBleed:a.renderInnerSheetSizeWithoutBleed,d=n.get("bleed"),c=Math.floor(d.get("left")*r.workspace),p=Math.floor(d.get("top")*r.workspace),g=s.getParent(),f=g.getClientRect(),h=Math.floor(f.x),m=Math.floor(f.y),M=Math.floor(f.width),v=Math.floor(f.height);(h<c||m<p||h>l.width-M+c||m>l.height-v+p)&&(i=!0)}}return i}},{key:"getRenderHtml",value:function(e){var t=this,n=this.props,a=n.data,o=(n.t,a.isPreview),r=a.page,i=r.get("id"),s=[],u=this.state.downloadData,l=G.sortElementsByZIndex(e),d={onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove};return l&&l.size&&l.forEach(function(e){var n=e.get("id"),a=u.get(n)||w.default.Map(),r=t.checkTextElementOverflowPage(e),l={key:n,element:e,isPreview:o,actions:d,imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),isShowTextNotFit:a.get("isShowTextNotFit"),isShowTextOverflow:r,tryToDownload:function(){return t.toDownload(w.default.List([e]))}};switch(e.get("type")){case P.elementTypes.photo:var c=!0,p={key:n,element:e,isPreview:o,pageId:i,imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),actions:(0,I.default)({},d,{onElementArrayChange:t.onElementArrayChange,updateElement:t.updateElement,changeCurrentElement:t.changeCurrentElement}),tryToDownload:function(){return t.toDownload(w.default.List([e]),c)}};s.push(S.default.createElement($.default,p));break;case P.elementTypes.text:if(o&&!e.get("text"))return;s.push(S.default.createElement(te.default,l));break;case P.elementTypes.calendar:var g={key:n,element:e,isPreview:o,actions:{},imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),tryToDownload:function(){return t.toDownload(w.default.List([e]))}};s.push(S.default.createElement(ae.default,g))}}),s}},{key:"submitElementArray",value:function(e,t){var n=this.props,a=n.data,o=n.actions,r=a.ratio,i=a.page,s=a.paginationSpread,u=o.boundProjectActions,l=s.get("summary"),d=l.get("isSupportPaintedText"),c=l.get("isCover"),p=(i.get("width")*r.workspace,i.get("height")*r.workspace,i.get("bleed")),g=(p.get("left")*r.workspace,p.get("right")*r.workspace,p.get("top")*r.workspace,p.get("bottom")*r.workspace,this.elementControlsNode.state),f=g.x,h=g.y,m=g.width,M=g.height,v=g.degree,y=(0,C.transform)({x:f,y:h,width:m,height:M},v),I=(y.left,y.top,y.left+y.width,y.top+y.height,w.default.List()),T=!1;e.forEach(function(e){var n=e.get("computed"),a=n.get("width")/r.workspace,o=n.get("height")/r.workspace,i=n.get("left")/r.workspace,s=n.get("top")/r.workspace,u=w.default.Map({id:e.get("id")});switch(t){case"move":u=u.merge({x:i,y:s});break;case"resize":e.get("type")===P.elementTypes.paintedText&&c&&d||(u=u.merge({x:i,y:s,width:a,height:o}));break;case"rotate":e.get("type")===P.elementTypes.paintedText&&c&&d||(u=u.merge({rot:Math.round(e.get("rot")),x:i,y:s}));break;case"editImage":u=u.merge({encImgId:e.get("encImgId")})}u&&(I=I.push(u))}),I.size&&(u.updateElements(I),T&&this.elementControlsNode.needRedrawElementControlsRect())}},{key:"onElementArrayChange",value:function(e,t){var n=this.state.elementArray;this.setState({elementArray:n.map(function(t){var n=t.get("id"),a=e.find(function(e){return e.get("id")===n});return a?a:t})},function(){t&&t()})}},{key:"updateElement",value:function(e){var t=this.props.actions,n=t.boundProjectActions;delete e.computed,n.updateElement(e)}},{key:"clearHideSnackBarTimer",value:function(){var e=this.state.hideSnackBarTimer;window.clearTimeout(e)}},{key:"delayHideSnackBar",value:function(){var e=this,t=window.setTimeout(function(){e.state&&e.setState({snackBar:(0,u.default)({},e.state.snackBar,{isShown:!1})})},30);this.setState({hideSnackBarTimer:t})}},{key:"renderBackgroundTextElement",value:function(){var e=this,t=this.props,n=t.data,a=t.t,o=n.isPreview,r=n.page,i=(n.summary,r.get("enabled"));if(!o){var s=i?a("ENABLED_BACKGROUND_TIP"):"",u=_.defaultTextColor;if(s){var l=G.getBackgroundElementOptions(this,s,u);return l.ref=function(t){e.backgroundTextNode=t},S.default.createElement(A.Text,l)}}return null}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.actions,o=(t.t,this.state),r=o.isDragOver,s=(o.hoverBoxStyle,o.controlRectRot,o.downloadData),u=(o.isExchangeImage,o.exchangeThumbnailRect,n.page),l=n.ratio,d=n.summary,c=(n.settings,n.specData,n.isPreview,n.isBookCoverInnerWarp,n.innerEffectValue,a.boundImagesActions),p=u.get("enabled"),g=u.get("id"),f=d.get("isCover"),h=(u.get("isActive"),(0,D.default)("book-page",{enabled:p,disabled:!p,cover:f,inner:!f})),m={width:Math.round(u.get("width")*l.workspace),height:Math.round(u.get("height")*l.workspace)},M=this.state,v=M.elementArray,y=M.containerRect,I=(M.tooltip,M.snackBar),T=M.draggingCreatePhotoFrame,E=(M.originalPhotoLayer,M.currentPointPhotoElementId),N=w.default.List(),b=w.default.List();v.forEach(function(e){e.get("isSelected")?N=N.push(e):b=b.push(e)});var C=v.find(function(e){return e.get("id")===E}),x=v,L=!1;this.elementControlsNode&&this.elementControlsNode.isRotating&&(x=b,L=!0);var _=null,O=null,j=-1;1===N.size&&(O=N.get(0),j=O.get("id")),N.size&&N.getIn([0,"encImgId"])&&(_=s.getIn([j,"imageObj"]));var z=s.get(j)||w.default.Map(),k=((0,D.default)("box",{hover:r&&u.get("type")!==P.pageTypes.spine}),Boolean(N.size),O&&this.checkTextElementOverflowPage(O)),R={ref:function(t){return e.stage=t},width:m.width,height:m.height,className:h,onMouseDown:this.switchPage};({selectedElementArray:N,containerRect:y,ratio:l,submitElementArray:this.submitElementArray,onElementArrayChange:this.onElementArrayChange,minContainerWidth:Math.floor(360*l.workspace),selectedElements:this.selectedElements,showGuideLineIfNear:this.showGuideLineIfNear,hideAllGuideLines:this.hideAllGuideLines,snapToGuideLine:this.snapToGuideLine,syncControlDegree:this.syncControlDegree,actionbarActions:this.actionbarActions,restrictResize:this.restrictResize,checkSpineEdge:this.checkSpineEdge,onExchangeDragStart:function(t){e.onExchangeDragStart(g,j,_,t)},onExchangeDragMove:this.onExchangeDragMove,onExchangeDragEnd:this.onExchangeDragEnd,ref:function(t){return e.elementControlsNode=t},isShowTextNotFit:z.get("isShowTextNotFit"),isShowTextOverflow:k,downloadStatus:z.get("downloadStatus"),toDownload:this.toDownload,clicksObj:this.clicksObj});a.activePage&&(R.onMouseUp=this.activePage);var U=C&&C.get("encImgId"),B=(0,i.default)({},I,{isShowEdit:U,isShowDelete:U,actions:{onMouseEnter:this.clearHideSnackBarTimer,onMouseLeave:this.delayHideSnackBar,onEditImage:function(){e.actionbarActions.onEditImage(C)},onSwitchLayout:this.actionbarActions.onSwitchLayout,onDelete:function(){e.actionbarActions.onRemoveImage(C)}},element:C}),Y=T.startPosition,W=T.endPosition,Q={fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};return Y&&W&&(Q.x=Y.x,Q.y=Y.y,Q.width=W.x-Y.x,Q.height=W.y-Y.y),S.default.createElement("div",{className:"stage-container"},S.default.createElement(A.Stage,R,S.default.createElement(A.Layer,{ref:function(t){return e.layerNodeOfElements=t}},S.default.createElement(A.Group,{ref:function(t){return e.unselectElements=t}},this.getRenderHtml(x)),S.default.createElement(A.Group,{
ref:function(t){return e.selectedElements=t},visible:L},this.getRenderHtml(N)),v.size?null:this.renderBackgroundTextElement())),p?S.default.createElement(se.default,{className:"hide",boundUploadedImagesActions:c,toggleModal:this.toggleModal,ref:function(t){return e.fileUpload=t}}):null,C?S.default.createElement(re.default,B):null)}}]),t}(N.Component);le.propTypes={},le.defaultProps={},t.default=(0,b.translate)("BookPage")(le)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(6),u=o(s),l=n(4),d=o(l),c=n(5),p=o(c),g=n(8),f=o(g),h=n(7),m=o(h),M=n(2),v=o(M),y=n(3),I=o(y),T=n(27),w=n(9),E=n(40),D=a(E),N=n(82),S=o(N),b=n(80),A=o(b),C=function(e){function t(e){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,a=e.element;return!v.default.is(n,a)||this.props.imageObj!==e.imageObj||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,a=(t.isPreview,t.imageObj),o=(t.actions,t.tryToDownload),r=t.isScreenshot,s=D.getRenderElementOptions(n),u=s.imgUrl,l=s.offset,d=s.x,c=s.y,p=s.width,g=s.height,f=s.zIndex,h=Boolean(u),m=n.get("id"),M={x:d,y:c,width:p,height:g,offset:l,zIndex:f,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element"},v={x:0,y:0,width:p,height:g},y={width:p,height:g},E={width:p,height:g,tryToDownload:o},N=(0,i.default)({},v,{image:a,id:m});return I.default.createElement(T.Group,M,h?I.default.createElement(T.Image,N):null,this.props.downloadStatus!==w.downloadStatus.DOWNLOADING||r?null:I.default.createElement(S.default,y),this.props.downloadStatus!==w.downloadStatus.DOWNLOAD_FAIL||r?null:I.default.createElement(A.default,E))}}]),t}(y.Component);C.propTypes={element:y.PropTypes.instanceOf(v.default.Map),imageObj:y.PropTypes.object,isShowTextNotFit:y.PropTypes.bool,isShowTextOverflow:y.PropTypes.bool,downloadStatus:y.PropTypes.number},t.default=C},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(6),u=o(s),l=n(4),d=o(l),c=n(5),p=o(c),g=n(8),f=o(g),h=n(7),m=o(h),M=n(3),v=o(M),y=n(2),I=o(y),T=n(15),w=n(27),E=n(130),D=o(E),N=n(9),S=n(40),b=a(S),A=n(82),C=o(A),x=n(80),P=o(x),L=function(e){function t(e){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,a=e.element;return!I.default.is(n,a)||this.props.imageObj!==e.imageObj||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,a=t.imageObj,o=t.isPreview,r=(t.t,t.actions),s=t.tryToDownload,u=t.isBookCoverInnerWarp,l=t.isScreenshot,d=b.getRenderElementOptions(n),c=d.imgUrl,p=d.offset,g=d.x,f=d.y,h=d.width,m=d.height,M=d.zIndex,y=Boolean(c),I=n.get("isSelected"),T=n.get("id"),E=n.getIn(["computed","border"]),S=E?E.get("size"):0,A={x:g,y:f,width:h,height:m,offset:p,zIndex:M,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element",onMouseEnter:function(e){r.onMouseEnter(n,e)},onMouseDown:function(t){e.isSelecting=!0},onMouseUp:function(t){e.isSelecting&&(e.isSelecting=!1,r.onMouseUp(n,t))},onMouseOver:function(t){r.onMouseOver(e.elementGroupNode,n,t)},onMouseOut:function(t){r.onMouseOut(e.elementGroupNode,t)},onMouseMove:function(e){r.onMouseMove(n,e)},onMouseLeave:function(e){r.onMouseLeave(n,e)}},x={x:0,y:0,width:h,height:m},L=(0,i.default)({},x,{image:a,id:T}),_=((0,i.default)({},x,{stroke:"#4CC1FC",strokeWidth:0}),{x:S/2,y:S/2,width:h-S,height:m-S,id:N.shapeType.elementBorder});S&&(_.stroke=E.get("color"),_.strokeWidth=S);var O=(0,i.default)({},x,{fill:"#f6f6f6",stroke:I?"#4CC1FC":"#dfdfdf",strokeWidth:1,id:T}),j={width:h-S,height:m-S},z={width:h-S,height:m-S,tryToDownload:s},k=n.getIn(["computed","scale"]),R=k>N.RESIZE_LIMIT;return v.default.createElement(w.Group,A,y&&this.props.downloadStatus!==N.downloadStatus.DOWNLOADING?v.default.createElement(w.Image,L):null,y?v.default.createElement(w.Rect,_):null,y||o?null:v.default.createElement(w.Rect,O),!y||o||!R||u||l?null:v.default.createElement(D.default,{parentWidth:h}),this.props.downloadStatus!==N.downloadStatus.DOWNLOADING||l?null:v.default.createElement(C.default,j),this.props.downloadStatus!==N.downloadStatus.DOWNLOAD_FAIL||l?null:v.default.createElement(P.default,z))}}]),t}(M.Component);L.propTypes={element:M.PropTypes.instanceOf(I.default.Map).isRequired,isPreview:M.PropTypes.bool,imageObj:M.PropTypes.object,downloadStatus:M.PropTypes.number},t.default=(0,T.translate)("PhotoElement")(L)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(133),M=a(m),v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.parentWidth,t="Photo has low resolution and may look poor in print",n=[];n.push(t);var a={parentWidth:e,title:n.join("\n")};return h.default.createElement(M.default,a)}}]),t}(f.Component);t.default=v},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(6),u=o(s),l=n(4),d=o(l),c=n(5),p=o(c),g=n(8),f=o(g),h=n(7),m=o(h),M=n(3),v=o(M),y=n(2),I=o(y),T=n(27),w=n(132),E=o(w),D=n(9),N=n(40),S=a(N),b=n(82),A=o(b),C=n(80),x=o(C),P=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,a=e.element;return!I.default.is(n,a)||this.props.imageObj!==e.imageObj||this.props.isShowTextNotFit!==e.isShowTextNotFit||this.props.isShowTextOverflow!==e.isShowTextOverflow||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,a=t.isPreview,o=t.imageObj,r=t.isShowTextNotFit,s=t.isShowTextOverflow,u=t.actions,l=t.tryToDownload,d=t.isScreenshot,c=S.getRenderElementOptions(n),p=c.imgUrl,g=c.offset,f=c.x,h=c.y,m=c.width,M=c.height,y=c.zIndex,I=Boolean(p),w=n.get("isSelected"),N=n.get("id"),b={x:f,y:h,width:m,height:M,offset:g,zIndex:y,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element",onMouseDown:function(t){e.isSelecting=!0},onMouseUp:function(t){e.isSelecting&&(e.isSelecting=!1,u.onMouseUp(n,t))},onMouseEnter:function(e){u.onMouseEnter(n,e)},onMouseLeave:function(e){u.onMouseLeave(n,e)},onMouseOver:function(t){u.onMouseOver(e.elementGroupNode,n,t)},onMouseOut:function(t){u.onMouseOut(e.elementGroupNode,t)},onMouseMove:function(e){u.onMouseMove(n,e)}},C={x:0,y:0,width:m,height:M},P={width:m,height:M},L={width:m,height:M,tryToDownload:l},_=(0,i.default)({},C,{image:o,id:N}),O=(0,i.default)({},C,{stroke:"#4CC1FC",strokeWidth:1}),j=(0,i.default)({},C,{dash:[4,4],strokeWidth:1,id:N}),z=(0,i.default)({},C,{strokeWidth:1,stroke:"#fff"});w?j.stroke="#4CC1FC":j.stroke="#000";var k={parentHeight:M,isShowTextNotFit:r,isShowTextOverflow:s};return v.default.createElement(T.Group,b,w&&I?v.default.createElement(T.Rect,O):null,I?v.default.createElement(T.Image,_):null,I||a?null:v.default.createElement(T.Rect,z),I||a?null:v.default.createElement(T.Rect,j),!I||a||!r&&!s||d?null:v.default.createElement(E.default,k),this.props.downloadStatus!==D.downloadStatus.DOWNLOADING||d?null:v.default.createElement(A.default,P),this.props.downloadStatus!==D.downloadStatus.DOWNLOAD_FAIL||d?null:v.default.createElement(x.default,L))}}]),t}(M.Component);P.propTypes={element:M.PropTypes.instanceOf(I.default.Map),isPreview:M.PropTypes.bool,imageObj:M.PropTypes.object,isShowTextNotFit:M.PropTypes.bool,isShowTextOverflow:M.PropTypes.bool,downloadStatus:M.PropTypes.number},t.default=P},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(133),M=a(m),v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShowTextNotFit,n=e.isShowTextOverflow,a=e.parentHeight,o="Text does not fit",r="Text is too close to edge and may not print well",i=[];t&&i.push(o),n&&i.push(r);var s={parentHeight:a,title:i.join("\n")};return h.default.createElement(M.default,s)}}]),t}(f.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(27),M=n(556),v=a(M),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=new window.Image;t.onload=function(){e.setState({imageObj:t})},t.src=v.default}},{key:"onMouseEnter",value:function(){var e=this.props.title;this.imageNode.getStage().content.title=e}},{key:"onMouseLeave",value:function(){this.imageNode.getStage().content.title=""}},{key:"render",value:function(){var e=this,t=this.props,n=t.parentWidth,a=t.parentHeight,o=this.state.imageObj,r={ref:function(t){return e.imageNode=t},image:o,width:18,height:18,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave};return n&&(r.x=n-12-18,r.y=20),a&&(r.x=8,r.y=a-8-18),h.default.createElement(m.Image,r)}}]),t}(f.Component);y.propTypes={parentHeight:f.PropTypes.number,parentWidth:f.PropTypes.number,title:f.PropTypes.string.isRequired},t.default=y},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(12),v=o(M),y=n(13),I=o(y),T=n(15),w=n(3),E=o(w);n(225);var D=n(60),N=n(9),S=n(127),b=o(S),A=n(135),C=o(A),x=n(137),P=o(x),L=n(368),_=a(L),O=n(367),j=a(O),z=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.getPageElements=function(e,t){return _.getPageElements(n,e,t)},n.computedCoverSheet=function(e,t,n,a,o,r,i,s){return _.computedCoverSheet(e,t,n,a,o,r,i,s)},n.startExchangeImage=function(){return j.startExchangeImage(n)},n.stopExchangeImage=function(){return j.stopExchangeImage(n)},n.activePage=n.activePage.bind(n),n.switchSheet=n.switchSheet.bind(n),n.state={isExchangeImage:!1,activePageId:null},n.stopDragEvent=function(e){var t=e||window.event;t.stopPropagation(),t.preventDefault()},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"activePage",value:function(e){this.setState({activePageId:e})}},{key:"componentDidUpdate",value:function(){var e=this.props.data,t=e.pagination,n=e.paginationSpread,a=e.shouldSwitchSheet,o=void 0!==a&&a,r=n.get("summary"),i=r.get("sheetIndex");t.sheetIndex===i&&o&&(this.componentRef.scrollIntoViewIfNeeded?this.componentRef.scrollIntoViewIfNeeded():this.componentRef.scrollIntoView())}},{key:"switchSheet",value:function(){var e=this.props.data,t=e.onNavPagesSwitchSheet,n=e.shouldSwitchSheet,a=void 0!==n&&n;a&&t(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.data,o=n.boundTemplateActions,r=n.boundPaginationActions,i=n.boundProjectActions,s=n.boundImageEditModalActions,u=n.boundImagesActions,l=n.boundUploadImagesActions,d=n.boundTextEditModalActions,c=(n.boundPropertyModalActions,n.boundTrackerActions),p=(n.boundNotificationActions,n.switchSheet),g=n.setMouseHoverDomNode,f=a.thumbnail,h=a.urls,M=a.size,y=a.ratios,T=a.styles,w=(a.pageNumberStyle,a.variables),S=a.template,A=a.pagination,x=a.paginationSpread,L=a.settings,_=a.parameters,O=(a.specData,a.isShowSimplePageNumber,a.shouldSwitchSheet,a.allImages),j=a.userId,z=a.project,k=a.isPreview,R=a.capability,U=a.allPageSheetIndex,B=this.state,Y=(B.isExchangeImage,B.activePageId,x.get("summary")),W=x.get("pages"),Q=(x.get("elements"),x.get("images")),F=(0,I.default)("book-cover item"),G=(0,m.default)(L,"spec.product"),H=(0,m.default)(L,"spec.size"),Z=f?"thumbnail_cover":"cover",X="./assets/"+G+"/"+H+"/"+Z+".png?randow="+(0,D.formatDate)(new Date,""),J=(0,v.default)({},{},{width:(0,m.default)(M,"renderCoverSize.width")+"px",height:(0,m.default)(M,"renderCoverSize.height")+"px",cursor:"default",marginBottom:G===N.productTypes.DC?"46px":"40px"},T),V=(0,v.default)({},{},{width:(0,m.default)(M,"renderCoverSize.width")+"px",height:(0,m.default)(M,"renderCoverSize.height")+"px",cursor:"default"},T),K={width:(0,m.default)(M,"renderCoverSize.width")+"px",height:(0,m.default)(M,"renderCoverSize.height")+"px",userSelect:"none"},q={width:(0,m.default)(M,"renderCoverSize.width")+"px",height:(0,m.default)(M,"renderCoverSize.height")+"px"},$={boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundTrackerActions:c,boundTemplateActions:o,switchSheet:p,setMouseHoverDomNode:g},ee={workspace:f?y.coverWorkspaceForArrangePages:y.coverWorkspace},te=[];W&&W.size&&W.forEach(function(e,t){var n={isPreview:k,urls:h,summary:Y,page:e,images:Q,elements:e.get("elements"),pagination:A,ratio:ee,index:t,settings:L,template:S,paginationSpread:x,parameters:_,size:(0,v.default)(M),variables:w,allImages:O,userId:j,project:z,capability:R,allPageSheetIndex:U},a={width:(0,m.default)(M,"renderCoverSheetSizeWithoutBleed.width")+"px",height:(0,m.default)(M,"renderCoverSheetSizeWithoutBleed.height")+"px",top:(0,m.default)(M,"renderCoverSheetSizeWithoutBleed.top")+"px",left:(0,m.default)(M,"renderCoverSheetSizeWithoutBleed.left")+"px"},o={width:(0,m.default)(M,"renderCoverSheetSize.width")+"px",height:(0,m.default)(M,"renderCoverSheetSize.height")+"px",top:(0,m.default)(M,"renderCoverSheetSize.top")+"px",left:(0,m.default)(M,"renderCoverSheetSize.left")+"px",userSelect:"none",background:"white"},r=(0,I.default)("cover-sheet",{"overflow-h":!1});f?te.push(E.default.createElement("div",{key:e.get("id"),className:r,style:a},E.default.createElement("div",{className:"cover-sheet-with-bleed",style:o},E.default.createElement(C.default,{actions:$,data:n})))):te.push(E.default.createElement("div",{key:e.get("id"),className:r,style:a},E.default.createElement("div",{className:"cover-sheet-with-bleed",style:o},E.default.createElement(b.default,{actions:$,data:n}))))});var ne={pageNumberData:{month:Y&&Y.get("month"),year:Y&&Y.get("year"),sheetIndex:Y&&Y.get("sheetIndex")}};return E.default.createElement("div",{key:"cover",className:F,style:J,draggable:"false",onDragStart:this.stopDragEvent,onClick:this.switchSheet,ref:function(t){e.componentRef=t}},f&&G!==N.productTypes.LC?E.default.createElement(P.default,{data:ne}):null,E.default.createElement("div",{className:"cover-overflow-container",style:V},E.default.createElement("div",{className:"cover-effect",style:K,draggable:"false",onDragStart:this.stopDragEvent},E.default.createElement("img",{className:"effect-img",src:X,style:q,draggable:"false",onDragStart:this.stopDragEvent})),te),f?null:E.default.createElement("div",{className:"cover-sign"},"Cover"))}}]),t}(w.Component);z.propTypes={},z.defaultProps={},t.default=(0,T.translate)("BookCover")(z)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(6),u=o(s),l=n(4),d=o(l),c=n(5),p=o(c),g=n(8),f=o(g),h=n(7),m=o(h),M=n(3),v=o(M),y=n(34),I=o(y),T=n(15),w=n(2),E=o(w),D=n(13),N=o(D),S=n(140),b=o(S),A=n(9);n(226);var C=n(400),x=o(C),P=n(416),L=o(P),_=n(375),O=o(_),j=n(74),z=o(j),k=n(107),R=o(k),U=n(47),B=o(U),Y=n(30),W=n(369),Q=a(W),F=n(370),G=a(F),H=n(371),Z=a(H),X=function(e){function t(e){(0,d.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));n.computedElementOptions=function(e,t){return Q.computedElementOptions(n,e,t)},n.getRenderHtml=n.getRenderHtml.bind(n),n.elementRadians={};var a=n.props.actions,o=a.setMouseHoverDomNode;a.actionbarActions;return n.state={snackBar:{isShown:!1,left:0,top:0,width:"100%",templateId:0,zIndex:200},elementArray:E.default.List(),photoActions:{handleMouseOver:function(e,t){var n=e.element;n.get("type")===A.elementTypes.photo&&o(t.target)},handleMouseLeave:function(e){var t=e.element;t.get("type")===A.elementTypes.photo&&o(null)},handleClick:function(e,t){var a=e.element;G.onEditImage(n,a)},removeImage:function(e){G.onRemoveImage(n,e)}},textActions:{handleClick:function(e,t){var a=e.element;G.onEditText(n,a)}},hoverElementId:null},n.onDragEnd=n.onDragEnd.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onMouseEnter=function(){return Z.onMouseEnter(n)},n.onMouseLeave=function(){return Z.onMouseLeave(n)},n.onReplaceImage=function(){return Z.onReplaceImage(n)},n.uploadFileClicked=function(){return Z.uploadFileClicked(n)},n.onSnackBarEditImage=function(){return Z.onSnackBarEditImage(n)},n.toggleModal=function(e,t){return Z.toggleModal(n,e,t)},n}return(0,m.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){G.componentWillMount(this)}},{key:"componentWillReceiveProps",value:function(e){G.componentWillReceiveProps(this,e)}},{key:"onDragStart",value:function(e,t,n){if(!window.__isDragPage){var a=I.default.findDOMNode(this.refs[t]),o=(0,Y.cloneDragNode)(a,A.dragElementSelector.photo);(0,Y.setTransferDragNode)(n,o),(0,Y.setTransferData)(n,{pageId:e,elementId:t}),n.stopPropagation(),window.__dragElementId=t}}},{key:"onDragEnd",value:function(e){var t=document.getElementById(A.dragElementSelector.photo);t&&t.parentNode.removeChild(t),delete window.__dragElementId,this.setState({hoverElementId:null})}},{key:"onDragOver",value:function(e,t){if(!window.__isDragPage){var n=window.__dragElementId;if(n&&n===e)return;this.setState({hoverElementId:e}),t.stopPropagation()}}},{key:"onDragLeave",value:function(e){e===this.state.hoverElementId&&this.setState({hoverElementId:null})}},{key:"onDrop",value:function(e,t,n){var a=this.props.actions,o=a.boundProjectActions,r=a.boundTrackerActions,i=n||window.event,s=(0,Y.getTransferData)(i);if(this.setState({hoverElementId:null}),i.preventDefault(),s&&s.elementId&&t!==s.elementId)i.stopPropagation(),r.addTracker("SwapImages"),o.swapPhotoElement(s.pageId,s.elementId,e,t);else if(s instanceof Array&&s.length){var u=s[0],l={id:t,encImgId:u.encImgId,imageid:u.imageid,imgRot:0,style:{effectId:0,opacity:100},imgFlip:!1};o.updateElement(l)}}},{key:"renderElement",value:function(e,t){var n=this.props,a=(n.actions,n.data),o=a.summary,r=a.page,i=a.ratio,s=a.paginationSpread,u=a.settings,l=(a.parameters,a.size,a.specData,a.materials,a.isRenderText),d=void 0===l||l,c=a.ignoreEmpty,p=void 0!==c&&c,g=r.get("id"),f=e.get("id"),h=this.state.hoverElementId,m=h&&h===f;switch(e.get("type")){case A.elementTypes.photo:if(!e.get("encImgId")&&p)return null;var M=this.state.photoActions,y={summary:o,element:e,ratio:i,page:r,paginationSpread:s,isHover:m,product:u.spec.product},I=!e.get("encImgId");return v.default.createElement(z.default,{key:e.get("id"),onDragStarted:this.onDragStart.bind(this,g,f),onDragEnded:this.onDragEnd,onDragOvered:this.onDragOver.bind(this,f),onDragLeaved:this.onDragLeave.bind(this,f),isDisabled:I},v.default.createElement(R.default,{onDroped:this.onDrop.bind(this,g,f)},v.default.createElement(x.default,{key:t,actions:M,data:y,ref:e.get("id")})));case A.elementTypes.text:if(!e.get("text")&&p||!d)return null;var T=this.state.textActions,w={element:e,ratio:i,page:r};return v.default.createElement(L.default,{key:t,actions:T,data:w});case A.elementTypes.calendar:if(!e.get("encImgId")&&p)return null;var E={},D={summary:o,element:e,ratio:i,page:r,paginationSpread:s,isHover:m};return v.default.createElement(O.default,{key:t,actions:E,data:D,ref:e.get("id")});default:return null}}},{key:"getRenderHtml",value:function(){var e=this,t=this.state,n=t.elementArray,a=(t.actionBarData,this.props.data),o=a.summary,r=(a.page,a.ratio,[]);return n.size&&n.forEach(function(t,n){t.get("type")===A.elementTypes.cameo&&"none"===o.get("cameo")||r.push(e.renderElement(t,n))}),r}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.actions,o=a.boundImagesActions,r=n.page,s=n.ratio,u=n.summary,l=(n.paginationSpread,n.size,r.get("enabled"),u.get("isCover"),r.get("offset"),{position:"absolute",top:0,left:0,width:Math.round(r.get("width")*s.workspace)+"px",height:Math.round(r.get("height")*s.workspace)+"px"}),d=(0,N.default)("book-page-thumbnail"),c=this.state.snackBar,p=(0,i.default)({},c,{isShowReplace:!0,isShowEdit:!0,isShowDelete:!1,actions:{onMouseEnter:function(){},onMouseLeave:function(){},onEditImage:this.onSnackBarEditImage,onReplaceImage:this.onReplaceImage},element:null});return v.default.createElement("div",{ref:"bookPage",className:d,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,style:l},this.getRenderHtml(),v.default.createElement(b.default,p),v.default.createElement(B.default,{className:"hide",boundUploadedImagesActions:o,toggleModal:this.toggleModal,ref:function(t){return e.fileUpload=t}}))}}]),t}(M.Component);X.propTypes={},X.defaultProps={},t.default=(0,T.translate)("BookPage")(X)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(12),v=o(M),y=n(3),I=o(y),T=n(15),w=n(13),E=o(w),D=n(60),N=n(74),S=o(N),b=n(107),A=o(b);n(227);var C=n(127),x=o(C),P=n(135),L=o(P),_=n(137),O=o(_),j=n(9),z=n(373),k=a(z),R=n(372),U=a(R),B=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.computedInnerSheet=function(e,t,n,a,o){return k.computedInnerSheet(e,t,n,a,o)},n.onDragPageStarted=function(e,t,a){return k.onDragPageStarted(n,e,t,a)},n.onDragPageEnd=function(e){return k.onDragPageEnd(n,e)},n.onDragPageTitleStarted=function(e,t,a){return k.onDragPageTitleStarted(n,e,t,a)},n.onDragPageTitleEnd=function(e,t,a){return k.onDragPageTitleEnd(n,e,t,a)},n.onDropPage=function(e,t){return k.onDropPage(n,e,t)},n.onDragLeaved=function(e,t){return k.onDragLeaved(n,e,t)},n.onDragOvered=function(e,t){return k.onDragOvered(n,e,t)},n.startExchangeImage=function(){return U.startExchangeImage(n)},n.stopExchangeImage=function(){return U.stopExchangeImage(n)},n.state={dropPageId:null,dragPageId:null,isExchangeImage:!1},n.switchSheet=n.switchSheet.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.data,t=e.pagination,n=e.paginationSpread,a=e.shouldSwitchSheet,o=void 0!==a&&a,r=n.get("summary"),i=r.get("sheetIndex");t.sheetIndex===i&&o&&(this.componentRef.scrollIntoViewIfNeeded?this.componentRef.scrollIntoViewIfNeeded():this.componentRef.scrollIntoView())}},{key:"switchSheet",value:function(){var e=this.props.data,t=e.onNavPagesSwitchSheet,n=e.shouldSwitchSheet;n&&t(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.actions,o=a.boundTemplateActions,r=a.boundPaginationActions,i=a.boundProjectActions,s=a.boundImageEditModalActions,u=a.boundImagesActions,l=a.boundUploadImagesActions,d=a.boundTextEditModalActions,c=a.boundPropertyModalActions,p=a.boundTrackerActions,g=a.boundNotificationActions,f=a.setMouseHoverDomNode,h=n.urls,M=n.size,y=n.settings,T=n.ratios,w=n.variables,N=n.styles,b=n.template,C=n.pagination,P=n.paginationSpread,_=n.index,z=n.thumbnail,R=n.isPreview,U=n.parameters,B=n.specData,Y=(n.isShowSimplePageNumber,n.shouldSwitchSheet,n.isNavpages),W=void 0!==Y&&Y,Q=n.capability,F=n.allPageSheetIndex,G=n.isLandscapeShape,H=this.state.isExchangeImage,Z=P.get("summary"),X=P.get("pages"),J=P.get("images"),V=Z.get("sheetIndex"),K=(0,E.default)("book-sheet item"),q=(0,m.default)(y,"spec.product"),$=(0,m.default)(y,"spec.size"),ee=G?"_landscape":"",te=z?"thumbnail_inner"+ee:"inner"+ee,ne="./assets/"+q+"/"+$+"/"+te+".png?randow="+(0,D.formatDate)(new Date,""),ae={workspace:z?T.innerWorkspaceForArrangePages:T.innerWorkspace},oe=(0,v.default)({},{width:(0,m.default)(M,"renderInnerSize.width")+"px",height:(0,m.default)(M,"renderInnerSize.height")+"px",cursor:W?"pointer":"default",marginBottom:q===j.productTypes.DC?"46px":"40px"},N),re=(0,v.default)({},{width:(0,m.default)(M,"renderInnerSize.width")+"px",height:(0,m.default)(M,"renderInnerSize.height")+"px",top:(parseInt(oe.height)-(0,m.default)(M,"renderInnerSize.height"))/2+"px",left:(parseInt(oe.width)-(0,m.default)(M,"renderInnerSize.width"))/2+"px",cursor:W?"pointer":"default"}),ie={width:(0,m.default)(M,"renderInnerSize.width")+"px",height:(0,m.default)(M,"renderInnerSize.height")+"px",pointerEvents:"none",overflow:"hidden"},se={boundTemplateActions:o,boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundPropertyModalActions:c,boundTrackerActions:p,boundNotificationActions:g,startExchangeImage:this.startExchangeImage,stopExchangeImage:this.stopExchangeImage,setMouseHoverDomNode:f},ue=!1,le=C.pageId,de=[];X.size&&X.forEach(function(t,n){ue=Z.get("isCover");var a=t.get("isPageDraggable"),o=t.get("isPageDropable"),i={urls:h,size:M,summary:Z,page:t,elements:t.get("elements"),template:b,pagination:C,ratio:ae,paginationSpread:P,index:n,images:J,settings:y,isPreview:R,parameters:U,variables:w,specData:B,isExchangeImage:H,capability:Q,allPageSheetIndex:F},s=k.getRefName(V,n);if(ue)z?de.push(I.default.createElement(L.default,{key:t.get("id"),actions:se,data:i})):de.push(I.default.createElement(x.default,{key:t.get("id"),actions:se,data:i}));else{var u=e.computedInnerSheet(T.innerWorkspace,M,X,n,G);i=(0,v.default)({},i,{size:u});var l={width:u.renderInnerSheetSizeWithoutBleed.width+"px",height:u.renderInnerSheetSizeWithoutBleed.height+"px",top:u.renderInnerSheetSizeWithoutBleed.top+"px",left:u.renderInnerSheetSizeWithoutBleed.left+"px"},d={width:u.renderInnerSheetSize.width+"px",height:u.renderInnerSheetSize.height+"px",top:u.renderInnerSheetSize.top+"px",left:u.renderInnerSheetSize.left+"px",background:"white"},c=({width:l.width,height:l.height,top:0,left:0},{height:ie.height,top:0,left:0===n?u.renderInnerSheetSizeWithoutBleed.left-0+"px":u.renderInnerSheetSizeWithoutBleed.left+"px"});({style:c,isShown:e.state.dropPageId===t.get("id")});if(z){var p=I.default.createElement(L.default,{ref:s,actions:se,data:i}),g={isShowDropActive:e.state.isShowDropActive};de.push(I.default.createElement("div",{key:t.get("id")},I.default.createElement("div",{key:t.get("id"),className:"inner-sheet",style:l},I.default.createElement("div",{className:"inner-sheet-with-bleed",style:d},a?I.default.createElement(S.default,{onDragStarted:e.onDragPageStarted.bind(e,t,s),onDragEnded:e.onDragPageEnd.bind(e)},o?I.default.createElement(A.default,{onDroped:e.onDropPage.bind(e,t),onDragOvered:e.onDragOvered.bind(e,t),onDragLeaved:e.onDragLeaved.bind(e,t),data:g},p):p):o?I.default.createElement(A.default,{onDroped:e.onDropPage.bind(e,t),onDragOvered:e.onDragOvered.bind(e,t),onDragLeaved:e.onDragLeaved.bind(e,t),data:g},p):p))))}else de.push(I.default.createElement("div",{key:t.get("id"),className:"inner-sheet",style:l},I.default.createElement("div",{className:"inner-sheet-with-bleed",style:d},t.get("id")===le||R?null:I.default.createElement("div",{className:"change-page-helper",onClick:function(){return r.switchPage(n,t.get("id"))}}),I.default.createElement(x.default,{actions:se,data:i}))))}});var ce={pageNumberData:{month:Z&&Z.get("month"),year:Z&&Z.get("year"),sheetIndex:Z&&Z.get("sheetIndex")}};return I.default.createElement("div",{key:_,className:K,style:oe,onClick:this.switchSheet,ref:function(t){e.componentRef=t}},z&&q!==j.productTypes.LPS?I.default.createElement(O.default,{data:ce}):null,I.default.createElement("div",{className:"inner-overflow-container",style:re},I.default.createElement("div",{className:"inner-effect",style:ie,draggable:"false"},I.default.createElement("img",{alt:"",className:"effect-img",src:ne,draggable:"false"})),ue?null:de))}}]),t}(y.Component);B.propTypes={},B.defaultProps={},t.default=(0,T.translate)("BookSheet")(B)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(2),M=(a(m),n(15)),v=n(13),y=a(v);n(244);var I=n(9),T=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.getPageNumberMessage=n.getPageNumberMessage.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"getPageNumberMessage",value:function(){var e=this.props.data,t=e.pageNumberData,n=t.month,a=t.year;return 0===n?"Cover":I.monthStrings[n-1]+" "+a}},{key:"render",value:function(){var e=this.props.data,t=(e.pageNumberData,e.className),n=(0,y.default)("page-number",t),a=this.getPageNumberMessage();return h.default.createElement("div",{className:n},h.default.createElement("span",null,a))}}]),t}(f.Component);T.defaultProps={actions:{switchPage:function(){}},data:{pageNumberData:{month:0,year:2017,sheetIndex:0}}},t.default=(0,M.translate)("PageNumber")(T)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(3),v=o(M),y=n(15),I=n(13),T=(o(I),n(622)),w=o(T),E=n(410),D=a(E),N=n(409),S=o(N);n(252);var b=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.getAllStyles=function(e){return D.getAllStyles(e)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,a=n.urls,o=n.size,r=n.ratios,i=n.variables,s=n.pagination,u=n.paginationSpread,l=n.settings,d=n.project,c=n.parameters,p=n.isPreview,g=n.specData,f=n.template,h=n.userId,M=n.allImages,y=n.capability,I=n.isLandscapeShape,T=t.boundPaginationActions,E=t.boundProjectActions,D=t.boundImageEditModalActions,N=t.boundImagesActions,b=t.boundUploadImagesActions,A=t.boundTextEditModalActions,C=t.boundTrackerActions,x=s.sheetIndex,P=s.prevSheetIndex,L={
boundPaginationActions:T,boundProjectActions:E,boundImageEditModalActions:D,boundImagesActions:N,boundUploadImagesActions:b,boundTextEditModalActions:A,boundTrackerActions:C},_={urls:a,size:o,ratios:r,variables:i,template:f,pagination:s,paginationSpread:u,settings:l,project:d,parameters:c,isPreview:p,specData:g,userId:h,allImages:M,capability:y,isLandscapeShape:I},O={width:0===s.sheetIndex?(0,m.default)(o,"renderCoverSize.width")+"px":(0,m.default)(o,"renderInnerSize.width")+"px",height:0===s.sheetIndex?(0,m.default)(o,"renderCoverSize.height")+20+"px":(0,m.default)(o,"renderInnerSize.height")+20+"px"},j={width:"100%",height:"100%"},z=P>x?"to-right":"to-left";return v.default.createElement("div",{className:"spreads-list",style:O},v.default.createElement("div",{className:"pages-list",style:j},v.default.createElement(w.default,{transitionName:z,transitionEnterTimeout:250,transitionLeaveTimeout:250},v.default.createElement(S.default,{key:x,actions:L,data:_}))))}}]),t}(M.Component);b.propTypes={},b.defaultProps={},t.default=(0,y.translate)("SheetsList")(b)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(3),m=o(h),M=n(13),v=o(M);n(254);var y=n(413),I=a(y),T=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n)),o=a.props.data,r=o.total,s=o.current,l=void 0===s?0:s;return a.timer=null,a.state={total:r,current:l},a.goPrevious=function(e){var t=e||window.event;t.preventDefault(),I.goPrevious(a)},a.goNext=function(e){var t=e||window.event;t.preventDefault(),I.goNext(a)},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data,n=t.total,a=t.current;n!==e.data.total&&this.setState({total:e.data.total}),a!==e.data.current&&this.setState({current:e.data.current})}},{key:"render",value:function(){var e=this.props.data,t=e.className,n=e.style,a=e.iconCaleStyle,o=e.minSheetIndex,r=(0,v.default)("x-simple-pagination",t),i=o||0,s=this.state.total,u=this.state.current,l=u===i,d=u===s;return m.default.createElement("div",{className:r,style:n},l?null:m.default.createElement("label",null,m.default.createElement("input",{disabled:l}),m.default.createElement("span",{className:"previous-icon icon",onClick:this.goPrevious,style:a})),d?null:m.default.createElement("label",null,m.default.createElement("input",{disabled:d}),m.default.createElement("span",{className:"next-icon icon",onClick:this.goNext,style:a})))}}]),t}(h.Component);T.propTypes={actions:h.PropTypes.shape({onPage:h.PropTypes.func}),data:h.PropTypes.shape({total:h.PropTypes.number.isRequired,current:h.PropTypes.number})},T.defaultProps={data:{total:1,current:0}},t.default=T},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(13),h=a(f),m=n(3),M=a(m);n(255);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.delete=n.delete.bind(n),n.replace=n.replace.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"replace",value:function(){var e=this.props.actions;e.onReplaceImage&&e.onReplaceImage()}},{key:"delete",value:function(){var e=this.props.actions;e.onDelete&&e.onDelete()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.left,a=e.top,o=e.width,r=e.zIndex,i=void 0===r?0:r,s=e.isShowEdit,u=void 0===s||s,l=e.isShowDelete,d=void 0===l||l,c=e.isShowReplace,p=void 0!==c&&c,g=e.actions,f=(0,h.default)("snack-bar",{show:t&&(u||d),mini:u&&!p?o<300:o<200}),m={left:n,top:a,width:o,zIndex:i};return M.default.createElement("div",{className:f,style:m,onMouseEnter:g.onMouseEnter,onMouseLeave:g.onMouseLeave},M.default.createElement("ul",{className:"action-buttons"},u?M.default.createElement("li",null,M.default.createElement("a",{onClick:g.onEditImage,title:"Edit Image"},M.default.createElement("icon",{className:"icon edit-image"}),M.default.createElement("span",null,"Edit Image"))):null,p?M.default.createElement("li",null,M.default.createElement("a",{onClick:this.replace,title:"replace"},M.default.createElement("icon",{className:"icon replace-image"}),M.default.createElement("span",null,"Replace"))):null,d?M.default.createElement("li",null,M.default.createElement("a",{onClick:this.delete,title:"Delete"},M.default.createElement("icon",{className:"icon delete-image"}),M.default.createElement("span",null,"Delete"))):null))}}]),t}(m.Component);v.propTypes={isShown:m.PropTypes.bool.isRequired,left:m.PropTypes.number.isRequired,top:m.PropTypes.number.isRequired,width:m.PropTypes.number.isRequired,imageType:m.PropTypes.number.isRequired,actions:m.PropTypes.shape({onMouseEnter:m.PropTypes.func.isRequired,onMouseLeave:m.PropTypes.func.isRequired}).isRequired},t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PENDING="PENDING",t.DONE="DONE",t.PROGRESS="PROGRESS",t.FAIL="FAIL"},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default.List();switch(t.type){case u.CREATE_ELEMENT:return e.push(t.element);case u.CREATE_ELEMENTS:return e.concat(t.elements);case u.UPDATE_ELEMENT:case u.UPDATE_ELEMENTS:var a=e;return n.forEach(function(e){var t=a.findIndex(function(t){return t.get("id")===e.get("id")});if(t!==-1){var n=a.get(t);a=a.set(String(t),n.merge(e))}}),a;case u.DELETE_ELEMENTS:var o=t.elementIds;return e.filter(function(e){return o.indexOf(e.get("id"))===-1});case u.DELETE_ALL:var r=t.willDeleteElementIds;return e.filter(function(e){return r.indexOf(e.get("id"))===-1});default:return e}}},function(e,t,n){"use strict";function a(e,t,n,a){var o=e/t,r=n/a,i=Math.abs(n-e)/e,s=Math.abs(a-t)/t;return Math.abs(o-r)<=.03&&i<=.05&&s<=.05}Object.defineProperty(t,"__esModule",{value:!0}),t.autoLayoutByImages=t.autoLayoutByElements=void 0;var o=n(9),r=n(18),i=function(e){var t=0,n=0,a=0,r=0;return e.forEach(function(e){e.get("type")===o.elementTypes.photo&&(e.get("width")>e.get("height")?n++:e.get("width")===e.get("height")?r++:a++)}),t=n+a+r,{numberOfElements:t,numberOfHElements:n,numberOfVElements:a,numberOfSElements:r}},s=function(e){var t=0,n=0,a=0;return e.forEach(function(e){e.get("type")===o.elementTypes.text&&e.get("text")&&(e.get("width")>e.get("height")?n++:a++)}),t=n+a,{numberOfTexts:t,numberOfHTexts:n,numberOfVTexts:a}},u=function(e){var t=0,n=0,a=0,o=0;return e.forEach(function(e){e.get("width")>e.get("height")?n++:e.get("width")===e.get("height")?o++:a++}),t=n+a+o,{numberOfImages:t,numberOfHImages:n,numberOfVImages:a,numberOfSImages:o}},l=function(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=void 0,d=a+o+i,c=s+u,p=n.filter(function(e){return e.imageNum===d&&e.horizontalNum===a&&e.verticalNum===o&&e.squareNum===i&&e.textFrameNum===c}),g=e?"AutoFill":"AutoLayout";if(p.length)l=p[(0,r.getRandomInt)(0,p.length-1)];else{t.addTracker("MatchLayoutFailed,"+g+","+a+","+o+","+c);var f=n.filter(function(e){return e.imageNum===d&&e.textFrameNum===c});if(f.length){var h=f.filter(function(e){return e.isCoverDefault});l=h.length?h[(0,r.getRandomInt)(0,h.length-1)]:f[(0,r.getRandomInt)(0,f.length-1)]}else t.addTracker("MatchLayoutFailed,"+g+","+d+","+c)}return l};t.autoLayoutByElements=function(e,t,n,o,r,u){var d=i(t),c=s(t),p=!1;if(1===n.size){var g=n.first(),f=o.get(g.get("encImgId")),h=a(e.get("width"),e.get("height"),f.get("width"),f.get("height"));if(h){var m=r.find(function(e){return 1===e.imageNum&&e.isFullCover});if(m)return m}}var M=l(p,u,r,d.numberOfHElements,d.numberOfVElements,d.numberOfSElements,c.numberOfHTexts,c.numberOfVTexts);return M},t.autoLayoutByImages=function(e,t,n){var a=u(e),o=!0,r=l(o,n,t,a.numberOfHImages,a.numberOfVImages,a.numberOfSImages);return r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.collision=function(e,t){return!(e.x+e.width<t.x||e.y+e.height<t.y||e.x>t.x+t.width||e.y>t.y+t.height)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redirectToOrder=void 0;var o=n(23),r=a(o),i=n(16),s=n(9);t.redirectToOrder=function(e){var t=(0,r.default)(i.ORDER_PATH)({orderType:s.orderType,projectId:e});window.onbeforeunload=null,window.location=t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedWorkSpaceRatio=t.getAvailableSize=void 0;var o=n(12),r=a(o),i=n(76),s=t.getAvailableSize=function(e,t,n,a){var o={width:0,height:0};if(!(e&&e.width&&e.height&&t&&t.width&&t.height))return o;var i=(0,r.default)({},{top:0,left:0,right:0,bottom:0},n),s=a||1,u=(e.width-(i.left+i.right))*s,l=e.height-(i.top+i.bottom);return o.width=l*t.width/t.height,o.height=u*t.height/t.width,o.width>u?o.width=u:o.height=l,o};t.computedWorkSpaceRatio=function(e,t,n){var a=1,o=(0,i.getSize)(),r=s(o,e,t);return r&&r.width&&r.height&&(a=r.width/e.width),a}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScreenShot=void 0;var o=n(14),r=a(o),i=n(501),s=n(9),u=1e3,l=null;t.getScreenShot=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"isStopRetry",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=function(t,n){var o=document.querySelector(e),r=a?o.width:s.smallViewWidthInMyProjects;(0,i.toCanvas)(o,r).then(function(e){var n=e.url;t(n)},function(){n()})},d=new r.default(function(e,a){t?l=setInterval(function(){var t=window[n];t&&(clearInterval(l),setTimeout(function(){o(e,a)},2e3))},u):o(e,a)});return d}},function(e,t,n){"use strict";function a(e){var t=0,n=0,a=0;e.forEach(function(e){var o=e.image,r=e.width,i=e.height;if(o){r=o.width,i=o.height;var s=Math.abs(e.imgRot);if(s%90===0&&s%180){var u=[r,i];i=u[0],r=u[1]}}r>i?t+=1:i>r?n+=1:a+=1});var o=t+n+a;return{countTotal:o,countLandscape:t,countPortrait:n,countSquare:a}}function o(e,t,n){var o=a(n),r=o.countTotal,i=o.countLandscape,u=o.countPortrait,l=o.countSquare,d=t.filter(function(t){return t.imageNum===r&&t.horizontalNum===i&&t.verticalNum===u&&t.squareNum===l&&t.textFrameNum===e}),c=d;if(!d.length){var p=t.filter(function(t){return t.imageNum===r&&t.textFrameNum===e});if(c=p,p.length){var g=p.filter(function(e){return e.isCoverDefault});c=g.length?g:p}}return c.length?c[(0,s.getRandomInt)(0,c.length-1)].guid:null}function r(e,t,n,a){var o=e/t,r=n/a,i=Math.abs(n-e)/e,s=Math.abs(a-t)/t;return Math.abs(o-r)<=.03&&i<=.05&&s<=.05}function i(e,t,n,a,i){var s=i.filter(function(e){return e.image});if(1===s.length){var u=s[0].image,l=r(e,t,u.width,u.height);if(!l){var d=a.filter(function(e){return!e.isFullCover});return o(n,d,i)}var c=a.find(function(e){return 1===e.imageNum&&e.isFullCover});if(c)return c.guid}return o(n,a,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateId=i;var s=n(18)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedTextElementOptions=void 0;var o=n(23),r=a(o),i=n(32),s=n(16),u=n(48);t.computedTextElementOptions=function(e,t,n,a,o,l,d){var c=(arguments.length>7&&void 0!==arguments[7]&&arguments[7],t.get("text")),p=t.get("fontSize"),g=p*o.get("height"),f=t.get("fontColor")?t.get("fontColor"):"#ffffff";return e.imgUrl=c?(0,r.default)(s.TEXT_SRC)({text:(0,u.toEncode)(c),fontSize:g,fontColor:(0,i.hexString2Number)(f),fontFamily:t.get("fontFamily"),width:t.get("width"),height:t.get("height"),originalWidth:t.get("width"),originalHeight:t.get("height"),originalFontSize:g,baseUrl:a.baseUrl,textAlign:t.get("textAlign"),verticalTextAlign:t.get("textVAlign"),ratio:n}):null,e.minHeight=Math.round(l*n),e.minWidth=Math.round(d*n),e}},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function a(e,t,n){(void 0===n||r(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(166),r=n(165);e.exports=a},function(e,t,n){function a(e,t,n,a){if(!s(e))return e;t=r(t,e);for(var l=-1,d=t.length,c=d-1,p=e;null!=p&&++l<d;){var g=u(t[l]),f=n;if(l!=c){var h=p[g];f=a?a(h,g,p):void 0,void 0===f&&(f=s(h)?h:i(t[l+1])?[]:{})}o(p,g,f),p=p[g]}return e}var o=n(590),r=n(167),i=n(595),s=n(69),u=n(581);e.exports=a},function(e,t,n){function a(e){return o(function(t,n){var a=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&r(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++a<o;){var u=n[a];u&&e(t,u,a,i)}return t})}var o=n(65),r=n(91);e.exports=a},function(e,t){var n=/<%=([\s\S]+?)%>/g;e.exports=n},function(e,t,n){function a(e){return r(e)&&o(e)}var o=n(625),r=n(71);e.exports=a},function(e,t,n){function a(e){return e===!0||e===!1||r(e)&&o(e)==i}var o=n(102),r=n(71),i="[object Boolean]";e.exports=a},function(e,t,n){function a(e){if(!r(e))return!1;var t=o(e);return t==u||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}var o=n(102),r=n(71),i=n(179),s="[object DOMException]",u="[object Error]";e.exports=a},function(e,t,n){function a(e,t,n){return null==e?e:o(e,t,n)}var o=n(152);e.exports=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}}},function(e,t,n){e.exports=n(1)(1003)},function(e,t,n){e.exports=n(1)(122)},function(e,t,n){e.exports=n(1)(149)},function(e,t,n){e.exports=n(1)(162)},function(e,t,n){e.exports=n(1)(173)},function(e,t,n){e.exports=n(1)(219)},function(e,t,n){e.exports=n(1)(319)},function(e,t,n){e.exports=n(1)(327)},function(e,t,n){e.exports=n(1)(340)},function(e,t,n){e.exports=n(1)(344)},function(e,t,n){e.exports=n(1)(430)},function(e,t,n){e.exports=n(1)(433)},function(e,t,n){e.exports=n(1)(452)},function(e,t,n){e.exports=n(1)(68)},function(e,t,n){e.exports=n(1)(724)},function(e,t,n){e.exports=n(1)(733)},function(e,t,n){e.exports=n(1)(742)},function(e,t,n){e.exports=n(1)(806)},function(e,t,n){e.exports=n(1)(97)},function(e,t,n){e.exports=n(1)(98)},,function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){e.exports={default:n(184),__esModule:!0}},function(e,t,n){n(99),n(98),e.exports=n(196)},function(e,t,n){n(99),n(98),e.exports=n(197)},function(e,t,n){var a=n(35),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){n(198),e.exports=n(35).Object.getPrototypeOf},function(e,t,n){n(199),e.exports=n(35).Object.keys},function(e,t,n){n(606),n(98),n(99),n(200),e.exports=n(35).Promise},function(e,t){e.exports=function(e,t,n,a){if(!(e instanceof t)||void 0!==a&&a in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var a=n(96),o=n(603),r=n(602),i=n(103),s=n(589),u=n(172),l={},d={},t=e.exports=function(e,t,n,c,p){var g,f,h,m,M=p?function(){return e}:u(e),v=a(n,c,t?2:1),y=0;if("function"!=typeof M)throw TypeError(e+" is not iterable!");if(r(M)){for(g=s(e.length);g>y;y++)if(m=t?v(i(f=e[y])[0],f[1]):v(e[y]),m===l||m===d)return m}else for(h=M.call(e);!(f=h.next()).done;)if(m=o(h,v,f.value,t),m===l||m===d)return m};t.BREAK=l,t.RETURN=d},function(e,t){e.exports=function(e,t,n){var a=void 0===n;switch(t.length){case 0:return a?e():e.call(n);case 1:return a?e(t[0]):e.call(n,t[0]);case 2:return a?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return a?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return a?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var a=n(70),o=n(106).set,r=a.MutationObserver||a.WebKitMutationObserver,i=a.process,s=a.Promise,u="process"==n(163)(i);e.exports=function(){var e,t,n,l=function(){var a,o;for(u&&(a=i.domain)&&a.exit();e;){o=e.fn,e=e.next;try{o()}catch(a){throw e?n():t=void 0,a}}t=void 0,a&&a.enter()};if(u)n=function(){i.nextTick(l)};else if(r){var d=!0,c=document.createTextNode("");new r(l).observe(c,{characterData:!0}),n=function(){c.data=d=!d}}else if(s&&s.resolve){var p=s.resolve();n=function(){p.then(l)}}else n=function(){o.call(a,l)};return function(a){var o={fn:a,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var a=n(623);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:a(e,o,t[o]);return e}},function(e,t,n){"use strict";var a=n(70),o=n(35),r=n(607),i=n(609),s=n(68)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:a[e];i&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var a=n(103),o=n(170),r=n(68)("species");e.exports=function(e,t){var n,i=a(e).constructor;return void 0===i||void 0==(n=a(i)[r])?t:o(n)}},function(e,t,n){var a=n(103),o=n(172);e.exports=n(35).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},function(e,t,n){var a=n(171),o=n(68)("iterator"),r=n(578);e.exports=n(35).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||r.hasOwnProperty(a(t))}},function(e,t,n){var a=n(164),o=n(605);n(105)("getPrototypeOf",function(){return function(e){return o(a(e))}})},function(e,t,n){var a=n(164),o=n(579);n(105)("keys",function(){return function(e){return o(a(e))}})},function(e,t,n){"use strict";var a,o,r,i=n(583),s=n(70),u=n(96),l=n(171),d=n(173),c=n(577),p=n(170),g=n(189),f=n(190),h=n(195),m=n(106).set,M=n(192)(),v="Promise",y=s.TypeError,I=s.process,T=s[v],I=s.process,w="process"==l(I),E=function(){},D=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(68)("species")]=function(e){e(E,E)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),N=function(e,t){return e===t||e===T&&t===r},S=function(e){var t;return!(!c(e)||"function"!=typeof(t=e.then))&&t},b=function(e){return N(T,e)?new A(e):new o(e)},A=o=function(e){var t,n;this.promise=new e(function(e,a){if(void 0!==t||void 0!==n)throw y("Bad Promise constructor");t=e,n=a}),this.resolve=p(t),this.reject=p(n)},C=function(e){try{e()}catch(e){return{error:e}}},x=function(e,t){if(!e._n){e._n=!0;var n=e._c;M(function(){for(var a=e._v,o=1==e._s,r=0,i=function(t){var n,r,i=o?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{i?(o||(2==e._h&&_(e),e._h=1),i===!0?n=a:(l&&l.enter(),n=i(a),l&&l.exit()),n===t.promise?u(y("Promise-chain cycle")):(r=S(n))?r.call(n,s,u):s(n)):u(a)}catch(e){u(e)}};n.length>r;)i(n[r++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){m.call(s,function(){var t,n,a,o=e._v;if(L(e)&&(t=C(function(){w?I.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(a=s.console)&&a.error&&a.error("Unhandled promise rejection",o)}),e._h=w||L(e)?2:1),e._a=void 0,t)throw t.error})},L=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,a=0;n.length>a;)if(t=n[a++],t.fail||!L(t.promise))return!1;return!0},_=function(e){m.call(s,function(){var t;w?I.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},O=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),x(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=S(e))?M(function(){var a={_w:n,_d:!1};try{t.call(e,u(j,a,1),u(O,a,1))}catch(e){O.call(a,e)}}):(n._v=e,n._s=1,x(n,!1))}catch(e){O.call({_w:n,_d:!1},e)}}};D||(T=function(e){g(this,T,v,"_h"),p(e),a.call(this);try{e(u(j,this,1),u(O,this,1))}catch(e){O.call(this,e)}},a=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},a.prototype=n(193)(T.prototype,{then:function(e,t){var n=b(h(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?I.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&x(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),A=function(){var e=new a;this.promise=e,this.resolve=u(j,e,1),this.reject=u(O,e,1)}),d(d.G+d.W+d.F*!D,{Promise:T}),n(584)(T,v),n(194)(v),r=n(35)[v],d(d.S+d.F*!D,v,{reject:function(e){var t=b(this),n=t.reject;return n(e),t.promise}}),d(d.S+d.F*(i||!D),v,{resolve:function(e){if(e instanceof T&&N(e.constructor,this))return e;var t=b(this),n=t.resolve;return n(e),t.promise}}),d(d.S+d.F*!(D&&n(604)(function(e){T.all(e).catch(E)})),v,{all:function(e){var t=this,n=b(t),a=n.resolve,o=n.reject,r=C(function(){var n=[],r=0,i=1;f(e,!1,function(e){var s=r++,u=!1;n.push(void 0),i++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--i||a(n))},o)}),--i||a(n)});return r&&o(r.error),n.promise},race:function(e){var t=this,n=b(t),a=n.reject,o=C(function(){f(e,!1,function(e){t.resolve(e).then(n.resolve,a)})});return o&&a(o.error),n.promise}})},function(e,t){},201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,,,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(202);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={checked:e.checked},n.onClicked=function(){var t=e.onClicked,a=e.value,o=!n.checkbox.checked;n.checkbox.checked=o,n.setState({checked:o}),"function"==typeof t&&t({value:a,checked:o})},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.checked!==e.checked&&this.setState({checked:e.checked})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.style,o=t.text,r=t.subText,i=t.contents,s=t.name,u=void 0===s?"":s,l=t.value,d=void 0===l?"":l,c=t.disabled,p=void 0!==c&&c,g=(t.isShowChecked,this.state.checked),f=(0,M.default)("x-checkbox",n),m=a;return h.default.createElement("div",{className:f,style:m,onClick:this.onClicked.bind(this)},h.default.createElement("input",{className:"native-checkbox",ref:function(t){return e.checkbox=t},type:"checkbox",name:u,value:d,defaultChecked:g,checked:g,disabled:p}),h.default.createElement("span",{className:"icon"}),h.default.createElement("div",{className:"options"},h.default.createElement("div",{className:"top-title"},o?h.default.createElement("span",{className:"text"},o):null,r?h.default.createElement("div",{className:"sub-text"},r):null),i?h.default.createElement("div",{className:"contents"},i):null))}}]),t}(f.Component);t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(12),M=a(m),v=n(3),y=a(v),I=n(624),T=n(13),w=a(T),E=n(32);n(203);var D=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e)),a=n.props.initHexString,o={r:"255",g:"255",b:"255"},i=o;if(a){var u=(0,E.hexToRGB)(a),d=(0,r.default)(u,3),c=d[0],p=d[1],f=d[2];i=(0,M.default)({},o,{r:c,g:p,b:f})}return n.state={displayColorPicker:!1,color:i},n.handleClick=n.handleClick.bind(n),n.handleChange=n.handleChange.bind(n),n.handleClose=n.handleClose.bind(n),n.handleChangeComplete=n.handleChangeComplete.bind(n),n.externalCloseHandle=n.externalCloseHandle.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.needResetColor,n=e.needResetColor;if(t!==n&&n){var a=(0,E.hexToRGB)(e.initHexString),o=(0,r.default)(a,3),i=o[0],s=o[1],u=o[2];this.setState({color:{r:i,g:s,b:u}})}}},{key:"externalCloseHandle",value:function(e){"CANVAS"===e.target.nodeName&&this.setState({displayColorPicker:!1})}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.externalCloseHandle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.externalCloseHandle)}},{key:"handleClick",value:function(){var e=this;this.setState({displayColorPicker:!this.state.displayColorPicker},function(){e.state.displayColorPicker&&e.popover.focus()})}},{key:"handleChange",value:function(e){var t=this.props.onColorChange;this.setState({color:e.rgb}),t&&t(e)}},{key:"handleChangeComplete",value:function(e){var t=this.props.onColorChangeComplete;t&&t(e)}},{key:"handleClose",value:function(e){var t=this,n=e.currentTarget;setTimeout(function(){n.contains(document.activeElement)||t.setState({displayColorPicker:!1})},0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.displayColorPicker,a=t.color,o=this.props.disabled,r={background:"rgb("+a.r+", "+a.g+", "+a.b+")"},i=(0,w.default)("color-picker",{disabled:o}),s=["#E5F1E1","#F6D8DA","#7CE0D3","#FF9999","#ADC1E4","#E2DAC8","#93B55A","#FFCE43","#CC000E","#71000A","#155B4D","#4D8BF5","#121639","#000000","#E3E3E3","#FFFFFF"];return y.default.createElement("div",{className:i},y.default.createElement("div",{className:"swatch",onClick:this.handleClick},y.default.createElement("div",{className:"color",style:r})),n?y.default.createElement("div",{className:"popover",tabIndex:"-1",ref:function(t){e.popover=t},onBlur:this.handleClose},y.default.createElement(I.SketchPicker,{color:a,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete,presetColors:s,disableAlpha:!0})):null)}}]),t}(v.Component);D.propTypes={onColorChange:v.PropTypes.func.isRequired,initHexString:v.PropTypes.string,needResetColor:v.PropTypes.bool,onColorChangeComplete:v.PropTypes.func,disabled:v.PropTypes.bool},D.defaultProps={disabled:!1},t.default=D},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(204);var v=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,a=e.onClicked,o=e.title,r=e.isShow,i=void 0!==r&&r,s=e.isBlack,u=void 0!==s&&s,l=(0,M.default)("x-delete-icon",t,{show:i,black:u}),d=n;return h.default.createElement("div",{className:l,style:d,onClick:a,title:o})}}]),t}(f.Component);v.defaultProps={isShow:!1,isBlack:!1,title:"Delete",onClicked:function(){}},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f);n(206);var m=n(551),M=a(m),v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleLogoClick=n.handleLogoClick.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"handleLogoClick",value:function(){var e=this.props,t=(e.isProjectEdited,e.boundSystemActions),n=e.onSaveProject,a=e.baseUrls,o=function(){window.onbeforeunload=null,window.location.href=a.baseUrl};t.showConfirm({confirmMessage:h.default.createElement("div",{className:"text-center"},"This will take you to home page.",h.default.createElement("br",null),"Please select an option before continuing."),onOkClick:function(){n(o)},onCancelClick:o,okButtonText:"Save",cancelButtonText:"Don't Save"})}},{key:"stopPropagation",value:function(e){var t=e||window.event;t.stopPropagation()}},{key:"render",value:function(){var e=this.props.children;return h.default.createElement("div",{className:"mod-header",onClick:this.stopPropagation.bind(this)},h.default.createElement("div",{className:"logo",onClick:this.handleLogoClick},h.default.createElement("img",{src:M.default,alt:"logo"})),h.default.createElement("div",{className:"header-area"},e))}}]),t}(f.Component);v.propTypes={boundSystemActions:f.PropTypes.object.isRequired,isProjectEdited:f.PropTypes.bool.isRequired,onSaveProject:f.PropTypes.func.isRequired,baseUrls:f.PropTypes.object.isRequired},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.userId,n=e.userId;if(t!==n&&n!==-1){var a=e.interval,o=e.keepAlive,r=e.userId;setInterval(function(){o(r)},a)}}},{key:"render",value:function(){return null}}]),t}(f.Component);h.propTypes={keepAlive:f.PropTypes.func.isRequired,userId:f.PropTypes.number,interval:f.PropTypes.number},h.defaultProps={interval:24e4},t.default=h},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f);n(207);var m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.outCrop,n=e.imageCornerRatios,a=t.x,o=t.y,r=t.width,i=t.height,s={top:o+"%",left:a+"%",width:r+"%",height:i+"%"},u={height:n.top+"%"},l={width:n.right+"%"},d={height:n.bottom+"%"},c={width:n.left+"%"};return h.default.createElement("div",{className:"image-corner-area",style:s},h.default.createElement("div",{className:"image-corner top",style:u}),h.default.createElement("div",{className:"image-corner right",style:l}),h.default.createElement("div",{className:"image-corner bottom",style:d}),h.default.createElement("div",{className:"image-corner left",style:c}))}}]),t}(f.Component);m.propTypes={},m.defaultProps={},t.default=m},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o,r,i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(3),M=a(m),v=n(567),y=a(v);n(208);var I=(r=o=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.onDocMouseTouchMove=n.onDocMouseTouchMove.bind(n),n.onDocMouseTouchEnd=n.onDocMouseTouchEnd.bind(n),n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n.onComponentMouseTouchDown=n.onComponentMouseTouchDown.bind(n),n.onComponentKeyDown=n.onComponentKeyDown.bind(n),n.onCropMouseTouchDown=n.onCropMouseTouchDown.bind(n),n.state={crop:n.nextCropState(e.crop),polygonId:n.getRandomInt(1,9e5),imageWidth:0,imageHeight:0},n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(document.addEventListener("mousemove",this.onDocMouseTouchMove),document.addEventListener("touchmove",this.onDocMouseTouchMove),document.addEventListener("mouseup",this.onDocMouseTouchEnd),document.addEventListener("touchend",this.onDocMouseTouchEnd),
document.addEventListener("touchcancel",this.onDocMouseTouchEnd),this.imageRef.complete||this.imageRef.readyState)if(0===this.imageRef.naturalWidth){var e=this.imageRef.src,t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.imageRef.src=t,this.imageRef.src=e}else this.onImageLoad(this.imageRef)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.crop){var n=this.nextCropState(e.crop),a=this.state.crop.aspect&&n.aspect!==this.state.crop.aspect;n.aspect&&(n=this.ensureAspectDimensions(n,this.imageRef)),this.cropInvalid=this.isCropInvalid(n),this.setState({crop:n},function(){a&&t.props.onAspectRatioChange&&t.props.onAspectRatioChange(n,t.getPixelCrop(n))})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onDocMouseTouchMove),document.removeEventListener("touchmove",this.onDocMouseTouchMove),document.removeEventListener("mouseup",this.onDocMouseTouchEnd),document.removeEventListener("touchend",this.onDocMouseTouchEnd),document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}},{key:"onDocMouseTouchMove",value:function(e){if(!this.props.disabled&&this.mouseDownOnCrop){e.preventDefault();var t=this.state.crop,n=this.evData,a=this.getClientPos(e);n.isResize&&t.aspect&&n.cropOffset&&(a.y=this.straightenYPath(a.x));var o=a.x-n.clientStartX;n.xDiffPc=o/n.imageWidth*100;var r=a.y-n.clientStartY;n.yDiffPc=r/n.imageHeight*100,n.isResize?this.resizeCrop():this.dragCrop(),this.cropInvalid=!1,this.props.onChange&&this.props.onChange(t,this.getPixelCrop(t)),this.setState({crop:t})}}},{key:"onCropMouseTouchDown",value:function(e){if(!this.props.disabled){e.preventDefault();var t=this.state.crop,n=this.getClientPos(e);this.componentRef.focus();var a=e.target.dataset.ord,o="nw"===a||"w"===a||"sw"===a,r="nw"===a||"n"===a||"ne"===a,i=void 0;t.aspect&&(i=this.getElementOffset(this.cropSelectRef)),this.evData={imageWidth:this.imageRef.width,imageHeight:this.imageRef.height,clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:o?t.x+t.width:t.x,cropStartY:r?t.y+t.height:t.y,xInversed:o,yInversed:r,xCrossOver:o,yCrossOver:r,startXCrossOver:o,startYCrossOver:r,isResize:e.target!==this.cropSelectRef,ord:a,cropOffset:i},this.mouseDownOnCrop=!0}}},{key:"onComponentMouseTouchDown",value:function(e){if((e.target===this.imageCopyRef||e.target===this.cropWrapperRef)&&!this.props.disabled){e.preventDefault();var t=this.props.keepSelection===!0?{}:this.state.crop,n=this.getClientPos(e);this.componentRef.focus();var a=this.getElementOffset(this.imageRef),o=(n.x-a.left)/this.imageRef.width*100,r=(n.y-a.top)/this.imageRef.height*100;t.x=o,t.y=r,t.width=0,t.height=0,this.evData={imageWidth:this.imageRef.width,imageHeight:this.imageRef.height,clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:t.x,cropStartY:t.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0,this.setState({newCropIsBeingDrawn:!0})}}},{key:"onComponentKeyDown",value:function(e){var n=this;if(!this.props.disabled){var a=e.which,o=this.state.crop,r=!1;o.width&&o.height&&(a===t.arrowKey.left?(o.x-=t.nudgeStep,r=!0):a===t.arrowKey.right?(o.x+=t.nudgeStep,r=!0):a===t.arrowKey.up?(o.y-=t.nudgeStep,r=!0):a===t.arrowKey.down&&(o.y+=t.nudgeStep,r=!0),r&&(e.preventDefault(),o.x=this.clamp(o.x,0,100-o.width),o.y=this.clamp(o.y,0,100-o.height),this.setState({crop:o},function(){n.props.onChange&&n.props.onChange(o,n.getPixelCrop(o)),n.props.onComplete&&n.props.onComplete(o,n.getPixelCrop(o))})))}}},{key:"onDocMouseTouchEnd",value:function(){if(!this.props.disabled&&this.mouseDownOnCrop){var e=this.state.crop;this.cropInvalid=this.isCropInvalid(e),this.mouseDownOnCrop=!1,this.props.onComplete&&this.props.onComplete(e,this.getPixelCrop(e)),this.setState({newCropIsBeingDrawn:!1})}}},{key:"getPixelCrop",value:function(e){return{x:Math.round(this.imageRef.naturalWidth*(e.x/100)),y:Math.round(this.imageRef.naturalHeight*(e.y/100)),width:Math.round(this.imageRef.naturalWidth*(e.width/100)),height:Math.round(this.imageRef.naturalHeight*(e.height/100))}}},{key:"getPolygonValues",value:function(e){var t=this.state.crop,n=[t.x,t.y],a=[t.x+t.width,t.y],o=[t.x,t.y+t.height],r=[t.x+t.width,t.y+t.height];return e?(n=this.arrayDividedBy100(n),a=this.arrayDividedBy100(a),o=this.arrayDividedBy100(o),r=this.arrayDividedBy100(r)):(n=this.arrayToPercent(n),a=this.arrayToPercent(a),o=this.arrayToPercent(o),r=this.arrayToPercent(r)),{top:{left:n,right:a},bottom:{left:o,right:r}}}},{key:"getCropStyle",value:function(){return{top:this.state.crop.y+"%",left:this.state.crop.x+"%",width:this.state.crop.width+"%",height:this.state.crop.height+"%"}}},{key:"getEllipseValues",value:function(e){var t=this.state.crop,n=t.width/2,a=t.height/2,o=t.x+n,r=t.y+a;return e?(n/=100,a/=100,o/=100,r/=100):(n+="%",a+="%",o+="%",r+="%"),{cx:o,cy:r,rx:n,ry:a}}},{key:"getPolygonClipPath",value:function(){var e=this.getPolygonValues(),t=e.top,n=e.bottom;return"polygon("+t.left+", "+t.right+", "+n.right+", "+n.left+")"}},{key:"getEllipseClipPath",value:function(){var e=this.getEllipseValues(),t=e.rx,n=e.ry,a=e.cx,o=e.cy;return"ellipse("+t+" "+n+" at "+a+" "+o+")"}},{key:"getElementOffset",value:function(e){var t=e.getBoundingClientRect(),n=document.documentElement,a=t.top+window.pageYOffset-n.clientTop,o=t.left+window.pageXOffset-n.clientLeft;return{top:a,left:o}}},{key:"getClientPos",value:function(e){var t=void 0,n=void 0;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),{x:t,y:n}}},{key:"getNewSize",value:function(){var e=this.state.crop,t=this.evData,n=t.imageWidth/t.imageHeight,a=t.cropStartWidth+t.xDiffPc;t.xCrossOver&&(a=Math.abs(a));var o=this.props.maxWidth;this.state.newCropIsBeingDrawn||(o=["nw","w","sw"].indexOf(t.inversedXOrd||t.ord)>-1?t.cropStartX:100-t.cropStartX,o=this.clamp(o,100,this.props.maxWidth)),a=this.clamp(a,this.props.minWidth||0,o);var r=void 0;r=e.aspect?a/e.aspect*n:t.cropStartHeight+t.yDiffPc,t.yCrossOver&&(r=Math.min(Math.abs(r),t.cropStartY));var i=this.props.maxHeight;return this.state.newCropIsBeingDrawn||(i=["nw","n","ne"].indexOf(t.inversedYOrd||t.ord)>-1?t.cropStartY:100-t.cropStartY,i=this.clamp(i,100,this.props.maxHeight)),r=this.clamp(r,this.props.minHeight||0,i),e.aspect&&(a=this.clamp(r*e.aspect/n,0,100)),{width:a,height:r}}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"getPolygonId",value:function(){return"ReactCropClipPolygon-"+this.state.polygonId}},{key:"dragCrop",value:function(){var e=this.state.crop,t=this.evData;e.x=this.clamp(t.cropStartX+t.xDiffPc,0,100-e.width),e.y=this.clamp(t.cropStartY+t.yDiffPc,0,100-e.height)}},{key:"resizeCrop",value:function(){var e=this.state.crop,n=this.evData,a=n.ord;n.xInversed&&(n.xDiffPc-=2*n.cropStartWidth),n.yInversed&&(n.yDiffPc-=2*n.cropStartHeight);var o=this.getNewSize(),r=n.cropStartX,i=n.cropStartY;n.xCrossOver&&(r=e.x+(e.width-o.width)),n.yCrossOver&&(i=n.lastYCrossover===!1?e.y-o.height:e.y+(e.height-o.height)),e.aspect||t.xyOrds.indexOf(a)>-1?(e.x=this.clamp(r,0,100-o.width),e.y=this.clamp(i,0,100-o.height),e.width=o.width,e.height=o.height):t.xOrds.indexOf(a)>-1?(e.x=this.clamp(r,0,100-o.width),e.width=o.width):t.yOrds.indexOf(a)>-1&&(e.y=this.clamp(i,0,100-o.height),e.height=o.height),n.lastYCrossover=n.yCrossOver,this.crossOverCheck()}},{key:"straightenYPath",value:function(e){var t=this.evData,n=t.ord,a=t.cropOffset,o=t.cropStartWidth/100*t.imageWidth,r=t.cropStartHeight/100*t.imageHeight,i=void 0,s=void 0;return"nw"===n||"se"===n?(i=r/o,s=a.top-a.left*i):(i=-r/o,s=a.top+(r-a.left*i)),i*e+s}},{key:"onImageLoad",value:function(e){var t=this.state.crop;e&&this.setState({imageWidth:e.naturalWidth,imageHeight:e.naturalHeight}),t.aspect&&(t=this.ensureAspectDimensions(t,e),this.cropInvalid=this.isCropInvalid(t),this.setState({crop:t})),this.props.onImageLoaded&&this.props.onImageLoaded(t,e,this.getPixelCrop(t))}},{key:"onImageError",value:function(){this.props.onImageError&&this.props.onImageError()}},{key:"arrayDividedBy100",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.map(function(e){return e/100}).join(t)}},{key:"arrayToPercent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.map(function(e){return e+"%"}).join(t)}},{key:"createCropSelection",value:function(){var e=this,t=this.getCropStyle(),n=this.state.crop.aspect,a=this.props.ellipse;return M.default.createElement("div",{ref:function(t){e.cropSelectRef=t},style:t,className:"ReactCrop--crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown},M.default.createElement("div",{className:"ReactCrop--drag-bar ord-n","data-ord":"n"}),M.default.createElement("div",{className:"ReactCrop--drag-bar ord-e","data-ord":"e"}),M.default.createElement("div",{className:"ReactCrop--drag-bar ord-s","data-ord":"s"}),M.default.createElement("div",{className:"ReactCrop--drag-bar ord-w","data-ord":"w"}),a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-nw","data-ord":"nw"}),n&&!a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-n","data-ord":"n"}),a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-ne","data-ord":"ne"}),n&&!a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-e","data-ord":"e"}),a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-se","data-ord":"se"}),n&&!a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-s","data-ord":"s"}),a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-sw","data-ord":"sw"}),n&&!a?null:M.default.createElement("div",{className:"ReactCrop--drag-handle ord-w","data-ord":"w"}))}},{key:"isCropInvalid",value:function(e){return!e.width||!e.height}},{key:"nextCropState",value:function(e){var n=(0,y.default)({},t.defaultCrop,e);return this.cropInvalid=this.isCropInvalid(n),n}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"crossOverCheck",value:function(){var e=this.evData;(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc<=0)&&(e.xCrossOver=!e.xCrossOver),(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc<=0)&&(e.yCrossOver=!e.yCrossOver);var t=e.xCrossOver!==e.startXCrossOver,n=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!t&&this.inverseOrd(e.ord),e.inversedYOrd=!!n&&this.inverseOrd(e.ord)}},{key:"inverseOrd",value:function e(t){var e=void 0;return"n"===t?e="s":"ne"===t?e="sw":"e"===t?e="w":"se"===t?e="nw":"s"===t?e="n":"sw"===t?e="ne":"w"===t?e="e":"nw"===t&&(e="se"),e}},{key:"ensureAspectDimensions",value:function(e,t){var n=t.naturalWidth,a=t.naturalHeight,o=n/a,r=(0,y.default)({},e);return r.width?r.height=r.width/r.aspect*o:r.height&&(r.width=r.height*r.aspect/o),r.y+r.height>100&&(r.height=100-r.y,r.width=r.height*r.aspect/o),r.x+r.width>100&&(r.width=100-r.x,r.height=r.width/r.aspect*o),r}},{key:"renderSvg",value:function(){var e=void 0;if(this.props.ellipse)e=M.default.createElement("ellipse",this.getEllipseValues(!0));else{var t=this.getPolygonValues(!0),n=t.top,a=t.bottom;e=M.default.createElement("polygon",{points:n.left+", "+n.right+", "+a.right+", "+a.left})}return M.default.createElement("svg",{width:this.state.imageWidth,height:this.state.imageHeight,style:{position:"absolute"}},M.default.createElement("defs",null,M.default.createElement("clipPath",{id:this.getPolygonId(),clipPathUnits:"objectBoundingBox"},e)))}},{key:"render",value:function(){var e=this,t=void 0,n=void 0,a=0===this.props.src.indexOf("data:");this.cropInvalid||(t=this.createCropSelection(),n={WebkitClipPath:this.props.ellipse?this.getEllipseClipPath():this.getPolygonClipPath(),clipPath:'url("#'+this.getPolygonId()+'")'});var o={width:this.state.imageWidth+"px",height:this.state.imageHeight+"px"},r={width:this.state.imageWidth+"px",height:this.state.imageHeight+"px"},i=["ReactCrop"];return this.state.newCropIsBeingDrawn&&i.push("ReactCrop-new-crop"),this.state.crop.aspect&&i.push("ReactCrop-fixed-aspect"),this.props.ellipse&&i.push("ReactCrop-ellipse"),this.props.disabled&&i.push("ReactCrop--disabled"),M.default.createElement("div",{ref:function(t){e.componentRef=t},className:i.join(" "),onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"1",onKeyDown:this.onComponentKeyDown,style:r},this.renderSvg(),M.default.createElement("img",{ref:function(t){e.imageRef=t},crossOrigin:a?void 0:this.props.crossorigin,className:"ReactCrop--image",src:this.props.src,onLoad:function(t){return e.onImageLoad(t.target)},onError:function(){return e.onImageError()},alt:""}),M.default.createElement("div",{className:"ReactCrop--crop-wrapper",style:o,ref:function(t){e.cropWrapperRef=t}},M.default.createElement("svg",{width:this.state.imageWidth,height:this.state.imageHeight},M.default.createElement("image",{width:this.state.imageWidth,height:this.state.imageHeight,xlinkHref:this.props.src,style:n})),t),this.props.children)}}]),t}(m.Component),o.propTypes={src:m.PropTypes.string.isRequired,crop:m.PropTypes.object,minWidth:m.PropTypes.number,minHeight:m.PropTypes.number,maxWidth:m.PropTypes.number,maxHeight:m.PropTypes.number,keepSelection:m.PropTypes.bool,onChange:m.PropTypes.func,onComplete:m.PropTypes.func,onImageLoaded:m.PropTypes.func,onImageError:m.PropTypes.func,onAspectRatioChange:m.PropTypes.func,disabled:m.PropTypes.bool,ellipse:m.PropTypes.bool,crossorigin:m.PropTypes.string,children:M.default.PropTypes.oneOfType([M.default.PropTypes.arrayOf(M.default.PropTypes.node),M.default.PropTypes.node])},o.defaultProps={disabled:!1,maxWidth:100,maxHeight:100,crossorigin:"anonymous"},o.xOrds=["e","w"],o.yOrds=["n","s"],o.xyOrds=["nw","ne","se","sw"],o.arrowKey={left:37,up:38,right:39,down:40},o.nudgeStep=.2,o.defaultCrop={x:0,y:0,width:0,height:0,aspect:!1},r);e.exports=I},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(532),M=a(m),v=n(23),y=a(v),I=n(12),T=a(I),w=n(3),E=a(w),D=n(13),N=a(D),S=n(282),b=a(S),A=n(110),C=n(20),x=n(29),P=a(x),L=n(28),_=a(L),O=n(42),j=a(O),z=n(281),k=a(z);n(209);var R=function(e,t,n,a){return(0,M.default)({x:e,y:t,width:n-e,height:a-t},function(e){return 100*e})},U=function(e,t,n,a){return(0,M.default)({cropLUX:e,cropLUY:t,cropRLX:n+e,cropRLY:a+t},function(e){return e/100})},B=function(e,t,n,a){var o=(0,A.getDefaultCrop)(e,t,n,a);return{x:100*o.px,y:100*o.py,width:100*o.pw,height:100*o.ph}},Y=function(e,t,n,a){return B(t,e,n,a)},W=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={imgSrc:"",rotate:0,outCrop:null,initCrop:{},needInitCropOnRotate:!1,isShowCropComponent:!1,isLoaded:!1,isLoadError:!1},n.onCropChange=n.onCropChange.bind(n),n.onImageLoaded=n.onImageLoaded.bind(n),n.onSubmit=n.onSubmit.bind(n),n.onCancelClick=n.onCancelClick.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=(this.props.encImgId,this.props.imageId,this.props.rotation,e.imageEditApiTemplate),n=e.defaultImageEditParams,a=e.encImgId,o=e.imageId,i=e.rotation,s=e.crop,u=(e.imageWidth,e.imageHeight,e.elementWidth),l=e.elementHeight,d=e.imgFlip,c=void 0!==d&&d,p=e.securityString,g=void 0===p?{timestamp:"",token:"",customerId:-1}:p,f=(0,y.default)(t)((0,T.default)({},n,(0,r.default)({encImgId:a,imageId:o,rotation:i,imgFlip:c},g)));f!==this.state.imgSrc&&this.setState({isShowCropComponent:!1}),this.setState({imgSrc:f,needInitCropOnRotate:!1,rotate:i});var h=(this.props.crop,{aspect:u/l});s&&(h=(0,T.default)({},h,R(s.cropLUX,s.cropLUY,s.cropRLX,s.cropRLY))),this.setState({initCrop:h,outCrop:h}),e.isShown||this.props.isShown===e.isShown||this.setState({imgSrc:""})}},{key:"onCropChange",value:function(e,t){this.setState({outCrop:e})}},{key:"onImageLoaded",value:function(e,t,n){var a=this.state.needInitCropOnRotate;if(a){var o=this.props,r=o.imageWidth,i=o.imageHeight,s=o.elementWidth,u=o.elementHeight,l=this.state.rotate,d=90===Math.abs(l),c={};c=d?Y(r,i,s,u):B(r,i,s,u);var p=(0,C.convertObjIn)((0,T.default)({},c,{aspect:s/u}));this.setState({outCrop:p,initCrop:p})}else this.setState({outCrop:e});this.setState({isShowCropComponent:!0,isLoaded:!0})}},{key:"onSubmit",value:function(){var e=this.props,t=e.encImgId,n=e.onDoneClick,a=this.state,o=a.outCrop,r=a.rotate,i=U(o.x,o.y,o.width,o.height);n(t,i,r),this.onCancelClick()}},{key:"onCancelClick",value:function e(){var e=this.props.onCancelClick;this.setState({isLoaded:!1,isLoadError:!1}),e&&e()}},{key:"onImageError",value:function(){this.setState({isLoadError:!0,isShowCropComponent:!0})}},{key:"rotate",value:function e(t){var n=this.props,a=n.imageEditApiTemplate,o=n.defaultImageEditParams,i=n.encImgId,s=n.imageId,u=n.imgFlip,l=void 0!==u&&u,d=n.securityString,c=void 0===d?{timestamp:"",token:"",customerId:-1}:d,p=n.onRotateClick,e=this.state.rotate,g=0;g=t>0?180===e?-90:e+t:e===-90?180:e+t;var f=(0,y.default)(a)((0,T.default)({},o,(0,r.default)({imageId:s,encImgId:encodeURIComponent(i),rotation:g,imgFlip:l},c)));this.setState({imgSrc:f,rotate:g,needInitCropOnRotate:!0,isShowCropComponent:!1,isLoaded:!1,isLoadError:!1}),"function"==typeof p&&p()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.imageName,a=e.imageCornerRatios,o=this.state,r=o.imgSrc,i=o.initCrop,s=o.isShowCropComponent,u=o.outCrop,l=(0,N.default)("left-button",{disable:!this.state.isLoaded}),d=(0,N.default)("right-button",{disable:!this.state.isLoaded});return E.default.createElement(P.default,{className:"image-edit-modal",opened:t,onClosed:this.onCancelClick},E.default.createElement("h3",{className:"modal-title"},"Set Image"),E.default.createElement("div",{className:"image-name"},n),E.default.createElement("div",{className:"cropper-area"},E.default.createElement(j.default,{isShown:!s}),t?E.default.createElement(b.default,{src:r,crop:i,onChange:this.onCropChange,onImageLoaded:this.onImageLoaded,onImageError:this.onImageError,minWidth:10,minHeight:10,keepSelection:!0},a?E.default.createElement(k.default,{outCrop:u,imageCornerRatios:a}):null):null),E.default.createElement("div",{className:"rotate-controls"},E.default.createElement("div",{className:"left-control"},E.default.createElement("button",{className:l,onClick:this.rotate.bind(this,-90)}),E.default.createElement("p",{className:"description"},"-90°")),E.default.createElement("div",{className:"right-control"},E.default.createElement("button",{className:d,onClick:this.rotate.bind(this,90)}),E.default.createElement("p",{className:"description"},"+90°"))),E.default.createElement("p",{className:"modal-foot"},E.default.createElement(_.default,{onClicked:this.onSubmit,disabled:!this.state.isLoaded},"Done")))}}]),t}(w.Component);W.propTypes={isShown:w.PropTypes.bool.isRequired,imageName:w.PropTypes.string.isRequired,imageEditApiTemplate:w.PropTypes.string.isRequired,encImgId:w.PropTypes.string.isRequired,onDoneClick:w.PropTypes.func.isRequired,imageWidth:w.PropTypes.number.isRequired,imageHeight:w.PropTypes.number.isRequired,elementWidth:w.PropTypes.number.isRequired,elementHeight:w.PropTypes.number.isRequired,rotation:w.PropTypes.number.isRequired,crop:w.PropTypes.shape({cropLUX:w.PropTypes.number,cropLUY:w.PropTypes.number,cropRLX:w.PropTypes.number,cropRLY:w.PropTypes.number}).isRequired,onCancelClick:w.PropTypes.func.isRequired,onRotateClick:w.PropTypes.func},W.defaultProps={defaultImageEditParams:{px:0,py:0,pw:1,ph:1,width:480,height:310,rotation:0},rotation:0},t.default=W},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(75);n(210);var M=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=(e.id,this.props),a=m.isIE||m.isEdge?"onInput":"onChange",o=new Array;o[a]=t;for(var r in n)o[r]=n[r];return h.default.createElement("input",o)}}]),t}(f.Component);t.default=M},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){var n=e.state,a=n.total,o=n.current,r=e.props.actions,i=r.onPage;if(t>=0&&t<=a&&(e.setState({current:t}),i&&"function"==typeof i)){var s=t>o?"ClickNextPage":"ClickPreviousPage",u=s+","+t;i({total:a,current:t,TrackerParam:u})}},300)};t.goFirst=function(e){n(e,0)},t.goPrevious=function(e){var t=e.state.current;n(e,t-1)},t.goNext=function(e){var t=e.state.current;n(e,t+1)},t.goLast=function(e){var t=e.state.total;n(e,t)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(3),m=o(h),M=n(13),v=o(M),y=n(15);n(213);var I=n(285),T=a(I),w=function(e){function t(e,n){(0,u.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n)),o=a.props.data,r=o.total,s=o.current,l=void 0===s?0:s,d=o.pageStep,c=void 0===d?2:d;return a.timer=null,a.state={total:r,current:l,pageStep:c},a.goFirst=function(e){var t=e||window.event;t.preventDefault(),T.goFirst(a)},a.goPrevious=function(e){var t=e||window.event;t.preventDefault(),T.goPrevious(a)},a.goNext=function(e){var t=e||window.event;t.preventDefault(),T.goNext(a)},a.goLast=function(e){var t=e||window.event;t.preventDefault(),T.goLast(a)},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data,n=t.total,a=t.current,o=t.pageStep;n!==e.data.total&&this.setState({total:e.data.total}),a!==e.data.current&&this.setState({current:e.data.current}),o!==e.data.pageStep&&this.setState({pageStep:e.data.pageStep})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.t,a=t.className,o=t.style,r=t.isPressBook,i=(0,v.default)("x-pagination",a),s=this.state.total,u=this.state.current,l=this.state.pageStep,d=[];d=r?1===u?[1]:u===s?[(u-1)*l]:[(u-1)*l,(u-1)*l+1]:[u*l-1,u*l];var c=n("COVER"),p="";return u>0&&(c=n("SHEET")+" "+u+" "+n("OF")+" "+s,p=1===d.length?n("PAGE")+" "+d[0]:n("PAGE")+" "+d[0]+" & "+d[1]),m.default.createElement("ul",{className:i,style:o},m.default.createElement("li",{className:"item first",onClick:this.goFirst},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:0===u}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item previous",onClick:this.goPrevious},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:0===u}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item tip"},m.default.createElement("label",null,c),m.default.createElement("label",null,p)),m.default.createElement("li",{className:"item next",onClick:this.goNext},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:u===s}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item last",onClick:this.goLast},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:u===s}),m.default.createElement("a",null))))}}]),t}(h.Component);w.propTypes={actions:h.PropTypes.shape({onPage:h.PropTypes.func}),data:h.PropTypes.shape({total:h.PropTypes.number.isRequired,current:h.PropTypes.number,pageStep:h.PropTypes.number,isPressBook:h.PropTypes.bool})},w.defaultProps={data:{total:1,current:0,pageStep:2,isPressBook:!1}},t.default=(0,y.translate)("XPagination")(w)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f);n(214);var m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.percent;return h.default.createElement("span",{className:"progress-c",style:{width:t?t+"px":"",height:n?n+"px":""}},h.default.createElement("span",{className:"progress",style:{width:a+"%"}}))}}]),t}(f.Component);t.default=m,m.propTypes={width:f.PropTypes.number,height:f.PropTypes.number}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(621),M=a(m);n(215);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={defaultValue:0,defaultStep:1,defaultMin:0,defaultMax:100,defaultVertical:!1},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"percentFormatter",value:function(e){return e+" in."}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.min,a=e.vertical,o=e.step,r=e.max,i=e.tipFormatter,s=e.handleSliderChange,u=e.handleAfterChange,l=e.handleBeforeChange;return h.default.createElement(M.default,{value:t,defaultValue:this.state.defaultValue,min:n?n:this.state.defaultMin,max:r?r:this.state.defaultMax,step:o?o:this.state.defaultStep,tipFormatter:i?i:this.percentFormatter.bind(this),vertical:a?a:this.state.defaultVertical,onChange:s,onAfterChange:u,onBeforeChange:l})}}]),t}(f.Component);v.propTypes={value:f.PropTypes.number,min:f.PropTypes.number,max:f.PropTypes.number,step:f.PropTypes.number,tipFormatter:f.PropTypes.func,vertical:f.PropTypes.bool,handleSliderChange:f.PropTypes.func},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(217);var v=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,a=e.count,o=(0,M.default)("x-usage-count",t),r=n;return h.default.createElement("div",{className:o,style:r},h.default.createElement("div",{className:"text"},a))}}]),t}(f.Component);v.defaultProps={count:0},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=a(o),i=function(e,t){var n={method:"get",async:!0},a=(0,r.default)({},n,e),o=t||s();return o.upload.onprogress=function(e){a.progress&&a.progress(e)},o.onload=function(){a.success&&a.success(this.responseText,{status:this.status,statusText:this.statusText})},o.onerror=function(e){a.error&&a.error(e,{status:this.status,statusText:this.statusText})},o.onreadystatechange=function(){a.readyStateChange&&a.readyStateChange(this.readyState,this.status)},o.open(a.method,a.url,a.async),a.setHead&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"post"===a.method.toLowerCase()?o.send(a.data):o.send(null),o},s=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(!window.ActiveXObject)throw new Error("xhr not support");for(var e=["MSXML2.XMLHttp","Microsoft.XMLHTTP"],t=0,n=e.length;t<n;t++)try{return new ActiveXObject(version[t])}catch(e){}};t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(14),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=function(){function e(t){(0,s.default)(this,e),this._promise=new r.default(t),this._canceled=!1}return(0,l.default)(e,null,[{key:"all",value:function(e){return r.default.all(e)}},{key:"race",value:function(e){return r.default.race(e)}},{key:"reject",value:function(e){return r.default.reject(e)}},{key:"resolve",value:function(e){return r.default.resolve(e)}}]),(0,l.default)(e,[{key:"then",value:function(t,n){var a=this,o=new e(function(e,r){a._promise.then(function(n){a._canceled&&o.cancel(),e(t&&!a._canceled?t(n):n)},function(t){a._canceled&&o.cancel(),n&&!a._canceled?e(n(t)):r(t)})});return o}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"cancel",value:function(){return this._canceled=!0,this}}]),e}();t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBox=t.resizeImage=t.replaceColor=t.fillEmptyDataWithColor=t.setSize=t.wrapBorder=t.canvasToBase64=t.imageDataHRevert=t.imageDataVRevert=t.getClient=t.createImageData=t.fillImageData=t.toObjectUrl=t.getBase64ByImageData=t.getImageDataByBase64=t.getImageData=t.clear=t.drawCircular=t.drawRect=t.getBeveling=t.drawDashedLine=t.drawLine=t.drawTextInCenter=t.drawText=t.drawCanvas=t.drawImage=void 0;var o=n(14),r=a(o),i=(t.drawImage=function(e,t,n,a,o,r,i,s,u,l,d){var c=document.getElementById(e),p=c.getContext("2d"),g=new Image;g.onload=function(){c.width=c.width,r&&i?s?p.drawImage(g,s,u,l,d,n,a,r,i):p.drawImage(g,n,a,r,i):p.drawImage(g,n,a),o&&o(e)},g.src=t},t.drawCanvas=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments[4],r=arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments[8],l=arguments[9],d=document.getElementById(e),c=d.getContext("2d"),p=document.getElementById(t);if(p){var g=(p.getContext("2d"),u||p.width),f=l||p.height,h=o||p.width,m=r||p.height;u>0&&l>0&&c.drawImage(p,i,s,g,f,n,a,h,m)}},t.drawText=function(e,t,n,a,o,r,i){var s=document.getElementById(e),u=s.getContext("2d");u.textBaseline="top";var l=u.fillStyle;u.fillStyle=o,u.font=r+"px "+i,u.fillText(t,n,a),u.fillStyle=l},t.drawTextInCenter=function(e,t,n,a,o){var r=document.getElementById(e),i=r.getContext("2d");i.textBaseline="top";var s=i.fillStyle;i.fillStyle=n,i.font=a+"px "+o;var u=i.measureText(t).width,l=(r.width-u)/2,d=(r.height-a)/2;i.fillText(t,l,d),i.fillStyle=s},t.drawLine=function(e,t,n,a,o,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=document.getElementById(e),u=s.getContext("2d"),l=u.strokeStyle;u.strokeStyle=t;var d=u.lineWidth;u.beginPath(),u.lineWidth=i,u.moveTo(n,a),u.lineTo(o,r),u.closePath(),u.stroke(),u.strokeStyle=l,u.lineWidth=d},t.drawDashedLine=function(e,t,n,a,o,r,s,u){var l=document.getElementById(e),d=l.getContext("2d"),c=d.strokeStyle;d.strokeStyle=t;var p=d.lineWidth;s?d.lineWidth=s:d.lineWidth=1;var g=u||5;d.beginPath();for(var f=i(o-n,r-a),h=Math.floor(f/g),m=void 0,M=void 0,v=void 0,y=void 0,I=0;I<h;I++)m=n+(o-n)/h*I,M=a+(r-a)/h*I,v=n+(o-n)/h*(I+1),y=a+(r-a)/h*(I+1),d[I%2===0?"moveTo":"lineTo"](n+(o-n)/h*I,a+(r-a)/h*I);h%2!==0&&d.lineTo(v,y),d.closePath(),d.stroke(),d.strokeStyle=c,d.lineWidth=p},t.getBeveling=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))});t.drawRect=function(e,t,n,a,o,r,i,s){var u=document.getElementById(e),l=u.getContext("2d");if(l.globalCompositeOperation="source-over",i){var d=l.lineWidth;s?l.lineWidth=s:l.lineWidth=1;var c=l.strokeStyle;l.strokeStyle=t,l.beginPath(),l.moveTo(n,a),l.strokeRect(n,a,o,r),l.closePath(),l.stroke(),
l.strokeStyle=c,l.lineWidth=d}else{var p=l.fillStyle;l.fillStyle=t,l.beginPath(),l.moveTo(n,a),l.globalCompositeOperation="source-over",l.fillRect(n,a,o,r),l.closePath(),l.fillStyle=p}},t.drawCircular=function(e,t,n,a,o,r,i){var s=document.getElementById(e),u=s.getContext("2d");if(r){var l=u.lineWidth;i?u.lineWidth=i:u.lineWidth=1;var d=u.strokeStyle;u.strokeStyle=t,u.moveTo(n,a),u.beginPath(),u.arc(n,a,o,0,2*Math.PI),u.closePath(),u.stroke(),u.strokeStyle=d,u.lineWidth=l}else{var c=u.fillStyle;u.fillStyle=t,u.moveTo(n,a),u.beginPath(),u.arc(n,a,o,0,2*Math.PI),u.closePath(),u.fill(),u.fillStyle=c}},t.clear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3],o=arguments[4],r=document.getElementById(e);if(r){var i=r.getContext("2d"),s=a||r.width,u=o||r.height;i.clearRect(t,n,s,u)}},t.getImageData=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=document.getElementById(e),i=r.getContext("2d"),s=t||r.width,u=n||r.height;return i.getImageData(a,o,s,u)},t.getImageDataByBase64=function(e){return new r.default(function(t,n){var a=new Image,o=document.createElement("canvas"),r=o.getContext("2d");a.src=e,a.onload=function(){o.width=a.width,o.height=a.height,r.drawImage(a,0,0);var e=r.getImageData(0,0,a.width,a.height);t(e)},a.onerror=function(){n()}})},t.getBase64ByImageData=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t.toDataURL()},t.toObjectUrl=function(e){var t=new r.default(function(t,n){if(e)if(e.toBlob)e.toBlob(function(e){t(URL.createObjectURL(e))});else if(e.msToBlob){var a=e.msToBlob();t(URL.createObjectURL(a))}else{var o=e.toDataURL();t(o)}else n()});return t},t.fillImageData=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=document.getElementById(e),s=i.getContext("2d"),u=n||i.width,l=a||i.height;s.putImageData(t,o,r,0,0,u,l)},t.createImageData=function(e,t,n){var a=document.getElementById(e),o=a.getContext("2d"),r=t||a.width,i=n||a.height;return o.createImageData(r,i)},t.getClient=function(e){var t=document.getElementById(e);return{width:t.width,height:t.height,context:t.getContext("2d")}},t.imageDataVRevert=function(e,t){for(var n=t,a=0,o=e.height;a<o;a++)for(var r=0,i=e.width;r<i;r++)n.data[a*i*4+4*r+0]=e.data[(o-a)*i*4+4*r+0],n.data[a*i*4+4*r+1]=e.data[(o-a)*i*4+4*r+1],n.data[a*i*4+4*r+2]=e.data[(o-a)*i*4+4*r+2],n.data[a*i*4+4*r+3]=e.data[(o-a)*i*4+4*r+3];return n},t.imageDataHRevert=function(e,t){for(var n=document.createElement("canvas"),a=n.getContext("2d"),o=a.createImageData(e.width,e.height),r=0,i=e.height;r<i;r++)for(var s=0,u=e.width;s<u;s++)o.data[r*u*4+4*s+0]=e.data[r*u*4+4*(u-s)+0],o.data[r*u*4+4*s+1]=e.data[r*u*4+4*(u-s)+1],o.data[r*u*4+4*s+2]=e.data[r*u*4+4*(u-s)+2],o.data[r*u*4+4*s+3]=e.data[r*u*4+4*(u-s)+3];return o},t.canvasToBase64=function(e){var t=document.getElementById(e);return t.toDataURL("image/jpeg")},t.wrapBorder=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=document.getElementById(e),o=document.createElement("canvas"),r=o.getContext("2d"),i=a.width,s=a.height,u={top:[1,0,-n,n,0,s/2],right:[-n,n,0,1,i/2,-i/2]};return i>s?(o.width=i+s/2,o.height=s):(o.width=i,o.height=s+i/2),CanvasRenderingContext2D.prototype.transform.apply(r,u[t]),i>s?r.drawImage(a,s/2,0):r.drawImage(a,0,i/2),r.getImageData(0,0,o.width,o.height)},t.setSize=function(e,t){var n=document.getElementById(e);t.width&&(n.width=t.width),t.height&&(n.height=t.height)},t.fillEmptyDataWithColor=function(e,t,n,a){for(var o=e,r=0;r<e.width*e.height;r++)0===o.data[4*r+3]&&(o.data[4*r]=t.r,o.data[4*r+1]=t.g,o.data[4*r+2]=t.b,o.data[4*r+3]=255);return o},t.replaceColor=function(e,t,n,a,o,r,i){var s=~~(t||0),u=~~(n||0),l=t+o||e.width,d=n+r||e.height,c=e;if(s<0||u<0||l>e.width||d>e.height)throw new Error("error params!");for(var p=u;p<d;p++)for(var g=s;g<l;g++){var f=p*c.width+g,h=c.data[4*f],m=c.data[4*f+1],M=c.data[4*f+2];h===a.r&&m===a.g&&M===a.b&&(i?(c.data[4*f]=i.r,c.data[4*f+1]=i.g,c.data[4*f+2]=i.b,c.data[4*f+3]=255):c.data[4*f+3]=0)}return c},t.resizeImage=function(e,t,n){var a=document.getElementById(e),o=(a.getContext("2d"),document.createElement("canvas")),r=o.getContext("2d"),i=t||a.width,s=n||a.height;if(i!==a.width||s!==a.height){var u=void 0;i>s?(u=a.width/i,s=a.height/u):i===s&&a.width>a.height?(u=a.width/i,s=a.height/u):(u=a.height/s,i=a.width/u)}return o.width=i,o.height=s,r.drawImage(a,0,0,i,s),o.toDataURL("image/jpeg")},t.drawBox=function(e,t,n,a,o,r,i,s,u,l){var d=document.getElementById(e),c=d.getContext("2d");c.moveTo(0,0),c.lineTo(t,0),c.lineTo(t,n),c.lineTo(t-u,n-u),c.lineTo(t-u,u),c.lineTo(u,u),c.lineTo(u,n-u),c.lineTo(t-u,n-u),c.lineTo(t,n),c.lineTo(0,n),c.lineTo(u,n-u),c.lineTo(0,n),c.lineTo(0,0),c.fillStyle=a,c.fill()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.codesOfSaveProject={success:200,unexpected:-100,emptySkuOrProject:-101,emptyTitle:-102,aprodProjectSku:-104,existedTitle:-103,notFoundSku:-105,notFoundProject:-106,notOwnerOfProject:-107,projectInOrder:-108,checkFailedOfSubmit:-109,invalidOfType:-110,sessionTimeout:-111}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.addEventListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;e&&e.addEventListener&&e.addEventListener(t,a)},t.removeEventListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;e&&e.removeEventListener&&e.removeEventListener(t,a)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getDegree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;switch(parseInt(e)){case 6:t=90;break;case 8:t=-90;break;case 3:t=180}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(){var e=window.console.log,t=(window.console.table||e,function(){}),n=function(){};window.log=window.log||t,window.console.log=t,window.table=window.table||n,window.console.table=n,window.loop=function(){}}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getUserOS=function(){var e="",t="",n=navigator.appVersion,a=navigator.userAgent,o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in o){var i=o[r];if(i.r.test(a)){e=i.s;break}}switch(/Windows/.test(e)&&(t=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS X":t=/Mac OS X (10[\.\_\d]+)/.exec(a)[1];break;case"Android":t=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":t=/OS (\d+)_(\d+)_?(\d+)?/.exec(n),t=t[1]+"."+t[2]+"."+(0|t[3])}return e+" "+t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(this.src=e,s("DummyImageContainer for",e),!this.promise||!this.image){s("Initiating DummyImageContainer"),o.prototype.image=new Image;var t=this.image;o.prototype.promise=new i.default(function(e,n){t.onload=e,t.onerror=n,t.src=u(),t.complete===!0&&e(t)})}}var r=n(14),i=a(r),s=n(37),u=n(33).smallImage;e.exports=o},function(e,t,n){"use strict";function a(e,t){var n,a,r=document.createElement("div"),i=document.createElement("img"),s=document.createElement("span"),u="Hidden Text";r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin=0,r.style.padding=0,document.body.appendChild(r),i.src=o(),i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(u)),r.appendChild(s),r.appendChild(i),n=i.offsetTop-s.offsetTop+1,r.removeChild(s),r.appendChild(document.createTextNode(u)),r.style.lineHeight="normal",i.style.verticalAlign="super",a=i.offsetTop-r.offsetTop+1,document.body.removeChild(r),this.baseline=n,this.lineWidth=1,this.middle=a}var o=n(33).smallImage;e.exports=a},function(e,t,n){"use strict";function a(){this.data={}}var o=n(299);a.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new o(e,t)),this.data[e+"-"+t]},e.exports=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){this.image=null,this.src=e;var o=this,r=u(e);this.promise=(t?new i.default(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(a.proxy,r,a)).then(function(e){var t=n(112);return t(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:a.proxy,javascriptEnabled:a.javascriptEnabled,removeContainer:a.removeContainer,allowTaint:a.allowTaint,imageTimeout:a.imageTimeout/2})}).then(function(e){return o.image=e})}var r=n(14),i=a(r),s=n(33),u=s.getBounds,l=n(78).loadUrlDocument;o.prototype.proxyLoad=function(e,t,n){var a=this.src;return l(a.src,e,a.ownerDocument,t.width,t.height,n)},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.src=e,this.image=new Image;var n=this;this.tainted=null,this.promise=new i.default(function(a,o){n.image.onload=a,n.image.onerror=o,t&&(n.image.crossOrigin="anonymous"),n.image.src=e,n.image.complete===!0&&a(n.image)})}var r=n(14),i=a(r);e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var r=n(14),i=a(r),s=n(37),u=n(302),l=n(298),d=n(305),c=n(301),p=n(115),g=n(311),f=n(114),h=n(313),m=n(33).bind;o.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},o.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},o.prototype.addImage=function(e,t){return function(n){n.args.forEach(function(a){this.imageExists(e,a)||(e.splice(0,0,t.call(this,n)),s("Added image #"+e.length,"string"==typeof a?a.substring(0,100):a))},this)}},o.prototype.hasImageBackground=function(e){return"none"!==e.method},o.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new u(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||this.options.allowTaint===!0||this.isSVG(t)?new u(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new u(t,!0):this.options.proxy?new d(t,this.options.proxy):new l(t):new p(t)}return"linear-gradient"===e.method?new f(e):"gradient"===e.method?new h(e):"svg"===e.method?new g(e.args[0],this.support.svg):"IFRAME"===e.method?new c(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new l(e)},o.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||p.prototype.isInline(e)},o.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},o.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},o.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},o.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){var t=new l(e.src);return t.promise.then(function(t){e.image=t})})},o.prototype.get=function(e){var t=null;return this.images.some(function(n){return(t=n).src===e})?t:null},o.prototype.fetch=function(e){return this.images=e.reduce(m(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){s("Succesfully loaded image #"+(t+1),e)},function(n){s("Failed loading image #"+(t+1),e,n)})}),this.ready=i.default.all(this.images.map(this.getPromise,this)),s("Finished searching images"),this},o.prototype.timeout=function(e,t){var n,a=i.default.race([e.promise,new i.default(function(a,o){n=setTimeout(function(){s("Timed out loading image",e),o(e)},t)})]).then(function(e){return clearTimeout(n),e});return a.catch(function(){clearTimeout(n)}),a},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a,o){Q("Starting NodeParser"),this.renderer=t,this.options=o,this.range=null,this.support=n,this.renderQueue=[],this.stack=new V(!0,1,e.ownerDocument,null);var r=new G(e,null);if(o.background&&t.rectangle(0,0,t.width,t.height,new J(o.background)),e===e.ownerDocument.documentElement){var i=new G(r.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,i.color("backgroundColor"))}r.visibile=r.isElementVisible(o),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=z([r].concat(this.getChildren(r,o)).filter(function(e){return e.visible=e.isElementVisible(o)}).map(this.getPseudoElements,this)),this.fontMetrics=new X,Q("Fetched nodes, total:",this.nodes.length),Q("Calculate overflow clips"),this.calculateOverflowClips(),Q("Start fetching images"),this.images=a.fetch(this.nodes.filter(A)),this.ready=this.images.ready.then(q(function(){return Q("Images loaded, starting parsing"),Q("Creating stacking contexts"),this.createStackingContexts(),Q("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),Q("Render queue created with "+this.renderQueue.length+" items"),new W.default(q(function(e){o.async?"function"==typeof o.async?o.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function r(e){return e.parent&&e.parent.clip.length}function i(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function s(){}function u(e,t,n,a){return e.map(function(o,r){if(o.width>0){var i=t.left,s=t.top,u=t.width,l=t.height-e[2].width;switch(r){case 0:l=e[0].width,o.args=p({c1:[i,s],c2:[i+u,s],c3:[i+u-e[1].width,s+l],c4:[i+e[3].width,s+l]},a[0],a[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:i=t.left+t.width-e[1].width,u=e[1].width,o.args=p({c1:[i+u,s],c2:[i+u,s+l+e[2].width],c3:[i,s+l],c4:[i,s+e[0].width]},a[1],a[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+t.height-e[2].width,l=e[2].width,o.args=p({c1:[i+u,s+l],c2:[i,s+l],c3:[i+e[3].width,s],c4:[i+u-e[3].width,s]},a[2],a[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:u=e[3].width,o.args=p({c1:[i,s+l+e[2].width],c2:[i,s],c3:[i+u,s+e[0].width],c4:[i+u,s+l]},a[3],a[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return o})}function l(e,t,n,a){var o=4*((Math.sqrt(2)-1)/3),r=n*o,i=a*o,s=e+n,u=t+a;return{topLeft:c({x:e,y:u},{x:e,y:u-i},{x:s-r,y:t},{x:s,y:t}),topRight:c({x:e,y:t},{x:e+r,y:t},{x:s,y:u-i},{x:s,y:u}),bottomRight:c({x:s,y:t},{x:s,y:t+i},{x:e+r,y:u},{x:e,y:u}),bottomLeft:c({x:s,y:u},{x:s-r,y:u},{x:e,y:t+i},{x:e,y:t})}}function d(e,t,n){var a=e.left,o=e.top,r=e.width,i=e.height,s=t[0][0]<r/2?t[0][0]:r/2,u=t[0][1]<i/2?t[0][1]:i/2,d=t[1][0]<r/2?t[1][0]:r/2,c=t[1][1]<i/2?t[1][1]:i/2,p=t[2][0]<r/2?t[2][0]:r/2,g=t[2][1]<i/2?t[2][1]:i/2,f=t[3][0]<r/2?t[3][0]:r/2,h=t[3][1]<i/2?t[3][1]:i/2,m=r-d,M=i-g,v=r-p,y=i-h;return{topLeftOuter:l(a,o,s,u).topLeft.subdivide(.5),topLeftInner:l(a+n[3].width,o+n[0].width,Math.max(0,s-n[3].width),Math.max(0,u-n[0].width)).topLeft.subdivide(.5),topRightOuter:l(a+m,o,d,c).topRight.subdivide(.5),topRightInner:l(a+Math.min(m,r+n[3].width),o+n[0].width,m>r+n[3].width?0:d-n[3].width,c-n[0].width).topRight.subdivide(.5),bottomRightOuter:l(a+v,o+M,p,g).bottomRight.subdivide(.5),bottomRightInner:l(a+Math.min(v,r-n[3].width),o+Math.min(M,i+n[0].width),Math.max(0,p-n[1].width),g-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(a,o+y,f,h).bottomLeft.subdivide(.5),bottomLeftInner:l(a+n[3].width,o+y,Math.max(0,f-n[3].width),h-n[2].width).bottomLeft.subdivide(.5)}}function c(e,t,n,a){var o=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:a,subdivide:function(r){var i=o(e,t,r),s=o(t,n,r),u=o(n,a,r),l=o(i,s,r),d=o(s,u,r),p=o(l,d,r);return[c(e,i,l,p),c(p,d,u,a)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,a.x,a.y])},curveToReversed:function(a){a.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function p(e,t,n,a,o,r,i){var s=[];return t[0]>0||t[1]>0?(s.push(["line",a[1].start.x,a[1].start.y]),a[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function g(e,t,n,a,o,r,i){t[0]>0||t[1]>0?(e.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(e),a[1].curveTo(e)):e.push(["line",r,i]),(n[0]>0||n[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function f(e){return e.cssInt("zIndex")<0}function h(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function M(e){return["inline","inline-block","inline-table"].indexOf(e.css("display"))!==-1}function v(e){return e instanceof V}function y(e){return e.node.data.trim().length>0}function I(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function T(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var n=e.css("border"+t+"Radius"),a=n.split(" ");return a.length<=1&&(a[1]=a[0]),a.map(_)})}function w(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function E(e){var t=e.css("position"),n=["absolute","relative","fixed"].indexOf(t)!==-1?e.css("zIndex"):"auto";return"auto"!==n}function D(e){return"static"!==e.css("position")}function N(e){return"none"!==e.css("float")}function S(e){return["inline-block","inline-table"].indexOf(e.css("display"))!==-1}function b(e){var t=this;return function(){return!e.apply(t,arguments)}}function A(e){return e.node.nodeType===Node.ELEMENT_NODE}function C(e){return e.isPseudoElement===!0}function x(e){return e.node.nodeType===Node.TEXT_NODE}function P(e){return function(t,n){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(n.cssInt("zIndex")+e.indexOf(n)/e.length)}}function L(e){return e.getOpacity()<1}function _(e){return parseInt(e,10)}function O(e){return e.width}function j(e){return e.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)===-1}function z(e){return[].concat.apply([],e)}function k(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function R(e){for(var t,n=[],a=0,o=!1;e.length;)U(e[a])===o?(t=e.splice(0,a),t.length&&n.push(F.ucs2.encode(t)),o=!o,a=0):a++,a>=e.length&&(t=e.splice(0,a),t.length&&n.push(F.ucs2.encode(t)));return n}function U(e){return[32,13,10,9,45].indexOf(e)!==-1}function B(e){return/[^\u0000-\u00ff]/.test(e)}var Y=n(14),W=a(Y),Q=n(37),F=n(537),G=n(49),H=n(312),Z=n(306),X=n(300),J=n(77),V=n(309),K=n(33),q=K.bind,$=K.getBounds,ee=K.parseBackgrounds,te=K.offsetBounds;o.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(A(e)){C(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],n=e.parseClip();n&&["absolute","fixed"].indexOf(e.css("position"))!==-1&&t.push([["rect",e.bounds.left+n.left,e.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),e.clip=r(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,C(e)&&e.cleanDOM()}else x(e)&&(e.clip=r(e)?e.parent.clip:[]);C(e)||(e.bounds=null)},this)},o.prototype.asyncRenderer=function(e,t,n){n=n||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():n+20>Date.now()?this.asyncRenderer(e,t,n):setTimeout(q(function(){this.asyncRenderer(e,t)},this),0)},o.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+Z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+Z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},o.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},o.prototype.createStyles=function(e,t){var n=e.createElement("style");n.innerHTML=t,e.body.appendChild(n)},o.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(e,":before"),a=this.getPseudoElement(e,":after");n&&t.push(n),a&&t.push(a)}return z(t)},o.prototype.getPseudoElement=function(e,t){var n=e.computedStyle(t);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var a=k(n.content),o="url"===a.substr(0,3),r=document.createElement(o?"img":"html2canvaspseudoelement"),s=new Z(r,e,t),u=n.length-1;u>=0;u--){var l=i(n.item(u));r.style[l]=n[l]}if(r.className=Z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+Z.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,o)return r.src=ee(a)[0].args[0],[s];var d=document.createTextNode(a);return r.appendChild(d),[s,new H(d,s)]},o.prototype.getChildren=function(e,t){return z([].filter.call(e.node.childNodes,w).map(function(n){var a=[n.nodeType===Node.TEXT_NODE?new H(n,e):new G(n,e)].filter(j);return n.nodeType===Node.ELEMENT_NODE&&a.length&&"TEXTAREA"!==n.tagName?a[0].isElementVisible(t)?a.concat(this.getChildren(a[0])):[]:a},this))},o.prototype.newStackingContext=function(e,t){var n=new V(t,e.getOpacity(),e.node,e.parent);e.cloneTo(n);var a=t?n.getParentStack(this):n.parent.stack;a.contexts.push(n),e.stack=n},o.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){A(e)&&(this.isRootElement(e)||L(e)||E(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):A(e)&&(D(e)&&m(e)||S(e)||N(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},o.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},o.prototype.isRootElement=function(e){return null===e.parent},o.prototype.sortStackingContexts=function(e){e.contexts.sort(P(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},o.prototype.parseTextBounds=function(e){return function(t,n,a){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var o=a.slice(0,n).join("").length;return this.getRangeBounds(e.node,o,t.length)}if(e.node&&"string"==typeof e.node.data){var r=e.node.splitText(t.length),i=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=r,i}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},o.prototype.getWrapperBounds=function(e,t){var n=e.ownerDocument.createElement("html2canvaswrapper"),a=e.parentNode,o=e.cloneNode(!0);n.appendChild(e.cloneNode(!0)),a.replaceChild(n,e);var r=t?te(n):$(n);return a.replaceChild(o,n),r},o.prototype.getRangeBounds=function(e,t,n){var a=this.range||(this.range=e.ownerDocument.createRange());return a.setStart(e,t),a.setEnd(e,t+n),a.getBoundingClientRect()},o.prototype.parse=function(e){var t=e.contexts.filter(f),n=e.children.filter(A),a=n.filter(b(N)),o=a.filter(b(D)).filter(b(M)),r=n.filter(b(D)).filter(N),i=a.filter(b(D)).filter(M),u=e.contexts.concat(a.filter(D)).filter(m),l=e.children.filter(x).filter(y),d=e.contexts.filter(h);t.concat(o).concat(r).concat(i).concat(u).concat(l).concat(d).forEach(function(e){this.renderQueue.push(e),v(e)&&(this.parse(e),this.renderQueue.push(new s))},this)},o.prototype.paint=function(e){try{e instanceof s?this.renderer.ctx.restore():x(e)?(C(e.parent)&&e.parent.appendToDOM(),this.paintText(e),C(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(Q(e),this.options.strict)throw e}},o.prototype.paintNode=function(e){v(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},o.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(O))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(e.node);n?this.renderer.renderImage(e,t,e.borders,n):Q("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var a=this.images.get(e.node.src);a?this.renderer.renderImage(e,t,e.borders,a):Q("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},o.prototype.paintCheckbox=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height),a={width:n-1,height:n-1,top:t.top,left:t.left},o=[3,3],r=[o,o,o,o],i=[1,1,1,1].map(function(e){return{color:new J("#A5A5A5"),width:e}}),s=d(a,r,i);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(a.left+1,a.top+1,a.width-2,a.height-2,new J("#DEDEDE")),this.renderer.renderBorders(u(i,a,s,r)),e.node.checked&&(this.renderer.font(new J("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",a.left+n/6,a.top+n-1))},this)},o.prototype.paintRadio=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,n,new J("#DEDEDE"),1,new J("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+n/4)+1,Math.ceil(t.top+n/4)+1,Math.floor(n/2),new J("#424242"))},this)},o.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var n=e.node.ownerDocument,a=n.createElement("html2canvaswrapper"),o=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];o.forEach(function(t){try{a.style[t]=e.css(t)}catch(e){Q("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var r=e.parseBounds();a.style.position="fixed",a.style.left=r.left+"px",a.style.top=r.top+"px",a.textContent=t,n.body.appendChild(a),this.paintText(new H(a.firstChild,e)),n.body.removeChild(a)}},o.prototype.paintText=function(e){e.applyTextTransform();var t=F.ucs2.decode(e.node.data),n=this.options.letterRendering&&!I(e)||B(e.node.data)?t.map(function(e){return F.ucs2.encode([e])}):R(t),a=e.parent.fontWeight(),o=e.parent.css("fontSize"),r=e.parent.css("fontFamily"),i=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),a,o,r),i.length?this.renderer.fontShadow(i[0].color,i[0].offsetX,i[0].offsetY,i[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){n.map(this.parseTextBounds(e),this).forEach(function(t,a){t&&(this.renderer.text(n[a],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(r,o)))},this)},this)},o.prototype.renderTextDecoration=function(e,t,n){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+n.baseline+n.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+n.middle+n.lineWidth),t.width,1,e.color("color"))}};var ne={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};o.prototype.parseBorders=function(e){var t=e.parseBounds(),n=T(e),a=["Top","Right","Bottom","Left"].map(function(t,n){var a=e.css("border"+t+"Style"),o=e.color("border"+t+"Color");"inset"===a&&o.isBlack()&&(o=new J([255,255,255,o.a]));var r=ne[a]?ne[a][n]:null;return{width:e.cssInt("border"+t+"Width"),color:r?o[r[0]](r[1]):o,args:null}}),o=d(t,n,a);return{clip:this.parseBackgroundClip(e,o,a,n,t),borders:u(a,t,o,n)}},o.prototype.parseBackgroundClip=function(e,t,n,a,o){var r=e.css("backgroundClip"),i=[];switch(r){case"content-box":case"padding-box":g(i,a[0],a[1],t.topLeftInner,t.topRightInner,o.left+n[3].width,o.top+n[0].width),g(i,a[1],a[2],t.topRightInner,t.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),g(i,a[2],a[3],t.bottomRightInner,t.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),g(i,a[3],a[0],t.bottomLeftInner,t.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:g(i,a[0],a[1],t.topLeftOuter,t.topRightOuter,o.left,o.top),g(i,a[1],a[2],t.topRightOuter,t.bottomRightOuter,o.left+o.width,o.top),g(i,a[2],a[3],t.bottomRightOuter,t.bottomLeftOuter,o.left+o.width,o.top+o.height),g(i,a[3],a[0],t.bottomLeftOuter,t.topLeftOuter,o.left,o.top+o.height)}return i},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=document.createElement("a");n.href=e,e=n.href,this.src=e,this.image=new Image;var a=this;this.promise=new i.default(function(n,o){a.image.crossOrigin="Anonymous",a.image.onload=n,a.image.onerror=o,new s(e,t,document).then(function(e){a.image.src=e}).catch(o)})}var r=n(14),i=a(r),s=n(78).ProxyURL;e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){s.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===n}var r=n(41),i=a(r),s=n(49);o.prototype.cloneTo=function(e){o.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},o.prototype=(0,i.default)(s.prototype),o.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),
this.parent.node.className+=" "+this.getHideClass()},o.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},o.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",o.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=o},function(e,t,n){"use strict";function a(e,t,n,a,o){this.width=e,this.height=t,this.images=n,this.options=a,this.document=o}var o=n(37);a.prototype.renderImage=function(e,t,n,a){var o=e.cssInt("paddingLeft"),r=e.cssInt("paddingTop"),i=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),u=n.borders,l=t.width-(u[1].width+u[3].width+o+i),d=t.height-(u[0].width+u[2].width+r+s);this.drawImage(a,0,0,a.image.width||l,a.image.height||d,t.left+o+u[3].width,t.top+r+u[0].width,l,d)},a.prototype.renderBackground=function(e,t,n){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,n))},a.prototype.renderBackgroundColor=function(e,t){var n=e.color("backgroundColor");n.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,n)},a.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},a.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},a.prototype.renderBackgroundImage=function(e,t,n){var a=e.parseBackgroundImages();a.reverse().forEach(function(a,r,i){switch(a.method){case"url":var s=this.images.get(a.args[0]);s?this.renderBackgroundRepeating(e,t,s,i.length-(r+1),n):o("Error loading background-image",a.args[0]);break;case"linear-gradient":case"gradient":var u=this.images.get(a.value);u?this.renderBackgroundGradient(u,t,n):o("Error loading background-image",a.args[0]);break;case"none":break;default:o("Unknown background-image type",a.args[0])}},this)},a.prototype.renderBackgroundRepeating=function(e,t,n,a,o){var r=e.parseBackgroundSize(t,n.image,a),i=e.parseBackgroundPosition(t,n.image,a,r),s=e.parseBackgroundRepeat(a);switch(s){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,i,r,t,t.left+o[3],t.top+i.top+o[0],99999,r.height,o);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,i,r,t,t.left+i.left+o[3],t.top+o[0],r.width,99999,o);break;case"no-repeat":this.backgroundRepeatShape(n,i,r,t,t.left+i.left+o[3],t.top+i.top+o[0],r.width,r.height,o);break;default:this.renderBackgroundRepeat(n,i,r,{top:t.top,left:t.left},o[3],o[0])}},e.exports=a},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){d.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},p("Initialized CanvasRenderer with size",e,"x",t)}function r(e){return e.length>0}var i=n(57),s=a(i),u=n(41),l=a(u),d=n(307),c=n(114),p=n(37);o.prototype=(0,l.default)(d.prototype),o.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"===("undefined"==typeof e?"undefined":(0,s.default)(e))&&e.isColor?e.toString():e,this.ctx},o.prototype.rectangle=function(e,t,n,a,o){this.setFillStyle(o).fillRect(e,t,n,a)},o.prototype.circle=function(e,t,n,a){this.setFillStyle(a),this.ctx.beginPath(),this.ctx.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},o.prototype.circleStroke=function(e,t,n,a,o,r){this.circle(e,t,n,a),this.ctx.strokeStyle=r.toString(),this.ctx.stroke()},o.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},o.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},o.prototype.drawImage=function(e,t,n,a,o,r,i,s,u){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,n,a,o,r,i,s,u)},o.prototype.clip=function(e,t,n){this.ctx.save(),e.filter(r).forEach(function(e){this.shape(e).clip()},this),t.call(n),this.ctx.restore()},o.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},o.prototype.font=function(e,t,n,a,o,r){this.setFillStyle(e).font=[t,n,a,o,r].join(" ").split(",")[0]},o.prototype.fontShadow=function(e,t,n,a){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",n).setVariable("shadowBlur",a)},o.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},o.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},o.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},o.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),this},o.prototype.text=function(e,t,n){this.ctx.fillText(e,t,n)},o.prototype.backgroundRepeatShape=function(e,t,n,a,o,r,i,s,u){var l=[["line",Math.round(o),Math.round(r)],["line",Math.round(o+i),Math.round(r)],["line",Math.round(o+i),Math.round(s+r)],["line",Math.round(o),Math.round(s+r)]];this.clip([l],function(){this.renderBackgroundRepeat(e,t,n,a,u[3],u[0])},this)},o.prototype.renderBackgroundRepeat=function(e,t,n,a,o,r){var i=Math.round(a.left+t.left+o),s=Math.round(a.top+t.top+r);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,n),"repeat")),this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},o.prototype.renderBackgroundGradient=function(e,t){if(e instanceof c){var n=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){n.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,n)}},o.prototype.resizeImage=function(e,t){var n=e.image;if(n.width===t.width&&n.height===t.height)return n;var a,o=document.createElement("canvas");return o.width=t.width,o.height=t.height,a=o.getContext("2d"),a.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),o},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a){s.call(this,n,a),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=n(41),i=a(r),s=n(49);o.prototype=(0,i.default)(s.prototype),o.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},e.exports=o},function(e,t){"use strict";function n(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(e){var t,n,a,o,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),a=t.getBoundingClientRect(),o=a.height,123===o&&(r=!0),e.body.removeChild(n))),r},n.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},n.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),n=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},e.exports=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){this.src=e,this.image=null;var n=this;this.promise=t?new u.default(function(t,a){n.image=new Image,n.image.onload=t,n.image.onerror=a,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),n.image.complete===!0&&t(n.image)}):this.hasFabric().then(function(){return new u.default(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,n.createCanvas.call(n,t))})})}var r=n(41),i=a(r),s=n(14),u=a(s),l=n(115);o.prototype=(0,i.default)(l.prototype),e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){u.call(this,e,t)}function r(e,t,n){if(e.length>0)return t+n.toUpperCase()}var i=n(41),s=a(i),u=n(49);o.prototype=(0,s.default)(u.prototype),o.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},o.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,r);case"uppercase":return t.toUpperCase();default:return t}},e.exports=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){s.apply(this,arguments),this.type="linear"===e.args[0]?s.TYPES.LINEAR:s.TYPES.RADIAL}var r=n(41),i=a(r),s=n(113);o.prototype=(0,i.default)(s.prototype),e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){this.max=e||o.thread,this.linkHead=null,this.linkNode=null,this.pool=[]}var n=null,a=function(){},o={thread:5,try:2},r={setAttr:function(){var e=new Image;return e.dataset?function(e,t,n){return e.dataset[t]=n,n}:function(e,t,n){return e.setAttribute("data-"+t,n),n}}(),getAttr:function(){var e=new Image;return e.dataset?function(e,t){return e.dataset[t]}:function(e,t){return e.getAttribute("data-"+t)}}()};t.prototype.initPool=function(){var e,t,n,a;for(a=this,e=0;e<this.max;e++)n={},t=new Image,r.setAttr(t,"id",e),t.onload=function(){a.notice(a.getNode(this),"success",this.src),a.executeLink(this)},t.onerror=function(e){var t=a.getNode(this);t.try<o.try?(t.try=t.try+1,a.appendNode(a.createNode(t.src,t.options,t.notice,t.group,t.try))):a.notice(t,"error",this.src),a.executeLink(this)},n.img=t,n.free=!0,this.pool.push(n)},t.prototype.notice=function(e,t,n){e.notice(t,n)},t.prototype.executeLink=function(e){this.linkHead?(this.setSrc(e,this.linkHead),this.shiftNode()):this.status(e,!0)},t.prototype.getFree=function(){var e,t;for(t=0,e=this.pool.length;t<e;t++)if(this.pool[t].free)return this.pool[t];return null},t.prototype.setSrc=function(e,t){this.status(e,!1),this.setNode(e,t),e.src=t.src},t.prototype.status=function(e,t){var n=r.getAttr(e,"id");this.pool[n].free=t,t&&(this.pool[n].node=null)},t.prototype.setNode=function(e,t){var n=r.getAttr(e,"id");return this.pool[n].node=t,this.pool[n].node===t},t.prototype.getNode=function(e){var t=r.getAttr(e,"id");return this.pool[t].node},t.prototype.load=function(e,t){var n=[],o=null,r=0,i=0,s=function(){return t.once?function(e,t){var n=this.group,a=this.options;n[e].push(t),n.success.length+n.error.length===n.count&&setTimeout(function(){a.success.call(null,n.success,n.error,n.count)},1)}:function(e,t){var n=this.options;setTimeout(function(){n[e].call(null,t)},1)}}(),u={count:0,success:[],error:[]},l=null;for(t=t||{},t.success=t.success||a,t.error=t.error||a,n=n.concat(e),u.count=n.length,i=0,r=n.length;i<r;i++)l=this.createNode(n[i],t,s,u),o=this.getFree(),o?this.setSrc(o.img,l):this.appendNode(l)},t.prototype.info=function(){var e={},t=0,n=0,a=null;for(e.thread={},e.thread.count=this.pool.length,e.thread.free=0,e.task={},e.task.count=0,n=0,t=this.pool.length;n<t;n++)this.pool[n].free&&(e.thread.free=e.thread.free+1);if(a=this.linkHead)for(e.task.count=e.task.count+1;a.next;)e.task.count=e.task.count+1,a=a.next;return e},t.prototype.createNode=function(e,t,n,a,o){var r={};return r.src=e,r.options=t,r.notice=n,r.group=a,r.try=o||0,r},t.prototype.appendNode=function(e){this.linkHead?(this.linkNode.next=e,this.linkNode=e):(this.linkHead=e,this.linkNode=e)},t.prototype.shiftNode=function(){this.linkHead&&(this.linkHead=this.linkHead.next||null)},e.initImagePool=function(e){return n||(n=new t(e),n.initPool()),{load:function(){n.load.apply(n,arguments)},info:function(){return n.info.call(n)}}}}(window)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),r=a(o),i=n(59),s=a(i),u=n(58),l=a(u),d=n(14),c=a(d),p=n(4),g=a(p),f=n(5),h=a(f),m=n(18),M=null,v=function(){function e(t){(0,g.default)(this,e),this.pausePool=[],this.workingPool=[],this.maxCount=t||1,this.validateType(this.maxCount,"Max pool length",Number()),this.cleanPausePool=this.cleanPausePool.bind(this),this.remove=this.remove.bind(this),this.removeAll=this.removeAll.bind(this)}return(0,h.default)(e,[{key:"loadPromiseProducer",value:function(e,t){var n=this;return this.validateType(e,"Promise producer",Function()),new c.default(function(a,o){var r=t||(0,m.guid)();n.pausePool.push({promiseProducer:e,resolve:a,reject:o,id:r}),n.processPromise()})}},{key:"cleanPausePool",value:function(){this.pausePool=[]}},{key:"remove",value:function(e){var t=this.workingPool.findIndex(function(t){return t.id===e.id});t!==-1?this.workingPool.splice(t,1):(t=this.pausePool.findIndex(function(t){return t.id===e.id}),t!==-1&&this.pausePool.splice(t,1)),this.processPromise()}},{key:"removeAll",value:function(){var e=this,t=this.pausePool.concat(this.workingPool),n=t.map(function(e){return e.id});n.forEach(function(n){var a=t.find(function(e){return e.id==n});a&&e.remove(a)})}},{key:"processPromise",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t,n,a=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=a.workingPool.findIndex(function(t){return t.id===e.id});t!==-1&&a.workingPool.splice(t,1),a.pausePool.length&&a.processPromise()},this.workingPool.length<this.maxCount&&(n=this.pausePool.shift(),n&&(this.workingPool.push(n),n.promiseProducer().then(function(e){n.resolve(e),t(n)}).catch(function(e){n.reject(e),t(n)})));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"validateType",value:function(e,t,n){var a="undefined"==typeof n?"undefined":(0,r.default)(n);if(("undefined"==typeof e?"undefined":(0,r.default)(e))!==a)throw"Promise Pool: "+t+" must be a "+a+"."}}]),e}();window.initPromisePool=function(e){return M||(M=new v(e)),M},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),r=a(o),i=n(101),s=a(i),u=n(12),l=a(u),d=n(11),c=a(d),p=function(e){var t={},n=(0,c.default)(e,"global.options.optionGroup");return n&&n.forEach&&n.forEach(function(e){var n=e.option.length?[].concat((0,r.default)(e.option)):[e.option];t[e.id]=n}),t},g=function(e){var t={};return(0,s.default)(e,function(e,n){"key"!==n&&(t[n]=e.split(","))}),t},f=function(e){var t=[],n=e;return"undefined"==typeof e?t:(e.length||(n=[e]),n.forEach(function(e){var n=e.keyPattern.split("-"),a=(0,l.default)({},e,{keyPattern:n,entry:null}),o=[];o=Array.isArray(e.entry)?e.entry:[e.entry],o.forEach(function(e){var t=e.key.split("-"),o={};n.forEach(function(e,a){var r=t[a];r=r.startsWith("[")&&r.endsWith("]")?r.substring(1,r.length-1).split(","):r.indexOf(",")!==-1&&1===n.length?r.split(","):[r],o[e]=r});var r=(0,l.default)(e,g(e),{key:o});a.entry||(a.entry=[]),a.entry.push(r)}),t.push(a)}),t)},h=function(e){var t=(0,c.default)(e,"configurableOptionMap.optionMap");return f(t)},m=function(e){var t=(0,c.default)(e,"parameters.parameter");return f(t)},M=function(e){var t=(0,c.default)(e,"variables.variable");return f(t)},v=function(e){var t=(0,c.default)(e,"disableOptionMap.optionMap");return f(t)};t.default={prepareOptionGroup:p,prepareConfigurableOptionMap:h,prepareDisableOptionMap:v,prepareParameters:m,prepareVariables:M}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getCookieDate=function(e){var t=null,n=document.cookie.split(";");if(n)for(var a=0;a<n.length;a++){var o=n[a].split("=");if(o.length>1&&e==o[0]){t=unescape(o[1]);break}}return t},a=t.get=function(e,t,n){var a=new XMLHttpRequest;a.onload=function(e){t&&"function"==typeof t&&t(e||window.event)},a.onerror=function(e){n&&"function"==typeof n&&n(e||window.event)},a.open("GET",e),a.send()};t.goTracker=function(e,t,o,r,i){var s=""+window.location.hostname,t=t||n(" JSESSIONID")||n("JSESSIONID"),u=o||n(" AS_UID")||n("AS_UID");e=t+","+u+","+(new Date).getTime()+","+e;var l="https://venus.zno.com/b.htm?"+e;"www.zno.com"!=s&&(l="https://log.zno.com.t/b.htm?"+e),a(l,r,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAcceptFile=void 0;var a=n(50);t.isAcceptFile=function(e){var t=!0,n="",o="";if(e){var r=e.size/1048576;if(0===r)return t=!1,o="FILE_EMPTY",n="Invalid image file, please select another file",{isAccept:t,translateKey:o,errorText:n};if(r>100)return t=!1,o="FILE_EXCEEDS_MAXIMUM_SIZE",n="File exceeds maximum size of 100M",{isAccept:t,translateKey:o,errorText:n};if(a.supportedImagesTypes.indexOf(e.type)===-1)return t=!1,o="TYPE_CONFLICT",n="Only .jpg .jpeg and .png files are supported",{isAccept:t,translateKey:o,errorText:n}}return{isAccept:t,translateKey:o,errorText:n}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=new FormData;for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);return t};t.createImageFormData=function(e){return n(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(59),r=a(o),i=n(58),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(11),g=a(p),f=n(12),h=a(f),m=n(178),M=a(m),v=n(290),y=a(v),I=n(291),T=a(I),w=n(319),E=n(315),D=a(E),N=n(18),S=n(50),b=n(318),A=n(39),C=a(A),x=n(20),P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;(0,l.default)(this,e),this.count=0,this.countOfCompleted=0,this.countOfFailed=0,this.countOfProgress=0,this.countOfPending=0,this.completedFiles=[],this.failedFiles=[],this.cost=0,this.pendingPools=[],this.failedPools=[],this.instance=new D.default(t),this.push=this.push.bind(this),this.execute=this.execute.bind(this),this.remove=this.remove.bind(this),this.removeAll=this.removeAll.bind(this),this.abort=this.abort.bind(this),this.abortAll=this.abortAll.bind(this),this.retry=this.retry.bind(this),this.retryAll=this.retryAll.bind(this),this.reset=this.reset.bind(this),this.checkIsAllCompleted=this.checkIsAllCompleted.bind(this),this.find=this.find.bind(this)}return(0,c.default)(e,[{key:"updateCountStatus",value:function(e){var t=e.count,n=void 0===t?0:t,a=e.completed,o=void 0===a?0:a,r=e.failed,i=void 0===r?0:r,s=e.progress,u=void 0===s?0:s,l=e.pending,d=void 0===l?0:l,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.count+=n,this.countOfCompleted+=o,this.countOfFailed+=i,this.countOfProgress+=u,this.countOfPending+=d,c&&(this.count=n,this.countOfCompleted=o,this.countOfFailed=i,this.countOfProgress=u,this.countOfPending=d)}},{key:"checkIsAllCompleted",value:function(){return!this.countOfProgress}},{key:"updateReducerOptions",value:function(e,t){var n={};for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);var o=this.pendingPools.findIndex(function(t){return t.id===e});o!==-1?(0,h.default)(this.pendingPools[o],n):(o=this.failedPools.findIndex(function(t){return t.id===e}),o!==-1&&(0,h.default)(this.failedPools[o],n))}},{key:"onSuccess",value:function(e,t,n){this.updateCountStatus({completed:1,progress:-1}),n&&this.completedFiles.push(n),this.removePendingsById(e),this.checkIsAllCompleted()}},{key:"onProgress",value:function(e,t){}},{key:"onError",value:function(e,t,n){this.updateCountStatus({failed:1,progress:-1});var a=this.removePendingsById(e);a&&(a.executing=!1,this.failedPools.push(a)),this.failedFiles.push(n),this.checkIsAllCompleted()}},{key:"createRequestPromise",value:function(e){var t=this,n=e.url,a=e.data,o=e.success,r=e.progress,i=e.error,s=e.authData,u=e.isFormData,l=void 0!==u&&u,d=(0,N.guid)(),c=new XMLHttpRequest,p=function(){var e=new T.default(function(e,u){t.updateCountStatus({progress:1,pending:-1});var p=l?(0,w.createImageFormData)(a):a,f=Date.now(),m=0;(0,y.default)({url:n,method:"post",data:p,setHead:!l,success:function(n,r){var l=Date.now(),c=l-f;t.cost+=c;var p=C.default.xml2js(n);if(200===r.status){var m={percent:100,status:S.uploadStatus.DONE,cost:c,errorText:""},v=(0,x.convertObjIn)((0,h.default)({},p,m));t.updateReducerOptions(d,m),t.onSuccess(d,v,a.filename||s),(0,M.default)(o)&&o(v),e(v)}else{var y={isAccept:!1,percent:0,status:S.uploadStatus.FAIL,cost:c,errorText:(0,g.default)(p,"resultData.errorInfo")||"An unexpected error occurred. Try again"},I=(0,x.convertObjIn)((0,h.default)({},p,y));t.updateReducerOptions(d,y),t.onError(d,I,a.filename),(0,M.default)(i)&&i(I),u(I)}},progress:function(n){var a=Date.now(),o=a-f,i=t.computedProgress(n,m);m=i;var s={percent:i,status:S.uploadStatus.PROGRESS,cost:o,errorText:""},u=(0,x.convertObjIn)((0,h.default)({},n,s));t.updateReducerOptions(d,s),t.onProgress(d,u),(0,M.default)(r)&&r(u),100===i&&e(u)},error:function(e,n){var o=Date.now(),r=o-f;t.cost+=r;var s={percent:0,status:S.uploadStatus.FAIL,cost:r,errorText:n.statusText||"An unexpected error occurred. Try again"},l=(0,x.convertObjIn)((0,h.default)({},e,s));t.updateReducerOptions(d,s),t.onError(d,l,a.filename),(0,M.default)(i)&&i(l),u(l)}},c)});return e};return{xhr:c,id:d,executor:p,file:a.filename,isAccept:!0,retryCount:0,status:S.uploadStatus.PENDING,cost:0,errorText:""}}},{key:"push",value:function(e){var t=(0,g.default)(e,"data.filename");if(t){var n=(0,b.isAcceptFile)(t);if(!n.isAccept)return this.updateCountStatus({failed:1}),(0,h.default)({},n,{percent:0,status:S.uploadStatus.FAIL,cost:0,retryCount:0})}this.updateCountStatus({count:1,pending:1});var a=this.createRequestPromise(e);return this.pendingPools.push(a),this.execute(),a}},{key:"computedProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.loaded,a=e.total,o=e.lengthComputable,r=0;return o?isNaN(n)||isNaN(n)||(r=Math.round(n/a*100)):r=t+Math.round(Math.random()*(100-t)),r}},{key:"removePendingsById",value:function(e){var t=void 0,n=this.pendingPools.findIndex(function(t){return t.id===e});return n!==-1&&(t=this.pendingPools[n],this.pendingPools.splice(n,1)),t}},{key:"removeFailedById",value:function(e){var t=void 0,n=this.failedPools.findIndex(function(t){return t.id===e});return n!==-1&&(t=this.failedPools[n],this.failedPools.splice(n,1)),t}},{key:"execute",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(r.default.mark(function e(){var t=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.pendingPools.forEach(function(e,n){e.executing||(t.pendingPools[n].executing=!0,t.instance.loadPromiseProducer(function(){return e.executor().catch(function(e){log(e)})},e.id))});case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(e){var t=e.id,n=-1,a=0,o=0,r=0;this.instance.remove(e);var i=this.removePendingsById(t);i?i.xhr?a=-1:r=-1:(i=this.removeFailedById(t),i&&(o=-1)),i&&i.xhr&&i.xhr.abort(),this.updateCountStatus({count:n,progress:a,failed:o,pending:r})}},{key:"removeAll",value:function(){var e=this,t=this.pendingPools.concat(this.failedPools),n=t.map(function(e){return e.id});n.forEach(function(n){var a=t.find(function(e){return e.id==n});a&&e.remove(a)}),this.instance.removeAll(),this.updateCountStatus({count:0,completed:0,progress:0,failed:0,pending:0},!0)}},{key:"abort",value:function(e){var t=this.removePendingsById(e.id);t&&t.xhr&&(t.xhr.abort(),t.promise.cancel()),this.updateCountStatus({progress:-1,failed:1})}},{key:"abortAll",value:function(){var e=this,t=this.pendingPools.filter(function(e){return!!e.xhr});t.forEach(function(t){return e.abort(t)})}},{key:"retry",value:function(e){var t=this.removeFailedById(e.id);t&&(this.pendingPools.push((0,h.default)({},t,{executing:!1,retryCount:t.retryCount+1})),this.updateCountStatus({failed:-1,pending:1}),this.execute())}},{key:"retryAll",value:function(){var e=this;this.failedPools.forEach(function(t){return e.retry(t)})}},{key:"reset",value:function(){this.removeAll(),this.cost=0,this.completedFiles=[],this.failedFiles=[]}},{key:"find",value:function(e){var t=function(t){return t.find(function(t){return(0,M.default)(e)?e(t):t.id===e})},n=t(this.pendingPools);return n||(n=t(this.failedPools)),n}}]),e}(),L=null;window.initUploadPool=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return L||(L=new P(e)),L},t.default=P},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(57),r=a(o),i=function e(t,n,a){if(null==t)return"";var o="",i="undefined"==typeof t?"undefined":(0,r.default)(t);if("string"==i||"number"==i||"boolean"==i)o+="&"+n+"="+(null==a||a?encodeURIComponent(t):t);else for(var s in t){var u=null==n?s:n+(t instanceof Array?"["+s+"]":"."+s);o+=e(t[s],u,a)}return o};t.default=i},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,n){if("startMonth"in e){t({type:c.CHANGE_CALENDAR_SETTING,calendarSetting:l.default.fromJS(e)});var a=(0,s.default)(n(),"project.data.pageArray"),o=e.startMonth,r=e.startYear,i=(0,s.default)(n(),"project.data.setting"),u=i.get("product"),d=p.pageStepMap[u];a=a.map(function(e,t){var n=Math.floor(t/d),a=o-0+n,i=a>12?a-12:a,s=a>12?r-0+1:r;e=e.set("month",i),e=e.set("year",s);var u=e.get("elements");return u&&u.size&&(u=u.map(function(e){return e.get("type")===p.elementTypes.calendar?(e=e.set("month",i),e=e.set("year",s)):e})),e.set("elements",u)}),t({type:c.SET_PAGE_ARRAY,pageArray:a})}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),s=o(i);t.changeCalendarSetting=r;var u=n(2),l=o(u),d=n(10),c=a(d),p=(n(26),n(9))},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,n){var a=(0,D.getDataFromState)(n()),o=a.urls,r=a.property,i=a.setting,s=(a.snipping,o.get("uploadBaseUrl")),l=r.get("projectId"),c=i.get("product");return!e||"string"==typeof e&&e.substring(0,50).length<50?p.default.resolve():t((0,u.default)({},E.CALL_API,{apiPattern:{name:I.UPLOAD_COVER_IMAGE,params:(0,d.default)({uploadBaseUrl:s},S.default)},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:m.default.stringify({projectid:l,encodeimage:e,projectType:c})}}))}}function i(e){return function(t,n){var a=(0,f.default)(n(),"project.data.cover"),o=a.get("containers"),r=o.get("0");r=r.setIn(["template","tplGuid"],e.id);var i=(0,b.updateElementsByTemplate)(r,v.default.List(),v.default.List(),e);return i&&i.size&&(i=i.map(function(e){return e.get("type")===w.elementTypes.photo&&e.get("border")?e.delete("border"):e})),r=r.set("elements",i),o=o.set("0",r),a=a.set("containers",o),t({type:T.CHANGE_PROJECT_PROPERTY,data:{isCoverDefaultTemplateUsed:!0}}),t({type:T.SET_COVER,cover:a})}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=o(s),l=n(17),d=o(l),c=n(14),p=o(c),g=n(11),f=o(g);t.uploadCoverImage=r,t.applyDefaultTemplateToCover=i;var h=n(36),m=o(h),M=n(2),v=o(M),y=n(16),I=a(y),T=n(10),w=n(9),E=n(25),D=n(26),N=n(31),S=o(N),b=n(53)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return function(n,a){var o=(0,I.getDataFromState)(a()),r=o.currentPage,i=o.imageArray,s=o.pageArray,u=o.containers,l=m.default.fromJS(e),d=m.default.List(),c=s.find(function(e){return e.get("id")===t})||u.find(function(e){return e.get("id")===t})||r;l.forEach(function(e){d=d.push((0,E.default)(e,c,i).merge({id:(0,y.guid)()}))});var p=c.get("id");return n({type:v.CREATE_ELEMENTS,pageId:p,elements:d}),n({type:v.UPDATE_PAGE_TEMPLATE_ID,pageId:p,templateId:""}),f.default.resolve()}}function i(e,t){return r([e],t)}function s(e){return function(t,n){var a=(0,I.getDataFromState)(n()),o=a.elementPageIdMap,r=o.get(e[0]);return t({type:v.DELETE_ELEMENTS,pageId:r,elementIds:e}),t({type:v.UPDATE_PAGE_TEMPLATE_ID,pageId:r,templateId:""}),t({type:v.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(n()).elementArray)}),f.default.resolve()}}function u(e){return s([e])}function l(e,t,n){var a=t.find(function(e){return e.get("type")===D.elementTypes.cameo});if(a){var o=e.find(function(e){return e.get("elements").find(function(e){return e.get("id")===a.get("id")})});o&&n({type:v.UPDATE_ELEMENTS,updateObjectArray:m.default.fromJS([{elements:[{id:a.get("id"),encImgId:""}],pageId:o.get("id")}])})}}function d(){return function(e,t){var n=(0,I.getDataFromState)(t()),a=n.setting,o=n.elementArray,r=n.containers,i=a.get("product"),s=a.get("cover"),u=[D.coverTypes.PSNC,D.coverTypes.PSLC],d=o;return i===D.productTypes.PS&&u.indexOf(s)!==-1&&(d=o.filter(function(e){return e.get("type")!==D.elementTypes.cameo}),l(r,o,e)),e({type:v.DELETE_ALL,willDeleteElementIds:d.map(function(e){return e.get("id")})}),e({type:v.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(t()).elementArray)}),f.default.resolve()}}function c(e){return function(t,n){var a=(0,I.getDataFromState)(n()),o=a.imageArray,r=a.pageArray,i=a.containers,s=a.elementPageIdMap,u=m.default.List(),l=m.default.fromJS(e);if(!l.size)return f.default.resolve();l.forEach(function(e){var t=e.get("elements")||m.default.List([e]),n=s.get(t.getIn(["0","id"])),a=r.find(function(e){return e.get("id")===n})||i.find(function(e){return e.get("id")===n}),l=a.get("elements"),d=m.default.fromJS(t);d.forEach(function(e,t){var n=l.find(function(t){return t.get("id")===e.get("id")});if(n){var a=e.set("type",n.get("type"));d=d.set(String(t),a)}});var c=m.default.List();d.forEach(function(e){c=c.push((0,E.default)(e,a,o))}),u=u.push(m.default.Map({pageId:n,elements:c}))}),t({type:v.UPDATE_ELEMENTS,updateObjectArray:u});var d=u.getIn(["0","elements","0"]);return"undefined"!=typeof d.get("encImgId")&&t({type:v.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(n()).elementArray)}),f.default.resolve()}}function p(e){return c([{elements:[e]}])}Object.defineProperty(t,"__esModule",{value:!0});var g=n(14),f=o(g);t.createElements=r,t.createElement=i,t.deleteElements=s,t.deleteElement=u,t.deleteAll=d,t.updateElements=c,t.updateElement=p;var h=n(2),m=o(h),M=n(10),v=a(M),y=n(18),I=n(26),T=n(51),w=n(89),E=o(w),D=n(9)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return{type:i.DELETE_PROJECT_IMAGE,encImgId:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteProjectImage=o;var r=n(10),i=a(r)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(62),u=a(s),l=n(330),d=a(l),c=n(324),p=a(c),g=n(328),f=a(g),h=n(329),m=a(h),M=n(323),v=a(M),y=n(327),I=a(y),T=n(322),w=a(T),E=n(325),D=a(E);t.default=(0,i.default)({},u,d,p,f,m,v,I,w,D)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e
}}function r(e){return function(t,n){var a=(0,f.getDataFromState)(n()),o=a.urls,r=a.userId,i=o.get("baseUrl");return t((0,u.default)({},g.CALL_API,{apiPattern:{name:d.GET_PROJECT_ORDERED_STATUS,params:{baseUrl:i,projectId:e,userId:r}}}))}}function i(){return{type:p.CLEAR_ORDER_INFO}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=o(s);t.getOrderInfo=r,t.clearOrderInfo=i;var l=n(16),d=a(l),c=n(10),p=a(c),g=n(25),f=n(26)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=null,o=null;return e?(a=(0,L.generatePage)(t,n),o=(0,L.generatePage)(t,n)):(a=(0,L.generateSheet)(t,n),o=(0,L.generatePage)(t,n),o.backend.isPrint=!1),[a,o]}function i(e,t){for(var n=t.setting,a=t.parameterMap,o=t.bookSetting,i=n.get("product")===P.productTypes.PS,s=a.toJS(),u=o.getIn(["background","color"]),l=A.default.List(),d=0;d<e;d+=1){var c=r(i,s,u),p=(0,w.default)(c,2),g=p[0],f=p[1];l=l.push(A.default.fromJS(g)),l=l.push(A.default.fromJS(f))}return l}function s(e,t,n,a){var o=(0,z.getUpdatedCoverElementsOnSheetNumChange)(e,t,n,a);if(o){var r=null,i=null;e.get("containers").forEach(function(e){var t=e.get("type");switch(t){case"Full":r=e;break;case"Back":i=e}});var s=A.default.List(),u=A.default.List();if(o.forEach(function(e){if(r){var t=r.get("elements").find(function(t){return t.get("id")===e.get("id")});t&&(s=s.push(e))}if(i){var n=i.get("elements").find(function(t){return t.get("id")===e.get("id")});n&&(u=u.push(e))}}),r)return A.default.fromJS([{pageId:r.get("id"),elements:s}])}return null}function u(e,t){return function(n,a){var o=(0,_.getDataFromState)(a()),r=o.parameterMap,u=o.pageArray,l=o.setting,d=i(t,o),c=l.get("product")===P.productTypes.PS,p=u.size,g=c?p-2:p;(0,S.default)(e)&&(g=e);var f=r.getIn(["spineWidth","addtionalValue"]);n({type:x.CREATE_MULTIPLE_DUAL_PAGE,insertIndex:g,insertPageArray:d});var h=f*t;n({type:x.UPDATE_SPINE_WIDTH,spineWidth:h});var m=(0,_.getDataFromState)(a()),M=m.cover,v=m.imageArray,y=s(M,v,r,h);return y&&n({type:x.UPDATE_ELEMENTS,updateObjectArray:y}),I.default.resolve()}}function l(e){var t=1;return u(e,t)}function d(e,t){return function(n,a){var o=(0,_.getDataFromState)(a()),r=o.parameterMap;n({type:x.DELETE_DUAL_PAGE,leftPageId:e,rightPageId:t});var i=r.getIn(["spineWidth","addtionalValue"]),u=-i;n({type:x.UPDATE_SPINE_WIDTH,spineWidth:u});var l=(0,_.getDataFromState)(a()),d=l.cover,c=l.imageArray,p=s(d,c,r,u);return p&&n({type:x.UPDATE_ELEMENTS,updateObjectArray:p}),I.default.resolve()}}function c(e,t){return{type:x.CHANGE_PAGE_BGCOLOR,pageId:e,bgColor:t}}function p(e){var t=e;return t.forEach(function(e,n){e.get("id")||(t=t.setIn([String(n),"id"],(0,j.guid)()))}),t}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.APPLY_TEMPLATE_TO_PAGES;return function(n,a){var o=(0,_.getDataFromState)(a()),r=(o.cover,o.containers),i=(o.setting,o.imageArray,o.parameterMap,e);return i.forEach(function(e,t){var n=p(e.get("elements")),a=r.findIndex(function(e){return"cover"===e.get("type")});r.get(a);i=i.setIn([String(t),"elements"],n)}),n({type:t,templateDataArray:i}),n({type:x.SET_IMAGE_USED_MAP,imageUsedMap:(0,O.getImageUsedMap)((0,_.getDataFromState)(a()).elementArray)}),I.default.resolve()}}function f(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:x.APPLY_TEMPLATE_TO_PAGES;return g(A.default.fromJS([{pageId:e,templateId:t,elements:n}]),a)}function h(e,t){return{type:x.UPDATE_PAGE_TEMPLATE_ID,pageId:e,templateId:t}}function m(e){return{type:x.SET_PAGE_ARRAY,pageArray:e}}function M(e,t){return{type:x.MOVE_PAGE_BEFORE,pageId:e,beforePageId:t}}function v(e){return function(t,n){var a=(0,D.default)(n(),"project.data.pageArray"),o=(0,D.default)(n(),"project.data.setting"),r=o.get("product");return a.size&&(a=a.map(function(t){if(r===P.productTypes.WC&&t.get("type")===P.pageTypes.bottom)return t;t=t.setIn(["template","tplGuid"],e.id);var n=t.get("elements"),a=(0,k.updateElementsByTemplate)(t,A.default.List(),A.default.List(),e);return a=n.concat(a),a&&a.size&&(a=a.map(function(e){return e.get("type")===P.elementTypes.photo&&e.get("border")?e.delete("border"):e})),t.set("elements",a)})),t({type:x.CHANGE_PROJECT_PROPERTY,data:{isInnerDefaultTemplateUsed:!0}}),t({type:x.SET_PAGE_ARRAY,pageArray:a})}}Object.defineProperty(t,"__esModule",{value:!0});var y=n(14),I=o(y),T=n(38),w=o(T),E=n(11),D=o(E),N=n(66),S=o(N);t.createMultipleDualPage=u,t.createDualPage=l,t.deleteDualPage=d,t.changePageBgColor=c,t.applyTemplateToPages=g,t.applyTemplate=f,t.updatePageTemplateId=h,t.setPageArray=m,t.movePageBefore=M,t.applyDefaultTemplateToPages=v;var b=n(2),A=o(b),C=n(10),x=a(C),P=n(9),L=n(88),_=n(26),O=n(51),j=n(18),z=n(498),k=n(53)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return e.map(function(e){var a={x:e.get("px")*t,y:e.get("py")*n};return e.get("type")!==X.elementTypes.photo?(a.width=e.get("pw")*t,a.height=e.get("ph")*n):(a.pw=e.get("width")/t,a.ph=e.get("height")/n),e.merge(a)})}function i(e){var t=e;return t.forEach(function(e,n){if(e.get("type")!==X.pageTypes.spine){var a=r(e.get("elements"),e.get("width"),e.get("height"));t=t.setIn([String(n),"elements"],a)}}),t}function s(e,t){var n=t,a=e.first();return a.get("type")===X.pageTypes.cover&&(n=n.setIn(["containers","0"],a)),n}function u(e,t){var n=e,a=e.first();a.get("type")===X.pageTypes.cover&&(n=e.shift());var o=t.first(),r={bleed:o.get("bleed"),type:"bottomPage"};return n.forEach(function(e,t){n=n.set(String(t),e.merge(r))}),i(n)}function l(e){return function(t,n){var a=(0,K.getDataFromState)(n()),o=a.urls,r=(a.property,a.userId),i=o.get("baseUrl");return t((0,O.default)({},J.CALL_API,{apiPattern:{name:G.GET_PROJECT_DATA,params:{baseUrl:i,userId:r,projectId:e,autoRandomNum:Date.now()}}})).then(function(e){te(e,n,t)})}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var o=(0,K.getDataFromState)(a()),r=o.urls,i=r.get("uploadBaseUrl");return n((0,O.default)({},J.CALL_API,{apiPattern:{name:G.GET_PREVIEW_PROJECT_DATA,params:{uploadBaseUrl:i,isParentBook:t,projectId:encodeURIComponent(e)}}})).then(function(e){te(e,a,n)})}}function c(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(o,r){n="2.0";var i=(0,K.getDataFromState)(r()),s=i.urls,u=i.property,l=i.setting,d=s.get("baseUrl"),c=u.get("projectId"),p=l.get("product"),g=t.get("id"),f=a||u.get("title"),h=u.get("crossSell"),m=u.get("mainProjectUid"),M=(0,V.generateProject)(e,t,n,f),v=(0,V.generateSku)(M),y=Boolean(a),I=null,T=u.get("title");I=c===-1?G.NEW_PROJECT:G.SAVE_PROJECT,y&&(delete M.guid,I=G.NEW_PROJECT,T=a);var w=h?{crossSell:h,mainProjectUid:m}:null,E=["web-h5","1","JSON",p,n,Date.now()];return o((0,O.default)({},J.CALL_API,{apiPattern:{name:I,params:{baseUrl:d,userId:g,projectId:c,projectType:p}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:U.default.stringify((0,L.default)({title:T,projectJson:(0,x.default)(M),skuJson:(0,x.default)(v),requestKey:E.join("|")},w))}}))}}function p(e,t,n,a){return c(e,t,n,a)}function g(){return function(e,t){var n=(0,K.getDataFromState)(t()),a=n.urls,o=n.property,r=n.userId,i=a.get("baseUrl"),s=o.get("projectId");return e((0,O.default)({},J.CALL_API,{apiPattern:{name:G.SUBMIT_CHECK_FAIL_PROJECT,params:{baseUrl:i,projectId:s,userId:r}}})).then(function(t){var n=(0,k.default)(t,"resultData.code");return"200"===n&&e((0,O.default)({},J.CALL_API,{apiPattern:{name:G.GET_PROJECT_ORDERED_STATUS,params:{baseUrl:i,projectId:s,userId:r}}})),n})}}function f(e,t){return function(n,a){var o=a(),r=(0,k.default)(o,"system.env.urls").get("baseUrl");return n((0,O.default)({},J.CALL_API,{apiPattern:{name:G.HAS_PARENT_BOOK,params:{baseUrl:r,projectId:t,userId:e}}}))}}function h(e,t,n,a){return function(o,r){var i=(0,K.getDataFromState)(r()),s=i.pageArray,u=i.imageArray,l=i.containers,d=i.ratioMap,c=d.get("innerWorkspaceForArrangePages"),p=null,g=null;s.forEach(function(t){t.get("id")===e&&(p=t),t.get("id")===n&&(g=t)}),l.forEach(function(t){t.get("id")===e&&(p=t),t.get("id")===n&&(g=t)});var f=p.get("elements").find(function(e){return e.get("id")===t}),h=g.get("elements").find(function(e){return e.get("id")===a}),m=null,M=null;u.forEach(function(e){e.get("encImgId")===f.get("encImgId")&&(m=e),e.get("encImgId")===h.get("encImgId")&&(M=e)});var v=Y.default.List(),y=Y.default.Map({id:t}),I=Y.default.Map({id:a});if(M){var T=(0,q.getCropOptions)(M.get("width"),M.get("height"),f.get("width")*c,f.get("height")*c,h.get("imgRot"));y=y.merge({encImgId:h.get("encImgId"),style:h.get("style"),border:h.get("border"),cropLUX:T.cropLUX,cropLUY:T.cropLUY,cropRLX:T.cropRLX,cropRLY:T.cropRLY,imgRot:h.get("imgRot")})}else y=y.merge({encImgId:"",style:h.get("style"),border:h.get("border"),imgRot:0});var w=(0,q.getCropOptions)(m.get("width"),m.get("height"),h.get("width")*c,h.get("height")*c,f.get("imgRot"));return I=I.merge({encImgId:f.get("encImgId"),style:f.get("style"),border:f.get("border"),cropLUX:w.cropLUX,cropLUY:w.cropLUY,cropRLX:w.cropRLX,cropRLY:w.cropRLY,imgRot:f.get("imgRot")}),v=v.push(Y.default.Map({pageId:e,elements:Y.default.List([y])})),v=v.push(Y.default.Map({pageId:n,elements:Y.default.List([I])})),o({type:Z.UPDATE_ELEMENTS,updateObjectArray:v}),A.default.resolve()}}function m(e){return e.reduce(function(e,t){return e+","+t.id},"").replace(/^\,/,"")}function M(e,t){return t instanceof Array||(t=[t]),e.map(function(e){var n=t.filter(function(t){return t.id===e.id})[0];return e.encImgId=n.encImgId,e})}function v(e,t){var n=this;return function(){var a=(0,S.default)(w.default.mark(function a(o,r){var i,s,u,l,d,c,p,g,f,h;return w.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=r(),s=(0,k.default)(i,"system.env.urls").get("baseUrl"),u=123,n.next=5,o((0,O.default)({},J.CALL_API,{apiPattern:{name:G.GET_MAIN_PROJECT_IMAGE,params:{baseUrl:s,mainProjectUid:e,autoRandomNum:u}}}));case 5:if(l=n.sent,d=l.errorCode,c=l.data,!c||"1"!==d){n.next=30;break}t=t.replace(/\s+/g,"+"),n.prev=10,c=JSON.parse(c),n.next=23;break;case 14:return n.prev=14,n.t0=n.catch(10),c=(0,k.default)(Q.default.xml2js(c),"images.image"),c instanceof Array||(c=[c]),p=m(c),n.next=21,o((0,O.default)({},J.CALL_API,{apiPattern:{name:G.GET_ENCODE_IMAGE_IDS,params:{baseUrl:s}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:U.default.stringify({imageIds:p})}}));case 21:g=n.sent,c=M(c,(0,k.default)(g,"result.images.image"));case 23:return n.prev=23,f=(0,k.default)(i,"project.imageArray"),h=[].concat((0,D.default)(f?f:[]),(0,D.default)(c?c:[])),h.sort(function(e,n){return n.encImgId===encodeURIComponent(t)?1:e.shotTime-n.shotTime}),o({type:Z.SET_IMAGE_ARRAY,imageArray:Y.default.fromJS(h)}),n.abrupt("return",A.default.resolve(h));case 30:case"end":return n.stop()}},a,n,[[10,14,23,30]])}));return function(e,t){return a.apply(this,arguments)}}()}function y(){var e=this;return function(){var t=(0,S.default)(w.default.mark(function t(n,a){var o,r,i,s;return w.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a(),r=(0,k.default)(o,"system.env.urls").get("baseUrl"),i=String((0,k.default)(o,"system.env.albumId")),s=(0,k.default)(o,"project.data.deletedEncImgIds").toJS(),s.length){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",n((0,O.default)({},J.CALL_API,{apiPattern:{name:G.DELETE_SERVER_PHOTOS,params:{baseUrl:r}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:U.default.stringify({data:(0,x.default)({albumId:i,images:s})})}})));case 7:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}()}function I(e){return function(t,n){var a=(0,k.default)(n(),"system.env.urls").toJS(),o=a.baseUrl;return t((0,O.default)({},J.CALL_API,{apiPattern:{name:G.MY_PHOTOS,params:{baseUrl:o}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:U.default.stringify({customerId:e,autoRandomNum:Date.now()})}}))}}Object.defineProperty(t,"__esModule",{value:!0});var T=n(59),w=o(T),E=n(45),D=o(E),N=n(58),S=o(N),b=n(14),A=o(b),C=n(46),x=o(C),P=n(17),L=o(P),_=n(24),O=o(_),j=n(19),z=(o(j),n(11)),k=o(z);t.getProjectData=l,t.getPreviewProjectData=d,t.saveProject=c,t.cloneProject=p,t.submitCheckFailProject=g,t.hasParentBook=f,t.swapPhotoElement=h,t.loadMainProjectImages=v,t.deleteServerPhotos=y,t.getMyPhotosInfo=I;var R=n(36),U=o(R),B=n(2),Y=o(B),W=n(39),Q=o(W),F=n(16),G=a(F),H=n(10),Z=a(H),X=n(9),J=n(25),V=(n(18),n(88)),K=n(26),q=n(21),$=n(62),ee=n(51),te=function(e,t,n){var a=e.project,o=a.spec;n({type:Z.INIT_PROJECT_SETTING,setting:o});var r=(0,K.getDataFromState)(t()),i=Y.default.fromJS((0,$.computeNewData)(r,o)),l=i.get("cover"),d=i.get("pageArray"),c=i.getIn(["setting","product"]);c===X.productTypes.LPS&&n({type:Z.SWITCH_SHEET,index:1});var p=Y.default.fromJS(a.pages),g=s(p,l),f=u(p,d);n({type:Z.SET_COVER,cover:g}),n({type:Z.SET_PAGE_ARRAY,pageArray:f}),n({type:Z.SET_VARIABLE_MAP,variableMap:i.get("variableMap")}),n({type:Z.SET_PARAMETER_MAP,parameterMap:i.get("parameterMap")}),n({type:Z.SET_IMAGE_ARRAY,imageArray:Y.default.fromJS(a.images)}),n({type:Z.INIT_CALENDAR_SETTING,calendarSetting:Y.default.fromJS(a.calendarSetting)}),n({type:Z.SET_OPTION_MAP,availableOptionMap:i.get("availableOptionMap")});var h=(0,K.getDataFromState)(t()).elementArray;n({type:Z.SET_IMAGE_USED_MAP,imageUsedMap:(0,ee.getImageUsedMap)(h)})}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(){return{type:M.PROJECT_LOAD_COMPLETED}}function i(e){return{type:M.UPDATE_PROJECT_ID,projectId:e}}function s(e){return function(t,n){var a=(0,T.getDataFromState)(n()),o=a.urls,r=a.userId,i=o.get("baseUrl");return t((0,g.default)({},I.CALL_API,{apiPattern:{name:y.GET_PROJECT_TITLE,params:{baseUrl:i,userId:r,projectId:e}}}))}}function u(e,t){return function(n,a){var o=(0,T.getDataFromState)(a()),r=o.urls,i=o.userId,s=r.get("baseUrl");return n((0,g.default)({},I.CALL_API,{apiPattern:{name:y.SAVE_PROJECT_TITLE,params:{baseUrl:s,userId:i,projectId:e,projectName:t}}}))}}function l(e){return{type:M.CHANGE_PROJECT_TITLE,title:e}}function d(e){return function(t,n){var a=(0,T.getDataFromState)(n()),o=a.urls,r=o.get("baseUrl");return t((0,g.default)({},I.CALL_API,{apiPattern:{name:y.CHECK_PROJECT_TITLE,params:{baseUrl:r}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:h.default.stringify(e)}}))}}function c(e){return{type:M.CHANGE_PROJECT_PROPERTY,data:e}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(24),g=o(p);t.projectLoadCompleted=r,t.updateProjectId=i,t.getProjectTitle=s,t.saveProjectTitle=u,t.changeProjectTitle=l,t.checkProjectTitle=d,t.changeProjectProperty=c;var f=n(36),h=o(f),m=n(10),M=a(m),v=n(16),y=a(v),I=n(25),T=n(26)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e,t){var n=T.default.xml2js(y.default);if(n){var a=(0,l.default)(n,"product-spec"),o=M.default.prepareConfigurableOptionMap(a),r=M.default.prepareOptionGroup(a),i=M.default.prepareParameters(a),u=M.default.prepareVariables(a),d=M.default.prepareDisableOptionMap(a);e({type:g.INIT_SPEC_DATA,configurableOptionArray:o,allOptionMap:r,parameterArray:i,variableArray:u,disableOptionArray:d,version:a.version});var p=(0,h.getDataFromState)(t()),m=p.property,v=p.queryStringObj,I=v.get("isPreview"),E=m.get("projectId")===-1;if(!I&&E){var D=c.default.fromJS((0,f.computeNewData)(p)),N=D.getIn(["setting","product"]);N!==w.productTypes.LC&&N!==w.productTypes.LPS||e({type:g.SWITCH_SHEET,index:1}),e({type:g.INIT_PROJECT_SETTING,setting:D.get("setting")}),e({type:g.SET_COVER,cover:D.get("cover")}),e({type:g.SET_PAGE_ARRAY,pageArray:D.get("pageArray")}),e({type:g.SET_VARIABLE_MAP,variableMap:D.get("variableMap")}),e({type:g.SET_OPTION_MAP,availableOptionMap:D.get("availableOptionMap")}),e({type:g.SET_PARAMETER_MAP,parameterMap:D.get("parameterMap")})}}return s.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=o(i),u=n(11),l=o(u);t.getSpecData=r;var d=n(2),c=o(d),p=n(10),g=a(p),f=n(62),h=n(26),m=n(316),M=o(m),v=n(538),y=o(v),I=n(39),T=o(I),w=n(9)},function(e,t,n){"use strict";function a(e){return{type:r.SHOW_ALERT_MODAL,alertData:e}}function o(){return{type:r.HIDE_ALERT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlertModal=a,t.hideAlertModal=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){return function(e,t){var n=(0,u.getDataFromState)(t()),a=n.queryStringObj,o="factory"===a.get("source"),r=l.merge({}),d=l.merge({canSelectElement:!0,canMoveElement:!0,canResizeElement:!0,canRotateElement:!1,canEditElement:!0,canCreateElement:!0,canDeleteElement:!0,canShowSnackBar:!0,canSwapImage:!0,canDragImageInPage:!0,canDropImageInPage:!0,canUseElementActionBar:!0,canUseGlobalActionBar:!0}),c=l.merge({canShowOriginalPhotoLayer:o}),p=l.merge({}),g=i.default.Map({base:r,editPages:d,previewPages:c,allPages:p});e({type:s.SET_CAPABILITIES,capabilities:g})}}Object.defineProperty(t,"__esModule",{value:!0}),t.initCapabilities=o;var r=n(2),i=a(r),s=n(10),u=n(26),l=i.default.fromJS({canSelectElement:!1,canMoveElement:!1,canResizeElement:!1,canRotateElement:!1,canShowOriginalPhotoLayer:!1,canEditElement:!1,canCreateElement:!1,canDeleteElement:!1,canShowSnackBar:!1,canSwapImage:!1,canDragImageInPage:!1,canDropImageInPage:!1,canSwapSheet:!1,canNavigateSheet:!1,canUseElementActionBar:!1,canUseGlobalActionBar:!1})},function(e,t,n){"use strict";function a(){return{type:r.SHOW_CLONE_MODAL}}function o(){return{type:r.HIDE_CLONE_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showCloneModal=a,t.hideCloneModal=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return{type:r.SHOW_CONFIRM,confirmData:e}}function o(){return{type:r.HIDE_CONFIRM}}Object.defineProperty(t,"__esModule",{value:!0}),t.showConfirm=a,t.hideConfirm=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){return{type:h.SHOW_CONTACT_US_MODAL}}function r(){return{type:h.HIDE_CONTACT_US_MODAL}}function i(e){return function(t,n){var a=(0,g.getUrl)(n(),"system.env.urls"),o=a.get("baseUrl"),r=e.userId,i=e.userName,s=e.userEmail,l=e.projectName,h=e.projectId,m=e.os,M=e.browser,v=e.question,y=e.featureRequest,I=e.bug;return t((0,u.default)({},c.CALL_API,{apiPattern:{name:p.CONTACT_US,params:{baseUrl:o}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:d.default.stringify({userId:r,userName:i,userEmail:s,sku:"",projectName:l,projectId:h,autoRandomNum:(0,f.getRandomNum)().toString(),webClientId:"1",os:m,browser:M,question:v,featureRequest:y,bug:I})}}))}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=a(s);t.showContactUsModal=o,t.hideContactUsModal=r,t.handleSubmit=i;var l=n(36),d=a(l),c=n(25),p=n(16),g=n(61),f=(n(50),n(18)),h=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){return function(e){return e((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_ENV,params:{webClientId:f.webClientId,baseUrl:p.API_BASE,autoRandomNum:(0,h.getRandomNum)()}}}))}}function r(){return function(e,t){var n=(0,g.getUrl)(t(),"system.env.urls"),a=n.get("baseUrl");return e((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_SESSION_USER_INFO,params:{baseUrl:a,webClientId:f.webClientId,autoRandomNum:(0,h.getRandomNum)()}}}))}}function i(e){return function(t,n){var a=(0,g.getUrl)(n(),"system.env.urls"),o=a.get("baseUrl");return t((0,d.default)({},c.CALL_API,{apiPattern:{name:p.HEART_BEAT,params:{baseUrl:o,userId:e}}}))}}function s(e,t){return function(n,a){var o=(0,g.getUrl)(a(),"system.env.urls"),r=o.get("baseUrl");return n((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_USER_ALBUM_ID,params:{baseUrl:r,userId:e,albumName:encodeURIComponent(t)}}}))}}function u(e,t){return function(n,a){var o=(0,g.getUrl)(a(),"system.env.urls"),r=o.get("baseUrl");return n((0,d.default)({},c.CALL_API,{apiPattern:{name:p.ADD_ALBUM,params:{baseUrl:r,userId:e,webClientId:f.webClientId,albumName:t,autoRandomNum:(0,h.getRandomNum)()}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),d=a(l);t.getEnv=o,t.getUserInfo=r,t.keepAlive=i,t.getAlbumId=s,t.addAlbum=u;var c=n(25),p=n(16),g=n(61),f=n(50),h=n(18)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=i.default.parse(window.location.search.substr(1));return{type:s.PARSER_QUERYSTRING,value:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parser=o;var r=n(36),i=a(r),s=n(10)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e,t){var n=(0,l.default)(t(),"system.env.urls").toJS();return e((0,s.default)({},d.CALL_API,{apiPattern:{name:p.GET_FONTS,params:{baseUrl:n.baseUrl}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),s=o(i),u=n(11),l=o(u);t.getFontList=r;var d=n(25),c=n(16),p=a(c)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(t,n){return t({type:u.SWITCH_SHEET,index:e}),s.default.resolve()}}function r(e,t){return function(n,a){return n({type:u.SWITCH_PAGE,index:e,id:t}),s.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=a(i);t.switchSheet=o,t.switchPage=r;var u=n(10)},function(e,t,n){"use strict";function a(e){return{type:o.UPDATE_RATIO,ratios:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRatio=a;var o=n(10)},function(e,t,n){"use strict";function a(e){return{type:o.ADD_TRACKER,param:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addTracker=a;var o=n(10)},function(e,t,n){"use strict";function a(e){return{type:r.SHOW_IMAGE_EDIT_MODAL,data:e}}function o(){return{type:r.HIDE_IMAGE_EDIT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showImageEditModal=a,t.hideImageEditModal=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(t,n){var a=n(),o=a.system;return!!o.env.userInfo&&(e.sort(function(e){return["image/jpeg","image/jpg","image/png","image/x-png"].indexOf(e.type)!==-1}),t({type:p.ADD_IMAGES,files:e}),!0)}}function r(e){return function(t,n){return t({type:p.RETRY_IMAGE,guid:e})}}function i(e){return function(t,n){return t({type:p.UPLOAD_COMPLETE,fields:e}),c.default.resolve()}}function s(e){return function(t,n){return t({type:p.DELETE_IMAGE,guid:e})}}function u(e){return{type:p.AUTO_ADD_PHOTO_TO_CANVAS,params:e}}function l(){return{type:p.CLEAR_IMAGES}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(14),c=a(d);t.addImages=o,t.retryImage=r,t.uploadComplete=i,t.deleteImage=s,t.autoAddPhotoToCanvas=u,t.clearAllImages=l;var p=n(10)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return{type:l.ADD_NOTIFICATION,data:e}}function r(e){return{type:l.REMOVE_NOTIFICATION,uid:e}}function i(){return{type:l.CLEAR_NOTIFICATION}}function s(e){return{type:l.INIT_NOTIFICATION_SYSTEM,notificationSystem:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addNotification=o,t.removeNotification=r,t.clearNotification=i,t.initNotificationSystem=s;var u=n(10),l=a(u)},function(e,t,n){"use strict";function a(e){return{type:r.SHOW_PREVIEW,data:e}}function o(){return{type:r.HIDE_PREVIEW}}Object.defineProperty(t,"__esModule",{value:!0}),t.show=a,t.hide=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(t,n){var a=[e.size,e.numberOfMonth,e.dateStyle].join(","),o=(0,u.default)(n(),"system.env.urls").get("baseUrl");return t((0,i.default)({},l.CALL_API,{apiPattern:{name:d.GET_PRODUCT_PRICE,params:{baseUrl:o,options:a,product:e.product}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=a(r),s=n(11),u=a(s);t.getProductPrice=o;var l=n(25),d=n(16)},function(e,t,n){"use strict";function a(e){return{type:o.CHANGE_TAB_IN_SIDEBAR,tabIndex:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeTab=a;var o=n(10)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return function(n){return n((0,i.default)({},s.CALL_API,{apiPattern:{name:u.GET_STYLE_LIST,params:{baseUrl:u.API_BASE,autoRandomNum:(0,l.getRandomNum)(),size:e,productType:t}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=a(r);t.getStyleList=o;var s=n(25),u=n(16),l=(n(50),n(18))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return function(a,o){var i=o(),s=t,u=(0,w.default)(i,"project.data.setting").get("product");u!==S.productTypes.LC&&(s=t.split("X")[1]+"X"+t.split("X")[0]);var l=(0,w.default)(i,"system.env.urls").get("baseUrl");return a((0,m.default)({},E.CALL_API,{apiPattern:{name:D.GET_TEMPLATE_LIST,params:{baseUrl:l,designSize:s,customerId:e,autoRandomNum:(new Date).getTime(),productType:n}}})).then(function(e){if("success"===e.result.state){var t=(0,b.convertObjIn)(e.result.list.template),n=[],i=[],s="",u="",l=t instanceof Array?t:[t];l instanceof Array&&l.forEach(function(e){var t="object"===(0,f.default)(e.guid)?e.guid.__text.replace(/\s/g,""):e.guid&&e.guid.replace(/\s/g,"");0==e.usePosition?(e.isCoverDefault&&(s=t),n.push((0,v.default)({},e,{guid:t}))):e.usePosition>0&&(e.isCoverDefault&&(u=t),i.push((0,v.default)({},e,{guid:t})))}),s||(s=n.length&&(0,w.default)(n,"0.guid")),u||(u=i.length&&(0,w.default)(i,"0.guid")),s="object"===("undefined"==typeof s?"undefined":(0,f.default)(s))?s.__text.replace(/\s/g,""):s&&s.replace(/\s/g,""),u="object"===("undefined"==typeof u?"undefined":(0,f.default)(u))?u.__text.replace(/\s/g,""):u&&u.replace(/\s/g,""),a({type:N.SET_TEMPLATE_LIST,ListInfo:{coverTemplateList:n,innerTemplateList:i,coverDefaultTemplateGuid:s,innerDefaultTemplateGuid:u}});var d=(0,w.default)(o(),"project.data"),c=(0,w.default)(d,"property").get("isNewProject");if(c&&s&&u){var p=(0,w.default)(d,"setting").get("size");r(s,p),r(u,p)}}else console.log("模板列表获取失败")})}}function r(e,t){return function(n,a){var o=(0,w.default)(a(),"system.env.urls").get("baseUrl"),r=(0,w.default)(a(),"project.data.setting").get("product"),i=t;r!==S.productTypes.LC&&(i=t.split("X")[1]+"X"+t.split("X")[0]);var s=(0,I.default)(e)?e:[e];return n((0,m.default)({},E.CALL_API,{apiPattern:{name:D.APPLY_LAYOUT,params:{baseUrl:o,templateIds:s,size:i}},options:{method:"POST",body:(0,p.default)({templates:s,size:i})}}))}}function i(){return function(e,t){return e({type:N.CLEAR_TEMPLATE_LIST}),d.default.resolve()}}function s(e){return function(t,n){return t({type:N.ADD_TEMPLATE,params:e}),d.default.resolve(e)}}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:N.IS_IN_APPLY_TEMPLATE,value:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(14),d=a(l),c=n(46),p=a(c),g=n(57),f=a(g),h=n(24),m=a(h),M=n(12),v=a(M),y=n(44),I=a(y),T=n(11),w=a(T);t.getTemplateList=o,t.getTemplateInfo=r,t.clearTemplateList=i,t.addTemplate=s,t.changeApplyTemplateStatus=u;var E=n(25),D=n(16),N=n(10),S=n(9),b=n(20)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return{type:s.SHOW_TEXT_EDIT_MODAL,data:e}}function r(){return{type:s.HIDE_TEXT_EDIT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showTextEditModal=o,t.hideTextEditModal=r;var i=n(10),s=a(i)},function(e,t,n){"use strict";function a(e){return{type:r.SHOW_UPGRADE,upgradeFun:e}}function o(){return{type:r.HIDE_UPGRADE}}Object.defineProperty(t,"__esModule",{value:!0}),t.showUpgrade=a,t.hideUpgrade=o;var r=n(10)},function(e,t,n){"use strict";function a(e){return{type:o.TOGGLE_UPLOAD,status:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleUpload=a;var o=n(10)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=t-e.left,o=n-e.top;return[a,o]}function i(e,t,n,a,o){var r=t;r=(0,M.setSpineMaxDep)(t),o&&(r=r.setIn([0,"rot"],0));var i=(0,M.getIntersection)({x:n,y:a},r);return i}function s(e){if(e.isDraggingCreatePhotoFrame){e.isDraggingCreatePhotoFrame=!1;var t=e.state.draggingCreatePhotoFrame,n=t.startPosition,a=t.endPosition;if(n&&a){var o=Math.abs(a.x-n.x),r=Math.abs(a.y-n.y),i=a.x>n.x?n.x:a.x,s=a.y>n.y?n.y:a.y;if(e.forceUpdate(),o&&r){var u=e.props,l=u.actions,d=u.data,c=d.page,p=d.ratio,g=(d.settings,l.boundProjectActions,Math.round(150*p.workspace)),h=Math.round(150*p.workspace);if(o<g||r<h)return;var m=c.get("elements").maxBy(function(e){return e.get("dep")}),M=i/p.workspace,v=s/p.workspace,y=o/p.workspace,I=r/p.workspace;new S.default({type:E.elementTypes.photo,x:M,y:v,width:y,height:I,px:M/c.get("width"),py:v/c.get("height"),pw:y/c.get("width"),ph:I/c.get("height"),dep:m?m.get("dep")+1:0,border:(0,f.default)({},E.defaultBorder)})}}}}function u(e,t){if(e.isDraggingCreatePhotoFrame){var n=e.state.containerRect,a=r(n,t.pageX,t.pageY),o=(0,p.default)(a,2),i=o[0],s=o[1];e.setState({draggingCreatePhotoFrame:(0,d.default)({},e.state.draggingCreatePhotoFrame,{endPosition:{x:i,y:s}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventsToLayerOfElements=void 0;var l=n(19),d=o(l),c=n(38),p=o(c),g=n(12),f=o(g),h=n(11),m=o(h);t.createNewPhotoFrame=s,t.setEndPosition=u;var M=(n(52),n(40)),v=n(120),y=a(v),I=n(122),T=a(I),w=n(121),E=n(9),D=n(30),N=n(43),S=o(N);t.addEventsToLayerOfElements=function(e){var t=e.props.data,n=t.capability,a=t.page,o=t.paginationSpread,s=t.settings,u=t.variables,l=((0,m.default)(s,"spec.product"),o.getIn(["summary","isCover"])),d=(!(!u||!l||(0,m.default)(s,"spec.product")===E.productTypes.PS)&&u.get("cameoSupportCondition"),a.get("type")===E.pageTypes.spine);e.layerNodeOfElements;if(e.stage){var c=e.stage.getStage(),g=c.getContainer(),f={};g.addEventListener("dragover",function(e){n.get("canDropImageInPage")&&v(e)}),g.addEventListener("dragend",function(e){delete __app.dragType}),g.addEventListener("dragleave",function(t){T.onPageDragLeave(e,t)}),g.addEventListener("mouseup",function(t){if(__app.isResizing)return __app.isResizing=!1,void(e.isResizeMouseUp=!0);if(__app.isMoved)return void(__app.isMoved=!1);if(__app.isExchangeImage)I(t);else if(!e.isDraggingCreatePhotoFrame&&n.get("canSelectElement")){var a=e.state,o=a.elementArray,s=a.containerRect,u=r(s,t.pageX,t.pageY),l=(0,p.default)(u,2),c=l[0],f=l[1],h=i(g,o,c,f,d);if(e.elementControlsNode){var m=e.elementControlsNode,M=(m.isDragging,m.isRotating);h&&!M&&(y.selectElements(e,h,t),t.stopPropagation())}else h&&!t.dragEndNode&&(y.selectElements(e,h,t),t.stopPropagation())}}),g.addEventListener("mousedown",function(t){var o=e.state,s=o.elementArray,u=o.containerRect,l=r(u,t.pageX,t.pageY),c=(0,
p.default)(l,2),f=c[0],h=c[1],m=i(g,s,f,h,d);m?t.stopPropagation():a.get("enabled")&&n.get("canCreateElement")&&(e.isDraggingCreatePhotoFrame=!0,e.setState({draggingCreatePhotoFrame:{startPosition:{x:f,y:h}}}))}),g.addEventListener("click",function(t){if(e.isResizeMouseUp)return void(e.isResizeMouseUp=!1);var n=e.state,a=n.elementArray,o=n.containerRect,s=r(o,t.pageX,t.pageY),u=(0,p.default)(s,2),l=u[0],c=u[1],f=i(g,a,l,c,d);if(f){e.clicksObj.num+=1;var h=f.get("id");1===e.clicksObj.num&&window.setTimeout(function(){if(1===e.clicksObj.num)e.clicksObj.clickElementId=h;else if(h===e.clicksObj.clickElementId)switch(f.get("type")){case E.elementTypes.photo:var n=Boolean(f.get("encImgId"));n&&(0,w.onEditImage)(e,f,t);break;case E.elementTypes.paintedText:case E.elementTypes.text:(0,w.onEditText)(e,f,t)}e.clicksObj.num=0},300)}});var h=function(e){},M=function(e){};window.addEventListener("mousemove",h),window.addEventListener("mouseup",M),g.addEventListener("mousemove",function(e){__app.isExchangeImage&&n.get("canDropImageInPage")&&v(e)}),g.addEventListener("drop",function(e){n.get("canDropImageInPage")&&I(e)});var v=function(t){var n=(0,m.default)(e.props.data,"ratio");t.preventDefault();var o=e.state,s=o.elementArray,u=o.containerRect,l=r(u,t.pageX,t.pageY),c=(0,p.default)(l,2),h=c[0],M=c[1],v=i(g,s,h,M,d);if(v&&__app.dragType!==E.dragTypes.template){var y=(0,D.getTransferDataByNode)(t,!1);if(v){if(v.get("type")===E.elementTypes.text||y.elementId===v.get("id"))return void e.setState({isDragOver:!1});var I=v.get("computed");f={left:I.get("left")+"px",top:I.get("top")+"px",width:I.get("width")+"px",height:I.get("height")+"px",transform:"rotate("+v.get("rot")+"deg)"},e.setState({isDragOver:!0,hoverBoxStyle:f})}}else __app.isExchangeImage?e.setState({isDragOver:!1}):(f={left:0,top:0,width:a.get("width")*n.workspace+"px",height:a.get("height")*n.workspace+"px"},e.setState({isDragOver:!0,hoverBoxStyle:f}))},I=function(t){t.preventDefault();var n=e.props,a=n.data,o=n.actions,s=a.page,u=o.boundProjectActions,l=s.get("id"),c=e.state,f=c.elementArray,h=c.containerRect,m=r(h,t.pageX,t.pageY),M=(0,p.default)(m,2),v=M[0],I=M[1],w=i(g,f,v,I,d);if(__app.isExchangeImage){if(__app.dragType!==E.dragTypes.template&&w&&w.get("type")===E.elementTypes.photo){var N=w.get("id"),S=(0,D.getTransferDataByNode)();S.elementId&&S.elementId!==N&&u.swapPhotoElement(S.pageId,S.elementId,l,N).then(function(){e.reSelectElement(N)}),e.setState({isDragOver:!1,isExchangeImage:!1}),delete __app.isExchangeImage}}else if(__app.dragType===E.dragTypes.template)T.onPageDroped(e,t),delete __app.dragType;else if(w)w.get("type")!==E.elementTypes.photo&&w.get("type")!==E.elementTypes.cameo||y.onDrop(e,w,t);else{var b=s.get("enabled");if(!b)return;T.onPageDroped(e,t)}}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyTemplate=t.doAutoLayout=void 0;var o=n(19),r=a(o),i=n(14),s=a(i),u=n(93),l=a(u),d=n(11),c=a(d),p=n(2),g=a(p),f=n(9),h=(n(143),n(53)),m=n(55),M=n(148),v=n(90),y=function(e,t){var n=t.sort(function(e,t){return e.get("dep")-t.get("dep")});if(e&&n&&n.size){var a=n.getIn(["0","dep"]);if(a>e)return n;var o=e-a+1;return n=n.map(function(e){return e.set("dep",e.get("dep")+o)})}return[]},I=function(e,t,n,a){var o=n||e.props,r=o.data,i=o.actions,u=i.boundProjectActions,d=r.images,c=r.page,p=r.summary,m=(r.ratio,r.settings,a||r.elements),M=c,I=[],T=p.get("isCrystal")||p.get("isMetal"),w=[],E=void 0,D=m.filterNot(function(e){return e.get("type")===f.elementTypes.decoration}),N=m.filter(function(e){return e.get("type")===f.elementTypes.text&&!e.get("text")}),S=m.filter(function(e){return e.get("type")===f.elementTypes.decoration}),b=[];N&&N.size&&N.forEach(function(e){b.push(e.get("id"))}),d.forEach(function(e){I.push(e.toJS())}),D.forEach(function(e){e.get("type")===f.elementTypes.text?e.get("text")&&w.push(e):w.push(e)});var A=t.elements,C=A.filter(function(e){return e.type===f.elementTypes.text});if(C.length){var x=w.filter(function(e){return e.get("type")===f.elementTypes.text&&!!e.get("text")}),P=w.filter(function(e){return e.get("type")===f.elementTypes.photo}),L=A.filter(function(e){return e.type===f.elementTypes.text}),_=L.length,O=x.length;if(O>=_){for(var j=[],z=(0,l.default)(x,function(e){return-e.get("lastModified")}),k=0;k<_;k++)j.push(z[k]);w=P.concat(j)}E=(0,h.updateElementsByTemplate)(c,w,I,t,T);var R=E.maxBy(function(e){return e.get("dep")}),U=R?R.get("dep"):0,B=y(U,S);B&&B.size&&(E=E.concat(B)),M=c.set("elements",E);var Y=d.valueSeq().toList(),W=g.default.List(),Q=g.default.List();E.forEach(function(e){e.get("type")===f.elementTypes.photo?Q=Q.push(e):W=W.push(e)});var F=(0,v.mergeTemplateElements)(M,Q,Y);if(E=F.concat(W),E&&E.size)return b&&b.length?u.deleteElements(b).then(function(){return u.applyTemplate(c.get("id"),t.id,E)}):u.applyTemplate(c.get("id"),t.id,E)}else{E=(0,h.updateElementsByTemplate)(c,w,I,t,T),M=c.set("elements",E);var G=d.valueSeq().toList(),H=g.default.List(),Z=g.default.List();E.forEach(function(e){e.get("type")===f.elementTypes.photo?Z=Z.push(e):H=H.push(e)});var X=(0,v.mergeTemplateElements)(M,Z,G);E=X.concat(H);var J=E.maxBy(function(e){return e.get("dep")}),V=J?J.get("dep"):0,K=y(V,S);if(K&&K.size&&(E=E.concat(K)),E&&E.size)return b&&b.length?u.deleteElements(b).then(function(){return u.applyTemplate(c.get("id"),t.id,E)}):u.applyTemplate(c.get("id"),t.id,E)}return s.default.resolve()};t.doAutoLayout=function(e,t){var n=e.props,a=n.data,o=n.actions,i=a.settings,s=a.page,u=a.summary,l=a.template,d=a.images,p=o.boundProjectActions,h=g.default.fromJS(t),v=s.get("elements").concat(h),y=s.set("elements",v),T=(0,c.default)(i,"bookSetting.autoLayout"),w=(0,c.default)(i,"spec.cover");if(T&&v.size){var E=(0,c.default)(i,"spec.size"),D=(0,c.default)(l,"list")||[],N=(0,c.default)(l,"details"),S=u.get("isCover");D=y.get("enabled")?S?(0,m.filterCoverTemplates)(D,w):D.filter(function(e){return e.sheetType.toLowerCase().indexOf("inner")>=0}):[];var b=[],A=0;v.forEach(function(e){var t=d.get(e.get("encImgId"));b.push((0,r.default)({},e.toJS(),{image:t&&t.toJS()})),e.get("type")===f.elementTypes.text&&(A+=1)});var C=(0,M.getTemplateId)(s.get("width"),s.get("height"),A,D,b);if(C){var x=C+"_"+E;if(N[x])I(e,N[x],e.props,v);else{var P=o.boundTemplateActions;P.getTemplateInfo(C,E).then(function(t){var n=(0,m.convertResultToJson)(t),a=(0,m.formatTemplateInstance)(n,[C],E);a&&a.length&&I(e,a[0][x],e.props,v)})}}else p.createElements(t)}else p.createElements(t)},t.applyTemplate=function(e,t){var n=e.props,a=n.actions,o=n.data,r=o.template,i=o.settings,s=a.boundTrackerActions,u=a.boundTemplateActions,l=r.details,d=(0,c.default)(i,"spec.size");s.addTracker("SelectLayout,"+t),u.changeApplyTemplateStatus(!0);var p=t+"_"+d;l[p]?I(e,l[p]).then(function(){u.changeApplyTemplateStatus(!1),e.elementControlsNode.needRedrawElementControlsRect()}):u.getTemplateInfo(t,d).then(function(n){var a=(0,m.convertResultToJson)(n),o=(0,m.formatTemplateInstance)(a,[t],d);o&&o.length&&I(e,o[0][p]).then(function(){u.changeApplyTemplateStatus(!1),e.elementControlsNode.needRedrawElementControlsRect()})}),e.setState({selectedTemplateId:t})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var o=n(17),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=n(23),c=a(d),p=n(2),g=a(p),f=n(64),h=n(9),m=n(32),M=n(31),v=a(M),y=n(16),I=n(21),T=n(149),w=180,E=180,D=140,N=140,S=t.getCurrentScale=function(e,t,n){var a=t.data.images,o=e.props.data,r=o.images,i=void 0,s=n.toJS(),u=s.imgRot,l=s.width,d=s.height,c=s.cropLUX,p=s.cropLUY,g=s.cropRLX,h=s.cropRLY,m=s.encImgId,M=r.get(m),v=a.get(m);return M=M||v,i=M?(0,f.getScale)({imgRot:u,imageDetail:M,width:l,height:d,cropRLX:g,cropLUX:c,cropRLY:h,cropLUY:p}):0};t.computedElementOptions=function(e,t,n,a,o){var i=t||e.props,u=i.data,d=u.urls,p=u.page,f=(u.images,a||u.ratio.workspace),M={width:0,height:0,left:0,top:0,imgUrl:""},b=n.get("imgRot"),A=n.get("imgFlip"),C=p.get("width"),x=p.get("height");M.width=C*n.get("pw")*f,M.height=x*n.get("ph")*f,M.left=Math.round(C*n.get("px")*f),M.top=Math.round(x*n.get("py")*f);var P=n.get("encImgId");switch(n.get("type")){case h.elementTypes.text:M=(0,T.computedTextElementOptions)(M,n,f,d,p,D,N);break;case h.elementTypes.calendar:var L=(0,s.default)(o,"spec.product"),_=(0,s.default)(o,"spec.size"),O=n.get("month"),j=(0,s.default)(o,"spec.dateStyle"),z=O&&O<10?"0"+O:O,k=n.get("year"),R=(d.calendarBaseUrl,d.baseUrl);M.imgUrl=L&&_?(0,c.default)(y.CALENDAR_IMAGE)((0,r.default)({dateStyle:j,productType:L,size:_,month:z,year:k,baseUrl:R,imageSize:700},v.default)):null;break;case h.elementTypes.photo:if(M.keepRatio=!1,M.minHeight=Math.round(w*f),M.minWidth=Math.round(E*f),P){var U=null;if(n.get("cropRLY")&&(U=(0,I.getCropOptionsByLR)(n.get("cropLUX"),n.get("cropLUY"),n.get("cropRLX"),n.get("cropRLY"),M.width,M.height)),U){var B="rect",Y={effectId:0,opacity:100};n.get("style")&&(Y=n.get("style").toJS()),M.imgUrl=P?(0,c.default)(""+y.IMAGES_API+y.IMAGES_FILTER_PARAMS)((0,l.default)({},U,Y,(0,r.default)({encImgId:P,imgFlip:A,shape:B,rotation:b,baseUrl:d.baseUrl},v.default))):null,M.corpApiTemplate=(0,c.default)(y.IMAGES_CROPPER)({baseUrl:d.baseUrl})+y.IMAGES_CROPPER_PARAMS,M.filterApiTemplate=(0,c.default)(y.IMAGES_API)({baseUrl:d.baseUrl})+y.IMAGES_FILTER_PARAMS,M.scale=S(e,t,n)}var W=n.get("border");if(W){var Q=(0,m.hexToRGBA)(W.get("color"),W.get("opacity"));M.border={size:Math.round(W.get("size")*f),color:Q}}}}return g.default.fromJS(M)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t})})}function r(e){var t=e.state.elementArray,n=u.default.List();t.forEach(function(e){n=n.push(e.set("isSelected",!1))}),u.default.is(t,n)||e.setState({elementArray:n})}function i(e,t){var n=e.state.elementArray,a=o(n,t);e.setState({elementArray:a})}Object.defineProperty(t,"__esModule",{value:!0}),t.unSelectElements=r,t.reSelectElement=i;var s=n(2),u=a(s)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=o(r),s=n(19),u=o(s),l=n(6),d=o(l),c=n(4),p=o(c),g=n(5),f=o(g),h=n(8),m=o(h),M=n(7),v=o(M),y=n(12),I=o(y),T=n(2),w=o(T),E=n(13),D=o(E),N=n(3),S=o(N),b=n(15),A=n(27),C=(n(118),n(9)),x=n(52),P=(a(x),n(356)),L=a(P),_=n(122),O=a(_),j=n(357),z=(a(j),n(121)),k=(a(z),n(355)),R=a(k),U=n(40),B=a(U),Y=n(354),W=a(Y),Q=n(120),F=a(Q),G=n(119),H=n(129),Z=o(H),X=n(131),J=o(X),V=n(128),K=o(V);n(220);var q=function(e){function t(e){(0,p.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));n.computedElementOptions=function(e,t,a,o){return L.computedElementOptions(n,e,t,a,o)},n.doAutoLayout=function(e){return R.doAutoLayout(n,e)},n.applyTemplate=function(e){return R.applyTemplate(n,e)},n.getRenderHtml=n.getRenderHtml.bind(n),n.addEventsToLayerOfElements=function(){return W.addEventsToLayerOfElements(n)},n.createNewPhotoFrame=function(){return W.createNewPhotoFrame(n)},n.setEndPosition=function(e){return W.setEndPosition(n,e)},n.onMouseUp=function(e,t){return F.onMouseUp(n,e,t)},n.onMouseEnter=function(e,t){return F.onMouseEnter(n,e,t)},n.onMouseLeave=function(e,t){return F.onMouseLeave(n,e,t)},n.onMouseOver=function(e,t){return F.onMouseOver(n,e,t)},n.onMouseOut=function(e,t){return F.onMouseOut(n,e,t)},n.onMouseMove=function(e,t){return F.onMouseMove(n,e,t)},n.toDownload=function(e){return(0,G.toDownload)(n,e)};return n.stopEvent=function(e){return O.stopEvent(e)},n.changeCurrentElement=function(e){return O.changeCurrentElement(n,e)},n.switchPage=function(e){return O.switchPage(n,e)},n.state={elementArray:w.default.List(),downloadData:w.default.Map(),tooltip:{isShown:!1,content:"",elementRect:{},containerHeight:0},snackBar:{isShown:!1,left:0,bottom:0,width:0,templateId:0},containerRect:null,isDragOver:!1,hoverBoxStyle:{},controlRectRot:0,isExchangeImage:!1,exchangeImageThumbnail:null,exchangeThumbnailRect:{},draggingCreatePhotoFrame:{startPosition:{x:0,y:0},endPosition:{x:0,y:0}},originalPhotoLayer:{isShown:!1,x:0,y:0,imageUrl:""},hideSnackBarTimer:null,currentPointPhotoElementId:-1},n.clicksObj={num:0,clickElementId:null},n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){O.componentWillMount(this)}},{key:"componentDidMount",value:function(){this.toDownload(this.state.elementArray)}},{key:"componentWillReceiveProps",value:function(e){O.componentWillReceiveProps(this,e)}},{key:"componentWillUnmount",value:function(){}},{key:"getRenderHtml",value:function(e){var t=this,n=this.props,a=n.data,o=(n.t,a.isPreview),r=a.page,i=(a.summary,a.ratio,a.settings,a.parameters,a.paginationSpread,a.isBookCoverInnerWarp,a.materials,a.project,r.get("id")),s=[],u=this.state.downloadData,l=B.sortElementsByZIndex(e),d={onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove};return l&&l.size&&l.forEach(function(e){var n=e.get("id"),a=u.get(n)||w.default.Map(),r={key:n,element:e,isPreview:o,actions:d,imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),isShowTextNotFit:!1,isShowTextOverflow:!1,tryToDownload:function(){return t.toDownload(w.default.List([e]))},isScreenshot:!0};switch(e.get("type")){case C.elementTypes.photo:var l=!0,c={key:n,element:e,isPreview:!0,pageId:i,isScreenshot:!0,imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),actions:(0,I.default)({},d,{onElementArrayChange:t.onElementArrayChange,updateElement:t.updateElement,changeCurrentElement:t.changeCurrentElement}),tryToDownload:function(){return t.toDownload(w.default.List([e]),l)}};s.push(S.default.createElement(Z.default,c));break;case C.elementTypes.text:if(!e.get("text"))return;s.push(S.default.createElement(J.default,r));break;case C.elementTypes.calendar:var p={key:n,element:e,isPreview:o,actions:{},imageObj:a.get("imageObj"),downloadStatus:a.get("downloadStatus"),tryToDownload:function(){return t.toDownload(w.default.List([e]))},isScreenshot:!0};s.push(S.default.createElement(K.default,p))}}),s}},{key:"updateElement",value:function(e){var t=this.props.actions,n=t.boundProjectActions;delete e.computed,n.updateElement(e)}},{key:"clearHideSnackBarTimer",value:function(){var e=this.state.hideSnackBarTimer;window.clearTimeout(e)}},{key:"delayHideSnackBar",value:function(){var e=this,t=window.setTimeout(function(){e.state&&e.setState({snackBar:(0,u.default)({},e.state.snackBar,{isShown:!1})})},30);this.setState({hideSnackBarTimer:t})}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=t.actions,o=(t.t,this.state),r=(o.isDragOver,o.hoverBoxStyle,o.controlRectRot,o.downloadData),s=(o.isExchangeImage,o.exchangeThumbnailRect,n.page),u=n.ratio,l=n.summary,d=(n.settings,n.specData,n.isBookCoverInnerWarp,n.innerEffectValue,n.project,n.x),c=n.y,p=(a.boundImagesActions,s.get("enabled")),g=(s.get("id"),l.get("isCover")),f=(s.get("isActive"),(0,D.default)("book-page",{enabled:p,disabled:!p,cover:g,inner:!g})),h={width:Math.round(s.get("width")*u.workspace),height:Math.round(s.get("height")*u.workspace)},m=this.state,M=m.elementArray,v=(m.containerRect,m.tooltip,m.snackBar,m.draggingCreatePhotoFrame),y=(m.originalPhotoLayer,m.currentPointPhotoElementId),I=w.default.List(),T=w.default.List();M.forEach(function(e){e.get("isSelected")?I=I.push(e):T=T.push(e)});var E=(M.find(function(e){return e.get("id")===y}),M),N=null,b=null,C=-1;1===I.size&&(b=I.get(0),C=b.get("id")),I.size&&I.getIn([0,"encImgId"])&&(N=r.getIn([C,"imageObj"]));var x=(r.get(C)||w.default.Map(),{ref:function(t){return e.stage=t},width:h.width,height:h.height,className:f,onMouseDown:this.switchPage});a.activePage&&(x.onMouseUp=this.activePage);var P=v.startPosition,L=v.endPosition,_={fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};P&&L&&(_.x=P.x,_.y=P.y,_.width=L.x-P.x,_.height=L.y-P.y);var O={x:d,y:c};return S.default.createElement(A.Group,(0,i.default)({ref:function(t){return e.unselectElements=t}},O),this.getRenderHtml(E))}}]),t}(N.Component);q.propTypes={},q.defaultProps={},t.default=(0,b.translate)("BookPageScreenshot")(q)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var a=t-e.left,o=n-e.top;return[a,o]}function i(e,t,n,a,o){var r=t;r=(0,M.setSpineMaxDep)(t),o&&(r=r.setIn([0,"rot"],0));var i=(0,M.getIntersection)({x:n,y:a},r);return i}function s(e){if(e.isDraggingCreatePhotoFrame){e.isDraggingCreatePhotoFrame=!1;var t=e.state.draggingCreatePhotoFrame,n=t.startPosition,a=t.endPosition;if(n&&a){var o=Math.abs(a.x-n.x),r=Math.abs(a.y-n.y),i=a.x>n.x?n.x:a.x,s=a.y>n.y?n.y:a.y;if(e.forceUpdate(),o&&r){var u=e.props,l=u.actions,d=u.data,c=d.page,p=d.ratio,g=(d.settings,l.boundProjectActions,Math.round(150*p.workspace)),h=Math.round(150*p.workspace);if(o<g||r<h)return;var m=c.get("elements").maxBy(function(e){return e.get("dep")}),M=i/p.workspace,v=s/p.workspace,y=o/p.workspace,I=r/p.workspace;new S.default({type:E.elementTypes.photo,x:M,y:v,width:y,height:I,px:M/c.get("width"),py:v/c.get("height"),pw:y/c.get("width"),ph:I/c.get("height"),dep:m?m.get("dep")+1:0,border:(0,f.default)({},E.defaultBorder)})}}}}function u(e,t){if(e.isDraggingCreatePhotoFrame){var n=e.state.containerRect,a=r(n,t.pageX,t.pageY),o=(0,p.default)(a,2),i=o[0],s=o[1];e.setState({draggingCreatePhotoFrame:(0,d.default)({},e.state.draggingCreatePhotoFrame,{endPosition:{x:i,y:s}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventsToLayerOfElements=void 0;var l=n(19),d=o(l),c=n(38),p=o(c),g=n(12),f=o(g),h=n(11),m=o(h);t.createNewPhotoFrame=s,t.setEndPosition=u;var M=(n(52),n(40)),v=n(124),y=a(v),I=n(126),T=a(I),w=n(125),E=n(9),D=n(30),N=n(43),S=o(N);t.addEventsToLayerOfElements=function(e){var t=e.props.data,n=t.capability,a=t.page,o=t.paginationSpread,s=t.settings;t.variables,(0,m.default)(s,"spec.product"),o.getIn(["summary","isCover"]),e.layerNodeOfElements;if(e.stage){var u=e.stage.getStage(),l=u.getContainer(),d={};l.addEventListener("dragover",function(e){n.get("canDropImageInPage")&&f(e)}),l.addEventListener("dragend",function(e){delete __app.dragType}),l.addEventListener("dragleave",function(t){T.onPageDragLeave(e,t)}),l.addEventListener("mouseup",function(t){if(__app.isResizing)return __app.isResizing=!1,void(e.isResizeMouseUp=!0);if(__app.isMoved)return void(__app.isMoved=!1);if(__app.isExchangeImage)h(t);else if(!e.isDraggingCreatePhotoFrame&&n.get("canSelectElement")){var a=e.state,o=a.elementArray,s=a.containerRect,u=r(s,t.pageX,t.pageY),d=(0,p.default)(u,2),c=d[0],g=d[1],f=i(l,o,c,g);if(e.elementControlsNode){var m=e.elementControlsNode,M=(m.isDragging,m.isRotating);f&&!M&&(y.selectElements(e,f,t),t.stopPropagation())}else f&&!t.dragEndNode&&(y.selectElements(e,f,t),t.stopPropagation())}}),l.addEventListener("mousedown",function(t){var o=e.state,s=o.elementArray,u=o.containerRect,d=r(u,t.pageX,t.pageY),c=(0,p.default)(d,2),g=c[0],f=c[1],h=i(l,s,g,f);h?t.stopPropagation():a.get("enabled")&&n.get("canCreateElement")&&(e.isDraggingCreatePhotoFrame=!0,e.setState({draggingCreatePhotoFrame:{startPosition:{x:g,y:f}}}))}),l.addEventListener("click",function(t){if(e.isResizeMouseUp)return void(e.isResizeMouseUp=!1);var n=e.state,a=n.elementArray,o=n.containerRect,s=r(o,t.pageX,t.pageY),u=(0,p.default)(s,2),d=u[0],c=u[1],g=i(l,a,d,c);if(g){e.clicksObj.num+=1;var f=g.get("id");1===e.clicksObj.num&&window.setTimeout(function(){if(1===e.clicksObj.num)e.clicksObj.clickElementId=f;else if(f===e.clicksObj.clickElementId)switch(g.get("type")){case E.elementTypes.photo:var n=Boolean(g.get("encImgId"));n&&(0,w.onEditImage)(e,g,t);break;case E.elementTypes.paintedText:case E.elementTypes.text:(0,w.onEditText)(e,g,t)}e.clicksObj.num=0},300)}});var c=function(e){},g=function(e){};window.addEventListener("mousemove",c),window.addEventListener("mouseup",g),l.addEventListener("mousemove",function(e){__app.isExchangeImage&&n.get("canDropImageInPage")&&f(e)}),l.addEventListener("drop",function(e){n.get("canDropImageInPage")&&h(e)});var f=function(t){var n=(0,m.default)(e.props.data,"ratio");t.preventDefault();var o=e.state,s=o.elementArray,u=o.containerRect,c=r(u,t.pageX,t.pageY),g=(0,p.default)(c,2),f=g[0],h=g[1],M=i(l,s,f,h);if(M&&__app.dragType!==E.dragTypes.template){var v=(0,D.getTransferDataByNode)(t,!1);if(M){if(M.get("type")===E.elementTypes.text||v.elementId===M.get("id"))return void e.setState({isDragOver:!1});var y=M.get("computed");d={left:y.get("left")+"px",top:y.get("top")+"px",width:y.get("width")+"px",height:y.get("height")+"px",transform:"rotate("+M.get("rot")+"deg)"},e.setState({isDragOver:!0,hoverBoxStyle:d})}}else __app.isExchangeImage?e.setState({isDragOver:!1}):(d={left:0,top:0,width:a.get("width")*n.workspace+"px",height:a.get("height")*n.workspace+"px"},e.setState({isDragOver:!0,hoverBoxStyle:d}))},h=function(t){t.preventDefault();var n=e.props,a=n.data,o=n.actions,s=a.page,u=o.boundProjectActions,d=s.get("id"),c=e.state,g=c.elementArray,f=c.containerRect,h=r(f,t.pageX,t.pageY),m=(0,p.default)(h,2),M=m[0],v=m[1],I=i(l,g,M,v);if(__app.isExchangeImage){if(__app.dragType!==E.dragTypes.template&&I&&I.get("type")===E.elementTypes.photo){var w=I.get("id"),N=(0,D.getTransferDataByNode)();N.elementId&&N.elementId!==w&&u.swapPhotoElement(N.pageId,N.elementId,d,w).then(function(){e.reSelectElement(w)}),e.setState({isDragOver:!1,isExchangeImage:!1}),delete __app.isExchangeImage}}else if(__app.dragType===E.dragTypes.template)T.onPageDroped(e,t),delete __app.dragType;else if(I)I.get("type")!==E.elementTypes.photo&&I.get("type")!==E.elementTypes.cameo||y.onDrop(e,I,t);else{var S=s.get("enabled");if(!S)return;T.onPageDroped(e,t)}}}}},355,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var o=n(17),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=n(23),c=a(d),p=n(2),g=a(p),f=n(64),h=n(9),m=n(32),M=n(31),v=a(M),y=n(16),I=n(21),T=n(149),w=180,E=180,D=140,N=140,S=t.getCurrentScale=function(e,t,n){var a=t.data.images,o=e.props.data,r=o.images,i=void 0,s=n.toJS(),u=s.imgRot,l=s.width,d=s.height,c=s.cropLUX,p=s.cropLUY,g=s.cropRLX,h=s.cropRLY,m=s.encImgId,M=r.get(m),v=a.get(m);return M=M||v,i=M?(0,f.getScale)({imgRot:u,imageDetail:M,width:l,height:d,cropRLX:g,cropLUX:c,cropRLY:h,cropLUY:p}):0};t.computedElementOptions=function(e,t,n,a,o){var i=t||e.props,u=i.data,d=u.urls,p=u.page,f=(u.images,a||u.ratio.workspace),M={width:0,height:0,left:0,top:0,imgUrl:""},b=n.get("imgRot"),A=n.get("imgFlip"),C=p.get("width"),x=p.get("height");M.width=C*n.get("pw")*f,M.height=x*n.get("ph")*f,M.left=Math.round(C*n.get("px")*f),M.top=Math.round(x*n.get("py")*f);var P=n.get("encImgId");switch(n.get("type")){case h.elementTypes.text:M=(0,T.computedTextElementOptions)(M,n,f,d,p,D,N);break;case h.elementTypes.calendar:var L=(0,s.default)(o,"spec.product"),_=(0,s.default)(o,"spec.size"),O=(0,s.default)(o,"spec.dateStyle"),j=n.get("month"),z=j&&j<10?"0"+j:j,k=n.get("year"),R=(d.calendarBaseUrl,d.baseUrl);M.imgUrl=L&&_?(0,c.default)(y.CALENDAR_IMAGE)((0,r.default)({dateStyle:O,productType:L,size:_,month:z,year:k,baseUrl:R,imageSize:700},v.default)):null;break;case h.elementTypes.photo:if(M.keepRatio=!1,M.minHeight=Math.round(w*f),M.minWidth=Math.round(E*f),P){var U=null;if(n.get("cropRLY")&&(U=(0,I.getCropOptionsByLR)(n.get("cropLUX"),n.get("cropLUY"),n.get("cropRLX"),n.get("cropRLY"),M.width,M.height)),U){var B="rect",Y={effectId:0,opacity:100};n.get("style")&&(Y=n.get("style").toJS()),M.imgUrl=P?(0,c.default)(""+y.IMAGES_API+y.IMAGES_FILTER_PARAMS)((0,l.default)({},U,Y,(0,r.default)({encImgId:P,imgFlip:A,shape:B,rotation:b,baseUrl:d.baseUrl},v.default))):null,M.corpApiTemplate=(0,c.default)(y.IMAGES_CROPPER)({baseUrl:d.baseUrl})+y.IMAGES_CROPPER_PARAMS,M.filterApiTemplate=(0,c.default)(y.IMAGES_API)({baseUrl:d.baseUrl})+y.IMAGES_FILTER_PARAMS,M.scale=S(e,t,n)}var W=n.get("border");if(W){var Q=(0,m.hexToRGBA)(W.get("color"),W.get("opacity"));M.border={size:Math.round(W.get("size")*f),color:Q}}}}return g.default.fromJS(M)}},357,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,a){var o=Math.atan2(a-t,n-e);return o}function r(e){return e*(Math.PI/180)}function i(e){return e*(180/Math.PI)}function s(e){var t=0;return t=e<0?e%360+360:e%360}Object.defineProperty(t,"__esModule",{value:!0});var u=n(17),l=a(u),d=n(19),c=a(d),p=n(38),g=a(p),f=n(6),h=a(f),m=n(4),M=a(m),v=n(5),y=a(v),I=n(8),T=a(I),w=n(7),E=a(w),D=n(3),N=a(D),S=n(2),b=a(S),A=n(27),C=n(502),x=n(64),P=n(364),L=a(P),_=n(9),O=n(63),j=n(132),z=a(j),k=n(130),R=a(k),U=[0,2,4,6],B=[3,7],Y=[1,5],W=function(e){function t(e){(0,M.default)(this,t);var n=(0,T.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return n.state={x:0,y:0,width:0,height:0,degree:0,offset:{x:0,y:0},needRedraw:!1,clickElementId:null},n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onRotateStart=n.onRotateStart.bind(n),n.onRotate=n.onRotate.bind(n),n.onRotateStop=n.onRotateStop.bind(n),n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.getPointAndOpposite=n.getPointAndOpposite.bind(n),n.clampElementArray=n.clampElementArray.bind(n),n.getNewControlBoxAndElementArray=n.getNewControlBoxAndElementArray.bind(n),n.moveElement=n.moveElement.bind(n),n.redrawElementControlsRect=n.redrawElementControlsRect.bind(n),n.needRedrawElementControlsRect=n.needRedrawElementControlsRect.bind(n),n.setCursor=n.setCursor.bind(n),n.clicks=0,n}return(0,E.default)(t,e),(0,y.default)(t,[{key:"componentWillMount",value:function(){this.redrawElementControlsRect(this.props.selectedElementArray)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedElementArray,n=e.selectedElementArray,a=t.size===n.size&&1===n.size&&t.first().get("id")!==n.first().get("id");(t.size!==n.size||a)&&n.size&&this.redrawElementControlsRect(n);var o=this.state.needRedraw;o&&(this.redrawElementControlsRect(n),this.setState({needRedraw:!1}))}},{key:"getMinMaxPosition",value:function(e){var t=this.props.selectedElements,n=e.first(),a=(0,O.findKonvaObjectById)(t,n.get("id")),o=a.getParent(),r=o.getClientRect(),i=r.x,s=r.y,u=0,l=0;return e.forEach(function(e){var n=(0,O.findKonvaObjectById)(t,e.get("id")),a=n.getParent(),o=a.getClientRect(),r=o.x,d=o.y,c=o.width,p=o.height,g=r+c,f=d+p;r<i&&(i=r),g>u&&(u=g),d<s&&(s=d),f>l&&(l=f)}),[i,s,u,l]}},{key:"redrawElementControlsRect",value:function(e){var t=e||this.props.selectedElementArray,n=this.props,a=n.selectedElements,o=n.syncControlDegree,i=0,s=0,u=0,l=0,d=0;if(t.size>1){var c=this.getMinMaxPosition(t),p=(0,g.default)(c,4),f=p[0],h=p[1],m=p[2],M=p[3];i=f,s=h,u=m-f,l=M-h}else if(1===t.size){var v=t.first(),y=(0,O.findKonvaObjectById)(a,v.get("id")),I=y.getParent(),T=I.getOffset();i=I.getX()-T.x,s=I.getY()-T.y,u=I.getWidth(),l=I.getHeight(),d=v.get("rot")}this.lastAngle=r(d),o(d),this.setState({x:i,y:s,width:u,height:l,degree:d})}},{key:"needRedrawElementControlsRect",value:function(){this.setState({needRedraw:!0})}},{key:"moveElement",value:function(e,t,n){var a=this.props,o=a.onElementArrayChange,r=a.selectedElementArray,i=b.default.List();r.size&&(r.forEach(function(n){if(n.get("isSelected")){var a=n.get("computed"),o=n.set("computed",a.merge({left:a.get("left")+e,top:a.get("top")+t}));i=i.push(o)}}),o(i,function(){n&&n()}))}},{key:"onDragStart",value:function(e){this.isDragging=!0;var t=this.props.selectedElementArray,n=this.getMinMaxPosition(t),a=(0,g.default)(n,2),o=a[0],r=a[1],i=e.evt;this.startDragPosition={x:i.pageX,y:i.pageY},this.baseDragPosition=(0,c.default)({},this.startDragPosition),this.baseDelta={x:i.pageX-o,y:i.pageY-r}}},{key:"onDrag",value:function(e){if(this.isDragging){var t=e.evt;if(0!==t.movementX||0!==t.movementY){__app.isMoved=!0;var n=t.pageX-this.startDragPosition.x,a=t.pageY-this.startDragPosition.y;this.startDragPosition={x:t.pageX,y:t.pageY},this.moveElement(n,a);var o=this.state,r=o.x,i=o.y;return void this.setState({x:r+n,y:i+a})}}}},{key:"onDragStop",value:function(e){this.isDragging=!1,__app.isMoved=!1;var t=this.props,n=t.selectedElementArray,a=t.submitElementArray;t.hideAllGuideLines;a(n,"move"),e.evt.cancelBubble=!0}},{key:"onRotateStart",value:function(e){this.isRotating=!0;var t=e.evt;this.startRotatePosition={x:t.pageX,y:t.pageY};var n=this.props,a=n.containerRect,r=n.selectedElements,i=this.state,s=i.x,u=i.y,l=i.width,d=i.height,c=i.degree,p=l/2,g=d/2,f=s+a.left+p,h=u+a.top+g;this.startDegree=c,this.startAngle=o(f,h,t.clientX,t.clientY)-this.lastAngle;var m={x:Math.round(s+p),y:Math.round(u+g)};r.setOffset(m).setX(m.x).setY(m.y).setRotation(0)}},{key:"onRotate",value:function(e){if(this.isRotating){var t=this.props,n=t.containerRect,a=t.selectedElementArray,r=t.syncControlDegree,u=this.state,l=u.x,d=u.y,c=u.width,p=u.height,g=c/2,f=p/2,h=l+n.left+g,m=d+n.top+f;this.lastAngle=o(h,m,e.clientX,e.clientY)-this.startAngle;var M=s(Math.round(i(this.lastAngle))),v=this.props.selectedElements;if(1===a.size){var y=a.first();v.setRotation(M-y.get("rot"))}else v.setRotation(M-this.startDegree);r(M),this.setState({degree:M})}}},{key:"onRotateStop",value:function(e){var t=this;if(this.isRotating){this.isRotating=!1;var n=this.props,a=n.submitElementArray,o=n.selectedElementArray,r=n.selectedElements,i=this.state.degree;if(i!==this.startDegree){var u=o;u=1===o.size?u.setIn([String(0),"rot"],i):o.map(function(e){var n=(0,O.findKonvaObjectById)(r,e.get("id")),a=n.getParent(),o=a.getAbsolutePosition(),u=a.getOffset(),l=e.get("computed");return e.merge({rot:s(i-t.startDegree+a.getRotation()),computed:l.merge({left:o.x-u.x,top:o.y-u.y})})}),a(u,"rotate")}r.setOffset({x:0,y:0}).setX(0).setY(0).setRotation(0),e.stopPropagation()}}},{key:"getPointAndOpposite",value:function(e,t,n){var a={},o={},r=1e3,i=0,s=0;return e.forEach(function(u,l){var d=Math.sqrt(Math.pow(u.x-t,2)+Math.pow(u.y-n,2));if(d<r){o=u,i=l,r=d;var c=4,p=l-c;p<0&&(p=l+c),a=e.slice(p,p+1)[0],s=p}}),{current:{index:i,point:o},opposite:{index:s,point:a}}}},{key:"getNewControlBoxAndElementArray",value:function(e){var t=this.state.degree,n=this.props,a=n.selectedElementArray,o=(n.submitElementArray,this.baseIndex),r=(this.oppositePoint.x,this.oppositePoint.y,this.originalElementArray),i=(this.originalOffset.width,this.originalOffset.height,this.originalRect.x),s=this.originalRect.y,u=this.originalRect.width,l=this.originalRect.height,d=this.originalTransformedControlRect,c=(0,x.getScaledRect)({x:i,y:s,width:u,height:l,scale:this.scale}),p=(0,C.transform)(c,t),g=d.point[o].x-p.point[o].x+p.left,f=d.point[o].y-p.point[o].y+p.top,h=g+p.width/2-c.width/2,m=f+p.height/2-c.height/2,M=c.width,v=c.height,y=a.map(function(e,t){var n=r.getIn([t,"computed"]),a=(n.get("left")-i)/u,o=(n.get("top")-s)/l,d=n.get("width")/u,c=n.get("height")/l,p=h+a*M||0,g=m+o*v||0,f=M*d||0,y=v*c||0;return e.merge({computed:n.merge({left:p,top:g,width:f,height:y})})});return{controlBox:{x:h,y:m,width:M,height:v},elementArray:y}}},{key:"clampElementArray",value:function(e){var t=this.props.ratio,n=Math.round(150*t.workspace),a=Math.round(150*t.workspace);return e.map(function(e){var t=e.merge({}),o=e.get("width"),r=e.get("height"),i=o/r,s=e.getIn(["computed","width"]),u=e.getIn(["computed","height"]),l=s/u;return Math.abs(i-l)<=.002?s>u?s<=n&&(s=n,u=s/l):s<u?u<=a&&(u=a,s=u*l):(s<=n||u<=a)&&(s=u=a):(s<=n&&(s=n),
u<=a&&(u=a)),t=t.setIn(["computed","width"],s),t=t.setIn(["computed","height"],u)})}},{key:"onResizeStart",value:function(e){__app.isResizing=!0;var t=e.evt;this.startResizePosition={x:t.pageX,y:t.pageY};var n=this.state,a=n.x,o=n.y,r=n.width,i=n.height,s=n.degree,u=this.props,l=u.containerRect,d=u.selectedElementArray,c=l.left,p=l.top,g=t.pageX-c,f=t.pageY-p,h=(0,C.transform)({x:a,y:o,width:r,height:i},s),m=h.point,M=this.getPointAndOpposite(m,g,f),v=M.opposite;this.baseIndex=v.index,this.oppositePoint=v.point,this.originalOffset={width:Math.abs(g-v.point.x),height:Math.abs(f-v.point.y)},this.originalRect={x:a,y:o,width:r,height:i},this.originalElementArray=d,this.originalTransformedControlRect=h}},{key:"onResize",value:function(e){if(__app.isResizing){var t=e.evt,n=this.props,a=n.onElementArrayChange,o=n.containerRect,r=o.left,i=o.top,s=t.pageX-r,u=t.pageY-i,l={x:1,y:1},d=this.baseIndex,c=this.oppositePoint.x,p=this.oppositePoint.y,g=this.originalOffset.width,f=this.originalOffset.height,h=1;h=g>f?Math.abs(s-c)/g:Math.abs(u-p)/f,U.indexOf(d)>=0?l.x=l.y=h:B.indexOf(d)>=0?l.x=h:Y.indexOf(d)>=0&&(l.y=h),this.scale=l;var m=this.getNewControlBoxAndElementArray(l),M=m.elementArray,v=m.controlBox;M=this.clampElementArray(M),a(M),this.setState(v)}}},{key:"onResizeStop",value:function(e){__app.isResizing=!1;var t=this.props.submitElementArray,n=this.getNewControlBoxAndElementArray(this.scale),a=n.elementArray;a=this.clampElementArray(a),t(a,"resize"),e.evt.stopPropagation()}},{key:"setCursor",value:function(e){this.elementControlsNode&&(this.elementControlsNode.getStage().content.style.cursor=e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedElementArray,a=(t.actionbarActions,t.onExchangeDragStart),o=t.onExchangeDragMove,r=t.onExchangeDragEnd,i=t.toDownload,s=t.isShowTextNotFit,u=t.isShowTextOverflow,d=(t.clicksObj,this.state),c=d.x,p=d.y,g=d.width,f=d.height,h=d.degree,m=Boolean(n.size),M={x:Math.round(g/2),y:Math.round(f/2)},v={},y=!1,I=Boolean(1===n.size),T=Boolean(n.getIn([0,"type"])===_.elementTypes.text&&!!n.getIn([0,"computed","imgUrl"]));I&&n.getIn([0,"encImgId"])&&(y=!0,v={actions:{onDragStart:function(e){a(e)},onDragMove:function(e){o(e)},onDragEnd:function(e){r(e)}}});var w={ref:function(t){return e.elementControlsNode=t},rotation:h,offset:M,x:c+M.x,y:p+M.y,width:g,height:f,onMouseOver:function(t){e.setCursor("move")},onMouseOut:function(t){e.setCursor("default")},onMouseDown:function(e){e.evt.stopPropagation()},onClick:function(){if(I&&e.props.downloadStatus===_.downloadStatus.DOWNLOAD_FAIL){var t=!0;i(n,t)}}},E={x:0,y:0,width:g,height:f,degree:h},D=(0,l.default)({},E,{stroke:"#4CC1FC",strokeWidth:1,id:_.shapeType.controlElement,draggable:!0,onDragStart:this.onDragStart,onDragMove:this.onDrag,onDragEnd:this.onDragStop}),S=(0,l.default)({},E,{actions:{onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop}}),b=((0,l.default)({},E,{actions:{onRotateStart:this.onRotateStart,onRotate:this.onRotate,onRotateStop:this.onRotateStop}}),!1),C=!1;if(y){var x=n.getIn(["0","computed","scale"]);C=x>_.RESIZE_LIMIT}I&&T&&(b=s||u);var P={parentHeight:f,isShowTextNotFit:s,isShowTextOverflow:u},O={parentHeight:f};return m?N.default.createElement(A.Group,w,N.default.createElement(A.Rect,D),N.default.createElement(L.default,S),b?N.default.createElement(z.default,P):null,C?N.default.createElement(R.default,O):null):N.default.createElement(A.Group,null)}}]),t}(D.Component);W.propTypes={selectedElementArray:D.PropTypes.instanceOf(b.default.List),submitElementArray:D.PropTypes.func.isRequired,onElementArrayChange:D.PropTypes.func.isRequired,containerRect:D.PropTypes.object,selectedElements:D.PropTypes.object,showGuideLineIfNear:D.PropTypes.func,hideAllGuideLines:D.PropTypes.func,snapToGuideLine:D.PropTypes.func,actionbarActions:D.PropTypes.object,downloadStatus:D.PropTypes.number,clicksObj:D.PropTypes.object},t.default=W},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(19),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(3),M=a(m),v=n(27),y=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.setCursor=n.setCursor.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"getNewCursorArray",value:function(e){var t=["ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize"],n=8,a=45,o=0;if(e&&(o=Math.floor(e/a),e%a>a/2&&(o+=1)),o>1){var r=n-o;return t.slice(o,o+r).concat(t.slice(0,o))}return t}},{key:"setCursor",value:function(e){this.resizableNode&&(this.resizableNode.getStage().content.style.cursor=e)}},{key:"getCircleProps",value:function(e){var t=this,n=this.props,a=n.actions,o=n.degree,i=n.x,s=n.y,u=n.width,l=n.height,d={ref:e,stroke:"#4CC1FC",strokeWidth:1,radius:5,fill:"#fff",draggable:!0,dragOnTop:!1,onDragStart:a.onResizeStart,onDragMove:function(e){a.onResize(e)},onDragEnd:a.onResizeStop,onMouseOut:function(e){t.setCursor("default")},onMouseDown:function(e){e.evt.stopPropagation()}},c=this.getNewCursorArray(o),p=null,g=i+u,f=s+l,h=i+u/2,m=s+l/2;switch(e){case"top":p=(0,r.default)({},d,{x:h,y:s,onMouseOver:function(e){t.setCursor(c[0]),e.cancelBubble=!0}});break;case"topRight":p=(0,r.default)({},d,{x:g,y:s,onMouseOver:function(e){t.setCursor(c[1]),e.cancelBubble=!0}});break;case"right":p=(0,r.default)({},d,{x:g,y:m,onMouseOver:function(e){t.setCursor(c[2]),e.cancelBubble=!0}});break;case"bottomRight":p=(0,r.default)({},d,{ref:"bottomRight",x:g,y:f,onMouseOver:function(e){t.setCursor(c[3]),e.cancelBubble=!0}});break;case"bottom":p=(0,r.default)({},d,{x:h,y:f,onMouseOver:function(e){t.setCursor(c[4]),e.cancelBubble=!0}});break;case"bottomLeft":p=(0,r.default)({},d,{ref:"bottomLeft",x:i,y:f,onMouseOver:function(e){t.setCursor(c[5]),e.cancelBubble=!0}});break;case"left":p=(0,r.default)({},d,{x:i,y:m,onMouseOver:function(e){t.setCursor(c[6]),e.cancelBubble=!0}});break;case"topLeft":p=(0,r.default)({},d,{x:i,y:s,onMouseOver:function(e){t.setCursor(c[7]),e.cancelBubble=!0}})}return p}},{key:"render",value:function(){var e=this,t=this.getCircleProps("topLeft"),n=this.getCircleProps("top"),a=this.getCircleProps("topRight"),o=this.getCircleProps("right"),r=this.getCircleProps("bottomLeft"),i=this.getCircleProps("bottom"),s=this.getCircleProps("bottomRight"),u=this.getCircleProps("left");return M.default.createElement(v.Group,{ref:function(t){return e.resizableNode=t}},M.default.createElement(v.Circle,t),M.default.createElement(v.Circle,n),M.default.createElement(v.Circle,a),M.default.createElement(v.Circle,o),M.default.createElement(v.Circle,s),M.default.createElement(v.Circle,i),M.default.createElement(v.Circle,r),M.default.createElement(v.Circle,u))}}]),t}(m.Component);y.propTypes={actions:m.PropTypes.shape({onResize:m.PropTypes.func.isRequired,onResizeStart:m.PropTypes.func.isRequired,onResizeStop:m.PropTypes.func.isRequired}).isRequired,degree:m.PropTypes.number.isRequired,x:m.PropTypes.number.isRequired,y:m.PropTypes.number.isRequired,width:m.PropTypes.number.isRequired,height:m.PropTypes.number.isRequired},t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(29),M=a(m),v=n(28),y=a(v);n(223);var I=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onButtonClick=n.onButtonClick.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"onButtonClick",value:function e(){var t=this.props,e=t.onButtonClick,n=t.closeAlertModal;"function"==typeof e&&e(),n()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.title,a=e.message,o=e.buttonText,r=e.closeAlertModal,i=e.escapeClose,s=e.isHideIcon;return h.default.createElement(M.default,{className:"alert-wrap",onClosed:r,opened:t,escapeClose:i,isHideIcon:s},n?h.default.createElement("div",{className:"alert-title"},n):null,h.default.createElement("div",{className:"alert-mes"},a),h.default.createElement("div",{className:"button-wrap"},h.default.createElement(y.default,{className:"little-button",onClicked:this.onButtonClick},o)))}}]),t}(f.Component);I.propTypes={isShown:f.PropTypes.bool.isRequired,message:f.PropTypes.string.isRequired,buttonText:f.PropTypes.string.isRequired,closeAlertModal:f.PropTypes.func.isRequired,title:f.PropTypes.string,escapeClose:f.PropTypes.bool,isHideIcon:f.PropTypes.bool,onButtonClick:f.PropTypes.func},I.defaultProps={buttonText:"OK"},t.default=I},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(3),M=a(m),v=n(13),y=a(v),I=n(9);n(224);var T=n(558),w=a(T),E=n(557),D=(a(E),function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onAddPhotos,n=e.usefullPageNum,a=e.size,o=(0,y.default)("add-photo-button-wrap",{center:!n,float:n}),r=(0,h.default)(a,"renderInnerSize.width"),i=(0,h.default)(a,"renderInnerSize.height"),s=(0,h.default)(a,"renderInnerSheetSizeWithoutBleed.width"),u=(0,h.default)(a,"renderInnerSheetSizeWithoutBleed.height"),l={width:Math.max(r,i)+"px",height:Math.max(r,i)+"px"},d={width:Math.min(s,u)+"px",height:Math.max(s,u)+"px",margin:(parseInt(l.height)-Math.max(s,u))/2+"px auto"};return M.default.createElement("div",{className:o,style:l},M.default.createElement("div",{className:"inner-container",style:d,onClick:t},M.default.createElement("div",{className:"add-photo-content"},M.default.createElement("img",{src:w.default}),M.default.createElement("span",null,"Click to add ",I.limitedPageNum-n," photo(s)"))))}}]),t}(m.Component));t.default=D},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.startExchangeImage=function(e){e.setState({isExchangeImage:!0})},t.stopExchangeImage=function(e){e.setState({isExchangeImage:!1})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isSmallView=t.hasBleed=t.computedCoverSheet=void 0;var o=n(12),r=a(o),i=n(2),s=(a(i),n(9));t.computedCoverSheet=function(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:bookShapeTypes.square,d={width:t.renderCoverSheetSize.width,height:t.renderCoverSheetSize.height,top:0,left:0},c={width:t.renderCoverSheetSizeWithoutBleed.width,height:t.renderCoverSheetSizeWithoutBleed.height,top:0,left:0},p=(0,r.default)({},{render:{top:0,left:0}},o),g=n.get(a);if(g){var f=0,h=(t.renderSpainWidth,{top:Math.ceil(g.getIn(["bleed","top"])*e),right:Math.ceil(g.getIn(["bleed","right"])*e),bottom:Math.ceil(g.getIn(["bleed","bottom"])*e),left:Math.ceil(g.getIn(["bleed","left"])*e)}),m=({width:Math.ceil(g.get("width")*e),height:Math.ceil(g.get("height")*e)},Math.ceil(i?t.renderCoverSheetSize.width+f:t.renderCoverSheetSize.width)),M=Math.ceil(i?t.renderCoverSheetSizeWithoutBleed.width+f:t.renderCoverSheetSizeWithoutBleed.width);switch(g.get("type")){case s.pageTypes.back:d={width:Math.ceil((m-t.renderSpainWidth)/2+(g.getIn(["bleed","right"])+g.getIn(["bleed","left"]))*e),height:Math.ceil(t.renderCoverSheetSize.height),top:-h.top,left:-h.left},c={width:Math.ceil((M-t.renderSpainWidthWithoutBleed)/2),height:t.renderCoverSheetSizeWithoutBleed.height,top:p.render.top,left:p.render.left};break;case s.pageTypes.spine:d={width:t.renderSpainWidth,height:t.renderCoverSheetSize.height,top:-h.top,left:-h.left},c={width:t.renderSpainWidthWithoutBleed,height:t.renderCoverSheetSizeWithoutBleed.height,top:p.render.top,left:Math.ceil(p.render.left+(M-t.renderSpainWidthWithoutBleed)/2)};break;case s.pageTypes.front:var v=Math.ceil((m-t.renderSpainWidthWithoutBleed)/2+g.getIn(["bleed","left"])*e);Math.ceil((m-t.renderSpainWidthWithoutBleed)/2+t.renderSpainWidthWithoutBleed);d={width:i?v-f:v,height:t.renderCoverSheetSize.height,top:-h.top,left:i?-h.left+f:-h.left};var y=Math.ceil((M-t.renderSpainWidthWithoutBleed)/2),I=Math.ceil((M-t.renderSpainWidthWithoutBleed)/2+t.renderSpainWidthWithoutBleed),T={width:i&y>130?-f:0,height:y>130?4:0,top:y>130?-2:0,left:i&y>130?f:0};switch(l){case bookShapeTypes.landscape:break;case bookShapeTypes.square:break;case bookShapeTypes.portrait:}c={width:y+T.width,height:t.renderCoverSheetSizeWithoutBleed.height+T.height,top:p.render.top+T.top,left:p.render.left+I+T.left};break;case s.pageTypes.full:d={width:m,height:t.renderCoverSheetSize.height,top:-h.top,left:-h.left};var w={height:u?t.renderCoverSheetSizeWithoutBleed.height>=100?6:2:0,width:0,top:u?t.renderCoverSheetSizeWithoutBleed.height>=100?-3:-1:0,left:0};c={width:M+w.width,height:t.renderCoverSheetSizeWithoutBleed.height+w.height,top:p.render.top+w.top,left:p.render.left+w.left}}}return{renderCoverSheetSize:d,renderCoverSheetSizeWithoutBleed:c}},t.hasBleed=function(e){var t=0;if(e&&e.size){var n=e.find(function(e){return e.get("type")===s.pageTypes.full||e.get("type")===s.pageTypes.back||e.get("type")===s.pageTypes.front});n&&(t=n.getIn(["bleed","top"]))}return 0!==t},t.isSmallView=function(e){var t=!1;if(e){var n=e.width;e.height;t=n<150}return t}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var o=n(17),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=n(23),c=a(d),p=n(2),g=a(p),f=n(9),h=n(32),m=n(48),M=(n(18),n(31)),v=a(M),y=n(64),I=n(16),T=n(21),w=t.getCurrentScale=function(e,t){var n=e.props.data,a=n.images,o=void 0,r=t.toJS(),i=r.imgRot,s=r.width,u=r.height,l=r.cropLUX,d=r.cropLUY,c=r.cropRLX,p=r.cropRLY,g=r.encImgId,f=a.get(g);return o=f?(0,y.getScale)({imgRot:i,imageDetail:f,width:s,height:u,cropRLX:c,cropLUX:l,cropRLY:p,cropLUY:d}):0};t.computedElementOptions=function(e,t,n){var a=e.props.data,o=a.urls,i=a.page,u=(a.images,a.settings),d=n||a.ratio.workspace,p={width:0,height:0,left:0,top:0,imgUrl:""},M=t.get("imgRot"),y=t.get("imgFlip");p.width=t.get("width")*d,p.height=t.get("height")*d,p.left=t.get("x")*d,p.top=t.get("y")*d;var E=t.get("encImgId");switch(t.get("type")){case f.elementTypes.text:if(a.page.get("type")===f.pageTypes.spine){p.width=t.get("width")*d,p.height=t.get("height")*d,p.left=t.get("x")*d,p.top=t.get("y")*d;var D=t.get("text"),N=t.get("fontSize"),S=(N*i.get("height"),t.get("fontColor")?t.get("fontColor"):"#ffffff");p.imgUrl=D?(0,c.default)(PAINETEXT_SRC)({text:(0,m.toEncode)(D),color:(0,h.hexString2Number)(S),fontFamily:t.get("fontFamily"),width:t.get("height"),height:t.get("width"),baseUrl:o.baseUrl,ratio:d}):null}else{var b=t.get("text"),A=t.get("fontSize"),C=A*i.get("height"),x=t.get("fontColor")?t.get("fontColor"):"#ffffff";p.imgUrl=(0,c.default)(I.TEXT_SRC)({text:(0,m.toEncode)(b),fontSize:C,fontColor:(0,h.hexString2Number)(x),fontFamily:t.get("fontFamily"),width:t.get("width"),height:t.get("height"),originalWidth:t.get("width"),originalHeight:t.get("height"),originalFontSize:C,baseUrl:o.baseUrl,textAlign:t.get("textAlign"),verticalTextAlign:t.get("textVAlign"),ratio:d})}break;case f.elementTypes.photo:if(E){var P=null;if(t.get("cropRLY")&&(P=(0,T.getCropOptionsByLR)(t.get("cropLUX"),t.get("cropLUY"),t.get("cropRLX"),t.get("cropRLY"),p.width,p.height)),P){var L="rect",_={effectId:0,opacity:100,brightness:0,contrast:0,saturation:100};t.get("style")&&(_=(0,l.default)({},_,t.get("style").toJS())),p.imgUrl=(0,c.default)(""+I.IMAGES_API+I.IMAGES_FILTER_PARAMS)((0,l.default)({},P,_,(0,r.default)({encImgId:E,imgFlip:y,shape:L,rotation:M,baseUrl:o.baseUrl},v.default))),p.keepRatio=!1,p.corpApiTemplate=(0,c.default)(I.IMAGES_CROPPER)({baseUrl:o.baseUrl})+I.IMAGES_CROPPER_PARAMS,p.filterApiTemplate=(0,c.default)(I.IMAGES_API)({baseUrl:o.baseUrl})+I.IMAGES_FILTER_PARAMS,p.scale=w(e,t)}var O=t.get("border");if(O)if(O.get("size")){var j=(0,h.hexToRGBA)(O.get("color"),O.get("opacity"));p.border=Math.round(O.get("size")*d)+"px solid "+j}else p.border="none"}break;case f.elementTypes.calendar:var z=(0,s.default)(u,"spec.product"),k=(0,s.default)(u,"spec.size"),R=t.get("month"),U=(0,s.default)(u,"spec.dateStyle"),B=R&&R<10?"0"+R:R,Y=t.get("year"),W=(o.calendarBaseUrl,o.baseUrl);p.imgUrl=z&&k?(0,c.default)(I.CALENDAR_IMAGE)((0,r.default)({dateStyle:U,productType:z,size:k,month:B,year:Y,baseUrl:W,imageSize:700},v.default)):null}return g.default.fromJS(p)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=u.default.List(),o=e.state.elementArray;return t.forEach(function(t){var r=e.computedElementOptions(t,n);o.find(function(e){return e.get("id")===t.get("id")});a=a.push(t.merge({computed:r},{isSelected:!1}))}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.componentWillReceiveProps=t.componentWillMount=t.onEditText=t.onRemoveImage=t.onEditImage=void 0;var r=n(12),i=a(r),s=n(2),u=a(s),l=n(9),d=n(43),c=(a(d),n(21),n(31)),p=a(c);t.onEditImage=function(e,t){var n=e.props,a=n.data,o=n.actions,r=o.boundImageEditModalActions,s=o.boundProjectActions,u=a.images,l=a.ratio,d=t.toJS(),c=d.computed,g=d.encImgId,f=d.imgRot,h=d.imageid,m=d.cropLUX,M=d.cropLUY,v=d.cropRLX,y=d.cropRLY,I=c.width,T=c.height,w=u.get(g);if(w){var E=w.toJS(),D=E.width,N=E.height,S=E.name;r.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:g,imageId:g?0:h,rotation:f,imageWidth:D,imageHeight:N,imageName:S,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:m,cropLUY:M,cropRLX:v,cropRLY:y},securityString:p.default,onDoneClick:function(e,n,a){s.updateElement((0,i.default)({},n,{imgRot:a,id:t.get("id")}))}})}},t.onRemoveImage=function(e,t){var n=e.props,a=n.data,o=n.actions,r=a.page,i=o.boundProjectActions,s=o.boundTrackerActions;t.get("type")===l.elementTypes.photo?t.get("encImgId")?(s.addTracker("ClickDeleteImage,AllPages"),i.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0})):i.deleteElement(t.get("id"),r.get("id")).then(function(){}):i.deleteElement(t.get("id"),r.get("id"))},t.onEditText=function(e,t){var n=e.props,a=n.actions,o=n.data,r=a.boundTextEditModalActions,i=a.boundPaginationActions,s=o.allPageSheetIndex,u=o.page,l=o.index,d=u.get("id");i.switchSheet(s).then(function(){i.switchPage(l,d).then(function(){r.showTextEditModal({element:t})})})},t.componentWillMount=function(e){var t=e.props.data,n=t.page,a=t.ratio;e.setState({elementArray:o(e,n.get("elements"),a.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data.page.get("elements"),a=t.data.page.get("elements"),r=e.props.data.ratio.workspace,i=t.data.ratio.workspace,s=e.props.data.settings.spec.size,l=t.data.settings;if(!u.default.is(n,a)||r!==i||s!==l){var d=o(e,a,i);e.setState({elementArray:d})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSnackBarEditImage=t.onReplaceImage=t.uploadFileClicked=t.toggleModal=t.onMouseLeave=t.onMouseEnter=void 0;var o=n(23),r=a(o),i=n(12),s=a(i),u=n(31),l=a(u),d=n(16);t.onMouseEnter=function(e){var t=e.props.data,n=t.page,a=t.ratio,o=n.get("height"),r=n.get("width"),i=n.getIn(["bleed","bottom"]),s=Math.ceil((o-i)*a.workspace)-44,u=Math.ceil(r*a.workspace);e.setState({snackBar:{isShown:!0,left:0,top:s,width:u,templateId:0,zIndex:200}})},t.onMouseLeave=function(e){var t=e.state.snackBar;e.setState({snackBar:(0,s.default)({},t,{isShown:!1})})},t.toggleModal=function(e,t,n){var a=e.props.actions,o=a.boundUploadImagesActions;o.toggleUpload(n)},t.uploadFileClicked=function(e){var t=e.props,n=t.actions,a=t.data,o=n.boundImagesActions,r=n.boundTrackerActions,i=a.page,s=i.getIn(["elements","0"]);if(s){var u=function(){r.addTracker("ClickCloudUploadImage"),o.autoAddPhotoToCanvas({status:!0,pageId:i.get("id"),elementId:s.get("id"),elementWidth:0,elementHeight:0})};e.timer&&clearTimeout(e.timer);var l=setTimeout(u,30);e.timer=l}},t.onReplaceImage=function(e){e.fileUpload.onClickInput(),e.uploadFileClicked()},t.onSnackBarEditImage=function(e){var t=e.props,n=t.data,a=t.actions,o=a.boundImageEditModalActions,i=a.boundProjectActions,u=n.images,c=n.page,p=n.urls,g=c.getIn(["elements","0"]);if(g){var f=g.toJS(),h=f.encImgId,m=f.imgRot,M=f.imageid,v=f.cropLUX,y=f.cropLUY,I=f.cropRLX,T=f.cropRLY,w=u.get(h);if(w){var E=w.toJS(),D=E.width,N=E.height,S=E.name,b=(0,r.default)(d.IMAGES_CROPPER)({baseUrl:p.baseUrl})+d.IMAGES_CROPPER_PARAMS;console.log("encImgId",h),o.showImageEditModal({imageEditApiTemplate:b,encImgId:h,imageId:h?0:M,rotation:m,imageWidth:D,imageHeight:N,imageName:S,elementWidth:g.get("width"),elementHeight:g.get("height"),crop:{cropLUX:v,cropLUY:y,cropRLX:I,cropRLY:T},securityString:l.default,onDoneClick:function(e,t,n){i.updateElement((0,s.default)({},t,{imgRot:n,id:g.get("id")}))}})}}}},367,function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onDragPageTitleEnd=t.onDragPageTitleStarted=t.onDragLeaved=t.onDragOvered=t.onDropPage=t.onDragPageEnd=t.onDragPageStarted=t.stopEvent=t.computedInnerSheet=t.getRefName=void 0;var o=n(2),r=(a(o),n(34)),i=a(r),s=(n(608),n(21),n(9)),u=n(30),l=t.getRefName=function(e,t){return"BookPageThumbnail-"+e+"-"+t},d=(t.computedInnerSheet=function(e,t,n,a){var o={width:t.renderInnerSheetSize.width,height:t.renderInnerSheetSize.height,top:t.renderInnerSheetSize.top,left:t.renderInnerSheetSize.left},r={width:t.renderInnerSheetSizeWithoutBleed.width,height:t.renderInnerSheetSizeWithoutBleed.height,top:0,left:0},i=n.get(a);return i.get("type")===s.pageTypes.top?(r.top=t.renderInnerSheetSizeWithoutBleed.topPageTop,r.left=t.renderInnerSheetSizeWithoutBleed.topPageLeft):i.get("type")===s.pageTypes.bottom&&(r.top=t.renderInnerSheetSizeWithoutBleed.bottomPageTop,r.left=t.renderInnerSheetSizeWithoutBleed.bottomPageLeft),{renderInnerSheetSize:o,renderInnerSheetSizeWithoutBleed:r}},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()},t.onDragPageStarted=function(e,t,n,a){var o=a||window.event,r=i.default.findDOMNode(e.refs[n]),l=(0,u.cloneDragNode)(r,s.dragPageSelector.clonedPage);(0,u.setTransferDragNode)(o,l),(0,u.setTransferData)(o,{pageId:t.get("id")}),e.setState({dragPageId:t.get("id")}),window.__isDragPage=!0}),c=t.onDragPageEnd=function(e){window.__isDragPage=!1;var t=document.getElementById(s.dragPageSelector.clonedPage);t&&t.parentNode.removeChild(t),delete window.__isDragPage,e.setState({dropPageId:null,dragPageId:null})};t.onDropPage=function(e,t,n){var a=n||window.event;a.preventDefault();var o=(0,u.getTransferData)(a);if(!o.elementId){var r=o&&o.pageId||"",i=t.get("id");if(r&&r!==i){var s=e.props,l=s.actions,d=s.data,c=l.boundProjectActions,p=l.boundPaginationActions;c.movePageBefore(r,i);var g=d.pagination;i===g.pageId&&p.switchPage(g.pageIndex,r),r===g.pageId&&p.switchPage(g.pageIndex,i),e.setState({dropPageId:null,dragPageId:null})}}},t.onDragOvered=function(e,t,n){if(window.__isDragPage){var a=(n||window.event,t.get("id")),o=e.state.dragPageId;e.state.dropPageId!==a&&o!==a&&e.setState({dropPageId:a})}},t.onDragLeaved=function(e,t,n){e.setState({dropPageId:null})},t.onDragPageTitleStarted=function(e,t,n,a){var o=a||window.event,r=e.props.data,i=r.paginationSpread,s=i.get("pages"),u=l(t,n);n!==-1&&s&&s.size>n&&d(e,s.get(n),u,o)},t.onDragPageTitleEnd=function(e,t,n,a){c(e)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.lazyLoadingImage=void 0;var o=n(2),r=(a(o),n(87),n(9));window.__allPhotosUrls=[];t.lazyLoadingImage=function(e,t){var n=initImagePool(r.limitImagesLoading);e.setState({isImgLoading:!0});var a=__allPhotosUrls.find(function(e){return e.imgUrl==t});a?e.setState({src:t,isImgLoading:!1}):n.load(t,{success:function(n){e.setState({src:n,isImgLoading:!1}),__allPhotosUrls.push({imgUrl:t})},error:function(t){e.setState({isImgLoading:!1})}})}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(12),m=o(h),M=n(3),v=o(M),y=n(2),I=o(y),T=n(15),w=n(13),E=o(w),D=n(109),N=o(D),S=n(75),b=n(83),A=o(b),C=n(374),x=a(C);n(228);var P=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={isImgLoading:!1,src:null,isShowActionBar:!0},n.hideLoading=function(){n.setState({isImgLoading:!1})},n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onImageError",value:function(){this.setState({isImgLoading:!1})}},{key:"onImageLoad",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillMount",value:function(){var e=this.props.data,t=e.element,n=(t.get("computed"),t.getIn(["computed","imgUrl"]));n&&(S.isSafari?this.setState({isImgLoading:!0,src:n}):x.lazyLoadingImage(this,n))}},{key:"shouldComponentUpdate",value:function(e,t){return!I.default.is(this.props.data.element,e.data.element)||this.props.data.isHover!==e.data.isHover||this.state.isImgLoading!==t.isImgLoading||this.state.img!==t.img||this.state.src!==t.src}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.element.getIn(["computed","imgUrl"]),n=e.data.element.getIn(["computed","imgUrl"]);t!==n&&(S.isSafari?this.setState({src:n,isImgLoading:!0}):(this.setState({src:null}),x.lazyLoadingImage(this,n)))}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,a=n.element,o=n.isHover,r=a.get("computed"),i=a.getIn(["computed","imgUrl"]),s={zIndex:a.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+a.get("rot")+"deg)"},u={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},l=(0,m.default)({},u,{display:i?"block":"none",border:r.get("border")?""+r.get("border"):"none"}),d={width:r.get("width")+"px",height:r.get("height")+"px"},c=(0,m.default)({},t),p=(0,m.default)({},n,{className:(0,E.default)("calendar-element-thumbnail",{"has-image":!!i}),style:s,handlerStyle:u,setCursorDefault:!0}),g=this.state,f=g.isImgLoading,h=g.src,M=(0,E.default)("box",{hover:o});return v.default.createElement(A.default,{actions:c,data:p},v.default.createElement("div",{className:"layer-image",style:d},v.default.createElement(N.default,{isShown:f}),f?null:v.default.createElement("img",{className:"photo-img",src:h,onLoad:this.onImageLoad,onError:this.onImageError,style:l})),v.default.createElement("div",{className:M,style:u}))}}]),t}(M.Component);P.propTypes={},t.default=(0,T.translate)("PhotoElement")(P)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(13),h=a(f),m=n(15),M=n(3),v=a(M),y=n(29),I=a(y),T=n(28),w=a(T);n(229);var E=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={name:"",timer:null,isInvalid:!1,isFormatInvalid:!1,errorTip:".",placeHolder:"input new title here"},n.handleClone=n.handleClone.bind(n),n.resetTitle=n.resetTitle.bind(n),n.handleCloseCloneModal=n.handleCloseCloneModal.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"resetTitle",value:function(e){this.setState({name:e.target.value}),this.checkProjectTitleFun(e.target.value)}},{key:"checkProjectTitleFun",value:function(e,t){var n=this,a=this.props,o=a.checkProjectTitle,r=a.userId,i=(a.closeCloneModal,function(e){o({projectName:n.state.name,customerID:r}).then(function(a){a?(t&&(n.handleCloseCloneModal(),t(e)),n.setState({isInvalid:!1,isFormatInvalid:!1,errorTip:""})):n.state.isFormatInvalid?n.setState({isFormatInvalid:!1}):n.setState({isInvalid:!0,errorTip:"Title existed, please pick another one."})})});if(e.trim())if(/^[a-zA-Z 0-9\d_\s-]+$/.test(e))if(t)i(e),this.setState({isFormatInvalid:!1});else{this.state.timer&&clearTimeout(this.state.timer);var s=setTimeout(i,300);this.setState({isFormatInvalid:!1,timer:s})}else this.setState({isInvalid:!0,isFormatInvalid:!0,errorTip:"Only letters, numbers, blank space, - (hyphen) and _ (underscore) are allowed in the title."});else this.setState({isInvalid:!0,isFormatInvalid:!0,errorTip:"Title is required"})}},{key:"handleCloseCloneModal",value:function(){var e=this.props.closeCloneModal;e(),this.setState({name:"",timer:null,isInvalid:!1,isFormatInvalid:!1,errorTip:"."})}},{key:"handleClone",value:function(){var e=this.props,t=e.onCloneProject,n=e.addAlbum,a=e.userId,o=e.addTracker,r=function(e){n(a,e).then(function(){t(e)})};o("ClickCloneAndDone"),this.checkProjectTitleFun(this.state.name,r)}},{key:"render",value:function(){var e=this.props.isShown,t=(0,h.default)("error-tip",{show:this.state.isInvalid});return v.default.createElement(I.default,{className:"clone-modal",onClosed:this.handleCloseCloneModal,opened:e},v.default.createElement("p",{className:"modal-title"},"Clone Project"),v.default.createElement("p",{className:"input-tip"},"Please input new title"),v.default.createElement("div",{className:"name-inputer-wrap"},v.default.createElement("input",{type:"text",value:this.state.name,onChange:this.resetTitle,maxLength:"50",placeholder:this.state.placeHolder}),v.default.createElement("span",{className:t},this.state.errorTip)),v.default.createElement("div",{className:"button-wrap"},v.default.createElement(w.default,{className:"little-button white",onClicked:this.handleCloseCloneModal},"Cancel"),v.default.createElement(w.default,{className:"little-button",disabled:this.state.isInvalid||!this.state.name,onClicked:this.handleClone},"Clone")))}}]),t}(M.Component);E.propTypes={isShown:M.PropTypes.bool.isRequired,closeCloneModal:M.PropTypes.func.isRequired,onCloneProject:M.PropTypes.func.isRequired,addAlbum:M.PropTypes.func.isRequired,userId:M.PropTypes.number,addTracker:M.PropTypes.func.isRequired},t.default=(0,m.translate)("CloneModal")(E)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(13),h=a(f),m=n(3),M=a(m),v=n(29),y=a(v),I=n(28),T=a(I);n(230);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleConfirm=n.handleConfirm.bind(n),n.handleCancel=n.handleCancel.bind(n),n.getButtonHtml=n.getButtonHtml.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"handleConfirm",value:function(){var e=this.props,t=e.onOkClick,n=e.closeConfirmModal,a=e.hideOnOk;t(),a&&n()}},{key:"handleCancel",value:function(){var e=this.props,t=e.onCancelClick,n=e.closeConfirmModal;t&&t(),n()}},{key:"getButtonHtml",value:function(){var e=this.props,t=e.okButtonText,n=e.okButtonClass,a=e.cancelButtonText,o=e.cancelInFirst,r=e.activeButton,i=void 0===r?"ok":r,s=[],u=(0,h.default)(n,{"button-white":"ok"!==i}),l=(0,h.default)({"button-white":"ok"===i}),d=a?M.default.createElement(T.default,{key:"cancel",className:l,onClicked:this.handleCancel},a):null,c=t?M.default.createElement(T.default,{key:"ok",onClicked:this.handleConfirm,className:u},t):null;return o?(d&&s.push(d),c&&s.push(c)):(c&&s.push(c),
d&&s.push(d)),s}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.confirmTitle,a=e.confirmMessage,o=e.closeConfirmModalByX,r=a.toJS?a.toJS():a;return M.default.createElement(y.default,{className:"confirm-wrap",onClosed:o,opened:t},M.default.createElement("div",{className:"confirm-title"},n),M.default.createElement("div",{className:"confirm-mes"},r),M.default.createElement("div",{className:"button-wrap"},this.getButtonHtml()))}}]),t}(m.Component);w.propTypes={isShown:m.PropTypes.bool.isRequired,onOkClick:m.PropTypes.func.isRequired,closeConfirmModal:m.PropTypes.func.isRequired,confirmTitle:m.PropTypes.string,confirmMessage:m.PropTypes.oneOfType([m.PropTypes.string,m.PropTypes.node]).isRequired,okButtonText:m.PropTypes.string,cancelButtonText:m.PropTypes.string,onCancelClick:m.PropTypes.func,okButtonClass:m.PropTypes.string,cancelButtonClass:m.PropTypes.string,activeButton:m.PropTypes.string,hideOnOk:m.PropTypes.bool,cancelInFirst:m.PropTypes.bool},w.defaultProps={okButtonText:"Done",activeButton:"ok",cancelInFirst:!0},t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkBlank=t.handleSubmit=t.closeContactUsModal=void 0;var a=n(297);t.closeContactUsModal=function(e){var t=e.props.boundContactUsActions;e.refs.questionInputer.value="",e.refs.requestInputer.value="",e.refs.bugInputer.value="",e.setState({isBlank:!0}),t.hideContactUsModal()},t.handleSubmit=function(e){var t=e.props,n=t.boundContactUsActions,o=t.addNotification,r=e.props,i=r.env,s=r.project,u=i.userInfo,l=u.get("id").toString(),d=u.get("firstName"),c=u.get("email"),p=s.property,g=p.get("projectId").toString(),f=p.get("title"),h=e.refs.questionInputer.value,m=e.refs.requestInputer.value,M=e.refs.bugInputer.value,v=(0,a.getUserOS)(),y="[appName:"+navigator.appName+";userAgent:"+navigator.userAgent+";appVersion:"+navigator.appVersion+"]",I={userId:l,userName:d,userEmail:c,projectName:f,projectId:g,os:v,browser:y,question:h,featureRequest:m,bug:M};e.closeContactUsModal(),n.handleSubmit(I).then(function(e){o("success"===e.resultData.state?{message:"Submit successfully.\nMany thanks for your feedback.",level:"success",autoDismiss:2}:{message:"Send failed, you may try again later",level:"error",autoDismiss:0})})},t.checkBlank=function(e){e.refs.questionInputer.value||e.refs.requestInputer.value||e.refs.bugInputer.value?e.setState({isBlank:!1}):e.setState({isBlank:!0})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(15),h=n(3),m=a(h),M=n(29),v=a(M),y=n(28),I=a(y);n(231);var T=n(378),w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={isBlank:!0},n.checkBlank=function(){return(0,T.checkBlank)(n)},n.handleSubmit=function(){return(0,T.handleSubmit)(n)},n.closeContactUsModal=function(){return(0,T.closeContactUsModal)(n)},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.t;return m.default.createElement(v.default,{className:"contact-us-modal",onClosed:this.closeContactUsModal,opened:t},m.default.createElement("p",{className:"modal-title"},n("TITLE")),m.default.createElement("p",{className:"modal-item"},n("QUESTION_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"questionInputer",onChange:this.checkBlank,placeholder:n("QUESTION_PLACEHOLDER")}),m.default.createElement("p",{className:"modal-item"},n("REQUEST_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"requestInputer",onChange:this.checkBlank,placeholder:n("REQUEST_PLACEHOLDER")}),m.default.createElement("p",{className:"modal-item"},n("BUG_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"bugInputer",onChange:this.checkBlank,placeholder:n("BUG_PLACEHOLDER")}),m.default.createElement("div",{className:"button-wrap"},m.default.createElement(I.default,{className:"little-button",onClicked:this.closeContactUsModal},n("CANCEL")),m.default.createElement(I.default,{className:"little-button",onClicked:this.handleSubmit,disabled:this.state.isBlank},n("SUBMIT"))))}}]),t}(h.Component);w.propTypes={isShown:h.PropTypes.bool.isRequired,t:h.PropTypes.func.isRequired},t.default=(0,f.translate)("ContactUsModal")(w)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onMouseUp=function(e,t){var n=e.props,a=n.data,o=n.actions;o.handleMouseUp&&o.handleMouseUp(a,t)},t.onMouseEnter=function(e,t){var n=e.props,a=n.data,o=n.actions;o.handleMouseEnter&&o.handleMouseEnter(a,t)},t.onMouseOut=function(e,t){var n=e.props,a=n.data,o=n.actions;o.handleMouseOut&&o.handleMouseOut(a,t)},t.onMouseLeave=function(e,t){var n=e.props,a=n.data,o=n.actions;o.handleMouseLeave&&o.handleMouseLeave(a,t)},t.onMouseOver=function(e,t){var n=e.props,a=n.data,o=n.actions;o.handleMouseOver&&o.handleMouseOver(a,t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(233);var v=function(e){function t(e,n){(0,s.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return a.handleMouseDown=a.handleMouseDown.bind(a),a.handleMouseEnter=a.handleMouseEnter.bind(a),a.handleMouseMove=a.handleMouseMove.bind(a),a}return(0,g.default)(t,e),(0,l.default)(t,[{key:"handleMouseDown",value:function(e){var t=this.props,n=t.onSelect,a=t.option;n(a,e),e.preventDefault(),e.stopPropagation()}},{key:"handleMouseEnter",value:function(e){var t=this.props,n=t.onFocus,a=t.option;n(a,e)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.onFocus,a=t.option;n(a,e)}},{key:"render",value:function(){var e=this.props.className,t=this.props.option,n=(t.label,t.title),a=t.fontThumbnailUrl,o=t.disabled,r=(0,M.default)(e,{"font-option-disabled":o});return h.default.createElement("div",{className:r,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,title:n},h.default.createElement("img",{src:a,alt:""}))}}]),t}(f.Component);v.propTypes={option:f.PropTypes.shape({label:f.PropTypes.string,title:f.PropTypes.string.isRequired,fontThumbnailUrl:f.PropTypes.string.isRequire}).isRequired},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onHandleClick=t.onHandleDblClick=t.onHandleMouseDown=t.onHandleMouseOver=t.onHandleMouseLeave=t.onHandleMouseOut=t.onHandleMouseEnter=t.onHandleMouseUp=t.onHandleMouseMove=void 0;var o=n(94),r=a(o),i=t.onHandleMouseMove=function(e,t){var n=e.props.actions,a=n.handleMouseMove;a&&a(t||window.event)},s=t.onHandleMouseUp=function(e,t){var n=e.props.actions,a=n.handleMouseUp;a&&a(t||window.event)};t.onHandleMouseEnter=function(e,t){var n=e.props.actions,a=n.handleMouseEnter;a&&a(t||window.event)},t.onHandleMouseOut=function(e,t){var n=e.props.actions,a=n.handleMouseOut;a&&a(t||window.event)},t.onHandleMouseLeave=function(e,t){var n=e.props.actions,a=n.handleMouseLeave;a&&a(t||window.event),e.setState({showDeleteButton:!1})},t.onHandleMouseOver=function(e,t){var n=e.props.actions,a=n.handleMouseOver;r.default.rebuild(),a&&a(t||window.event),e.setState({showDeleteButton:!0})},t.onHandleMouseDown=function(e,t){var n=e.props.actions,a=n.handleMouseDown;a&&a(t||window.event),document.onmousemove=function(t){i(e,t||window.event)},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,s(e,t||window.event)}},t.onHandleDblClick=function(e,t){var n=e.props,a=n.actions,o=n.data,r=a.handleDblClick;r&&r(o,t||window.event)},t.onHandleClick=function(e,t){var n=e.props,a=n.actions,o=n.data,r=a.handleClick;r&&r(o,t||window.event)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(3),m=o(h),M=n(13),v=o(M),y=n(382),I=a(y),T=n(559);o(T);n(234);var w=n(9),E=n(427),D=o(E),N=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onHandleMouseMove=function(e){return I.onHandleMouseMove(n,e)},n.onHandleMouseUp=function(e){return I.onHandleMouseUp(n,e)},n.onHandleMouseOut=function(e){return I.onHandleMouseOut(n,e)},n.onHandleMouseEnter=function(e){return I.onHandleMouseEnter(n,e)},n.onHandleMouseOver=function(e){return I.onHandleMouseOver(n,e)},n.onHandleMouseDown=function(e){return I.onHandleMouseDown(n,e)},n.onHandleDblClick=function(e){return I.onHandleDblClick(n,e)},n.onHandleMouseLeave=function(e){return I.onHandleMouseLeave(n,e)},n.onHandleClick=function(e){return I.onHandleClick(n,e)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,a=e.children,o=(t.handleClick,t.handleMouseOver,t.handleDrop),r=t.handleDragStart,i=t.handleDragOver,s=t.handleDragEnter,u=t.handleDragLeave,l=t.handleDragEnd,d=t.handleContextMenu,c=n.className,p=n.draggable,g=n.style,f=n.element,h=(n.product,f.get("computed")),M=f.getIn(["computed","imgUrl"]),y=f.getIn(["computed","scale"]),I=y>w.RESIZE_LIMIT,T=(0,v.default)("x-handler",c);return m.default.createElement("div",{style:g,className:T,onClick:this.onHandleClick,onDoubleClick:this.onHandleDblClick,onMouseDown:this.onHandleMouseDown,onMouseOver:this.onHandleMouseOver,onMouseOut:this.onHandleMouseOut,onMouseLeave:this.onHandleMouseLeave,onMouseEnter:this.onHandleMouseEnter,onDrop:o,onDragStart:r,onDragOver:i,onDragEnter:s,onDragLeave:u,onDragEnd:l,draggable:p,onContextMenu:d},a,Boolean(M)&&I?m.default.createElement(D.default,{title:"Photo has low resolution and may look poor in print",parentWidth:h.get("width"),parentHeight:h.get("height")}):null)}}]),t}(h.Component);t.default=N,N.propTypes={actions:h.PropTypes.shape({handleClick:h.PropTypes.func,handleDblClick:h.PropTypes.func,handleMouseDown:h.PropTypes.func,handleMouseMove:h.PropTypes.func,handleMouseUp:h.PropTypes.func,handleMouseOver:h.PropTypes.func,handleMouseOut:h.PropTypes.func,handleMouseEnter:h.PropTypes.func,handleDrop:h.PropTypes.func,handleDragStart:h.PropTypes.func,handleDragOver:h.PropTypes.func,handleDragEnter:h.PropTypes.func,handleDragLeave:h.PropTypes.func,handleDragEnd:h.PropTypes.func,handleContextMenu:h.PropTypes.func}),data:h.PropTypes.shape({className:h.PropTypes.string,draggable:h.PropTypes.bool,cursor:h.PropTypes.string})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleImageName=t.handleMouseDown=t.handleMouseOut=t.handleMouseOver=t.imgErrored=t.imgLoaded=t.lazyLoadingImage=void 0;var a=n(9);t.lazyLoadingImage=function(e,t){var n=initImagePool(a.limitImagesLoading);e.setState({isImgLoading:!0}),n.load(t,{success:function(t){e.setState({src:t,isImgLoading:!1})},error:function(t){e.setState({isImgLoading:!1})}})},t.imgLoaded=function(e){e.setState({isImgLoading:!1})},t.imgErrored=function(e){e.setState({isImgLoading:!1})},t.handleMouseOver=function(e){var t=e.props,n=t.actions,a=t.imageObj,o=n.onOverImageItem;o(a)},t.handleMouseOut=function(e){var t=e.props.actions,n=t.onOutImageItem;n()},t.handleMouseDown=function(e,t){var n=e.props,a=n.actions,o=n.imageObj,r=o.guid,i=a.toggleImageItemSelected;i(r,t)},t.handleImageName=function(e){return e=e.length>15?e.substr(0,5)+"..."+e.substr(e.length-6):e}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(13),M=a(m),v=n(3),y=a(v),I=(n(56),n(42)),T=a(I),w=n(278),E=a(w),D=n(289),N=a(D),S=n(384);n(235);var b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleMouseOver=function(){return(0,S.handleMouseOver)(n)},n.handleMouseOut=function(){return(0,S.handleMouseOut)(n)},n.imgLoaded=function(){return(0,S.imgLoaded)(n)},n.imgErrored=function(){return(0,S.imgErrored)(n)},n.handleImageName=function(e){return(0,S.handleImageName)(e)},n.handleMouseDown=function(e){return(0,S.handleMouseDown)(n,e)},n.state={src:null,isImgLoading:!0},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=(0,h.default)(this.props,"imageObj.src"),a=(0,h.default)(e,"imageObj.src"),o=(0,h.default)(this.props,"imageObj.usedCount"),r=(0,h.default)(e,"imageObj.usedCount"),i=(0,h.default)(this.state,"isImgLoading"),s=(0,h.default)(t,"isImgLoading");return n!==a||o!==r||i!==s}},{key:"render",value:function(){var e=this.props,t=e.imageObj,n=e.deleteImage,a=t.name,o=t.usedCount,r=(t.imageId,t.guid),i=t.src,s=(0,M.default)("wrap-image"),u=this.state.isImgLoading;return y.default.createElement("div",{className:"image-item"},y.default.createElement("div",{className:s,onMouseUp:this.handleMouseDown,"data-guid":r},y.default.createElement("div",{className:"loaded-image"},y.default.createElement(T.default,{isShown:u}),y.default.createElement("div",{className:"loaded-image-item"},y.default.createElement("img",{className:"preview-image",src:i,id:"img-"+r,onLoad:this.imgLoaded,onError:this.imgErrored,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),o?y.default.createElement(N.default,{count:o}):null,o?null:y.default.createElement(E.default,{onClicked:n})))),y.default.createElement("div",{className:"preview-image-tip",title:a}))}}]),t}(v.Component);t.default=b},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSelectStop=t.onSelect=t.deleteImage=t.onDragStarted=t.onImageListDown=t.toggleImageItemSelected=t.onOutImageItem=t.onOverImageItem=t.convertImageData=void 0;var o=n(17),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=n(30),c=n(9),p=n(16),g=n(61),f=n(31),h=a(f),m=null,M=(t.convertImageData=function(e,t){var n=[],a=3;if(e){var o=e.map(function(e){var n=e;return n.src=e.encImgId?(0,g.combine)(t,p.IMAGE_SRC,(0,r.default)({qaulityLevel:0,puid:e.encImgId,rendersize:"fit350"},h.default)):null,n}),i=[];o.forEach(function(e){i.length===a&&(n.push(i),i=[]),i.push(e)}),i.length&&(n.push(i),i=[])}return n},t.onOverImageItem=function(e,t){clearTimeout(m);var n=t.src,a=t.guid,o=(e.refs.imageList,document.querySelector('[data-guid="'+a+'"]')),r=o.getBoundingClientRect(),i=window.innerHeight,s=I(t.width,t.height);if(!(r.top+r.height>i+10)){var u=r.left+r.width+15,l=r.top+r.height/2,d=0;l+(s.height+50)/2>i&&(d=l+(s.height+50)/2-i,l-=d),m=setTimeout(function(){e.setState({magnifierParams:{isMagnifierShow:!0,imageUrl:n,name:t.name,pixel:t.width+" x "+t.height+" px",width:t.width,height:t.height,offset:{x:u,y:l,marginTop:d}}})},e.state.magnifierShowTime)}},t.onOutImageItem=function(e){clearTimeout(m),e.setState({magnifierParams:{isMagnifierShow:!1,imageUrl:"",name:"",pixel:"",offset:{x:0,y:0}}})},t.toggleImageItemSelected=function(e,t,n){var a=n||window.event,o=(0,l.default)([],e.state.selectedImageIds),r=o.indexOf(t);a.ctrlKey||a.metaKey?r>=0?o.splice(r,1):o.push(t):r===-1&&(o=[t]),e.setState({selectedImageIds:o}),v(n)},t.onImageListDown=function(e){y(e)},t.onDragStarted=function(e,t,n){var a=e.state.selectedImageIds,o=e.props.uploadedImages;clearTimeout(m),e.setState({magnifierParams:{isMagnifierShow:!1,imageUrl:"",offset:{x:0,y:0}}});var r=[];if(a&&a.length)o.map(function(e){(a.indexOf(e.guid)>=0||e.id===t)&&r.push({encImgId:e.encImgId,imageid:e.id,width:e.width,height:e.height,type:c.elementTypes.photo})});else{var i=o.find(function(e){return e.guid===t});i&&r.push({encImgId:i.encImgId,imageid:i.id,width:i.width,height:i.height,type:c.elementTypes.photo})}var u=document.querySelector("#img-"+(0,s.default)(o[0],"id"));(0,d.setTransferData)(n,r),(0,d.setTransferDragNode)(n,u),e.setState({selectedImageIds:[]})},t.deleteImage=function(e,t){var n=e.props.boundProjectActions;t.encImgId&&n.deleteProjectImage(t.encImgId)},t.onSelect=function(e,t){t.p1&&t.p2&&M(e,t.p1,t.p2)},t.onSelectStop=function(e,t){t.p1&&t.p2&&M(e,t.p1,t.p2)},function(e,t,n){var a=[],o=Array.prototype.slice.call(document.querySelectorAll(".preview-image"),0),r={x:t.x<n.x?t.x:n.x,y:t.y<n.y?t.y:n.y},i={x:n.x>t.x?n.x:t.x,y:n.y>t.y?n.y:t.y};o.map(function(e){var t=e.parentNode.parentNode,n={x:t.offsetLeft,y:t.offsetTop},o={x:t.offsetLeft+e.offsetWidth,y:t.offsetTop+e.offsetHeight};if(r.y<o.y&&i.y>n.y&&r.x<o.x&&i.x>n.x){var s=t.getAttribute("data-guid");a.push(s)}});a.length&&e.setState({selectedImageIds:a})}),v=function(e){var t=e||window.event;t.stopPropagation()},y=function(e){e.setState({selectedImageIds:[]})},I=function(e,t){var n=400,a=400,o=e/t;if(e>=t){var r=n;return{width:r,height:r/o}}var i=a;return{width:i*o,height:i}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(385),M=a(m),v=(n(61),n(74)),y=a(v),I=n(403),T=a(I),w=n(408),E=(a(w),n(626)),D=a(E),N=n(13),S=(a(N),n(386));n(236);var b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={magnifierParams:{isMagnifierShow:!1,imageUrl:"",name:"",pixel:"",offset:{x:0,y:0,marginTop:0}},magnifierShowTime:500,selectedImageIds:[]},n.onOverImageItem=function(e){return(0,S.onOverImageItem)(n,e)},n.onOutImageItem=function(){return(0,S.onOutImageItem)(n)},n.onImageListDown=function(e){return(0,S.onImageListDown)(n,e)},n.toggleImageItemSelected=function(e,t){return(0,S.toggleImageItemSelected)(n,e,t)},n.onDragStarted=function(e,t){return(0,S.onDragStarted)(n,e,t)},n.deleteImage=function(e){return(0,S.deleteImage)(n,e)},n.onSelect=function(e){return(0,S.onSelect)(n,e)},n.onSelectStop=function(e){return(0,S.onSelectStop)(n,e)},n.getImagesRenderHtml=n.getImagesRenderHtml.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"getImagesRenderHtml",value:function(e){var t=this,n=this.state.selectedImageIds,a=this.onOverImageItem,o=this.onOutImageItem,r=this.toggleImageItemSelected,i={onOutImageItem:o,onOverImageItem:a,toggleImageItemSelected:r},s=[];return e&&e.length&&e.forEach(function(a,o){var r=[];o===e.length-1&&2===a.length;a.forEach(function(e,a){var o=n.indexOf(e.guid)>=0,s=o?{background:"#d6d6d6",borderRadius:"5px"}:{};r.push(h.default.createElement("div",{key:e.guid,className:"lazy-item",style:s},h.default.createElement(y.default,{onDragStarted:t.onDragStarted.bind(t,e.guid)},h.default.createElement(D.default,{height:80,offset:0},h.default.createElement(M.default,{imageObj:e,deleteImage:t.deleteImage.bind(t,e),actions:i})))))}),s.push(h.default.createElement("div",{className:"image-row",key:o},r))}),s}},{key:"componentDidMount",value:function(){window.onscroll=this.onOutImageItem}},{key:"componentWillUnmount",value:function(){window.onscroll=null}},{key:"render",value:function(){var e=this.props,t=e.uploadedImages,n=e.baseUrls,a=this.state.magnifierParams,o=(0,S.convertImageData)(t,n.get("uploadBaseUrl"));return h.default.createElement("div",null,h.default.createElement("div",{className:"image-list",ref:"imageList",onMouseUp:this.onImageListDown},o&&o.length?this.getImagesRenderHtml(o):null,h.default.createElement(T.default,{data:a})))}}]),t}(f.Component);b.propTypes={},t.default=b},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()};t.onReadMoreToggle=function(e,t){var a=e.props.actions,o=a.boundTrackerActions;o.addTracker("CheckPrice,"+e.payPrice);var r=e.state.priceDetailShow;e.setState({priceDetailShow:!r},function(){e.state.priceDetailShow&&e.popupDetail.focus()}),n(t)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(3),v=o(M),y=n(15),I=n(388),T=a(I),w=n(9),E=n(18);n(237);var D="",N="",S=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={priceDetailShow:!1,basicPrice:0},n.onReadMoreToggle=function(e){return T.onReadMoreToggle(n,e)},n.hidePriceDetail=n.hidePriceDetail.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"hidePriceDetail",value:function(){this.setState({priceDetailShow:!1})}},{key:"renderDetail",value:function(e,t){D=0,N=0;var n=this.props,a=(n.t,n.data),o=(a.parameters,[]),r=0;return e&&(r="undefined"!=typeof e.trialPrice?e.trialPrice:e.sPrice?e.sPrice:e.oriPrice,D+=e.oriPrice,N+=r),this.payPrice=N,o}},{key:"render",value:function(){var e=this.props,t=e.data,n=(e.t,t.parameters,t.settings),a=(0,m.default)(n,"spec.product"),o=(0,m.default)(n,"spec.size"),r=t.price.toJS(),i=r.main,s=r.options,u=(this.renderDetail(i,s),""),l="";return 0===N?(u=w.FREE,l="$"+(0,E.round)(D).toFixed(2)):(N<D&&(l="$"+(0,E.round)(D).toFixed(2)),u=N!==w.FREE?"$"+(0,E.round)(N).toFixed(2)+" USD":(0,E.round)(N).toFixed(2)),N?v.default.createElement("div",{className:"item-price"},a===w.productTypes.LPS?v.default.createElement("span",{className:"price-describtion"},"An easel + six double-sided photo prints."):null,a===w.productTypes.LPS?v.default.createElement("span",{className:"price"},o+",","  "):null,v.default.createElement("span",{className:"price"},l?v.default.createElement("span",null,l):null,u)):null}}]),t}(M.Component);t.default=(0,y.translate)("ItemPrice")(S)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(2),h=a(f),m=n(13),M=(a(m),n(3)),v=a(M);n(238);var y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onClicked=n.onClicked.bind(n),n.state={delectIconShow:!0},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!h.default.is(this.props.data,e.data)}},{key:"componentDidMount",value:function(){var e=this.props.data.get("isSelected");e&&this.itemNode&&this.itemNode.scrollIntoView()}},{key:"componentDidUpdate",value:function(){var e=this.props.data.get("isSelected");e&&this.itemNode&&this.itemNode.scrollIntoView()}},{key:"onClicked",value:function(){var e=this.props,t=e.data,n=e.actions,a=n.applyTemplate,o=t.getIn(["template","guid"]),r=t.get("isSelected");!r&&a&&a(o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=(t.actions,n.getIn(["template","templateUrl"]));return v.default.createElement("div",{className:"layout-item"},a?v.default.createElement("img",{className:"layout-img",src:a,ref:function(t){return e.itemNode=t},onClick:this.onClicked}):null)}}]),t}(M.Component);t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.didMount=t.receiveProps=t.handlerMouseWheel=t.onLayoutDragStarted=t.groupTemplateByNum=t.getTemplateHTML=void 0;var o=n(531),r=a(o),i=n(11),s=a(i),u=n(23),l=a(u),d=n(12),c=a(d),p=n(3),g=a(p),f=n(13),h=a(f),m=n(2),M=(a(m),n(60)),v=n(30),y=n(16),I=n(9),T=n(87),w=n(390),E=a(w),D=function(e){var t=e.width,n=void 0===t?0:t,a=e.height,o=void 0===a?0:a,r=0,i=0,s=o?n/o:0;return s>1.5?(r=190,i=2):s<=1.5&&s>=1/1.5?(r=120,i=3):(r=85,i=4),{width:r,height:s?r/s:0,colNumber:i}},N=function(e,t){var n=function n(a){if(!(a>=t.length)){var o=t[a];(0,T.loadImg)(o.templateUrl).then(function(t){if(t.img){var o=D({width:t.img.width,height:t.img.height});e.setState({imageSize:{width:o.width,height:o.height},colNumber:o.colNumber})}else{var r=a+1;n(r)}},function(e){var t=a+1;n(t)})}};t&&t.length&&n(0)},S=(t.getTemplateHTML=function(e){var t=e.props,n=t.data,a=t.actions,o=(t.t,a.applyTemplate,a.boundTemplateActions,a.onSelectFilter,n.baseUrls,n.setting),r=n.paginationSpread,i=n.page,s=n.userInfo,u=(n.currentFilterTag,n.pagination),l=e.state,d=l.templateList,c=l.imageSize;l.colNumber;if(o){var p=(r.get("pages"),u.pageId,i?i.getIn(["template","tplGuid"]):0);return i&&0===i.get("elements").size&&(p=0),d.map(function(t,n){var a=p===t.guid,o=(0,m.fromJS)({template:t,imageSize:c,isSelected:a,userInfo:s}),r={applyTemplate:e.applyTemplate,deleteTemplate:function(){},onSelectFilter:function(){}},i=(0,h.default)("lazy-item",{selected:a});return g.default.createElement("div",{className:i,key:t.guid},g.default.createElement(E.default,{actions:r,data:o}))})}return[]},t.groupTemplateByNum=function(e,t){var n=e.props.data,a=n.setting,o=a.get("product"),r=o===I.productTypes.PS,i=r?I.LAYOUT_MAX_VIEW_NUM_PS:I.LAYOUT_MAX_VIEW_NUM_DEFAULT,s={},u=(0,c.default)([],t);return u.sort(function(e,t){return t.imageNum-e.imageNum}),u.map(function(e){var t=e.imageNum;e.textFrameNum>0||e.customerId||(t>=i&&(t=i+"+"),s[t]||(s[t]=[]),s[t].push(e))}),s},t.onLayoutDragStarted=function(e,t,n){(0,v.setTransferData)(n,{type:I.dragTypes.template,guid:t}),__app.dragType=I.dragTypes.template},t.handlerMouseWheel=function(e,t){e.layoutList.scrollLeft+=t*I.mouseWheel.width},function(e,t,n,a){var o=(!(arguments.length>4&&void 0!==arguments[4])||arguments[4],[]);return o=t.filter(function(e){return!0})}),b=function(e,t,n){var a=void 0,o=t.find(function(e){return e.id==n}),r="";return o?(r=o.guid,a=e.filter(function(e){return e.styleGuid==r})):e},A=function(e,t,n,a,o){var r=S(e,t,n,a,o);return r=r.sort(function(e,t){return t.isCoverDefault?1:e.imageNum-t.imageNum})};t.receiveProps=function(e,t){var n=(0,s.default)(e.props,"data.template.list"),a=(0,s.default)(t,"data.template.list"),o=(0,m.fromJS)((0,s.default)(e.props,"data.page")),i=(0,m.fromJS)((0,s.default)(t,"data.page")),u=(o?o.get("elements"):(0,m.fromJS)({}),i?i.get("elements"):(0,m.fromJS)({}),o?o.getIn(["template","tplGuid"]):-1),d=i?i.getIn(["template","tplGuid"]):-1,p=(0,s.default)(e.props,"data.setting"),g=(0,s.default)(t,"data.setting"),f=i&&i.get("enabled"),h=(0,s.default)(t,"data.pagination"),v=(0,s.default)(t,"data.styles"),T=(0,s.default)(t,"data.baseUrls");(0,s.default)(p,"spec.size"),(0,s.default)(g,"spec.size");if(n.length!==a.length||u!==d||!(0,r.default)(n,a)){var w=(0,s.default)(g,"calendarSetting.styleId");if(a=A(e,a,h,g,f),a=b(a,v,w),a.length){var E=T.layoutTemplateServerBaseUrl,D=(0,s.default)(g,"spec.size"),S=(0,s.default)(g,"spec.product"),C=S===I.productTypes.LC?D:D.split("X")[1]+"X"+D.split("X")[0];a=a.map(function(e){var t=(0,l.default)(y.TEMPLATE_SRC)({templateThumbnailPrefx:E,size:C,guid:e.guid,randomMumber:(0,M.formatDate)(new Date,"")});return(0,c.default)({},e,{templateUrl:t})})}N(e,a),e.setState({templateList:a})}},t.didMount=function(e){var t=(0,s.default)(e.props,"data.template.list"),n=(0,m.fromJS)((0,s.default)(e.props,"data.page")),a=(n?n.get("elements"):(0,m.fromJS)({}),n?n.getIn(["template","tplGuid"]):-1,n&&n.get("enabled")),o=(0,s.default)(e.props,"data.pagination"),r=(0,s.default)(e.props,"data.setting"),i=(0,s.default)(e.props,"data.styles"),u=(0,s.default)(e.props,"data.baseUrls");if(t.length){var d=(0,s.default)(r,"calendarSetting.styleId");if(t=A(e,t,o,r,a),t=b(t,i,d),t.length){var p=u.layoutTemplateServerBaseUrl,g=(0,s.default)(r,"spec.size"),f=(0,s.default)(r,"spec.product"),h=f===I.productTypes.LC?g:g.split("X")[1]+"X"+g.split("X")[0];t=t.map(function(e){var t=(0,l.default)(y.TEMPLATE_SRC)({templateThumbnailPrefx:p,size:h,guid:e.guid,randomMumber:(0,M.formatDate)(new Date,"")});return(0,c.default)({},e,{templateUrl:t})})}N(e,t),e.setState({templateList:t})}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSelectFilter=t.groupTemplateByNum=t.applyTemplate=void 0;var o=n(14),r=a(o),i=n(73),s=(a(i),n(93)),u=a(s),l=n(11),d=a(l),c=n(3),p=(a(c),n(2)),g=a(p),f=n(9),h=n(53),m=(n(54),n(55)),M=n(90),v=(t.applyTemplate=function(e,t){var n=e.props,a=n.data,o=n.actions,r=o.boundTrackerActions,i=o.boundTemplateActions,s=a.template,u=a.setting,l=a.isCover,c=s.details,p=(0,d.default)(u,"spec.size"),g=l?"ChangeCoverLayout":"ChangeInnerLayout";r.addTracker(g+","+t),i.changeApplyTemplateStatus(!0);var f=t+"_"+p;c[f]?v(e,c[f]).then(function(){i.changeApplyTemplateStatus(!1)}):i.getTemplateInfo(t,p).then(function(n){var a=(0,m.convertResultToJson)(n),o=(0,m.formatTemplateInstance)(a,[t],p);o&&o.length&&v(e,o[0][f]).then(function(){i.changeApplyTemplateStatus(!1)})}),e.setState({selectedTemplateId:t})},t.groupTemplateByNum=function(e,t){var n={},a=e.props.data,o=(a.setting,a.paginationSpread),r=o.getIn(["summary","isPressBook"]),i=r?f.LAYOUT_MAX_VIEW_NUM_PS:f.LAYOUT_MAX_VIEW_NUM_DEFAULT;return t.map(function(e){var t=e.imageNum;e.textFrameNum>0||(t>=i&&(t=i+"+"),n[t]||(n[t]=[]),n[t].push(e))}),n},t.onSelectFilter=function(e,t){e.setState({currentFilterTag:t})},function(e,t){var n=e.props,a=n.data,o=n.actions,i=o.boundProjectActions,s=o.boundPaginationActions,l=a.paginationSpread,c=a.uploadedImages,p=a.ratios,m=(a.fontList,a.pagination),v=a.setting,y=((0,d.default)(v,"spec.cover"),[]),I=[],T=(t.elements,l.get("pages")),w=(0,d.default)(m,"pageId"),E=T.find(function(e){return e.get("id")===w}),D=E&&E.get("enabled");D||(E=T.get("0"),s.switchPage(0,E.get("id")));var N=(E.get("height")*p.workspace,E.get("width")*p.workspace,E.get("elements")),S=N.filter(function(e){return e.get("type")===f.elementTypes.photo&&!!e.get("encImgId")}),b=N.filter(function(e){return e.get("type")===f.elementTypes.text&&!!e.get("text")}),A=N.filter(function(e){return e.get("type")===f.elementTypes.calendar}),C=S.concat(b);C.forEach(function(e){y.push(e)}),A.forEach(function(e){y.push(e)});var x=t.elements,P=x.filter(function(e){return e.type===f.elementTypes.text});if(P.length){var L=y.filter(function(e){return e.get("type")===f.elementTypes.text&&!!e.get("text")}),_=y.filter(function(e){return e.get("type")===f.elementTypes.photo}),O=x.filter(function(e){return e.type===f.elementTypes.text}),j=O.length,z=L.length;if(z>=j){for(var k=[],R=(0,u.default)(L,function(e){return-e.get("lastModified")}),U=0;U<j;U++)k.push(R[U]);y=_.concat(k)}if(I=(0,h.updateElementsByTemplate)(E,y,c,t),I&&I.size){I=I.map(function(e){return e.get("type")===f.elementTypes.photo?e.get("border")?e:e.merge(f.defaultBorder):e});var B=E.set("elements",I),Y=g.default.List(),W=g.default.List();I.forEach(function(e){e.get("type")===f.elementTypes.photo?W=W.push(e):Y=Y.push(e)});var Q=(0,M.mergeTemplateElements)(B,W,g.default.fromJS(c));return I=Q.concat(Y),i.applyTemplate(E.get("id"),t.id,I)}return r.default.resolve()}if(y=y.filter(function(e){return e.get("type")===f.elementTypes.photo||e.get("type")===f.elementTypes.calendar}),I=(0,h.updateElementsByTemplate)(E,y,c,t),I&&I.size){I=I.map(function(e){return e.get("type")===f.elementTypes.photo?e.get("border")?e:e.merge(f.defaultBorder):e});var F=E.set("elements",I),G=g.default.List(),H=g.default.List();I.forEach(function(e){e.get("type")===f.elementTypes.photo?H=H.push(e):G=G.push(e)});var Z=(0,M.mergeTemplateElements)(F,H,g.default.fromJS(c));return I=Z.concat(G),i.applyTemplate(E.get("id"),t.id,I)}return r.default.resolve()})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0
});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(104),v=(o(M),n(2)),y=(o(v),n(13)),I=o(y),T=n(15),w=n(34),E=(o(w),n(3)),D=o(E),N=n(117),S=n(391),b=a(S),A=n(392),C=a(A);n(239);var x=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={templateList:[],imageSize:{width:0,height:0},colNumber:0},n.getTemplateHTML=function(){return b.getTemplateHTML(n)},n.groupTemplateByNum=function(e){return b.groupTemplateByNum(n,e)},n.onLayoutDragStarted=function(e,t){return b.onLayoutDragStarted(n,e,t)},n.handlerMouseWheel=function(e){return b.handlerMouseWheel(n,e)},n.receiveProps=function(e){return b.receiveProps(n,e)},n.applyTemplate=function(e){return C.applyTemplate(n,e)},n.didMount=function(){return b.didMount(n)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.receiveProps(e)}},{key:"componentDidMount",value:function(){var e=this;(0,m.default)(this.props,"data.templateList");this.didMount(),(0,N.addMouseWheelEvent)(this.layoutList,function(t){e.handlerMouseWheel(t)},!0)}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.data.isShow,n=e.data.isShow;return!(!t&&!n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,a=(t.actions,t.t),o=(n.isLoaded,n.pagination),r=(n.userInfo,n.isShow),i=this.state.templateList,s=0===o.sheetIndex,u={width:"auto"},l=(0,I.default)("layout-list",{show:r}),d=(0,I.default)("list",{"display-flex":!i.length});return D.default.createElement("div",{className:l},D.default.createElement("div",{className:d,ref:function(t){return e.layoutList=t}},i.length?this.getTemplateHTML():D.default.createElement("span",{className:"no-layouts",style:u},a(s?"NO_LAYOUTS":"NO_LAYOUTS_INNER"))))}}]),t}(E.Component);t.default=(0,T.translate)("LayoutList")(x)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(13),M=a(m),v=n(3),y=a(v),I=n(15);n(240);var T=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.itemChange=n.itemChange.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"itemChange",value:function(e,t){var n=this.props,a=n.data,o=n.actions,i=o.boundProjectActions,s=(o.boundTrackerActions,a.selected),u=a.project;u.setting;if(s!==t)if("startDate"===e){var l=t.split("_")[0],d=t.split("_")[1];i.changeCalendarSetting({startMonth:l,startYear:d})}else i.changeProjectSetting((0,r.default)({},e,t))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.t,t.actions,t.data),a=n.name,o=n.list,r=n.title,i=n.selected,s=(0,M.default)("OptionItem");return y.default.createElement("div",{className:s},y.default.createElement("div",{className:"option-item-title"},r,":"),y.default.createElement("div",{className:"item"},o.map(function(t,n){var o=t.get("id"),r=t.get("name"),s=(0,M.default)("item-span",{selected:i===o});return y.default.createElement("span",{className:s,key:o},y.default.createElement("input",{type:"radio",name:a,id:o,checked:i===o,onClick:function(){e.itemChange(a,o)}}),y.default.createElement("label",{htmlFor:o},r))})))}}]),t}(v.Component);T.proptype={},t.default=(0,I.translate)("OptionItem")(T)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(2),M=a(m),v=n(15),y=n(9),I=n(394),T=a(I);n(241);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=n.getStartDates();return n.state={startDates:a},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"getStartDates",value:function(){for(var e=[],t=new Date,n=t.getFullYear(),a=t.getMonth(),o=a>5?7:1,r=0;r<6;r++)e.push({id:o+r+"_"+n,month:o+r,year:n,name:y.monthStrings[o+r-1]+" "+n});return e.push({id:"1_"+(n+1),month:1,year:n+1,name:y.monthStrings[0]+" "+(n+1)}),M.default.fromJS(e)}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,a=this.state.startDates,o=n.project,r=t.boundProjectActions,i=t.boundTrackerActions,s=t.boundPriceActions,u=o.availableOptionMap.get("size"),l=o.availableOptionMap.get("dateStyle"),d=o.orderInfo,c=d.get("isCheckFailed"),p={name:"size",list:u,title:"Size",selected:o.setting.get("size"),project:o},g={name:"dateStyle",list:l,title:"Style",selected:o.setting.get("dateStyle"),project:o},f={name:"startDate",list:a,title:"Starting Date",selected:o.calendarSetting.get("startMonth")+"_"+o.calendarSetting.get("startYear"),project:o},m={boundProjectActions:r,boundTrackerActions:i,boundPriceActions:s},M=!0;return h.default.createElement("div",{className:"OptionTab"},u&&!c?h.default.createElement(T.default,{data:p,actions:m}):null,a?h.default.createElement(T.default,{data:f,actions:m}):null,l&&!M?h.default.createElement(T.default,{data:g,actions:m}):null)}}]),t}(f.Component);w.proptype={},t.default=(0,v.translate)("OptionTab")(w)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSubmitCheckFailProject=t.onClickLogo=t.onSave=t.onPreview=t.onOrder=void 0;var o=n(14),r=a(o),i=n(3),s=a(i),u=n(145),l=n(9);t.onOrder=function(e){if(!e.isOrdering){var t=e.props,n=t.data,a=t.actions,o=n.project,r=o.setting,i=a.onSaveProject,d=a.boundConfirmModalActions,c=a.boundCloneModalActions,p=a.boundNotificationActions,g=a.boundTrackerActions,f=a.boundUpgradeModalActions;e.isOrdering=!0;var h=o.property.get("projectId"),m=o.orderInfo,M=o.calendarSetting.get("startYear"),v=o.calendarSetting.get("startMonth"),y=m&&m.get("isOrdered")&&!m.get("isCheckFailed"),I=function(){i(function(){},function(){e.isOrdering=!1}).then(function(){g.addTracker("ClickOrderAndContinueThenSuccess,"+w),(0,u.redirectToOrder)(h)})};if(y){var T=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:c&&c.showCloneModal},"clone")," it to save your additional changes");return e.errorMessageNode||p.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},T),level:"error",autoDismiss:0}),void(e.isOrdering=!1)}var w=0;o.cover.get("containers").forEach(function(e){e.toJS().elements.forEach(function(e){"PhotoElement"!==e.type||e.encImgId||w++})}),o.pageArray.forEach(function(e){e.toJS().elements.forEach(function(e){"PhotoElement"!==e.type||e.encImgId||w++})});var E=/allpages/.test(window.location.hash)?"AllPages":"SinglePage",D=M+"-"+v;g.addTracker("ClickOrder,"+w+","+E+","+D),w>0?d.showConfirm({confirmMessage:s.default.createElement("div",{className:"text-left"},"The prints you are ordering can contain up to ",l.limitedPageNum," pieces. Currently it contains only ",l.limitedPageNum-w," piece(s). You have ",w," blank piece(s). Click continue for prints to be printed with blank pieces."),onOkClick:function(){g.addTracker("ClickOrderAndContinue,"+w),"7X5"===r.get("size")&&r.get("product")===l.productTypes.LPS?(f.showUpgrade(I),e.isOrdering=!1):i(function(){},function(){e.isOrdering=!1}).then(function(){g.addTracker("ClickOrderAndContinueThenSuccess,"+w),(0,u.redirectToOrder)(h)})},xCloseFun:function(){e.isOrdering=!1},onCancelClick:function(){e.isOrdering=!1},okButtonText:"Continue",cancelButtonText:"Cancel"}):(g.addTracker("ClickOrderAndContinue,"+w),"7X5"==r.get("size")&&"LPS"==r.get("product")?(f.showUpgrade(I),e.isOrdering=!1):i(function(){},function(){e.isOrdering=!1}).then(function(){g.addTracker("ClickOrderAndContinueThenSuccess,"+w),(0,u.redirectToOrder)(h)}))}},t.onPreview=function(e){var t=e.props.actions,n=t.boundPreviewModalActions;n.show()},t.onSave=function(e,t,n){var a=e.props,o=a.actions,i=a.data,u=o.onSaveProject,l=o.boundTrackerActions,d=o.boundNotificationActions,c=o.boundCloneModalActions,p=i.project,g=p.orderInfo,f=g&&g.get("isOrdered")&&!g.get("isCheckFailed");if(l.addTracker("ClickSave"),f){var h=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:c&&c.showCloneModal},"clone")," it to save your additional changes");return e.errorMessageNode||d.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},h),level:"error",autoDismiss:0}),r.default.reject()}return u(t,n)},t.onClickLogo=function(e,t){var n=e.props,a=n.actions,o=n.data,r=a.onSaveProject,i=a.boundCloneModalActions,u=a.boundNotificationActions,l=o.project,d=l.orderInfo,c=d&&d.get("isOrdered")&&!d.get("isCheckFailed");if(c){var p=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:i&&i.showCloneModal},"clone")," it to save your additional changes");e.errorMessageNode||u.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},p),level:"error",autoDismiss:0})}else r(function(){},null).then(function(){t&&"function"==typeof t&&t()})},t.onSubmitCheckFailProject=function(e){var t=e.props,n=t.actions,a=t.t,o=t.data,r=n.boundProjectActions,i=n.boundNotificationActions,u=n.onSaveProject,l=(o.project,function(){r.submitCheckFailProject().then(function(t){"200"===t?e.submitProjectSuccessNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectSuccessNode=t}},a("SUBMIT_PROJECT_SUCCESS")),level:"success",autoDismiss:2}):e.submitProjectFailedNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectFailedNode=t}},a("SUBMIT_PROJECT_FAILED")),level:"error",autoDismiss:0}),e.isSubmitingCheckFail=!1},function(t){e.submitProjectFailedNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectFailedNode=t}},a("SUBMIT_PROJECT_FAILED")),level:"error",autoDismiss:0}),e.isSubmitingCheckFail=!1})});e.isSubmitingCheckFail||(e.isSubmitingCheckFail=!0,u().then(function(){l()},function(){e.isSubmitingCheckFail=!1}))}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(15),M=n(418),v=a(M),y=n(279),I=a(y),T=n(396);n(242);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.isOrdering=!1,n.isSubmitingCheckFail=!1,n.onSave=function(e,t){return(0,T.onSave)(n,e,t)},n.onOrder=function(){return(0,T.onOrder)(n)},n.onPreview=function(){return(0,T.onPreview)(n)},n.onClickLogo=function(e){return(0,T.onClickLogo)(n,e)},n.onSubmitCheckFailProject=function(){return(0,T.onSubmitCheckFailProject)(n)},n.state={isUpgrade:!1},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,a=e.t,o=t.boundProjectActions,r=t.boundConfirmModalActions,i=t.boundTrackerActions,s=n.project,u=n.env,l=n.capability,d=s.property,c=d.get("title"),p=d.get("projectId"),g=u.userInfo&&u.userInfo.get("id"),f=u.urls&&u.urls.toJS(),m=s.orderInfo,M=m.get("isCheckFailed"),y={title:c,projectId:p,userId:g,orderInfo:m,capability:l},T={boundProjectActions:o,boundTrackerActions:i};return h.default.createElement(I.default,{boundSystemActions:r,isProjectEdited:!1,onSaveProject:this.onClickLogo,baseUrls:f},h.default.createElement(v.default,{actions:T,data:y}),h.default.createElement("div",{className:"head-nav"},h.default.createElement("span",{className:"nav-item",onClick:this.onPreview},a("PREVIEW")),h.default.createElement("span",{className:"nav-item",onClick:this.onSave},a("SAVE")),M?h.default.createElement("span",{className:"nav-item",onClick:this.onSubmitCheckFailProject},a("SUBMIT")):h.default.createElement("span",{className:"nav-item",onClick:this.onOrder},a("ORDER"))))}}]),t}(f.Component);w.propTypes={},t.default=(0,m.translate)("PageHeader")(w)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(160),M=n(15);n(243);var v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.data,a=n.allSheets,o=n.settings,r=o.spec.product,i=0;return a&&a.size&&a.forEach(function(e,t){var n=e.getIn(["pages","0","elements","0","encImgId"]);n&&(i+=1)}),h.default.createElement("div",{className:"page-nav"},h.default.createElement("div",{className:"page-nav-wrap"},r?"LPS"===r?null:h.default.createElement("ul",{className:"list"},h.default.createElement("li",{className:"item"},h.default.createElement(m.Link,{to:"/allpages",activeClassName:"active"},t("ALLPAGES"))),h.default.createElement("li",{className:"item"},h.default.createElement(m.Link,{to:"/onepage",activeClassName:"active"},t("ONEPAGE")))):null,a.size?h.default.createElement("div",{className:"page-count"},i," / ",a.size-1):null),h.default.createElement("div",{className:"line"}),h.default.createElement("section",{className:"content"},this.props.children))}}]),t}(f.Component);v.propTypes={},t.default=(0,M.translate)("PageNav")(v)},374,function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(12),m=o(h),M=n(3),v=o(M),y=n(2),I=o(y),T=n(15),w=n(13),E=o(w),D=n(109),N=o(D),S=n(75),b=n(83),A=o(b),C=n(9),x=n(399),P=a(x);n(245);var L=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={isImgLoading:!1,src:null,isShowActionBar:!0},n.hideLoading=function(){n.setState({isImgLoading:!1})},n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"onImageError",value:function(){this.setState({isImgLoading:!1})}},{key:"onImageLoad",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillMount",value:function(){var e=this.props.data,t=e.element,n=(t.get("computed"),t.getIn(["computed","imgUrl"]));n&&(S.isSafari?this.setState({isImgLoading:!0,src:n}):P.lazyLoadingImage(this,n))}},{key:"shouldComponentUpdate",value:function(e,t){return!I.default.is(this.props.data.element,e.data.element)||this.props.data.isHover!==e.data.isHover||this.state.isImgLoading!==t.isImgLoading||this.state.img!==t.img||this.state.src!==t.src}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.element.getIn(["computed","imgUrl"]),n=e.data.element.getIn(["computed","imgUrl"]);t!==n&&(S.isSafari?this.setState({src:n,isImgLoading:!0}):(this.setState({src:null}),P.lazyLoadingImage(this,n)))}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,a=n.element,o=n.isHover,r=(n.product,a.get("computed")),i=a.getIn(["computed","imgUrl"]),s={zIndex:a.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+a.get("rot")+"deg)"},u={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},l=(0,m.default)({},u,{display:i?"block":"none",border:r.get("border")?""+r.get("border"):"none"}),d={width:r.get("width")+"px",height:r.get("height")+"px"},c=(0,m.default)({},t),p=(0,m.default)({},n,{className:(0,E.default)("photo-element-thumbnail",{"has-image":!!i}),style:s,handlerStyle:u}),g=this.state,f=g.isImgLoading,h=g.src,M=(0,E.default)("box",{hover:o}),y=a.getIn(["computed","scale"]);y>C.RESIZE_LIMIT;return v.default.createElement(A.default,{actions:c,data:p},v.default.createElement("div",{className:"layer-image",style:d},v.default.createElement(N.default,{isShown:f}),f?null:v.default.createElement("img",{className:"photo-img",src:h,onLoad:this.onImageLoad,onError:this.onImageError,style:l})),v.default.createElement("div",{className:M,style:u}))}}]),t}(M.Component);L.propTypes={},t.default=(0,T.translate)("PhotoElement")(L)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onToggleHideUsed=function(e){var t=e.props,n=t.actions,a=(t.data,n.boundTrackerActions),o=e.state,r=o.uploadedImages,i=o.copyUploadedImages,s=!e.state.isHideUseChecked;if(s){var u=r.filter(function(e){return 0===e.usedCount});e.setState({uploadedImages:u,isHideUseChecked:s},function(){a.addTracker("ChangeHideUsed,on")})}else e.setState({uploadedImages:i,isHideUseChecked:s},function(){a.addTracker("ChangeHideUsed,off")})},t.onSorted=function(e,t){var n=e.props.actions,a=n.boundTrackerActions,o=(e.state.copyUploadedImages,e.state.uploadedImages),r=t.value,i=r.split(","),s=i[0],u=i[1],l="<"===s?u+"Dsc":u+"Asc";if(o.sort(function(e,t){switch(s){case"<":return"name"===u?t[u].localeCompare(e[u]):t[u]-e[u];default:return"name"===u?e[u].localeCompare(t[u]):e[u]-t[u]}}),e.state.isHideUseChecked){var d=o.filter(function(e){return 0===e.usedCount});e.setState({uploadedImages:d,sortValue:r},function(){a.addTracker("ChangeSort,"+l)})}else e.setState({uploadedImages:o,sortValue:r},function(){a.addTracker("ChangeSort,"+l)})},t.uploadFileClicked=function(e){var t=e.props.actions,n=t.boundImagesActions,a=t.boundTrackerActions,o=function(){a.addTracker("ClickAddPhotos"),n.autoAddPhotoToCanvas({status:!1,elementId:"",elementWidth:0,elementHeight:0})};e.timer&&clearTimeout(e.timer);var r=setTimeout(o,30);e.timer=r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(12),M=a(m),v=n(3),y=a(v),I=n(15),T=n(2),w=(a(T),n(47)),E=a(w),D=n(28),N=(a(D),n(414)),S=a(N),b=n(387),A=a(b),C=n(401);n(246);var x=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=n.props.data,o=a.uploadedImages;return o=o.map(function(e){return(0,M.default)({},e,{usedCount:0,uploadTime:(new Date).getTime()})}),n.state={uploadedImages:o,copyUploadedImages:o,isHideUseChecked:!1,sortValue:"<,uploadTime"},n.onToggleHideUsed=function(){return(0,C.onToggleHideUsed)(n)},n.onSorted=function(e){return(0,C.onSorted)(n,e)},n.uploadFileClicked=function(){return(0,C.uploadFileClicked)(n)},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"getNewElements",value:function(e,t){var n=[];return e.map(function(e){n.push(e.id)}),t.filter(function(e){return n.indexOf(e.id)===-1})}},{key:"checkUsageCount",value:function(e,t){return e&&e.length&&e.forEach(function(e){var n=t&&t[e.encImgId]?t[e.encImgId]:0;e.usedCount=n,e.uploadedImages=(new Date).getTime()}),e}},{key:"componentWillReceiveProps",value:function(e){var t=(0,h.default)(this.props,"data.uploadedImages"),n=(0,h.default)(e,"data.uploadedImages"),a=(0,h.default)(this.props,"data.imageUsedMap"),o=(0,h.default)(e,"data.imageUsedMap");if(t!=n||a!=o){var r=this.checkUsageCount((0,M.default)([],n),o.toJS());r.map(function(e){e.shotTime||(e.shotTime=(new Date).getTime())});var i=this.state.sortValue.split(","),s=i[0],u=i[1];if(r.sort(function(e,t){switch(s){case"<":return"name"===u?t[u].localeCompare(e[u]):t[u]-e[u];default:return"name"===u?e[u].localeCompare(t[u]):e[u]-t[u]}}),this.state.isHideUseChecked){var l=r.filter(function(e){return 0===e.usedCount});this.setState({uploadedImages:l,copyUploadedImages:r})}else this.setState({uploadedImages:r,copyUploadedImages:r})}}},{key:"componentDidMount",value:function(){var e=(0,h.default)(this.props,"data.uploadedImages"),t=(0,h.default)(this.props,"data.imageUsedMap"),n=this.checkUsageCount((0,M.default)([],e),t.toJS());n.map(function(e){e.shotTime||(e.shotTime=(new Date).getTime())});var a=this.state.sortValue.split(","),o=a[0],r=a[1];n.sort(function(e,t){switch(o){case"<":return"name"===r?t[r].localeCompare(e[r]):t[r]-e[r];default:return"name"===r?e[r].localeCompare(t[r]):e[r]-t[r]}}),this.setState({uploadedImages:n,copyUploadedImages:n})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.actions,a=e.data,o=this.state,r=o.uploadedImages,i=(o.isHideUseChecked,o.copyUploadedImages),s=n.boundImagesActions,u=n.boundProjectActions,l=n.toggleModal,d=a.baseUrls,c=a.imageUsedMap,p=a.allImages,g=!!i.length;return y.default.createElement("div",{className:"PhotoTab"},y.default.createElement(E.default,{className:"add-photo",multiple:"multiple",inputId:"file-upload",boundUploadedImagesActions:s,toggleModal:l,uploadFileClicked:this.uploadFileClicked},t("ADD_PHOTOS")),y.default.createElement(S.default,{onToggleHideUsed:this.onToggleHideUsed,onSorted:this.onSorted,isShow:g}),p&&p.size?y.default.createElement(A.default,{uploadedImages:r,boundProjectActions:u,baseUrls:d,imageUsedMap:c}):y.default.createElement("label",{className:"empty-list-tip",htmlFor:"file-upload"},t("ADD_PHOTOS_TIP")))}}]),t}(v.Component);x.proptype={},t.default=(0,I.translate)("PhotoTab")(x)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m),v=n(42),y=a(v);n(247);var I=400,T=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={isImgLoading:!1},n.hideLoading=n.hideLoading.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"hideLoading",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.imageUrl,n=e.data.imageUrl;t!==n&&this.setState({isImgLoading:!0})}},{key:"render",value:function(){var e=this.props.data,t=e.isMagnifierShow,n=e.imageUrl,a=e.offset,o=e.name,r=e.pixel,i=e.width,s=e.height,u=a.x,l=a.y,d=a.marginTop,c={display:t?"block":"none",left:u+"px",top:l+"px"},p={marginTop:2*d/3+"px"},g=(0,M.default)("extra-info",{removeFloat:i/s<.5}),f={width:i>=s?I+"px":"auto",height:s>=i?I+"px":"auto"};return h.default.createElement("div",{className:"PicMagnifier",style:c},h.default.createElement(y.default,{isShown:this.state.isImgLoading}),h.default.createElement("img",{src:n,className:"fill",style:f}),h.default.createElement("img",{src:n,style:f,onLoad:this.hideLoading,onError:this.hideLoading}),h.default.createElement("div",{className:g},h.default.createElement("div",{className:"image-name",title:o},o?o.length<=20?o:o.substr(0,10)+"..."+o.substr(o.length-7):""),h.default.createElement("div",{className:"image-size"},r)),h.default.createElement("div",{className:"arrow",style:p}),h.default.createElement("div",{className:"arrow-filter",style:p}))}}]),t}(f.Component);T.proptype={data:f.PropTypes.object},t.default=T},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onClosePreviewModal=function(e){var t=e.props.actions,n=t.closePreviewModal;n&&n()}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(3),m=o(h),M=n(29),v=o(M),y=n(407),I=o(y),T=n(404),w=a(T);n(248);var E=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onClosePreviewModal=function(){return w.onClosePreviewModal(n)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,a=n.boundSnippingActions,o=n.onSwitchSheet,r=t.isInPreviewModel,i=t.isShown,s=t.pagination,u=t.urls,l=t.ratios,d=t.size,c=t.position,p=t.variables,g=t.settings,f=t.project,h=t.parameters,M=t.allSheets,y=t.capability,T=t.ignoreEmpty,w=void 0===T||T,E={boundSnippingActions:a,onSwitchSheet:o},D={pagination:s,urls:u,ratios:l,size:d,position:c,variables:p,settings:g,project:f,parameters:h,allSheets:M,ignoreEmpty:w,capability:y};return m.default.createElement(v.default,{className:"preview-modal",onClosed:this.onClosePreviewModal,isHideIcon:r,opened:i},i&&d&&d.renderCoverSize?m.default.createElement(I.default,{actions:E,data:D}):null)}}]),t}(h.Component);E.proptype={isShown:h.PropTypes.bool},t.default=E},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.switchSheet=t.updatePaginationInState=t.updatePaginationSpreadInState=t.onClosePreviewModal=void 0;var o=n(12),r=a(o),i=n(2),s=(a(i),n(9),t.onClosePreviewModal=function(e){var t=e.props.actions,n=t.closePreviewModal;n&&n()},t.updatePaginationSpreadInState=function(e,t,n){var a=t?t.data.allSheets:e.props.data.allSheets,o=a.get(n);n<a.size&&e.setState({paginationSpread:o})}),u=t.updatePaginationInState=function(e,t,n){var a=e.state.pagination,o=t.data.pagination||e.props.data.pagination;e.setState({pagination:{prevSheetIndex:a.sheetIndex,sheetIndex:n,total:o.get("total")}})};t.switchSheet=function(e,t){var n=e.props.actions,a=void 0===n?{}:n,o=a.onSwitchSheet,i=t.current;s(e,e.props,i),u(e,e.props,i);var l=(0,r.default)({},e.state.pagination,{sheetIndex:i});o&&o(l)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(12),m=o(h),M=n(11),v=o(M),y=n(3),I=o(y),T=n(13),w=(o(T),n(2)),E=o(w),D=n(406),N=a(D),S=n(29),b=(o(S),n(286)),A=(o(b),n(138)),C=o(A),x=n(42),P=(o(x),n(139)),L=o(P),_=n(9);n(249);var O=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),a=n.props.data,o=a.pagination,r=a.allSheets,s=a.snipping;return n.state={pagination:{prevSheetIndex:-1,prevPageIndex:-1,sheetIndex:o.get("sheetIndex"),pageIndex:0,pageId:"",total:o.get("total")},paginationSpread:r.size?r.get(o.get("sheetIndex")):E.default.Map({}),snipping:s},n.updatePaginationSpreadInState=function(e,t){return N.updatePaginationSpreadInState(n,e,t)},n.updatePaginationInState=function(e,t){return N.updatePaginationInState(n,e,t)},n.switchSheet=function(e){return N.switchSheet(n,e)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.data.allSheets.size&&this.updatePaginationSpreadInState(e,this.state.pagination.sheetIndex),this.state.pagination.total!==e.data.pagination.get("total")&&this.updatePaginationInState(e,this.state.pagination.sheetIndex);var t=(0,v.default)(this.props,"data.pagination"),n=(0,v.default)(e,"data.pagination");t.get("sheetIndex")!==n.get("sheetIndex")&&(this.updatePaginationInState(e,n.get("sheetIndex")),this.updatePaginationSpreadInState(e,n.get("sheetIndex")))}},{key:"render",value:function(){var e=this.props.data,t=e.urls,n=e.ratios,a=e.size,o=(e.position,e.variables),r=e.settings,i=e.project,s=e.parameters,u=(e.allSheets,e.ignoreEmpty),l=e.capability,d=this.state,c=d.paginationSpread,p=d.pagination,g=(d.snipping,{}),f=(0,v.default)(r,"spec.product"),h=f===_.productTypes.LPS,M=c.get("pages"),y=M.size&&M.get("0"),T=y&&y.get("width")>y.get("height"),w=a;T&&(w=(0,m.default)({},a,{renderCoverSheetSize:(0,v.default)(a,"renderCoverSheetSize"),renderInnerSize:(0,v.default)(a,"renderInnerSizeLandscape"),renderInnerContainerSize:(0,v.default)(a,"renderInnerContainerSizeLandscape"),renderInnerSheetSize:(0,v.default)(a,"renderInnerSheetSizeLandscape"),renderInnerSheetSizeWithoutBleed:(0,v.default)(a,"renderInnerSheetSizeWithoutBleedLandscape")}));var E=(0,m.default)({},n,{innerWorkspace:T?(0,v.default)(n,"innerWorkspaceLandscape"):(0,v.default)(n,"innerWorkspace")}),D={urls:t,size:w,ratios:E,paginationSpread:c,variables:o,pagination:p,settings:r,project:i,parameters:s,ignoreEmpty:u,capability:l,isPreview:!0,isLandscapeShape:T},N={},S={onPage:this.switchSheet},b={total:p.total,current:p.sheetIndex,style:N,minSheetIndex:h?1:0},A=w.renderCoverSize.width>w.renderInnerSize.width?w.renderCoverSize.width:w.renderInnerSize.width,x=w.renderCoverSize.height>w.renderInnerSize.height?w.renderCoverSize.height:w.renderInnerSize.height,P={width:A+"px",height:x+"px",margin:"0 auto"},O={marginTop:-x/2+"px",marginLeft:-A/2+"px"},j=h?p.total:p.total+1,z=h?p.sheetIndex:p.sheetIndex+1;return I.default.createElement("div",{className:"preview-wrap"},I.default.createElement("div",{className:"preview-sheet-render",style:O},I.default.createElement("div",{style:P},I.default.createElement(C.default,{actions:g,data:D})),I.default.createElement("div",{className:"pagination-message"},z," / ",j)),I.default.createElement(L.default,{actions:S,data:b}))}}]),t}(y.Component);O.proptype={},t.default=O},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(12),h=a(f),m=n(3),M=a(m);n(250);var v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.isSelecting=!1,n.state={selectionBox:null,selectionBoxStyle:null},n.onSelect=n.onSelect.bind(n),n.onSelectStart=n.onSelectStart.bind(n),n.onSelectStop=n.onSelectStop.bind(n),window.addEventListener("mousedown",n.onSelectStart),window.addEventListener("mousemove",n.onSelect),window.addEventListener("mouseup",n.onSelectStop),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onSelectStart),window.removeEventListener("mousemove",this.onSelect),window.removeEventListener("mouseup",this.onSelectStop)}},{key:"onSelectStart",value:function(e){var t=this.props,n=t.containerOffsetTop,a=t.containerOffsetLeft,o=t.containerOffsetWidth,r=t.containerOffsetHeight;e.pageX<a||e.pageY<n||e.pageX>a+o||e.pageY>n+r||(this.isSelecting=!0,this.setState({selectionBox:{p1:{x:e.pageX-a,y:e.pageY-n}}}))}},{key:"onSelect",value:function(e){if(this.isSelecting){var t=this.state.selectionBox,n=this.props,a=n.containerOffsetTop,o=n.containerOffsetLeft,r=n.actions,i={x:e.pageX-o,y:e.pageY-a},s=(0,h.default)({},t,{p2:i}),u=t.p1,l={};l=i.x>u.x?(0,h.default)(l,{left:u.x,width:i.x-u.x}):(0,h.default)(l,{left:i.x,width:u.x-i.x}),l=i.y>u.y?(0,h.default)(l,{top:u.y,height:i.y-u.y}):(0,h.default)(l,{top:i.y,height:u.y-i.y}),r.onSelect(s),this.setState({selectionBox:s,selectionBoxStyle:l})}}},{key:"onSelectStop",value:function(){if(this.isSelecting){this.isSelecting=!1;var e=this.state.selectionBox,t=this.props.actions;t.onSelectStop(e),this.setState({selectionBox:null,selectionBoxStyle:null})}}},{key:"render",value:function(){var e=this.state.selectionBoxStyle;return M.default.createElement("div",{className:"selection",style:e})}}]),t}(m.Component);v.propTypes={actions:m.PropTypes.shape({onSelect:m.PropTypes.func.isRequired,onSelectStop:m.PropTypes.func.isRequired}).isRequired,containerOffsetTop:m.PropTypes.number.isRequired,containerOffsetLeft:m.PropTypes.number.isRequired,containerOffsetWidth:m.PropTypes.number.isRequired,containerOffsetHeight:m.PropTypes.number.isRequired},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(13),h=(a(f),
n(15)),m=n(3),M=a(m);n(251);var v=n(134),y=a(v),I=n(136),T=a(I),w=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,a=t.boundTemplateActions,o=t.boundPaginationActions,r=t.boundProjectActions,i=t.boundImageEditModalActions,s=t.boundImagesActions,u=t.boundUploadImagesActions,l=t.boundTextEditModalActions,d=t.boundPropertyModalActions,c=t.boundTrackerActions,p=t.boundNotificationActions,g=n.urls,f=n.size,h=n.ratios,m=n.materials,v=n.variables,I=n.template,w=n.pagination,E=n.paginationSpread,D=n.settings,N=n.project,S=n.parameters,b=n.isPreview,A=n.specData,C=n.allImages,x=n.userId,P=n.capability,L=n.isLandscapeShape,_=E.get("summary"),O=E.get("pages"),j={boundTemplateActions:a,boundPaginationActions:o,boundProjectActions:r,boundImageEditModalActions:i,boundImagesActions:s,boundUploadImagesActions:u,boundTextEditModalActions:l,boundPropertyModalActions:d,boundNotificationActions:p,boundTrackerActions:c},z={boundTemplateActions:a,boundPaginationActions:o,boundProjectActions:r,boundImageEditModalActions:i,boundImagesActions:s,boundUploadImagesActions:u,boundTextEditModalActions:l,boundPropertyModalActions:d,boundTrackerActions:c,boundNotificationActions:p},k=[];if(O&&O.size){var R=0;if(_.get("isCover")){var U={urls:g,size:f,ratios:h,materials:m,variables:v,template:I,pagination:w,paginationSpread:E,settings:D,parameters:S,isPreview:b,specData:A,project:N,allImages:C,userId:x,capability:P};k.push(M.default.createElement(y.default,{key:R,actions:j,data:U}))}else{var B={urls:g,size:f,ratios:h,variables:v,template:I,pagination:w,paginationSpread:E,project:N,settings:D,isPreview:b,parameters:S,specData:A,userId:x,capability:P,isLandscapeShape:L};k.push(M.default.createElement(T.default,{key:R,actions:z,data:B}))}}return M.default.createElement("div",{className:"sheet-render"},k)}}]),t}(m.Component);t.default=(0,h.translate)("BookSheet")(w)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getAllStyles=function(e){var t={prev:{transform:"translateX("+-e+"px)",WebkitTransform:"translateX("+-e+"px)",OTransform:"translateX("+-e+"px)",opacity:.5},current:{transform:"translateX(0)",WebkitTransform:"translateX(0)",OTransform:"translateX(0)",opacity:1},next:{transform:"translateX("+e+"px)",WebkitTransform:"translateX("+e+"px)",OTransform:"translateX("+e+"px)",opacity:.5}};return t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onSelect=function(e,t){var n=e.props.actions,a=n.boundSidebarActions,o=n.boundTrackerActions;o.addTracker("ChangeTab,"+e.tabsText[t]),a.changeTab(t)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(12),m=o(h),M=n(3),v=o(M),y=n(15),I=n(570),T=n(13),w=o(T),E=n(402),D=o(E),N=n(395),S=o(N),b=n(411),A=a(b);n(253);var C=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={tabsText:[],numTemplate:{},pageSize:8,page:1,getMoreShow:!0,html:""},I.Tabs.setUseDefaultStyles(!1),n.onSelect=function(e){return A.onSelect(n,e)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.data,a=e.actions,o=n.sidebar,r=n.uploadedImages,i=n.baseUrls,s=n.imageUsedMap,u=n.isShowSideBar,l=n.project,d=n.settings,c=n.allImages,p=a.toggleModal,g=a.boundImagesActions,f=a.boundProjectActions,h=a.boundTrackerActions,M=a.boundPriceActions,y=d.spec.product,T=y&&"LC"===y?[t("PHOTOS"),""]:[t("OPTIONS"),t("PHOTOS")],E={toggleModal:p,boundImagesActions:g,boundProjectActions:f,boundTrackerActions:h},N={uploadedImages:r,baseUrls:i,imageUsedMap:s,allImages:c},b={toggleModal:p,boundImagesActions:g,boundProjectActions:f,boundTrackerActions:h,boundPriceActions:M},A={project:l,settings:d},C=T.map(function(e,t){var n=(0,w.default)("item",{active:t===o.tabIndex});return v.default.createElement(I.Tab,{key:t,className:n},e)}),x={borderTop:"none"};return x=(0,m.default)({},x,{display:u?"block":"none"}),this.tabsText=T,v.default.createElement("div",{className:"side-bar",style:x},y?"LC"===y?v.default.createElement(I.Tabs,{onSelect:this.onSelect,selectedIndex:0,forceRenderTabPanel:!0},v.default.createElement(I.TabList,{className:"list"},v.default.createElement(I.Tab,{key:0,className:(0,w.default)("item",{active:!0})},t("PHOTOS")),v.default.createElement(I.Tab,{key:1,className:(0,w.default)("item",{active:!1}),disabled:!0},"")),v.default.createElement(I.TabPanel,null,v.default.createElement(D.default,{actions:E,data:N})),v.default.createElement(I.TabPanel,null)):v.default.createElement(I.Tabs,{onSelect:this.onSelect,selectedIndex:o.tabIndex,forceRenderTabPanel:!0},v.default.createElement(I.TabList,{className:"list"},C),v.default.createElement(I.TabPanel,null,v.default.createElement(S.default,{actions:b,data:A})),v.default.createElement(I.TabPanel,null,v.default.createElement(D.default,{actions:E,data:N}))):null)}}]),t}(M.Component);C.propTypes={},t.default=(0,y.translate)("SideBar")(C)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){var n=e.state.total,a=e.props,o=a.actions,r=a.data,i=r.current,s=r.minSheetIndex,u=o.onPage,l=s||0;if(t>=l&&t<=n&&(e.setState({current:t}),u&&"function"==typeof u)){var d=t>i?"ClickNextPage":"ClickPreviousPage",c=d+","+t;u({total:n,current:t,TrackerParam:c})}},300)};t.goPrevious=function(e){var t=e.state.current;n(e,t-1)},t.goNext=function(e){var t=e.state.current;n(e,t+1)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(15),M=n(13),v=a(M),y=n(108),I=(a(y),n(428)),T=a(I);n(256);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=e.t;return n.state={sortOptions:[{label:a("DATE_TOKEN_O_T_N"),value:">,shotTime"},{label:a("DATE_TOKEN_N_T_O"),value:"<,shotTime"},{label:a("UPLOAD_TIME_O_T_N"),value:">,uploadTime"},{label:a("UPLOAD_TIME_N_T_O"),value:"<,uploadTime"},{label:a("TITLE_A_Z"),value:">,name"},{label:a("TITLE_Z_A"),value:"<,name"}],sortValue:{label:a("UPLOAD_TIME_N_T_O"),value:"upload-time-new-to-old"},OptionsStatus:!1},n.hideOptions=n.hideOptions.bind(n),n.showOptions=n.showOptions.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"handleOptionChange",value:function(e){this.setState({sortValue:e});var t=this.props.onSorted;t({value:e.value})}},{key:"handleHideUsedToggle",value:function(e){var t=this.props.onToggleHideUsed,n=e.target.checked;t(n)}},{key:"hideOptions",value:function(){this.setState({OptionsStatus:!1})}},{key:"showOptions",value:function(){this.setState({OptionsStatus:!0})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.isShow,a=this.state.OptionsStatus,o=(0,v.default)("upload-hide",{hide:!n});return h.default.createElement("div",{className:o},h.default.createElement("div",{className:"t-left",tabIndex:"1",onBlur:this.hideOptions},h.default.createElement("span",{className:"sort-by",onClick:this.showOptions},h.default.createElement("label",null,t("SORT_BY")),h.default.createElement("div",{className:"triangle-down"})),a?h.default.createElement(T.default,{optionValue:this.state.sortValue,onChanged:this.handleOptionChange.bind(this),hideOptions:this.hideOptions,options:this.state.sortOptions}):null),h.default.createElement("div",{className:"t-right"},h.default.createElement("input",{type:"checkbox",id:"hideUsed",onChange:this.handleHideUsedToggle.bind(this)}),h.default.createElement("label",{htmlFor:"hideUsed",className:"hide-used"},t("HIDE_USED"))))}}]),t}(f.Component);t.default=(0,m.translate)("SortAndFilter")(w)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(12),h=a(f),m=n(23),M=a(m),v=n(3),y=a(v),I=n(2),T=a(I),w=n(13),E=a(w),D=n(9),N=n(29),S=a(N),b=n(28),A=a(b),C=n(108),x=a(C),P=n(288),L=a(P),_=n(277),O=a(_),j=n(48),z=n(381),k=a(z),R=n(417),U=a(R),B=n(18),Y=n(32),W=n(16),Q=n(86),F=a(Q),G=n(497);n(257);var H=4,Z=120,X=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=[{value:"left",title:"Align Text Left"},{value:"center",title:"Center Text"},{value:"right",title:"Align Text Right"}],o=[{value:"top",title:"Vertical Align Text Top"},{value:"middle",title:"Middle Text"},{value:"bottom",title:"Vertical Align Text Bottom"}];return n.state={alignOptionList:a,verticalAlignOptionList:o,previewTextImageSrc:null,previewTextImageBlobSrc:null,timer:null,lastRequestTime:null,isShowIllegalCharTip:!1,isShowTextNotFit:!1,hideTipTimer:null,lastAppearIllegalCharTime:null},n.onTextAreaChange=n.onTextAreaChange.bind(n),n.onFontNameChange=n.onFontNameChange.bind(n),n.onFontWeightChange=n.onFontWeightChange.bind(n),n.onFontColorChange=n.onFontColorChange.bind(n),n.onSliderChange=n.onSliderChange.bind(n),n.onSizeInputChange=n.onSizeInputChange.bind(n),n.onSizeInputBlur=n.onSizeInputBlur.bind(n),n.onSubmit=n.onSubmit.bind(n),n.updatePreviewTextSrc=n.updatePreviewTextSrc.bind(n),n.delayUpdatePreviewTextSrc=n.delayUpdatePreviewTextSrc.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.initData(this.props.element)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.isShown,n=e.isShown;t!==n&&n&&this.initData(e.element)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.isShown!==e.isShown||this.state.fontName!==t.fontName||this.state.fontWeight!==t.fontWeight||this.state.align!==t.align||this.state.verticalAlign!==t.verticalAlign||this.state.fontSize!==t.fontSize||this.state.fontColor!==t.fontColor||this.state.inputText!==t.inputText||this.state.inputSize!==t.inputSize||this.state.previewTextImageSrc!==t.previewTextImageSrc||this.state.previewTextImageBlobSrc!==t.previewTextImageBlobSrc||this.state.isShowIllegalCharTip!==t.isShowIllegalCharTip||this.state.isShowTextNotFit!==t.isShowTextNotFit}},{key:"componentDidUpdate",value:function(e,t){var n=t.fontWeight,a=this.state.fontWeight;n!==a&&this.updatePreviewTextSrc();var o=t.fontSize,r=this.state.fontSize;o!==r&&this.delayUpdatePreviewTextSrc();var i=t.fontColor,s=this.state.fontColor;i!==s&&this.delayUpdatePreviewTextSrc();var u=t.inputText,l=this.state.inputText;u!==l&&this.delayUpdatePreviewTextSrc();var d=t.align,c=this.state.align;d!==c&&this.updatePreviewTextSrc();var p=t.verticalAlign,g=this.state.verticalAlign;p!==g&&this.updatePreviewTextSrc();var f=t.previewTextImageSrc,h=this.state.previewTextImageSrc;f!==h&&this.getPreviewTextBlobAndTextInfo(h,this.props.element);var m=e.isShown,M=this.props.isShown;if(m!==M&&M){var v=this.refs.inputText;v.focus(),v.setSelectionRange&&v.setSelectionRange(v.value.length,v.value.length)}}},{key:"initData",value:function(e){var t=this.props,n=t.fontList,a=t.baseUrl,o=t.currentPage,r=T.default.fromJS(D.defaultFontSetting),i=n.filter(function(e){return!e.deprecated}),s=[],u=void 0,l=[];e&&e.get("type")===D.elementTypes.paintedText&&(D.paintedTextFontsFilterArray.forEach(function(e){u=i.find(function(t){return t.displayName===e.font});var t=(0,h.default)({},u);t.name&&(l=[],e.weight.forEach(function(e){var n=t.font.find(function(t){return t.displayName===e});n&&l.push(n)}),t.font=l),t.name&&s.push(t)}),i=s);var d=this.state,c=d.alignOptionList,p=d.verticalAlignOptionList,g=r.get("fontFamilyId"),f=r.get("fontId"),m=r.get("fontSize"),v=r.get("color"),y=c[0].value,I=p[0].value,w="",E=null;if(e){var N=(0,j.toDecode)(e.get("fontFamily"));n.forEach(function(e){e.font.forEach(function(t){t.fontFace===N&&g===r.get("fontFamilyId")&&(g=e.id,f=t.id)})});var S=e.get("fontSize");m=(0,G.getFontSizeInPt)(S*o.get("height")),v=e.get("fontColor"),y=e.get("textAlign"),I=e.get("textVAlign")||I,w=e.get("text")?(0,j.toDecode)(e.get("text")):"",E=this.getPreviewTextImageSrc(w,m,v,N,y,I,e),this.getPreviewTextBlobAndTextInfo(E,e),this.setState({isShowTextNotFit:!1})}var b=i.find(function(e){return e.id===g});b||(b=i.find(function(e){return e.id===D.DEFAULT_FONT_FAMILY_ID}),g=D.DEFAULT_FONT_FAMILY_ID,f=D.DEFAULT_FONT_WEIGHT_ID);var A=b.deprecated?n:i,C=A.map(function(e){return{disabled:e.deprecated,title:e.displayName,label:e.displayName,value:e.id,fontThumbnailUrl:(0,M.default)(W.GET_FONT_THUMBNAIL)({baseUrl:a,fontName:e.name})}}),x=b.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{disabled:b.deprecated,title:t,label:t,value:e.id}});this.setState({avaiableFontList:i,fontName:g,fontWeight:f,timer:null,lastRequestTime:null,inputSize:m,previewTextImageSrc:E,fontSize:m,fontColor:v,align:y,verticalAlign:I,inputText:w,fontOptionList:C,fontWeightOptionList:x})}},{key:"onFontNameChange",value:function(e){var t=(this.props.fontList,this.state.avaiableFontList),n=t.find(function(t){return t.id===e.value}),a=n.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{title:t,label:t,value:e.id}});this.setState({fontName:e.value,fontWeight:n.font[0].id,fontWeightOptionList:a})}},{key:"onFontWeightChange",value:function(e){this.setState({fontWeight:e.value})}},{key:"onSliderChange",value:function(e){this.setState({fontSize:e,inputSize:e})}},{key:"onSizeInputChange",value:function(e){var t=e.target.value;this.setState({inputSize:t})}},{key:"onSizeInputBlur",value:function(e){var t=+e.target.value,n=t;t>Z?n=Z:t<H&&(n=H),this.setState({inputSize:n,fontSize:n})}},{key:"onFontColorChange",value:function(e){this.setState({fontColor:e.hex})}},{key:"onTextAreaChange",value:function(e){var t=this,n=/[^\u000d\u000a\u0020-\u007e]*/g,a=e.target.value,o=a.replace(n,""),r=this.props.hideTipInterval,i=this.state,s=i.hideTipTimer,u=i.lastAppearIllegalCharTime;if(/^\s*$/.test(a))return void this.setState({inputText:a});if(o!==a){if(!u||Date.now()-u<r){window.clearTimeout(s);var l=window.setTimeout(function(){t.setState({isShowIllegalCharTip:!1})},r);this.setState({hideTipTimer:l})}else this.setState({lastAppearIllegalCharTime:Date.now()});this.setState({isShowIllegalCharTip:!0})}else this.setState({isShowIllegalCharTip:!1});this.setState({inputText:o})}},{key:"getFontObj",value:function(e){var t=this.props.fontList,n=null;return t.forEach(function(t){t.font.forEach(function(t){t.id===e&&(n=t)})}),n}},{key:"onSubmit",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,a=e.fontColor,o=e.align,r=e.verticalAlign,i=e.inputText,s=this.props,u=s.updateElement,l=s.closeTextEditModal,d=s.element,c=this.getFontObj(t),p=i||"";u({fontSize:(0,B.getPxByPt)(n),fontColor:a,text:(0,j.toEncode)(p),id:d.get("id"),textAlign:o,textVAlign:r,fontWeight:c.weight,fontFamily:(0,j.toEncode)(c.fontFace)}),this.setState({inputText:""}),l()}},{key:"getPreviewTextImageSrc",value:function(e,t,n,a,o,r,i){var s=this.props,u=s.baseUrl,l=s.ratio,d=e||"";if(d){var c=(i.get("computed"),(0,B.getPxByPt)(t));return(0,M.default)(W.TEXT_SRC)({text:(0,j.toEncode)(d),fontSize:c,fontColor:(0,Y.hexString2Number)(n),fontFamily:(0,j.toEncode)(a),width:i.get("width"),height:i.get("height"),originalWidth:i.get("width"),originalHeight:i.get("height"),originalFontSize:c,baseUrl:u,textAlign:o,verticalTextAlign:r,ratio:l})}return""}},{key:"updatePreviewTextSrc",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,a=e.fontColor,o=e.align,r=e.verticalAlign,i=e.inputText;if(!i)return void this.setState({previewTextImageSrc:null});var s=this.getFontObj(t);this.setState({previewTextImageSrc:this.getPreviewTextImageSrc(i,n,a,s.fontFace,o,r,this.props.element)})}},{key:"getPreviewTextBlobAndTextInfo",value:function(e,t){var n=this;if(!e)return void this.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1});var a=t.get("width"),o=t.get("height");(0,F.default)(e,a,o).then(function(e){var t=e.isShowTextNotFit,a=e.blobUrl;n.setState({previewTextImageBlobSrc:a,isShowTextNotFit:t})}).catch(function(e){n.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1})})}},{key:"delayUpdatePreviewTextSrc",value:function(){var e=this.props.requestInterval,t=this.state,n=t.lastRequestTime,a=t.timer;if(!n||Date.now()-n<e){window.clearTimeout(a);var o=window.setTimeout(this.updatePreviewTextSrc,e);this.setState({timer:o})}else this.setState({lastRequestTime:Date.now()})}},{key:"onAlignChange",value:function(e){this.setState({align:e})}},{key:"onVerticalAlignChange",value:function(e){this.setState({verticalAlign:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fontOptionList,a=t.fontWeightOptionList,o=t.alignOptionList,r=t.verticalAlignOptionList,i=t.fontName,s=t.fontWeight,u=t.fontSize,l=t.fontColor,d=t.inputSize,c=t.inputText,p=t.align,g=t.verticalAlign,f=t.previewTextImageBlobSrc,h=t.isShowIllegalCharTip,m=t.isShowTextNotFit,M="#ffffff";l&&"#ffffff"===l.toLowerCase()&&(M="#7B7B7B");var v=this.props,I=v.isShown,T=v.closeTextEditModal,w=I;return y.default.createElement(S.default,{className:"text-edit-modal",onClosed:T,opened:I},y.default.createElement("h2",{className:"modal-title"},"Edit Text"),y.default.createElement("div",{className:"modal-content"},y.default.createElement("div",{className:"option-container"},y.default.createElement("div",{className:"option-item"},y.default.createElement("div",{className:"select-container font-name"},I?y.default.createElement(x.default,{className:"font",options:n,searchable:!1,onChanged:this.onFontNameChange,value:i,optionComponent:k.default}):null),y.default.createElement("div",{className:"select-container font-weight"},y.default.createElement(x.default,{className:"font-weight",options:a,searchable:!1,onChanged:this.onFontWeightChange,value:s}))),y.default.createElement("div",{className:"divider"}),y.default.createElement("div",{className:"option-item"},y.default.createElement("div",{className:"size-container"},y.default.createElement("input",{type:"number",className:"size-input",value:d,min:H,max:Z,onChange:this.onSizeInputChange,onBlur:this.onSizeInputBlur}),y.default.createElement("div",{className:"slider-container"},y.default.createElement(L.default,{value:u,min:H,max:Z,step:1,handleSliderChange:this.onSliderChange,vertical:!0})))),y.default.createElement(O.default,{needResetColor:w,initHexString:l,onColorChange:this.onFontColorChange}),y.default.createElement("div",{className:"divider"}),y.default.createElement("div",{className:"align-container"},y.default.createElement("div",{className:"horizonal-group"},o.map(function(t,n){var a="align-"+t.value,o=(0,E.default)("icon",a,{selected:t.value===p});return y.default.createElement("button",{key:n,type:"button",className:o,title:t.title,onClick:e.onAlignChange.bind(e,t.value)})})),y.default.createElement("div",{className:"divider"}),y.default.createElement("div",{className:"vertical-group"},r.map(function(t,n){var a="align-"+t.value,o=(0,E.default)("icon",a,{selected:t.value===g});return y.default.createElement("button",{key:n,type:"button",className:o,title:t.title,onClick:e.onVerticalAlignChange.bind(e,t.value)})})))),y.default.createElement("div",{className:"text-box"},y.default.createElement("textarea",{className:"text-box",placeholder:"Type here...",onInput:this.onTextAreaChange,value:c,ref:"inputText"}),y.default.createElement("p",{className:"illegal-char-tip"},m?y.default.createElement("span",null,"Text does not fit"):null,h?y.default.createElement("span",null,"Invalid characters removed"):null)),y.default.createElement("p",{className:"button-container"},y.default.createElement(A.default,{onClicked:this.onSubmit,disabled:!1},"Done")),y.default.createElement(U.default,{imageSrc:f,backgroundColor:M})))}}]),t}(v.Component);X.propTypes={baseUrl:v.PropTypes.string.isRequired,fontList:v.PropTypes.array.isRequired,isShown:v.PropTypes.bool.isRequired,closeTextEditModal:v.PropTypes.func.isRequired,updateElement:v.PropTypes.func.isRequired,element:v.PropTypes.instanceOf(T.default.Map),currentPage:v.PropTypes.instanceOf(T.default.Map),ratio:v.PropTypes.number.isRequired,requestInterval:v.PropTypes.number,hideTipInterval:v.PropTypes.number},X.defaultProps={requestInterval:1e3,hideTipInterval:2e3},t.default=X},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(12),h=a(f),m=n(3),M=a(m),v=n(2),y=a(v),I=n(13),T=a(I),w=n(83),E=a(w);n(258);var D=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.data.element,a=e.data.element;return!y.default.is(n,a)}},{key:"onLoad",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,a=t.element,o=a.getIn(["computed","imgUrl"]),r=a.get("computed"),i=Boolean(a.get("text")),s={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},u={className:(0,T.default)("text-element-thumbnail",{"has-text":i,selected:a.get("isSelected")}),style:{zIndex:a.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+a.get("rot")+"deg)"},handlerStyle:s,handlerData:a,element:a},l={};return i&&(l=(0,h.default)({},s)),M.default.createElement(E.default,{data:u,actions:n},M.default.createElement("div",{className:"img-border",style:l}),i?M.default.createElement("img",{className:"text-img",alt:"",src:o,onLoad:this.onLoad}):null)}}]),t}(m.Component);D.propTypes={actions:m.PropTypes.shape({}),data:m.PropTypes.shape({element:m.PropTypes.instanceOf(y.default.Map).isRequired}).isRequired},t.default=D},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m),v=n(104),y=a(v);n(259);var I=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n.state={isLoaded:!0},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.imageSrc,n=e.imageSrc;t!==n&&(this.setState({isLoaded:!1}),n||this.setState({imgWidth:0,imgHeight:0}))}},{key:"onLoad",value:function(e){this.setState({imgWidth:e.target.naturalWidth,imgHeight:e.target.naturalHeight,isLoaded:!0})}},{key:"renderPreviewBox",value:function(){var e=this.props,t=e.imageSrc,n=e.backgroundColor,a={lines:13,length:20,width:10,radius:30,scale:.12,corners:1,color:"#7b7b7b",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,top:"50%",left:"-36%",shadow:!1,hwaccel:!1,position:"absolute"},o=this.state,r=(o.previewImgPosition,o.isLoaded),i={backgroundColor:n},s=[];return t?(r||s.push(h.default.createElement("div",{className:"load-container",key:"0"},h.default.createElement("div",{className:"load-mask"}),h.default.createElement("div",{className:"load-content"},h.default.createElement(y.default,{loaded:r,options:a}),"Loading"))),s.push(h.default.createElement("img",{key:"1",src:t,alt:"",className:"preview-img",style:i,draggable:"false",onLoad:this.onLoad}))):s.push(h.default.createElement("div",{className:"no-preview",key:"2"},"No Preview available")),s}},{key:"render",value:function(){var e=this,t=this.state,n=t.imgWidth,a=t.imgHeight,o=this.props,r=o.maxImgContainerWidth,i=o.maxImgContainerHeight,s=o.initImgContainerWidth,u=o.initImgContainerHeight,l=(o.backgroundColor,(0,M.default)("img-container")),d=a||u;d%2>0&&d++;var c={width:n||s,height:d,maxHeight:i,maxWidth:r,border:n&&a?"1px dashed #7b7b7b":"none",overflow:"hidden"};return h.default.createElement("div",{className:"text-preview-box"},h.default.createElement("div",{className:l,style:c,ref:function(t){e.imgContainer=t}},this.renderPreviewBox()))}}]),t}(f.Component);I.propTypes={imageSrc:f.PropTypes.string,maxImgContainerWidth:f.PropTypes.number,maxImgContainerHeight:f.PropTypes.number,initImgContainerWidth:f.PropTypes.number,initImgContainerHeight:f.PropTypes.number},I.defaultProps={maxImgContainerWidth:720,maxImgContainerHeight:262,initImgContainerHeight:100,initImgContainerWidth:720},t.default=I},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(13),M=a(m),v=n(15),y=n(3),I=a(y);n(260);var T=n(562),w=a(T),E=n(561),D=a(E),N=n(560),S=a(N),b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={title:n.props.data.title||"",isEditIconShow:!1,isInEdit:!1,isInvalid:!1,invalidText:"It is invalid",disable:n.props.data.disable},n.toggleEditIcon=n.toggleEditIcon.bind(n),n.toggleEditModel=n.toggleEditModel.bind(n),n.editDone=n.editDone.bind(n),n.cancelEdit=n.cancelEdit.bind(n),n.editTitle=n.editTitle.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.title,n=e.data.title;t!==n&&this.setState({title:n,disable:e.data.disable})}},{key:"toggleEditIcon",value:function(e){this.props.data.disable||this.setState({isEditIconShow:e})}},{key:"toggleEditModel",value:function(e){if(!this.props.data.disable){if(e){var t=this.props.actions,n=t.boundTrackerActions;n.addTracker("ClickChangeTitle")}this.setState({isInEdit:e,isInvalid:!1,invalidText:""});var a=this.refs.titleInput;a.setSelectionRange&&a.setSelectionRange(a.value.length,a.value.length)}}},{key:"editDone",value:function(){var e=this;if(this.state.title)if(/^[a-zA-Z 0-9\d_\s\-]+$/.test(this.state.title))if(this.state.title!==this.props.data.title){var t=this.props,n=t.actions,a=t.data,o=n.boundProjectActions,r=n.boundTrackerActions,i=a.projectId,s=this.state.title;o.saveProjectTitle(i,s).then(function(t){"200"===(0,h.default)(t,"respCode")?(e.setState({isInvalid:!1,invalidText:"",isInEdit:!1}),r.addTracker("ClickChangeTitleAndDone"),o.changeProjectTitle(s)):e.setState({isInvalid:!0,invalidText:"Please use a name you haven't used before."})})}else this.state.title===this.props.data.title&&this.setState({isInEdit:!1});else this.setState({isInvalid:!0,invalidText:"Only letters, numbers, blank space, - (hyphen) and _ (underscore) are allowed in the title"});else this.setState({isInvalid:!0,invalidText:"Title is required"})}},{key:"cancelEdit",value:function(){var e=this.props.actions,t=e.boundTrackerActions;t.addTracker("CancelChangeTitle"),this.setState({title:this.props.data.title,isInEdit:!1})}},{key:"editTitle",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this.props.data,t=e.title,n=e.orderInfo,a=(e.capability,n&&n.get("isOrdered")&&!n.get("isCheckFailed")),o=(0,M.default)("title-edit-icon",{hide:!this.state.isEditIconShow}),r=(0,M.default)("title-warn",{show:this.state.isInvalid});return I.default.createElement("div",{className:"bed-title"},I.default.createElement("div",{onMouseOver:this.toggleEditIcon.bind(this,!0),onMouseOut:this.toggleEditIcon.bind(this,!1),className:this.state.isInEdit?"hide":""},I.default.createElement("p",{className:"box-title"},t),a?null:I.default.createElement("label",{htmlFor:"titleInputer"},I.default.createElement("img",{className:o,title:"Click to edit title",alt:"edit title",src:w.default,onClick:this.toggleEditModel.bind(this,!0)}))),a?null:I.default.createElement("div",{className:this.state.isInEdit?"":"hide"},I.default.createElement("div",{className:"box-title-edit"},I.default.createElement("input",{className:"title-edit",type:"text",maxLength:"50",value:this.state.title,onChange:this.editTitle,id:"titleInputer",ref:"titleInput"}),I.default.createElement("img",{className:"icon-done",src:D.default,alt:"Done",onClick:this.editDone}),I.default.createElement("img",{className:"icon-delete",src:S.default,alt:"Cancel",onClick:this.cancelEdit})),I.default.createElement("span",{className:r},this.state.invalidText)))}}]),t}(y.Component);b.propTypes={},t.default=(0,v.translate)("TitleEditor")(b)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=a(o),i=n(59),s=a(i),u=n(58),l=a(u),d=n(6),c=a(d),p=n(4),g=a(p),f=n(5),h=a(f),m=n(8),M=a(m),v=n(7),y=a(v),I=n(13),T=a(I),w=n(3),E=a(w),D=(n(2),n(15)),N=n(147),S=n(145),b=n(276),A=a(b),C=n(29),x=a(C),P=n(28),L=a(P),_=n(81),O=a(_),j=n(421),z=a(j),k=n(563),R=a(k);n(261);var U=function(e){function t(e){(0,g.default)(this,t);var n=(0,M.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return n.state={isChecked:!0},n.isClickedCheckout=!1,n.handleConfirm=n.handleConfirm.bind(n),n.onClickCheckedItem=n.onClickCheckedItem.bind(n),n}return(0,y.default)(t,e),(0,h.default)(t,[{key:"handleConfirm",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(s.default.mark(function e(){var t,n,a,o,r,i,u,l,d,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.boundProjectActions,a=t.oldSaveProject,o=t.saveProjectWithOutScreenShot,r=t.close,i=t.addTracker,u=this.props.data.project,l=u.property.get("projectId"),d=this.state.isChecked,!d){e.next=18;break}return e.next=7,(0,N.getScreenShot)(".isForUpgradeScreenshot canvas",!1);case 7:return c=e.sent,r(),i("UpgradeOption,1"),e.next=12,n.changeProjectSetting({size:"8X6"});case 12:return e.next=14,n.uploadCoverImage(c);case 14:return e.next=16,o(function(){(0,S.redirectToOrder)(l)},function(){});case 16:e.next=21;break;case 18:r(),i("UpgradeOption,0"),a();case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"onClickCheckedItem",value:function(){var e=this.state.isChecked;this.setState({isChecked:!e})}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.close,a=(e.boundProjectActions,e.data),o=a.urls,i=a.size,s=a.ratios,u=a.variables,l=a.template,d=a.pagination,c=a.paginationSpread,p=a.settings,g=a.parameters,f=a.isPreview,h=a.specData,m=a.project,M=a.allImages,v=a.userId,y=a.capability,I=a.allSheets,w=(a.price,{}),D=this.state.isChecked,N=((0,T.default)("height-30"),{urls:o,size:i,ratios:s,variables:u,template:l,pagination:d,paginationSpread:c,settings:p,parameters:g,isPreview:f,specData:h,project:m,allImages:M,userId:v,capability:y,allSheets:I,useInUpgrade:!0,isUpgradeTo8X6:D}),S=D?{marginTop:"10px"}:{marginTop:"34px"};return E.default.createElement(x.default,{className:"upgrade-wrap",onClosed:n,opened:t},E.default.createElement("div",{className:"upgrade-title"},"Would you like to upgrade your Little Prints Stand?"),E.default.createElement("div",{className:"upgrade-content"},E.default.createElement("div",{className:"upgrade-bottom-position"},E.default.createElement("div",{className:"upgrade-container upgrade-left"},E.default.createElement("div",{className:"upgrade-item-fit"},E.default.createElement(O.default,{actions:w,data:N}),E.default.createElement("span",null,"7X5"))),E.default.createElement("img",{className:"arrow-icon",src:R.default}),E.default.createElement("div",{className:"upgrade-container upgrade-right",style:S},E.default.createElement("div",{className:"upgrade-item-fit"},D?E.default.createElement(z.default,{data:N}):E.default.createElement("div",{className:"upgrade-container>"},E.default.createElement(O.default,{actions:w,data:N}),E.default.createElement("span",null,"7X5")),E.default.createElement(z.default,{
data:(0,r.default)({},N,{isForUpgradeScreenshot:!0})}))))),E.default.createElement("div",{className:"upgrade-checked-items"},E.default.createElement(A.default,{value:!0,checked:D,text:"Upgrade to 8X6",subText:"Additional $5.00",contents:"8x6 is significantly bigger and looks more impressive",isShowChecked:!0,onClicked:this.onClickCheckedItem})),E.default.createElement("div",{className:"button-wrap"},E.default.createElement(L.default,{onClicked:this.handleConfirm},"Add to Cart")))}}]),t}(w.Component);U.propTypes={isShown:w.PropTypes.bool.isRequired},U.defaultProps={},t.default=(0,D.translate)("UpgradeModal")(U)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNewState=void 0;var o=n(12),r=a(o),i=n(11),s=a(i),u=n(2),l=a(u),d=n(62),c=n(79),p=(a(c),n(54));t.getNewState=function(e){var t=e.data,n=t.settings,a=t.specData,o=t.project,i=t.allImages,u=t.pagination,c=(t.size,t.ratios),g=a.configurableOptionArray,f=a.parameterArray,h=a.variableArray,m=a.allOptionMap,M=(0,s.default)(o,"cover"),v=(0,s.default)(o,"pageArray"),y=(0,s.default)(o,"imageArray");if(!v.size)return null;var I=l.default.fromJS((0,s.default)(n,"spec")),T=l.default.fromJS((0,s.default)(n,"calendarSetting")),w={configurableOptionArray:g,parameterArray:f,variableArray:h,allOptionMap:m,setting:I,calendarSetting:T},E=l.default.fromJS((0,d.computeNewData)(w,{size:"8X6"},!0)),D=(0,d.transformPageArray)(v,E.get("pageArray"),E.get("parameterMap"),y),N=(0,d.transformCover)(E.get("cover"),E.get("parameterMap"),M,y),S=(0,p.getRenderPaginationSpread)(D,N,i,{spec:E.get("setting").toJS(),calendarSetting:T},u),b=(0,p.getRenderAllSpreads)(D,N,i,{spec:E.get("setting").toJS(),calendarSetting:T}),A=(0,r.default)({},o,{pageArray:D,cover:N,setting:E.get("setting"),parameterMap:E.get("parameterMap"),variableMap:E.get("variableMap"),availableOptionMap:E.get("availableOptionMap")}),C=(0,p.computedSizeForUpgrade)(A,null,c,E.get("parameterMap"),E.get("variableMap")),x={project:A,settings:{spec:E.get("setting").toJS(),calendarSetting:T},paginationSpread:S,parameters:E.get("parameterMap"),allSheets:b,size:C};return x}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(13),h=a(f),m=n(2),M=(a(m),n(3)),v=a(M),y=n(15),I=n(81),T=a(I),w=n(420);n(262);var E=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=(0,w.getNewState)(e);return a?n.state=a:n.state={project:null,settings:null,paginationSpread:null,parameters:null,allSheets:null,size:null},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=(0,w.getNewState)(e);t&&this.setState(t)}},{key:"render",value:function(){var e=this.props.data,t=(e.isShown,e.urls),n=e.ratios,a=e.variables,o=e.template,r=e.pagination,i=e.specData,s=e.allImages,u=e.userId,l=e.capability,d=e.isForUpgradeScreenshot,c=this.state,p=c.project,g=c.settings,f=c.paginationSpread,m=c.parameters,M=c.allSheets,y=c.size,I={},w={urls:t,size:y,ratios:n,variables:a,template:o,pagination:r,paginationSpread:f,settings:g,parameters:m,isPreview:!0,specData:i,project:p,allImages:s,userId:u,capability:l,allSheets:M,useInUpgrade:!0,isUpgradeTo8X6:!0,isForUpgradeScreenshot:d},E=(0,h.default)("upgrader-target-container",{isForUpgradeScreenshot:d}),D=d?{display:"none"}:{};return v.default.createElement("div",{className:E,style:D},f&&f.get?v.default.createElement(T.default,{actions:I,data:w}):null,v.default.createElement("span",null,"8X6"))}}]),t}(M.Component);E.propTypes={},E.defaultProps={},t.default=(0,y.translate)("UpgraderTarget")(E)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(15),M=n(423),v=a(M);n(263);var y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.uploadList,n=e.t,a=e.boundUploadedImagesActions,o=e.boundContactUsActions,r=(e.handleRetry,e.handleDelete),i=e.retryImage,s=e.instance;return h.default.createElement("div",null,h.default.createElement("ul",{className:"upload-title"},h.default.createElement("li",{className:"upload-title"},h.default.createElement("div",{className:"file-name"},n("FILE")),h.default.createElement("div",{className:"file-progress"},n("FILE_PROGRESS")))),h.default.createElement("div",{className:"box-list"},h.default.createElement("ul",{className:"upload-list"},t&&t.map(function(e,t){return h.default.createElement(v.default,{key:t,uploadItem:e,handleDelete:r,instance:s,retryImage:i,boundContactUsActions:o,boundUploadedImagesActions:a})}))))}}]),t}(f.Component);y.propTypes={uploadList:f.PropTypes.array.isRequired},t.default=(0,m.translate)("ItemList")(y)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(3),M=a(m),v=n(287),y=a(v),I=n(141),T=n(15),w=n(13),E=a(w),D=n(564),N=a(D),S=n(565),b=a(S);n(264);var A=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"onDelete",value:function(){var e=this.props,t=e.uploadItem,n=e.handleDelete;n&&n(t.guid)}},{key:"onRetry",value:function(){var e=this.props,t=e.uploadItem,n=e.retryImage;n&&n(t.guid)}},{key:"render",value:function(){var e=this.props,t=e.uploadItem,n=e.boundContactUsActions,a=e.t,o=e.instance,r=t.name,i=t.info,s=t.percent,u=t.reducer,l=void 0===u?{}:u,d=o.find(l.id)||l,c=(0,h.default)(d,"status"),p=(0,h.default)(d,"errorText"),g=(0,h.default)(d,"retryCount"),f=(0,h.default)(d,"isAccept"),m=f,v="";switch(c){case I.PROGRESS:v="progress";break;case I.DONE:v="done";break;case I.FAIL:v="fail",m&&(v+=" retry");break;default:v=""}var T=(0,E.default)("upload-item",v);return M.default.createElement("li",{className:T},M.default.createElement("div",{className:"file-name"},r?r.length<10?r:r.substr(0,5)+"..."+r.substr(r.length-3):""),M.default.createElement("div",{className:"file-progress"},M.default.createElement(y.default,{percent:s}),M.default.createElement("span",{className:"status",title:i},c===I.DONE?""+s:c===I.FAIL?""+p:s+"%"),M.default.createElement("a",{href:"javascript:void(0);",className:"delete"},M.default.createElement("img",{width:"10px",height:"10px",src:N.default,onClick:this.onDelete.bind(this),alt:"Delete"})),m?null:M.default.createElement("span",{className:"failed"},a("FAILED")),g<2&&m?M.default.createElement("a",{href:"javascript:void(0);",className:"retry",onClick:this.onRetry.bind(this)},M.default.createElement("img",{src:b.default,width:"14px",height:"14px"})):null,g>=2?M.default.createElement("a",{href:"javascript:void(0);",className:"help",onClick:n.showContactUsModal},a("HELP")):null))}}]),t}(m.Component);A.propTypes={uploadItem:m.PropTypes.object.isRequired},t.default=(0,T.translate)("UploadItem")(A)},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(3),m=o(h),M=n(15),v=n(29),y=o(v),I=n(28),T=o(I),w=n(47),E=o(w),D=n(422),N=o(D),S=n(9),b=n(425),A=a(b);n(265);var C=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={allImages:[],addMore:!1,showAttention:!0,total:0,isShowOverImageAttention:!1,instance:initUploadPool(4)},n.receiveProps=function(e){return A.receiveProps(n,e)},n.handleUploadModalClosed=function(e){return A.handleUploadModalClosed(n,e)},n.handleUploadModalMinimized=function(){return A.handleUploadModalMinimized(n)},n.onUploadMoreClick=function(){return A.onUploadMoreClick(n)},n.retryImage=function(e){return A.retryImage(n,e)},n.handleDelete=function(e){return A.handleDelete(n,e)},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.receiveProps(e)}},{key:"render",value:function(){var e=this.props,t=e.opened,n=e.t,a=e.project,o=(e.uploadingImages,e.boundUploadedImagesActions),r=e.toggleModal,i=e.boundContactUsActions,s=(e.addStatusCount,e.useNewUpload),u=void 0!==s&&s,l=this.state,d=l.allImages,c=l.uploadedImagesCounts,p=l.instance,g=l.showAttention,f=l.isShowOverImageAttention,h=l.total,M=p.countOfCompleted,v=p.countOfFailed,I=c||a.imageArray.count(),w=S.limitedPageNum-I;return m.default.createElement(y.default,{className:"upload-modal",onClosed:this.handleUploadModalClosed.bind(this,!0),onMinimized:this.handleUploadModalMinimized,isHideMinimize:!u,opened:t},m.default.createElement("div",{className:"box-image-upload"},m.default.createElement("h3",{className:"title"},n("UPLOAD_IMAGES")),f?m.default.createElement("div",{className:"over-image-attention"},n("OVER_IMAGES_ATTENTION",{total:h,count:S.limitedPageNum})):null,m.default.createElement(N.default,{uploadList:d,boundContactUsActions:i,retryImage:this.retryImage,instance:p,handleDelete:this.handleDelete,boundUploadedImagesActions:o}),m.default.createElement("div",{className:"upload-meta"},m.default.createElement("div",{className:"upload-info"},m.default.createElement("span",{className:"compelete"},n("COMPLETE_COUNT",{n:M})),m.default.createElement("span",{className:"failed"},v?n("FILED_COUNT",{n:v}):"")),I<S.limitedPageNum&&g?m.default.createElement("div",{className:"attention"},n("ATTENTION",{count:w})):null,m.default.createElement("div",{className:"upload-buttons"},m.default.createElement(E.default,{className:"white",boundUploadedImagesActions:o,toggleModal:r,uploadFileClicked:this.onUploadMoreClick,multiple:"multiple"},n("ADD_MORE_PHOTOS")),m.default.createElement(T.default,{onClicked:this.handleUploadModalClosed.bind(this,!0),className:"cancel-all"},this.state.completeButton)))))}}]),t}(h.Component);C.propTypes={className:h.PropTypes.string,width:h.PropTypes.number,height:h.PropTypes.number,uploadList:h.PropTypes.array},t.default=(0,M.translate)("UploadModal")(C)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onUploadMoreClick=t.handleDelete=t.retryImage=t.receiveProps=t.handleUploadModalClosed=void 0;var o=n(12),r=a(o),i=n(158),s=a(i),u=n(11),l=a(u),d=n(23),c=a(d),p=n(16),g=n(295),f=n(9),h=n(321),m=a(h),M=n(141),v=n(56),y=null,I=function(e,t,n){y&&clearTimeout(y),y=setTimeout(function(){var a=e.props,o=a.addTracker,r=a.project,i=r.imageArray.count(),s=i>=f.limitedPageNum;o("PhotosUploadComplete,"+t+","+n+","+String(s))},100)},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.percent,a=void 0===n?0:n,o=t.status,r=void 0===o?M.PENDING:o,i=t.retryCount,s=void 0===i?0:i;return e&&e.length?e.map(function(e){return e.percent=a,e.status=r,e.retryCount=s,e}):[]},w=function(e,t,n){var a=e.state.allImages.findIndex(function(e){return e.guid===t.guid}),o=(0,l.default)(e.state.allImages,a);if(o){for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r]);var i=(0,s.default)(e.state.allImages,a,o);e.setState({allImages:i})}},E=function(e,t){var n=e.props.boundUploadedImagesActions,a=e.state.allImages,o=a.findIndex(function(e){return e.guid===t.guid});o!==-1&&(a.splice(o,1),e.setState({allImages:a}),n.deleteImage(t.guid))},D=function(e,t,n){var a=e.props,o=a.boundUploadedImagesActions,r=a.env,i=e.state.instance,s=i.checkIsAllCompleted,u=i.countOfFailed,d=i.countOfCompleted,c={name:t.name.replace(/[\&\/\_]+/g,""),guid:t.guid,createTime:t.lastModified,url:(0,v.combine)((0,l.default)(r,"urls.uploadBaseUrl"),p.IMAGE_SRC,{qaulityLevel:0,puid:(0,l.default)(n,"resultData.img.encImgId")}),usedCount:0,imageId:(0,l.default)(n,"resultData.img.id"),totalSize:(0,l.default)(n,"resultData.img.size"),uploadTime:(new Date).getTime(),shotTime:(0,l.default)(n,"resultData.img.shotTime"),encImgId:(0,l.default)(n,"resultData.img.encImgId"),width:(0,l.default)(n,"resultData.img.width"),height:(0,l.default)(n,"resultData.img.height"),orientation:(0,g.getDegree)((0,l.default)(n,"resultData.img.exifOrientation")),thirdpartyImageId:(0,l.default)(n,"resultData.img.thirdpartyImageId")},f=(0,l.default)(n,"resultData.img.failType");f||o.uploadComplete(c).then(function(){s()&&!u&&(I(e,d,u),A(e),e.setState({allImages:[]}))})},N=function(e,t){var n=e.props,a=n.env,o=n.project,i=(n.boundUploadedImagesActions,n.boundProjectActions,n.autoAddPhotoToCanvas,n.addTracker),s=(n.t,e.state.instance),u=s.checkIsAllCompleted,d=a.userInfo,g=d.get("id"),f=d.get("timestamp"),h=d.get("authToken"),M=a.albumId,v=o.setting.get("title");t&&(i("StartUploadPhotos,"+t.length),t.forEach(function(t,n){var o=t.isFromAuth,d=t.name,y=o?null:Math.round(t.size/1024)+"kb",T=o?t.name.replace(/[\&\/\_]+/g,""):"local",N=Date.now();i(o?"StartUploadEachPhoto,"+N+","+T:"StartUploadEachPhoto,"+N+","+d+","+y+","+T);var S={uid:g,timestamp:f,token:h,albumId:M,albumName:v};S=o?(0,m.default)((0,r.default)({},S,{thirdpartyImageId:t.id,imageUrl:t.originalImageUrl,platform:t.platform,clientSource:"PC"})):(0,r.default)({},S,{Filename:t.name.replace(/[\&\/\_]+/g,""),filename:t});var b=s.push({url:(0,c.default)(p.UPLOAD_IMAGES)({uploadBaseUrl:(0,l.default)(a,"urls").get("uploadBaseUrl")}),data:S,authData:o?t:null,isFormData:!o,success:function(n){w(e,t,{status:n.status,percent:n.percent});var a=Date.now();i(o?"CompleteUploadEachPhoto,"+a+","+n.cost:"CompleteUploadEachPhoto,"+a+","+d+","+y+","+n.cost),E(e,t),D(e,t,n)},progress:function(n){w(e,t,{status:n.status,percent:n.percent})},error:function(n){var a=e.state.instance,o=a.countOfFailed,r=a.countOfCompleted,s=Date.now();w(e,t,{status:n.status,percent:n.percent}),i("FaildedUploadEachPhoto,"+s+","+d+","+y+","+n.cost),u()&&I(e,r,o)}});w(e,t,{reducer:b}),b.isAccept||log("reducer",b)}))},S=function(e,t){var n=t.uploadingImages,a=e.state.allImages,o=n.filter(function(e){return!a.find(function(t){return t.guid===e.file.guid})});return o.map(function(e){return e.file})},b=function(e,t,n){var a=e.state.instance,o=a.countOfProgress,r=a.countOfPending,i=t.size+n.length+o+r,s=i>f.limitedPageNum,u=[];if(s){var l=i-f.limitedPageNum,d=n.splice(-l);u=n,d.forEach(function(t){e.props.boundUploadedImagesActions.deleteImage(t.guid)})}else u=n;return{isShowOverImageAttention:s,images:u,total:i}},A=t.handleUploadModalClosed=function(e,t){var n=e.props,a=n.toggleModal,o=n.t,r=(n.addTracker,n.autoFill),i=n.boundUploadedImagesActions,s=n.boundConfirmModalActions,u=e.state.instance,l=u.checkIsAllCompleted,d=u.completedFiles,c=d,p=e.props.project.imageArray,g=function(){u.reset(),i.clearAllImages(),e.setState({allImages:[]})},h=function(){if(p.count()>=f.limitedPageNum||t){a("upload",!1);var e=p.filter(function(e){return!!c.find(function(t){return t.guid===e.get("guid")})});r(e.toJS()),g()}};l()?h():s.showConfirm({activeButton:"cancel",confirmTitle:"",confirmMessage:o("CLOSE_PROMPT"),onOkClick:function(){h()},onCancelClick:function(){return!1},xCloseFun:function(){return!1},okButtonText:"Continue",cancelButtonText:"Cancel"})};t.receiveProps=function(e,t){var n=S(e,t);if(n&&n.length){var a=e.props.project.imageArray,o=b(e,a,n),r=o.isShowOverImageAttention,i=o.images,s=o.total;e.setState({total:s,isShowOverImageAttention:r,allImages:e.state.allImages.concat(T(i))},function(){N(e,i)})}},t.retryImage=function(e,t){var n=e.state.instance,a=n.failedPools,o=a.find(function(e){return e.file.guid===t});o&&n.retry(o)},t.handleDelete=function(e,t){var n=e.state.instance,a=n.pendingPools,o=n.failedPools,r=n.checkIsAllCompleted,i=a.concat(o).find(function(e){return e.file.guid===t});i&&(n.remove(i),E(e,i.file)),r()&&!n.countOfFailed&&A(e),e.setState({isShowOverImageAttention:!1})},t.onUploadMoreClick=function(e){e.setState({addMore:!0})}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(160),M=n(15),v=n(398),y=a(v),I=n(430),T=a(I),w=n(440),E=a(w);n(266);var D=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.trackSelectedTab=n.trackSelectedTab.bind(n),n.routes=h.default.createElement(m.Route,{path:"/",component:function(e){return h.default.createElement(y.default,{data:n.props.data},e.children)}},h.default.createElement(m.IndexRedirect,{to:"allpages"}),h.default.createElement(m.Route,{path:"allpages",component:T.default,onEnter:n.trackSelectedTab}),h.default.createElement(m.Route,{path:"onepage",component:E.default,onEnter:n.trackSelectedTab})),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"trackSelectedTab",value:function(e){var t=e.location,n=this.props,a=n.actions,o=n.data,r=o.projectId,i=a.boundTrackerActions;switch(t.pathname){case"/allpages":r!==-1&&i.addTracker("ClickAllPages");break;case"/onepage":r!==-1&&i.addTracker("ClickManagePhotos")}}},{key:"render",value:function(){return h.default.createElement(m.Router,{history:m.hashHistory,routes:this.routes})}}]),t}(f.Component);D.propTypes={actions:f.PropTypes.shape({boundTrackerActions:f.PropTypes.object.isRequired}).isRequired},t.default=(0,M.translate)("ViewTabs")(D)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(566),M=a(m),v=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"onMouseEnter",value:function(){var e=this.props.title;this.imageNode.getStage().content.title=e}},{key:"onMouseLeave",value:function(){this.imageNode.getStage().content.title=""}},{key:"render",value:function(){var e=this.props,t=e.parentWidth,n=e.parentHeight,a=e.title,o={position:"absolute",left:t?t-8-18+"px":"8px",top:t?"8px":n-8-18+"px",width:"18px",height:"18px"};return h.default.createElement("img",{src:M.default,title:a,style:o})}}]),t}(f.Component);v.propTypes={parentHeight:f.PropTypes.number,parentWidth:f.PropTypes.number,title:f.PropTypes.string.isRequired},t.default=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(3),h=a(f),m=n(13),M=a(m);n(267);var v=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,g.default)(t,e),(0,l.default)(t,[{key:"choseOption",value:function(e){var t=this.props,n=t.onChanged,a=t.hideOptions;n(e),a()}},{key:"render",value:function(){var e=this,t=this.props,n=t.optionValue,a=t.options;return h.default.createElement("div",{className:"sort-options"},a.map(function(t){var a=(0,M.default)("option-each",{active:t.label===n.label});return h.default.createElement("div",{onClick:function(){return e.choseOption(t)},className:a},t.label)}))}}]),t}(f.Component);t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SHOW_CLONE_MODAL:"ClickClone",SHOW_PREVIEW:"ClickPreview",SHOW_SHARE_PROJECT_MODAL:"ClickShare",SHOW_QUICK_START_MODAL:"ClickQuickStart",SHOW_HOW_THIS_WORKS_MODAL:"ClickHowThisWorks",SHOW_CONTACT_US_MODAL:"ClickContactUs"}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),r=a(o),i=n(4),s=a(i),u=n(5),l=a(u),d=n(8),c=a(d),p=n(7),g=a(p),f=n(11),h=a(f),m=n(12),M=a(m),v=n(72),y=n(15),I=n(3),T=a(I),w=n(34),E=a(w),D=n(94),N=a(D),S=n(85),b=n(84),A=n(47),C=a(A),x=n(42),P=a(x),L=n(134),_=a(L),O=n(136),j=a(O),z=n(366),k=a(z),R=n(9),U=n(431);n(268);var B=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),a=n.props.materials,o=a?a.getIn(["cover","img"]):null;return n.setMouseHoverDomNode=n.setMouseHoverDomNode.bind(n),n.toggleModal=function(e,t){return(0,U.toggleModal)(n,e,t)},n.onAddPhotos=function(){return(0,U.onAddPhotos)(n)},n.uploadFileClicked=function(){return(0,U.uploadFileClicked)(n)},n.state={hasCoverRender:!o},n}return(0,g.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.materials,n=t?t.getIn(["cover","img"]):null;this.setState({hasCoverRender:!n})}},{key:"setMouseHoverDomNode",value:function(e){e?N.default.show(E.default.findDOMNode(e)):N.default.hide()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.t,t.urls),a=(t.materials,t.variables),o=t.pagination,r=t.settings,i=t.parameters,s=t.ratios,u=t.arrangePagesSize,l=t.allSheets,d=t.spec,c=t.boundProjectActions,p=t.boundPaginationActions,g=t.boundImageEditModalActions,f=t.boundTextEditModalActions,m=t.boundTrackerActions,v=t.boundImagesActions,y=t.boundUploadImagesActions,I=d,w=[],E=0;if(l.size&&this.state.hasCoverRender&&(0,h.default)(u,"renderCoverSize")){var D={boundProjectActions:c,boundPaginationActions:p,setMouseHoverDomNode:this.setMouseHoverDomNode,boundImageEditModalActions:g,boundTextEditModalActions:f,boundTrackerActions:m,boundImagesActions:v,boundUploadImagesActions:y};l.forEach(function(e,t){var l=u,d=e.getIn(["pages","0"]);if(d){var c=d.get("width")>d.get("height");c&&(l=(0,M.default)({},u,{renderCoverSheetSize:(0,h.default)(u,"renderCoverSheetSize"),renderInnerSize:(0,h.default)(u,"renderInnerSizeLandscape"),renderInnerContainerSize:(0,h.default)(u,"renderInnerContainerSizeLandscape"),renderInnerSheetSize:(0,h.default)(u,"renderInnerSheetSizeLandscape"),renderInnerSheetSizeWithoutBleed:(0,h.default)(u,"renderInnerSheetSizeWithoutBleedLandscape")}));var p=l.renderCoverSize.width>l.renderInnerContainerSize.width?l.renderCoverSize.width:l.renderInnerContainerSize.width,g=l.renderCoverSize.height>l.renderInnerContainerSize.height?l.renderCoverSize.height:l.renderInnerContainerSize.height,f=Math.max(p,g),m={width:f+"px",height:f+"px"},v=(0,h.default)(r,"spec.product"),y=e.getIn(["summary","isCover"]),N=(0,M.default)({},{width:y?l.renderCoverSize.width+"px":l.renderInnerSize.width+"px",display:p?"block":"none"}),S=e.getIn(["pages","0","elements","0","encImgId"]);if(S)if(E+=1,y){if(v!==R.productTypes.LC){var b={styles:m,specData:I,pageNumberStyle:N,allPageSheetIndex:t,thumbnail:!0,urls:n,size:l,ratios:s,variables:a,pagination:o,paginationSpread:e,settings:r,parameters:i};w.push(T.default.createElement(_.default,{key:e.get("id"),actions:D,data:b}))}}else{var A={styles:m,pageNumberStyle:N,allPageSheetIndex:t,thumbnail:!0,urls:n,size:l,ratios:s,variables:a,pagination:o,paginationSpread:e,settings:r,parameters:i,isLandscapeShape:c};w.push(T.default.createElement(j.default,{key:e.get("id"),actions:D,data:A}))}}})}return T.default.createElement("div",{className:"all-pages"},T.default.createElement("div",{className:"wrap clearfix"},w,T.default.createElement(C.default,{className:"hide",multiple:"multiple",boundUploadedImagesActions:v,toggleModal:this.toggleModal,ref:function(t){return e.fileUpload=t}}),l.size&&R.limitedPageNum>E?T.default.createElement(k.default,{onAddPhotos:this.onAddPhotos,usefullPageNum:E,size:u}):null),T.default.createElement("div",{className:"target-name"}),T.default.createElement(P.default,{isShown:!this.state.hasCoverRender,loadingText:"Loading..."}))}}]),t}(I.Component);B.propTypes={},t.default=(0,v.connect)(S.mapStateToProps,b.mapAppDispatchToProps)((0,y.translate)("ArrangePages")(B))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toggleModal=function(e,t,n){var a=e.props.boundUploadImagesActions;a.toggleUpload(n)},t.uploadFileClicked=function(e){var t=e.props,n=t.boundImagesActions,a=t.boundTrackerActions,o=function(){a.addTracker("ClickCloudUploadImage"),n.autoAddPhotoToCanvas({status:!1,elementId:"",elementWidth:0,elementHeight:0})};e.timer&&clearTimeout(e.timer);var r=setTimeout(o,30);e.timer=r},t.onAddPhotos=function(e){e.fileUpload.onClickInput(),e.uploadFileClicked()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resizingHandler=t.getSpreadSize=t.recomputedRenderRatios=t.recomputedPreviewRatios=t.recomputedWorkspaceRatio=void 0;var o=n(11),r=a(o),i=n(9),s=n(146),u=n(496),l=null,d=t.recomputedWorkspaceRatio=function(e){var t=e.boundRatioActions,n=e.size,a=e.settings,o=(e.togglePanel,e.pagination,(0,r.default)(a,"spec.product")),i=((0,r.default)(a,"spec.size"),!0),s=(0,u.computedWorkSpaceOffset)(o,i);(0,u.updateWorkspaceRatio)(t,n,s,o)},c=t.recomputedPreviewRatios=function(e){var t=e.boundRatioActions,n=e.size,a=e.settings,o=(0,r.default)(a,"spec.product"),u=o===i.productTypes.WC,l={top:u?50:100,right:50,bottom:u?50:100,left:50},d=(0,s.computedWorkSpaceRatio)(n.coverBgParams,{top:100,right:50,bottom:100,left:50},i.percent.lg),c=(0,s.computedWorkSpaceRatio)(n.innerBgParams,l,i.percent.lg),p=(0,s.computedWorkSpaceRatio)(n.innerBgParamsLandscape,l,i.percent.lg);t.updateRatio([{type:i.ratioTypes.previewCoverWorkspace,ratio:d},{type:i.ratioTypes.previewInnerWorkspace,ratio:c},{type:i.ratioTypes.previewInnerWorkspaceLandscape,ratio:p}])};t.recomputedRenderRatios=function(e){var t=e.boundRatioActions,n=e.size,a=n.coverWorkspaceSize,o=n.innerWorkspaceSize,r=(n.renderCoverSize,n.renderCoverSheetSize),s=(n.renderInnerSize,n.renderInnerSheetSizeWithoutBleed),u=(a.width-r.width)/2,l=(a.height-r.height)/2,d=(o.width-s.width)/2,c=(o.height-s.height)/2;t.updateRatio([{type:i.ratioTypes.coverSheetPaddingLeft,ratio:u/a.width},{type:i.ratioTypes.coverSheetPaddingTop,ratio:l/a.height},{type:i.ratioTypes.innerSheetPaddingLeft,ratio:d/o.width},{type:i.ratioTypes.innerSheetPaddingTop,ratio:c/o.height}])},t.getSpreadSize=function(e){return(0,r.default)(e.props,"size.coverSpreadSize")},t.resizingHandler=function(e){clearTimeout(l),l=setTimeout(function(){d(e.props),c(e.props)},500)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.autoFill=t.handleReplaceImage=void 0;var o=n(14),r=a(o),i=n(12),s=a(i),u=n(11),l=a(u),d=n(2),c=a(d),p=n(54),g=n(9),f=n(21),h=null,m=t.handleReplaceImage=function(e,t,n){var a=e.props,o=a.project,i=a.parameters,s=a.boundProjectActions,u=a.boundImagesActions,d=i.toJS(),g=d.baseSize,m=d.pageBleed,M=(0,l.default)(o,"pageArray"),v=t[0],y="",I=c.default.List();return M.some(function(e,t){if(e.get("id")===n){var a=c.default.Map(),o=e.get("elements"),r=o.get("0");y=r.get("encImgId");var i=Math.abs(v.orientation||0)/90%2===1,s=i?parseInt(v.width)<=parseInt(v.height):parseInt(v.width)>parseInt(v.height),u=(0,p.getInnerPageSize)(g,m),l=s?u.height:u.width,d=s?u.width:u.height,h=(0,f.getCropOptions)(v.width,v.height,l,d,v.orientation||0),T=h.cropLUX,w=h.cropLUY,E=h.cropRLX,D=h.cropRLY;a=r.merge({encImgId:v.encImgId,imageid:v.imageId,imgRot:v.orientation||0,width:l,height:d,cropLUX:T,cropLUY:w,cropRLX:E,cropRLY:D});var N=e.merge({width:l,height:d,elements:c.default.List().push(a)});I=M.set(String(t),N)}}),s.deleteProjectImage(y),u.autoAddPhotoToCanvas({status:!1,pageId:"",elementId:"",elementWidth:0,elementHeight:0}),s.setPageArray(I),h&&clearTimeout(h),h=setTimeout(function(){e.onSaveProject(function(){},null,!0)},30),r.default.resolve()};t.autoFill=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.props,o=a.project,i=a.parameters,u=a.boundProjectActions,d=a.autoAddPhotoToCanvas;if(!t.length)return r.default.resolve();var M=(0,l.default)(o,"pageArray"),v=(0,l.default)(o,"cover"),y=(v.get("containers"),0),I=c.default.List(),T=(0,l.default)(d,"pageId"),w=(0,s.default)([],t);if(n&&w.sort(function(e,t){return(0,l.default)(e,"shotTime")-(0,l.default)(t,"shotTime")}),T)return m(e,w,T);var E=i.toJS(),D=E.baseSize,N=E.pageBleed;return M&&M.size&&M.forEach(function(e,t){var n=e,a=e.get("elements");if(a&&a.size){var o=a.get("0");if(o.get("type")===g.elementTypes.photo&&!o.get("encImgId")){var r=w[y];if(r){y+=1;var i=c.default.Map(),s=Math.abs(r.orientation||0)/90%2===1,u=s?parseInt(r.width)<=parseInt(r.height):parseInt(r.width)>parseInt(r.height),l=(0,p.getInnerPageSize)(D,N),d=u?l.height:l.width,h=u?l.width:l.height,m=(0,f.getCropOptions)(r.width,r.height,d,h,r.orientation||0),M=m.cropLUX,v=m.cropLUY,T=m.cropRLX,E=m.cropRLY;i=o.merge({encImgId:r.encImgId,imageid:r.imageId,imgRot:r.orientation||0,width:d,height:h,cropLUX:M,cropLUY:v,cropRLX:T,cropRLY:E}),n=n.merge({width:d,height:h,elements:c.default.List().push(i)})}}}I=I.set(String(t),n)}),u.setPageArray(I),h&&clearTimeout(h),h=setTimeout(function(){e.onSaveProject(function(){},null,!0)},30),r.default.resolve()}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=e.props.env.userInfo,a=t.env.userInfo,o=a.get("id"),r=e.props,i=r.boundProjectActions,s=r.boundEnvActions,u=(r.boundTemplateActions,r.boundPriceActions),l=r.boundTrackerActions,d=(r.boundConfirmModalActions,r.project),p=(r.translations,r.boundStyleActions),g=d.property,f=d.setting,h=g.get("projectId"),m=g.get("title"),M=f.get("product");if(n!==a){if(o===-1)return window.onbeforeunload=null,void(window.location="/sign-in.html");h!==-1?c.default.all([i.getProjectData(h),i.getProjectTitle(h),i.getOrderInfo(h)]).then(function(){i.projectLoadCompleted(),l.addTracker("LoadComplete")}):(m&&s.addAlbum(o,m).then(function(){s.getAlbumId(o,m).then(function(){i.projectLoadCompleted()})}),p.getStyleList(f.get("size"),M),u.getProductPrice(f.toJS()),l.addTracker("LoadComplete"))}var v=m,y=t.project.property.get("title");v!==y&&s.getAlbumId(o,y)}function r(e){var t=e.props.boundNotificationActions;t.clearNotification(),window.onbeforeunload=null,window.open(I.loginPath,"newwindow"),setTimeout(function(){window.onbeforeunload=function(){return"Unsaved changes(If any) will be discarded. Are you sure to exit?"}},0)}function i(e,t,n){var a=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],!(arguments.length>4&&void 0!==arguments[4])||arguments[4]),o=e.props,i=o.boundProjectActions,s=o.boundNotificationActions,u=o.boundAlertModalActions,l=(o.boundCloneModalActions,o.boundTrackerActions),d=o.project,p=o.env,f=o.spec,m=p.userInfo,v=f.version;return i.saveProject(d,m,v).then(function(o){var p="success"===(0,g.default)(o,"status");if(p){var f=new c.default(function(n,r){l.addTracker("SaveComplete,success"),i.deleteServerPhotos();var u=+(0,g.default)(o,"data.guid");d.property.get("projectId")===-1&&u&&(i.updateProjectId(u),window.history.replaceState({},"calendar","?"+h.default.stringify({initGuid:u}))),u&&(t&&"function"==typeof t?t():a&&(e.projectSaveSuccessNode||s.addNotification({children:M.default.createElement("div",{ref:function(t){return e.projectSaveSuccessNode=t}},"Project saved successfully!"),level:"success",autoDismiss:2}),n()))});return f}if(l.addTracker("SaveComplete,failed"),n&&"function"==typeof n&&n(),d.property.get("projectId")===-1)u.showAlertModal({title:"Error",message:"We are so apologize that something error occurred, please try again later",escapeClose:!1,isHideIcon:!0,onButtonClick:function(){window.onbeforeunload=null,window.location="/create.html"}});else{var m=+(0,g.default)(o,"errorCode"),v="Project save failed! Please try again later.";T.codesOfSaveProject.sessionTimeout===m&&(v=M.default.createElement("div",null,"Your session has timed out. You must log in again to continue. Clicking ",M.default.createElement("a",{
onClick:r.bind(e,e)},"log in")," ","will open a new window. Once successfully log in, you may return to this window to continue editing.")),a&&(e.errorMessageNode||s.addNotification({children:M.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},v),level:"error",autoDismiss:0}))}return c.default.reject()},function(){return e.networkDisconnectNode||s.addNotification({children:M.default.createElement("div",{ref:function(t){return e.networkDisconnectNode=t}},"No interenet connection, please check your network and try again."),level:"error",autoDismiss:0}),c.default.reject()})}function s(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.props,s=i.boundProjectActions,u=i.boundNotificationActions,l=i.boundAlertModalActions,d=(i.boundCloneModalActions,i.boundTrackerActions),p=i.project,f=i.env,m=i.spec,v=f.userInfo,I=m.version;return s.saveProject(p,v,I).then(function(i){var f="success"===(0,g.default)(i,"status");if(f){var m=new c.default(function(n,r){d.addTracker("SaveComplete,success"),s.deleteServerPhotos();var l=+(0,g.default)(i,"data.guid");if(p.property.get("projectId")===-1&&l&&(s.updateProjectId(l),window.history.replaceState({},"calendar","?"+h.default.stringify({initGuid:l}))),l){t&&"function"==typeof t?t():o&&(e.projectSaveSuccessNode||u.addNotification({children:M.default.createElement("div",{ref:function(t){return e.projectSaveSuccessNode=t}},"Project saved successfully!"),level:"success",autoDismiss:2}),n());var c="#app > div > div.book-cover-screenshot  canvas";(0,y.getScreenShot)(c,a).then(function(e){s.uploadCoverImage(e).then(function(){n()},function(){r()})})}});return m}if(d.addTracker("SaveComplete,failed"),n&&"function"==typeof n&&n(),p.property.get("projectId")===-1)l.showAlertModal({title:"Error",message:"We are so apologize that something error occurred, please try again later",escapeClose:!1,isHideIcon:!0,onButtonClick:function(){window.onbeforeunload=null,window.location="/create.html"}});else{var v=+(0,g.default)(i,"errorCode"),I="Project save failed! Please try again later.";T.codesOfSaveProject.sessionTimeout===v&&(I=M.default.createElement("div",null,"Your session has timed out. You must log in again to continue. Clicking ",M.default.createElement("a",{onClick:r.bind(e,e)},"log in")," ","will open a new window. Once successfully log in, you may return to this window to continue editing.")),o&&(e.errorMessageNode||u.addNotification({children:M.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},I),level:"error",autoDismiss:0}))}return c.default.reject()},function(){return e.networkDisconnectNode||u.addNotification({children:M.default.createElement("div",{ref:function(t){return e.networkDisconnectNode=t}},"No interenet connection, please check your network and try again."),level:"error",autoDismiss:0}),c.default.reject()})}function u(e,t,n){var a=e.props,o=a.boundProjectActions,r=a.boundNotificationActions,i=a.project,s=a.env,u=a.spec,l=s.userInfo,d=u.version;o.cloneProject(i,l,d,t).then(function(a){var i="success"===(0,g.default)(a,"status");if(i){var s=+(0,g.default)(a,"data.guid");s&&(o.updateProjectId(s),o.changeProjectTitle(t),o.clearOrderInfo(),window.history.replaceState({},"PhotoBook","?"+h.default.stringify({initGuid:s})),(0,y.getScreenShot)("#app > div > div.book-cover-screenshot  canvas").then(function(t){o.uploadCoverImage(t).then(function(){n?n():e.projectClonedSuccessNode||r.addNotification({children:M.default.createElement("div",{ref:function(t){return e.projectClonedSuccessNode=t}},"Project cloned successfully!"),level:"success",autoDismiss:2})})}))}else e.projectClonedFailedNode||r.addNotification({children:M.default.createElement("div",{ref:function(t){return e.projectClonedFailedNode=t}},"Project clone failed! Please try again later."),level:"error",autoDismiss:0})})}function l(e){var t=e.props,n=t.boundProjectActions,a=t.project,o=a.property.get("mainProjectUid"),r=a.property.get("crossSellMainEncImgId");n.loadMainProjectImages(o,r).then(function(t){e.autoFill(t,!1).then(function(){n.changeProjectProperty({shouldSaveProjectAfterCrossSell:!0})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDefaultTemplateToPage=t.toggleModal=t.doPrepare=void 0;var d=n(14),c=a(d),p=n(11),g=a(p);t.doUserThings=o,t.openLoginPage=r,t.saveProjectWithOutScreenShot=i,t.onSaveProject=s,t.onCloneProject=u,t.loadMainProjectImages=l;var f=n(36),h=a(f),m=n(3),M=a(m),v=n(55),y=n(147),I=n(9),T=n(293);t.doPrepare=function(e){var t=e.props,n=t.boundEnvActions,a=t.boundSpecActions,o=t.boundQueryStringActions,r=t.boundProjectActions,i=t.project,s=t.boundCapabilitiesActions,u=t.boundFontActions;i.setting;o.parser(),n.getEnv().then(function(){var t=e.props.env,o=t.qs.get("isPreview");o||u.getFontList(),s.initCapabilities();var l=i.property.get("encProjectIdString");l?a.getSpecData().then(function(){r.getPreviewProjectData(l).then(function(){r.projectLoadCompleted()})}):a.getSpecData().then(function(){n.getUserInfo()})})},t.toggleModal=function(e,t,n){e.toggleUpload(n)},t.applyDefaultTemplateToPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.props,o=a.boundProjectActions,r=a.boundTemplateActions,i=a.project,s=i.setting,u=s.get("size");r.getTemplateInfo(t,u).then(function(e){var a=t+"_"+u,r=(0,v.convertResultToJson)(e),i=(0,v.formatTemplateInstance)(r,[t],u);n?o.applyDefaultTemplateToCover(i[0][a]):o.applyDefaultTemplateToPages(i[0][a])})}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(11),m=o(h),M=n(3),v=o(M),y=n(627),I=o(y),T=n(72),w=n(2),E=o(w),D=n(15),N=n(412),S=o(N),b=n(294);n(296),n(314),n(320);var A=n(499);n(272),n(269);var C=n(94),x=o(C);n(9);n(218),n(219);var P=n(42),L=o(P),_=n(280),O=o(_),j=n(397),z=o(j),k=n(426),R=o(k),U=n(389),B=o(U),Y=n(437),W=o(Y),Q=n(436),F=o(Q),G=n(81),H=o(G),Z=n(84),X=n(85),J=n(432),V=a(J),K=n(433),q=a(K),$=n(434),ee=function(e){function t(e){(0,u.default)(this,t);var n=e.boundUploadImagesActions,a=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.doPrepare=function(){return(0,$.doPrepare)(a)},a.toggleModal=function(e,t){return(0,$.toggleModal)(n,e,t)},a.applyDefaultTemplateToPage=function(e,t){return(0,$.applyDefaultTemplateToPage)(a,e,t)},a.onSaveProject=function(e,t,n,o){return(0,$.onSaveProject)(a,e,t,n,o)},a.saveProjectWithOutScreenShot=function(e,t,n,o){return(0,$.saveProjectWithOutScreenShot)(a,e,t,n,o)},a.onCloneProject=function(e,t){return(0,$.onCloneProject)(a,e,t)},a.recomputedPreviewRatios=function(e){return V.recomputedPreviewRatios(e)},a.recomputedWorkspaceRatio=function(e){return V.recomputedWorkspaceRatio(e)},a.onresizingHandler=function(){return V.resizingHandler(a)},a.loadMainProjectImages=function(){return(0,$.loadMainProjectImages)(a)},a.autoFill=function(e,t){return q.autoFill(a,e,t)},a.showPreviewModal=function(e){var t=e||a.props,n=t.boundPreviewModalActions;n.show()},a.state={isCoverDefaultTemplateUsed:!1,isInnerDefaultTemplateUsed:!1,shouldSaveProjectAfterTemplateUsed:!1,isMyPhotosLoaded:!1,isMainProjectImageLoaded:!1},(0,A.initGlobalVariables)(),a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.doPrepare()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.env,a=t.project,o=t.boundPriceActions,r=(t.boundTemplateActions,(0,m.default)(n,"qs")),i=(0,m.default)(n,"userInfo"),s=(i?i.get("id"):-1,!!r&&r.get("isPreview")),u=e.project,l=a,d=u.setting,c=l.setting,p=d.get("size"),g=c.get("size");c.get("product");p!==g&&o.getProductPrice(c.toJS());var f=l.property.get("projectId"),h=u.property.get("isProjectLoadCompleted"),M=l.property.get("isProjectLoadCompleted");f!==-1||s||h===M||this.onSaveProject(function(){},null,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=this;(0,$.doUserThings)(this,e);var n=e.boundProjectActions,a=e.env,o=a.userInfo,r=a.qs,i=o.get("id"),s=(0,m.default)(this.props,"settings.spec.size"),u=(0,m.default)(e,"settings.spec.size"),l=(0,m.default)(this.props,"size.baseWidth"),d=(0,m.default)(e,"size.baseWidth");(d&&l!==d||s&&s!==u)&&(this.recomputedWorkspaceRatio(e),this.recomputedPreviewRatios(e));var c=(0,m.default)(this.props,"env.qs"),p=(0,m.default)(e,"env.qs");c.get("isPreview")!==p.get("isPreview")&&p.get("isPreview")&&this.showPreviewModal(e);var g=e.project.property.get("isNewProject"),f=e.project.property.get("crossSell");if(g){var h=(0,m.default)(e,"project"),M=h.property.get("projectId"),v=h.property.get("isProjectLoadCompleted");v&&f&&!this.state.isMainProjectImageLoaded&&(this.setState({isMainProjectImageLoaded:!0}),this.loadMainProjectImages()),v&&!this.state.isMyPhotosLoaded&&r.get("isFromMyPhoto")&&(this.setState({isMyPhotosLoaded:!0}),n.getMyPhotosInfo(i).then(function(e){var a=JSON.parse(e.data);t.autoFill(a).then(function(){n.changeProjectProperty({shouldSaveProjectAfterMyPhotos:!0})})}));var y=h.property.get("shouldSaveProjectAfterCrossSell");M&&M!==-1&&y&&(this.onSaveProject(function(){},null,!0),n.changeProjectProperty({shouldSaveProjectAfterCrossSell:!1}));var I=h.property.get("shouldSaveProjectAfterMyPhotos");M&&M!==-1&&I&&(this.onSaveProject(function(){},null,!0),n.changeProjectProperty({shouldSaveProjectAfterMyPhotos:!1}))}}},{key:"componentDidMount",value:function(){var e=!0;(0,b.addEventListener)(window,"resize",this.onresizingHandler),/isPreview/.test(window.location.href)||(window.onbeforeunload=function(){return"Unsaved changes(If any) will be discarded. Are you sure to exit?"}),e||(window.onbeforeunload=null);var t=this.props.boundNotificationActions;t.initNotificationSystem(this.refs.notificationSystem)}},{key:"componentWillUnmount",value:function(){(0,b.removeEventListener)(window,"resize",this.onresizingHandler)}},{key:"render",value:function(){var e=this.props,t=e.translations,n=e.env,a=e.confirmModal,o=(e.summary,e.upload),r=e.project,i=e.sidebar,s=e.paginationSpread,u=e.uploadedImages,l=e.settings,d=e.imageUsedMap,c=e.imageEditModal,p=e.alertModal,g=e.cloneModal,f=e.pagination,h=e.price,m=e.parameters,M=e.allSheets,y=e.allImages,T=e.fontList,w=e.textEditModal,N=e.previewModal,b=e.upgradeSize,A=e.previewRatios,C=e.previewSize,P=e.capabilities,_=e.urls,j=e.size,k=e.ratios,U=e.variables,Y=e.template,Q=(e.specData,e.spec),G=e.capability,Z=e.upgradeModal,X=e.autoAddPhotoToCanvas,J=e.boundEnvActions,V=e.boundTrackerActions,K=e.boundImagesActions,q=e.boundProjectActions,$=e.boundSidebarActions,ee=(e.boundUploadImagesActions,e.boundContactUsActions),te=e.uploadingImages,ne=e.contactUsModal,ae=e.boundImageEditModalActions,oe=e.boundNotificationActions,re=e.boundConfirmModalActions,ie=e.boundAlertModalActions,se=(e.boundTemplateActions,e.boundPaginationActions,e.boundTextEditModalActions),ue=(e.boundPropertyModalActions,e.boundCloneModalActions),le=e.boundPriceActions,de=e.boundPreviewModalActions,ce=e.boundUpgradeModalActions,pe=n.urls,ge=this.toggleModal,fe=!1,he=!0,me=n.userInfo.get("id"),Me={boundProjectActions:q,boundTrackerActions:V,boundCloneModalActions:ue,boundNotificationActions:oe,boundConfirmModalActions:re,boundAlertModalActions:ie,boundPreviewModalActions:de,onSaveProject:this.onSaveProject,onCloneProject:this.onCloneProject,boundUpgradeModalActions:ce},ve={env:n,project:r},ye={boundTrackerActions:V,boundImageEditModalActions:ae},Ie={settings:l,allSheets:M},Te=s.get("pages"),we=f.pageId,Ee=Te.find(function(e){return e.get("id")===we}),De={toggleModal:ge,boundImagesActions:K,boundProjectActions:q,boundTrackerActions:V,boundContactUsActions:ee,boundImageEditModalActions:ae,boundConfirmModalActions:re,boundAlertModalActions:ie,boundCloneModalActions:ue,boundEnvActions:J,boundPreviewModalActions:de,boundTextEditModalActions:se,boundUpgradeModalActions:ce,boundNotificationActions:oe,onSaveProject:this.onSaveProject,onCloneProject:this.onCloneProject,autoFill:this.autoFill,saveProjectWithOutScreenShot:this.saveProjectWithOutScreenShot},Ne={alertModal:p,confirmModal:a,cloneModal:g,env:n,upload:o,project:r,settings:l,parameters:m,allSheets:M,allImages:y,baseUrls:pe,fontList:T,textEditModal:w,pagination:E.default.fromJS(f),autoAddPhotoToCanvas:X,uploadingImages:te,contactUsModal:ne,imageEditModal:c,previewModal:N,upgradeSize:b,previewRatios:A,previewSize:C,capabilities:P,currentPage:Ee,variables:U,ratio:k.workspace,ratios:k,elementArray:r.elementArray,upgradeModal:Z,urls:_,size:j,template:Y,paginationSpread:s,isPreview:fe,specData:Q,userId:me,capability:G,price:h},Se={toggleModal:ge,boundImagesActions:K,boundProjectActions:q,boundTrackerActions:V,boundSidebarActions:$,boundPriceActions:le},be={sidebar:i,uploadedImages:u,baseUrls:pe,imageUsedMap:d,project:r,isShowSideBar:!0,settings:l,allImages:y},Ae={boundTrackerActions:V},Ce={price:h,parameters:m,settings:l},xe={},Pe={urls:_,size:j,ratios:k,variables:U,template:Y,pagination:f,paginationSpread:s,settings:l,parameters:m,isPreview:fe,specData:Q,project:r,allImages:y,userId:me,capability:G,allSheets:M},Le=r.property.get("isProjectLoadCompleted");return v.default.createElement(D.TranslatorProvider,{translations:t},v.default.createElement("div",{className:"app"},v.default.createElement("div",{className:"main-modules"},v.default.createElement(z.default,{actions:Me,data:ve}),v.default.createElement(B.default,{actions:Ae,data:Ce}),v.default.createElement(S.default,{actions:Se,data:be}),v.default.createElement(R.default,{actions:ye,data:Ie})),fe?null:v.default.createElement(O.default,{userId:me,keepAlive:J.keepAlive}),v.default.createElement(W.default,{actions:De,data:Ne}),v.default.createElement(I.default,{ref:"notificationSystem",style:F.default}),v.default.createElement(L.default,{loadingText:"Loading...",isShown:!he}),Le&&Pe?v.default.createElement(H.default,{actions:xe,data:Pe}):null,v.default.createElement(x.default,null)))}}]),t}(M.Component);t.default=(0,T.connect)(X.mapStateToProps,Z.mapAppDispatchToProps)(ee)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Containers:{DefaultStyle:{marginTop:"50px",width:"inherit"}},NotificationItem:{DefaultStyle:{fontSize:"12px",padding:"16px 45px 16px 20px",minHeight:"50px",boxSizing:"border-box",minWidth:"220px",maxWidth:"530px",border:"1px solid #ccc",backgroundColor:"#fff",boxShadow:"0 2px 2px rgba(0, 0, 0, 0.16)",lineHeight:"18px"},success:{color:"#3a3a3a"},error:{color:"#de3418",fontStyle:"italic"}},Dismiss:{DefaultStyle:{fontWeight:"normal",backgroundColor:"inherit",borderRadius:"inherit",color:"#7b7b7b",fontSize:"22px",lineHeight:"21px",width:"20px",height:"20px",top:"50%",right:"15px",transform:"translate(0, -50%)"}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),r=a(o),i=n(6),s=a(i),u=n(4),l=a(u),d=n(5),c=a(d),p=n(8),g=a(p),f=n(7),h=a(f),m=n(11),M=a(m),v=n(3),y=a(v),I=n(15),T=n(377),w=a(T),E=n(424),D=a(E),N=n(419),S=a(N),b=(n(9),n(379)),A=a(b),C=n(365),x=a(C),P=n(376),L=a(P),_=n(405),O=a(_),j=n(415),z=a(j),k=n(283),R=a(k);n(270);var U=function(e){function t(e){(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.closeImageEditModal=n.closeImageEditModal.bind(n),n.closeConfirmModalByX=n.closeConfirmModalByX.bind(n),n.closePreviewModal=n.closePreviewModal.bind(n),n.closeTextEditModal=n.closeTextEditModal.bind(n),n.closeUpgradeModal=n.closeUpgradeModal.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"closeImageEditModal",value:function(){var e=this.props.actions,t=e.boundImageEditModalActions;t.hideImageEditModal()}},{key:"closeConfirmModalByX",value:function(){var e=this.props,t=e.actions,n=e.data,a=t.boundConfirmModalActions,o=n.confirmModal;a.hideConfirm(),o.get("xCloseFun")&&"function"==typeof o.get("xCloseFun")&&o.get("xCloseFun")()}},{key:"closePreviewModal",value:function(){var e=this.props.actions,t=e.boundPreviewModalActions;t.hide()}},{key:"closeTextEditModal",value:function(){var e=this.props.actions,t=e.boundTextEditModalActions;t.hideTextEditModal()}},{key:"closeUpgradeModal",value:function(){var e=this.props.actions,t=e.boundUpgradeModalActions;t.hideUpgrade()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,a=t.env,o=t.confirmModal,i=t.uploadingImages,s=t.contactUsModal,u=t.upload,l=t.project,d=t.ratio,c=t.capabilities,p=t.cloneModal,g=t.imageEditModal,f=t.alertModal,h=t.baseUrls,m=t.previewRatios,v=t.previewSize,I=t.upgradeSize,T=t.variables,E=t.settings,N=t.allSheets,b=t.fontList,C=t.textEditModal,P=t.pagination,_=t.parameters,j=t.elementArray,k=t.previewModal,U=t.currentPage,B=t.autoAddPhotoToCanvas,Y=t.upgradeModal,W=t.urls,Q=(t.size,t.ratios),F=t.template,G=t.paginationSpread,H=t.specData,Z=t.allImages,X=t.capability,J=t.price,V=n.boundNotificationActions,K=n.boundConfirmModalActions,q=n.boundEnvActions,$=n.boundContactUsActions,ee=n.toggleModal,te=n.boundImagesActions,ne=n.boundProjectActions,ae=n.boundTrackerActions,oe=n.onSaveProject,re=n.onCloneProject,ie=n.boundAlertModalActions,se=n.boundCloneModalActions,ue=n.autoFill,le=n.saveProjectWithOutScreenShot,de={isInPreviewModel:(0,M.default)(a,"qs").get("isPreview"),isShown:k.get("isShown"),urls:h.toJS(),ratios:m,size:v,variables:T,settings:E,project:l,pagination:P,parameters:_,allSheets:N,capability:c.get("previewPages")},ce={closePreviewModal:this.closePreviewModal},pe=/isPreview/.test(window.location.href),ge=a.userInfo.get("id"),fe=g.toJS();if(ge===-1||pe)return y.default.createElement("div",{className:"modals"},y.default.createElement(O.default,{actions:ce,data:de}));var he={urls:W,size:I,ratios:Q,variables:T,template:F,pagination:P.toJS(),paginationSpread:G,settings:E,parameters:_,isPreview:pe,specData:H,project:l,allImages:Z,userId:ge,capability:X,allSheets:N,price:J},me=l.property.get("isProjectLoadCompleted");return y.default.createElement("div",{className:"modals"},y.default.createElement(D.default,{opened:u.get("isShown"),uploadingImages:i,boundUploadedImagesActions:te,boundProjectActions:ne,boundContactUsActions:$,toggleModal:ee,env:a,project:l,autoAddPhotoToCanvas:B,addTracker:ae.addTracker,saveProject:oe,autoFill:ue,boundConfirmModalActions:K}),Y.get("isShown")?y.default.createElement(S.default,{isShown:!0,close:this.closeUpgradeModal,data:he,oldSaveProject:Y.get("saveFun"),saveProjectWithOutScreenShot:le,boundProjectActions:ne,addTracker:ae.addTracker}):null,o.get("isShown")?y.default.createElement(w.default,{isShown:!0,onOkClick:o.get("onOkClick"),confirmTitle:o.get("confirmTitle"),confirmMessage:o.get("confirmMessage"),okButtonText:o.get("okButtonText"),cancelButtonText:o.get("cancelButtonText"),onCancelClick:o.get("onCancelClick"),hideOnOk:o.get("hideOnOk"),activeButton:o.get("activeButton"),cancelInFirst:o.get("cancelInFirst"),closeConfirmModal:K.hideConfirm,closeConfirmModalByX:this.closeConfirmModalByX}):null,f.get("isShown")?y.default.createElement(x.default,{isShown:!0,title:f.get("title"),onButtonClick:f.get("onButtonClick"),message:f.get("message"),escapeClose:f.get("escapeClose"),isHideIcon:f.get("isHideIcon"),closeAlertModal:ie.hideAlertModal}):null,y.default.createElement(R.default,(0,r.default)({},fe,{onCancelClick:this.closeImageEditModal})),p.get("isShown")?y.default.createElement(L.default,{env:a,userId:ge,isShown:!0,onCloneProject:re,addAlbum:q.addAlbum,checkProjectTitle:ne.checkProjectTitle,closeCloneModal:se.hideCloneModal,addTracker:ae.addTracker,uploadCoverImage:ne.uploadCoverImage}):null,b.length?y.default.createElement(z.default,{fontList:b,baseUrl:h.get("baseUrl"),isShown:C.get("isShown"),element:C.get("element"),variables:T,currentPage:U,elementArray:j,closeTextEditModal:this.closeTextEditModal,updateElement:ne.updateElement,ratio:d}):null,s.get("isShown")?y.default.createElement(A.default,{env:a,project:l,isShown:!0,boundContactUsActions:$,addNotification:V.addNotification}):null,me?y.default.createElement(O.default,{actions:ce,data:de}):null)}}]),t}(v.Component);U.propTypes={actions:v.PropTypes.object.isRequired,data:v.PropTypes.object.isRequired},t.default=(0,I.translate)("Modals")(U)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlerMouseWheel=void 0;var o=n(11),r=a(o),i=n(9);t.handlerMouseWheel=function(e,t){var n=e.props,a=n.pagination,o=n.paginationSpread,s=n.settings,u=n.boundPaginationActions,l=o.get("pages"),d=l.findIndex(function(e){return e.get("id")===a.pageId}),c=0===a.sheetIndex,p=(0,r.default)(s,"spec.product"),g=p===i.productTypes.WC;if(g&&!c){if(0===d&&t<0||1===d&&t>0)return null;var f=t>0?1:-1,h=d+f,m=l.getIn([String(h),"id"]);m&&u.switchPage(h,m)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchPageTo=t.switchPage=t.switchSheet=void 0;var a=n(9);t.switchSheet=function(e,t){var n=e.props.boundPaginationActions;n.switchSheet(t.current)},t.switchPage=function(e,t){var n=t||e.props,a=n.boundPaginationActions,o=n.paginationSpread,r=n.pagination,i=o.get("pages"),s=i.findIndex(function(e){return e.get("enabled")});s=s===-1?0:s;var u=i.getIn([s.toString(),"id"]);i.size&&r.pageId!==u&&a.switchPage(s,u)},t.switchPageTo=function(e,t){var n=e.props,o=n.boundPaginationActions,r=n.paginationSpread,i=n.pagination,s=r.get("pages"),u=s.get(t.toString()),l=u.get("type"),d=u.get("id"),c=t;l===a.pageTypes.spine&&++c<s.size&&(u=s.get(c.toString()),d=u.get("id"),l=u.get("type")),s.size&&i.pageId!==d&&t<s.size&&l!==a.pageTypes.full&&l!==a.pageTypes.spine&&o.switchPage(c,d)}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(4),u=o(s),l=n(5),d=o(l),c=n(8),p=o(c),g=n(7),f=o(g),h=n(12),m=o(h),M=n(11),v=o(M),y=n(3),I=o(y),T=n(72),w=n(15),E=n(2),D=o(E),N=n(13),S=o(N),b=n(76),A=n(84),C=n(85),x=n(9),P=n(117);n(271);var L=n(139),_=o(L),O=n(438),j=a(O),z=n(439),k=a(z),R=n(138),U=o(R),B=n(393),Y=o(B),W=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.handlerMouseWheel=function(e){return j.handlerMouseWheel(n,e)},n.switchSheet=function(e){k.switchSheet(n,e)},n.changeContainerTop=n.changeContainerTop.bind(n),n.state={isNeedTransition:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"changeContainerTop",value:function(e){var t=this.props;t.pagination,t.size;e?k.switchPageTo(this,1):k.switchPageTo(this,0),this.setState({isNeedTransition:!0})}},{key:"componentDidMount",value:function(){var e=this;(0,P.addMouseWheelEvent)(this.productArea,function(t){e.handlerMouseWheel(t)})}},{key:"componentWillReceiveProps",value:function(e){var t=(e.pagination,(0,v.default)(this.props,"pagination.sheetIndex")),n=(0,v.default)(e,"pagination.sheetIndex"),a=this.props.paginationSpread.get("pages"),o=e.paginationSpread.get("pages"),r=(0,v.default)(this.props,"pagination.pageId"),i=(0,v.default)(e,"pagination.pageId"),s=(0,v.default)(this.props,"pagination.total"),u=(0,v.default)(e,"pagination.total"),l=e.project.property.get("isProjectLoadCompleted");t!==n?(k.switchPage(this,e),this.setState({isNeedTransition:!1})):r!==i&&this.setState({isNeedTransition:!0}),(!D.default.is(a,o)&&o.size&&!r||s!==u)&&l&&k.switchPage(this,e),l&&!i&&k.switchPage(this,e)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.t,t.env),a=t.size,o=t.ratios,r=t.urls,i=t.paginationSpread,s=t.spec,u=t.variables,l=t.pagination,d=t.settings,c=t.project,p=t.parameters,g=t.allImages,f=t.capability,h=t.template,M=t.styles,y=t.uploadedImages,T=t.boundPaginationActions,w=t.boundProjectActions,E=t.boundImageEditModalActions,D=(t.boundImagesActions,t.boundUploadImagesActions),N=t.boundTextEditModalActions,A=t.boundTemplateActions,C=t.boundTrackerActions,P=i.get("pages"),L=P.find(function(e){return e.get("id")===l.pageId}),O=L&&L.get("width")>L.get("height"),j=(P.findIndex(function(e){return e.get("id")===l.pageId}),L&&L.get("enabled")),z=0===l.sheetIndex,k=a;O&&(k=(0,m.default)({},a,{renderCoverSheetSize:(0,v.default)(a,"renderCoverSheetSize"),renderInnerSize:(0,v.default)(a,"renderInnerSizeLandscape"),renderInnerContainerSize:(0,v.default)(a,"renderInnerContainerSizeLandscape"),renderInnerSheetSize:(0,v.default)(a,"renderInnerSheetSizeLandscape"),renderInnerSheetSizeWithoutBleed:(0,v.default)(a,"renderInnerSheetSizeWithoutBleedLandscape")}));var R={workspace:z?(0,v.default)(o,"coverWorkspace"):O?(0,v.default)(o,"innerWorkspaceLandscape"):(0,v.default)(o,"innerWorkspace")},B=(0,m.default)({},o,{innerWorkspace:O?(0,v.default)(o,"innerWorkspaceLandscape"):(0,v.default)(o,"innerWorkspace")}),W=(0,m.default)({},h,{list:(0,v.default)(h,"list.coverTemplateList")}),Q=(0,m.default)({},h,{list:(0,v.default)(h,"list.innerTemplateList")}),F={paginationSpread:i,pagination:l,template:W,setting:d,styles:M,page:L,baseUrls:r,ratios:R,uploadedImages:y,isShow:z&&j,isCover:z},G={paginationSpread:i,pagination:l,template:Q,setting:d,styles:M,page:L,baseUrls:r,ratios:R,uploadedImages:y,isShow:!z,isCover:z},H={boundTemplateActions:A,boundProjectActions:w,boundTrackerActions:C,boundPaginationActions:T},Z=this.state.isNeedTransition,X=(0,S.default)("one-page"),J=(0,v.default)(d,"spec.product"),V=0===l.sheetIndex?(0,v.default)(k,"renderCoverSize.width"):(0,v.default)(k,"renderInnerSize.width"),K=(0,b.getSize)(),q={position:"relative",width:K.width-280+"px",height:K.height-77-130+"px"},$=30,ee={width:V+"px",margin:"0 auto",position:"relative",zIndex:100,top:$+"px",transition:0!==l.sheetIndex&&Z?"top 0.7s":""},te=(0,v.default)(n,"userInfo").get("id"),ne={boundProjectActions:w,boundPaginationActions:T,boundTrackerActions:C,boundUploadImagesActions:D,boundImageEditModalActions:E,boundTextEditModalActions:N},ae={urls:r,size:k,ratios:B,paginationSpread:i,variables:u,pagination:l,settings:d,project:c,parameters:p,allImages:g,userId:te,specData:s,capability:f,isLandscapeShape:O},oe={onPage:this.switchSheet},re={total:l.total,current:l.sheetIndex,minSheetIndex:J===x.productTypes.LC||J===x.productTypes.LPS?1:0};return I.default.createElement("div",{className:X},I.default.createElement("div",{ref:function(t){return e.productArea=t},className:"available-client",style:q},I.default.createElement("div",{className:"sheet-container",style:ee},(0,v.default)(a,"renderCoverSize.width")?I.default.createElement(U.default,{actions:ne,data:ae}):null),I.default.createElement(_.default,{actions:oe,data:re}),I.default.createElement("div",{className:"layout-wrap"},I.default.createElement(Y.default,{key:"coverLayout",data:F,actions:H}),I.default.createElement(Y.default,{key:"innerLayout",data:G,actions:H}))))}}]),t}(y.Component);W.propTypes={},t.default=(0,T.connect)(C.mapStateToProps,A.mapAppDispatchToProps)((0,w.translate)("OnePage")(W))},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(429),r=a(o),i=n(10),s=n(9),u=n(317),l=n(26);t.default=function(e){return function(t){return function(n){var a=(0,l.getDataFromState)(e.getState()),o=a.queryStringObj,d=a.property,c=a.setting,p=o.get("isPreview"),g=c.get("product"),f=d.get("projectId"),h=s.clientType+"_"+g+","+f;return!p&&g&&f&&(n.type===i.ADD_TRACKER?(0,u.goTracker)(h+","+n.param):n.type in r.default&&(0,u.goTracker)(h+","+r.default[n.type])),t(n)}}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(449),i=a(r),s=n(457),u=a(s),l=n(473),d=a(l);t.default=(0,o.combineReducers)({spec:u.default,project:i.default,system:d.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_OPTION_MAP:var n=t.availableOptionMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=n(56),u=((0,s.getQueryStingObj)(),r.default.fromJS({styleId:"null"}));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case i.INIT_CALENDAR_SETTING:case i.CHANGE_CALENDAR_SETTING:return e.merge(t.calendarSetting);default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s),l=n(142),d=o(l),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_COVER:var n=t.cover;return i.default.Map.isMap(n)?n:e;case u.CREATE_ELEMENTS:var a=t.pageId,o=e.get("containers"),r=o.findIndex(function(e){return e.get("id")===a});if(r!==-1){var s=o.getIn([String(r),"elements"]);return e.setIn(["containers",String(r),"elements"],(0,d.default)(s,t))}return e;case u.DELETE_ELEMENTS:var l=t.elementIds,c=e;return l.forEach(function(e){var n=c.get("containers"),a=n.findIndex(function(t){return t.get("elements").map(function(e){return e.get("id")}).indexOf(e)!==-1});if(a!==-1){var o=n.getIn([String(a),"elements"]);c=c.setIn(["containers",String(a),"elements"],(0,d.default)(o,t))}}),c;case u.UPDATE_ELEMENTS:var p=t.updateObjectArray,g=e;return p.forEach(function(e){var n=e.get("pageId"),a=e.get("elements"),o=g.get("containers"),r=o.findIndex(function(e){return e.get("id")===n});if(r!==-1){var i=o.getIn([String(r),"elements"]);g=g.setIn(["containers",String(r),"elements"],(0,d.default)(i,t,a))}}),g;case u.CHANGE_CALENDAR_SETTING:var f=t.calendarSetting;if(f.get("startYear")){var h=e.getIn(["containers","0","year"]),m=f.get("startYear");if(h&&h!=m)return e.setIn(["containers","0","year"],m)}return e;case u.APPLY_TEMPLATE_TO_PAGES:var M=t.templateDataArray,v=e.get("containers");return M.forEach(function(e){var t=e.get("pageId"),n=e.get("templateId"),a=e.get("elements"),o=v.findIndex(function(e){return e.get("id")===t});if(o!==-1){var r=v.get(o);v=v.set(String(o),r.merge({template:{tplGuid:n},elements:a}))}}),e.set("containers",v);case u.UPDATE_PAGE_TEMPLATE_ID:var y=t.pageId,I=t.templateId,T=e.get("containers"),w=T.findIndex(function(e){return e.get("id")===y});return w!==-1?e.setIn(["containers",String(w),"template","tplGuid"],I):e;case u.DELETE_ALL:var E=e.get("containers");return E.forEach(function(e,n){var a=e.get("elements");E=E.set(String(n),e.merge({elements:(0,d.default)(a,t),template:{tplGuid:""}}))}),e.set("containers",E);default:return e}};t.default=c},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1];switch(t.type){case u.DELETE_PROJECT_IMAGE:var n=t.encImgId;return e.push(n);default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;
var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(57),i=o(r),s=n(11),u=o(s),l=n(2),d=o(l),c=n(20),p=n(16),g=a(p),f=n(10),h=a(f);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.List(),t=arguments[1];switch(t.type){case h.API_SUCCESS:switch(t.apiPattern.name){case g.MY_PHOTOS:var n=JSON.parse((0,u.default)(t,"response.data"));if(n&&n.length){var a=n.filter(function(e){return e.id}),o=e.concat(d.default.fromJS(a));return o}return e}case h.SET_IMAGE_ARRAY:var r=t.imageArray;return d.default.List.isList(r)?r:e;case h.UPLOAD_COMPLETE:var s=t.fields,l="object"===(0,i.default)(s.guid)?s.guid.__text.replace(/\s/g,""):s.guid&&s.guid.replace(/\s/g,""),p=d.default.Map((0,c.convertObjIn)({id:s.imageId,guid:l,encImgId:s.encImgId,name:s.name,height:s.height,width:s.width,uploadTime:s.uploadTime,order:e.size,shotTime:s.shotTime,orientation:s.orientation}));return e.push(p);case h.DELETE_PROJECT_IMAGE:var f=t.encImgId;return e.filter(function(e){return e.get("encImgId")!==f});default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s),l=n(51);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_IMAGE_USED_MAP:var n=t.imageUsedMap;return i.default.Map.isMap(n)?n:e;case u.CREATE_ELEMENTS:var a=t.elements,o=(0,l.getImageUsedMap)(a),r=e;return o.size&&o.forEach(function(e,t){var n=r.get(t)||0;r=r.set(t,n+e)}),r;case u.CLEAR_IMAGE_USED_MAP:return i.default.Map();default:return e}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(453),i=a(r);t.default=(0,o.combineReducers)({data:i.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(16),u=a(s),l=n(10),d=a(l),c=n(20),p=i.default.Map({isOrdered:!1,isCheckFailed:!1});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case d.API_SUCCESS:switch(t.apiPattern.name){case u.GET_PROJECT_ORDERED_STATUS:var n=t.response,a=n.resultData,o=(0,c.convertObjIn)(a);return e.merge({isOrdered:o.ordered,isCheckFailed:o.checkFailed});default:return e}case d.CLEAR_ORDER_INFO:return p;default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(9),u=n(10),l=a(u),d=n(142),c=o(d),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1];switch(t.type){case l.SET_PAGE_ARRAY:var n=t.pageArray;return i.default.List.isList(n)?n:e;case l.CREATE_ELEMENTS:case l.DELETE_ELEMENTS:var a=t.pageId,o=e.findIndex(function(e){return e.get("id")===a});if(o!==-1){var r=e.getIn([String(o),"elements"]);return e.setIn([String(o),"elements"],(0,c.default)(r,t))}return e;case l.UPDATE_ELEMENTS:var u=t.updateObjectArray,d=e;return u.forEach(function(n){var a=n.get("pageId"),o=n.get("elements"),r=e.findIndex(function(e){return e.get("id")===a});if(r!==-1){var i=d.getIn([String(r),"elements"]);d=d.setIn([String(r),"elements"],(0,c.default)(i,t,o))}}),d;case l.CREATE_DUAL_PAGE:case l.CREATE_MULTIPLE_DUAL_PAGE:var p=t.insertIndex,g=t.insertPageArray,f=e.slice(0,p),h=e.slice(p);return f.concat(g).concat(h);case l.DELETE_DUAL_PAGE:var m=t.leftPageId,M=t.rightPageId;return e.filter(function(e){var t=e.get("id");return t!==m&&t!==M});case l.CHANGE_PAGE_BGCOLOR:var v=t.pageId,y=t.bgColor,I=e.findIndex(function(e){return e.get("id")===v});return I!==-1?e.setIn([String(I),"bgColor"],y):e;case l.APPLY_TEMPLATE_TO_PAGES:var T=t.templateDataArray,w=e;return T.forEach(function(e){var t=e.get("pageId"),n=e.get("templateId"),a=e.get("elements"),o=w.findIndex(function(e){return e.get("id")===t});if(o!==-1){var r=w.get(o);w=w.set(String(o),r.merge({template:{tplGuid:n},elements:a}))}}),w;case l.UPDATE_PAGE_TEMPLATE_ID:var E=t.pageId,D=t.templateId,N=e.findIndex(function(e){return e.get("id")===E});return N!==-1?e.setIn([String(N),"template","tplGuid"],D):e;case l.MOVE_PAGE_BEFORE:var S=t.pageId,b=t.beforePageId,A=-1,C=-1;e.forEach(function(e,t){var n=e.get("id");n===S&&(A=t),n===b&&(C=t)});var x=e.get(A),P=e;if(A!==-1&&C!==-1){if(x.get("type")===s.pageTypes.sheet){var L=A+1,_=e.get(A+1);P=P.filter(function(e,t){return t!==A&&t!==L}),P=P.slice(0,C).concat(i.default.List([x,_])).concat(P.slice(C))}else P=P.delete(A),P=P.slice(0,1).concat(P.slice(1,C)).concat(i.default.List([x])).concat(P.slice(C));return P}return e;case l.DELETE_ALL:var O=e;return O.forEach(function(e,n){var a=e.get("elements");O=O.set(String(n),e.merge({elements:(0,c.default)(a,t),template:{tplGuid:""}}))}),O;default:return e}};t.default=p},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_PARAMETER_MAP:var n=t.parameterMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(445),i=a(r),s=n(455),u=a(s),l=n(454),d=a(l),c=n(450),p=a(c),g=n(451),f=a(g),h=n(447),m=a(h),M=n(456),v=a(M),y=n(452),I=a(y),T=n(448),w=a(T),E=n(444),D=a(E),N=n(446),S=a(N),b=n(443),A=a(b);t.default=(0,o.combineReducers)({cover:i.default,setting:u.default,property:d.default,pageArray:f.default,orderInfo:p.default,imageArray:m.default,variableMap:v.default,parameterMap:I.default,imageUsedMap:w.default,deletedEncImgIds:S.default,calendarSetting:D.default,availableOptionMap:A.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s),l=n(16),d=a(l),c=n(56),p=n(31),g=o(p),f=(0,c.getQueryStingObj)(),h=f.initGuid;h&&(g.default.encProjectId=h);var m=i.default.Map({projectId:+h||-1,encProjectIdString:+h?"":h||"",title:f.title,webClientId:f.webClientId,isProjectLoadCompleted:!1,isProjectEdited:!1,mainProjectUid:f.mainProjectUid,crossSellMainEncImgId:f.encImageId,isNewProject:h===-1,crossSell:f.crossSell,createdDate:new Date,isCoverDefaultTemplateUsed:!1,isInnerDefaultTemplateUsed:!1,shouldSaveProjectAfterCrossSell:!1,shouldSaveProjectAfterMyPhotos:!1});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case u.API_SUCCESS:switch(t.apiPattern.name){case d.GET_PROJECT_TITLE:return e.merge({title:t.response.projectName});default:return e}case u.PROJECT_LOAD_COMPLETED:return e.merge({isProjectLoadCompleted:!0});case u.UPDATE_PROJECT_ID:return e.merge({projectId:t.projectId});case u.CHANGE_PROJECT_TITLE:return e.merge({title:t.title});case u.CHANGE_PROJECT_PROPERTY:return e.merge(t.data);default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=o(r),s=n(534),u=o(s),l=n(2),d=o(l),c=n(10),p=a(c),g=n(56),f=(0,g.getQueryStingObj)(),h=(0,u.default)(f,["size","product"]),m=d.default.Map((0,i.default)({},h));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case p.INIT_PROJECT_SETTING:case p.CHANGE_PROJECT_SETTING:return e.merge(t.setting);default:return e}}},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_VARIABLE_MAP:var n=t.variableMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(459),i=a(r),s=n(458),u=a(s);t.default=(0,o.combineReducers)({version:i.default,data:u.default})},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=o(r),s=n(10),u=a(s),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case u.INIT_SPEC_DATA:var n=t.configurableOptionArray,a=t.allOptionMap,o=t.parameterArray,r=t.variableArray,s=t.disableOptionArray,l=t.version;return(0,i.default)({},{version:l,configurableOptionArray:n,allOptionMap:a,parameterArray:o,variableArray:r,disableOptionArray:s});default:return e}};t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=a(o),i=n(10),s=n(16),u=n(20),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case i.API_SUCCESS:switch(t.apiPattern.name){case s.GET_SPEC_VERSION_DATA:var n=(0,r.default)(t,"response.resultData.specVersionData");return(0,u.convertObjIn)(n);default:return e}default:return e}};t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.Map({}),t=arguments[1];switch(t.type){case i.SET_CAPABILITIES:return e.merge(t.capabilities);default:return e}};t.default=s},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),i=o(r),s=n(10),u=a(s),l=n(16),d=a(l),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case u.API_SUCCESS:switch(t.apiPattern.name){case d.GET_USER_ALBUM_ID:case d.ADD_ALBUM:return+(0,i.default)(t.response,"resultData.albumId")||-1;default:return e}default:return e}};t.default=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(463),i=a(r),s=n(464),u=a(s),l=n(465),d=a(l),c=n(461),p=a(c);t.default=(0,o.combineReducers)({qs:i.default,urls:u.default,userInfo:d.default,albumId:p.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=n(20),i=(0,a.fromJS)({initGuid:-1,webClientId:1,product:"",size:"",paper:"",paperThickness:"",title:""}),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case o.PARSER_QUERYSTRING:return e.merge((0,r.convertObjIn)(t.value));default:return e}};t.default=s},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),r=a(o),i=n(11),s=a(i),u=n(2),l=n(10),d=n(16),c=(0,u.fromJS)({}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case l.API_SUCCESS:if(t.apiPattern.name===d.GET_ENV){var n=t.response,a=e.merge(n.env,{liveUpdateCropImage:(0,r.default)(d.IMAGES_CROPPER)((0,s.default)(n,"env"))});return a}return e;default:return e}};t.default=p},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(10),i=n(16),s=n(20),u=n(31),l=a(u),d=(0,o.fromJS)({id:-1}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case r.API_SUCCESS:if(t.apiPattern.name===i.GET_SESSION_USER_INFO){var n=t.response,a=n.userSessionData.user;return a.id?(l.default.customerId=a.id,l.default.token=a.authToken,l.default.timestamp=a.timestamp,e.merge((0,s.convertObjIn)(a))):e.merge((0,s.convertObjIn)(a),{id:-1})}return e;default:return e}};t.default=c},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.fontFamilies.fontFamily,n=[];return t.forEach(function(e){var t=(0,c.default)({},e,{font:(0,g.default)(e.font)?[].concat((0,s.default)(e.font)):[e.font]});n.push(t)}),n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),s=o(i),u=n(11),l=o(u),d=n(12),c=o(d),p=n(44),g=o(p),f=n(10),h=a(f),m=n(16),M=a(m),v=n(20),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case h.API_SUCCESS:switch(t.apiPattern.name){case M.GET_FONTS:var n=(0,l.default)(t,"response.fontConfig");return(0,v.convertObjIn)(r(n));default:return e}default:return e}};t.default=y},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(470),i=a(r),s=n(468),u=a(s),l=n(469),d=a(l);t.default=(0,o.combineReducers)({ratio:i.default,material:u.default,pagination:d.default})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(46),r=a(o),i=n(2),s=n(10),u={img:null,base64:null,size:{width:0,height:0},paddings:{top:0,right:0,bottom:0,left:0}},l=(0,i.fromJS)({cover:JSON.parse((0,r.default)(u)),inner:JSON.parse((0,r.default)(u)),originalMaterials:null,isDownloadCompleted:!1}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case s.UPDATE_COVER_MATERIAL:return e.merge({cover:t.data});case s.UPDATE_INNER_MATERIAL:return e.merge({inner:t.data});case s.SET_ORIGINAL_MATERIALS:return e.merge({originalMaterials:t.data});case s.DOWNLOAD_MATERIALS_STATUS:return e.merge({isDownloadCompleted:t.isCompeleted});default:return e}};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.Map)({prevSheetIndex:-1,prevPageIndex:-1,sheetIndex:0,pageIndex:0,pageId:""}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.SWITCH_SHEET:var n=e.get("sheetIndex");return n!==t.index?e.merge({prevSheetIndex:n,sheetIndex:t.index}):e;case o.SWITCH_PAGE:return e.merge({prevPageIndex:e.get("pageIndex"),pageIndex:t.index,pageId:t.id});default:return e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.Map)({coverWorkspace:0,innerWorkspace:0,innerWorkspaceLandscape:0,previewCoverWorkspace:0,previewInnerWorkspace:0,coverWorkspaceForArrangePages:0,innerWorkspaceForArrangePages:0,coverWorkspaceForUpgrade:0,innerWorkspaceForUpgrade:0,innerWorkspaceForUpgradeLandscape:0}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.UPDATE_RATIO:var n=t.ratios,a={};return n.forEach(function(e){a[e.type]=e.ratio}),e.merge(a);default:return e}};t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=a(o),i=n(22),s=n(10),u=n(472),l=a(u),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:!1},t=arguments[1];switch(t.type){case s.AUTO_ADD_PHOTO_TO_CANVAS:var n=t.params;return(0,r.default)({},e,n);default:return e}};t.default=(0,i.combineReducers)({uploading:l.default,autoAddPhotoToCanvas:d})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),r=a(o),i=n(599),s=a(i),u=n(158),l=a(u),d=n(12),c=a(d),p=n(18),g=n(10),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case g.ADD_IMAGES:var n=(0,s.default)(t.files),a=n.map(function(e){return e.guid=(0,p.guid)(),{file:e}});return[].concat((0,r.default)(e),(0,r.default)(a));case g.RETRY_IMAGE:var o=(0,c.default)([],e),i=o.findIndex(function(e){return e.file.guid==t.guid});return(0,l.default)(o,""+i,(0,c.default)({},o[i],{retryCount:o[i].retryCount?o[i].retryCount+1:1}));case g.CLEAR_IMAGES:return[];case g.DELETE_IMAGE:var u=e.findIndex(function(e){return e.file.guid===t.guid}),d=(0,c.default)([],e);return u!==-1&&(d=[].concat((0,r.default)(e.slice(0,u)),(0,r.default)(e.slice(u+1)))),d;case g.ERROR_TO_FIRST:var f=e.findIndex(function(e){return e.imageId==t.imageId}),h=(0,c.default)([],e),m=h.splice(f,1);return h.unshift(m[0]),h;case g.UPLOAD_COMPLETE:var M=t.fields,v=e.findIndex(function(e){return e.file.guid===M.guid});return v!==-1?[].concat((0,r.default)(e.slice(0,v)),(0,r.default)(e.slice(v+1))):e;default:return e}};t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(462),i=a(r),s=n(467),u=a(s),l=n(479),d=a(l),c=n(485),p=a(c),g=n(488),f=a(g),h=n(471),m=a(h),M=n(486),v=a(M),y=n(466),I=a(y),T=n(492),w=a(T),E=n(460),D=a(E),N=n(490),S=a(N);t.default=(0,o.combineReducers)({env:i.default,global:u.default,modals:d.default,notifications:p.default,sidebar:f.default,images:m.default,price:v.default,fontList:I.default,template:w.default,capabilities:D.default,styles:S.default})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=r.default.Map({isShown:!1,title:"",message:"",onButtonClick:function(){},closeAlertModal:function(){}}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_ALERT_MODAL:return e.merge(t.alertData,{isShown:!0});case i.HIDE_ALERT_MODAL:return s;default:return e}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=r.default.Map({isShown:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CLONE_MODAL:return e.merge({isShown:!0});case i.HIDE_CLONE_MODAL:return e.merge({isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=r.default.Map({isShown:!1,hideOnOk:!0,onOkClick:function(){},closeConfirmModal:function(){},confirmMessage:""}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CONFIRM:return e.merge(t.confirmData,{isShown:!0});case i.HIDE_CONFIRM:return s;default:return e}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=r.default.Map({isShown:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CONTACT_US_MODAL:return e.merge({isShown:!0});case i.HIDE_CONTACT_US_MODAL:return e.merge({isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.Map)({isShown:!1,imageEditApiTemplate:"",imageName:"",encImgId:"",imageWidth:0,imageHeight:0,elementWidth:0,elementHeight:0,crop:{},onDoneClick:function(){},onCancelClick:function(){}}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.SHOW_IMAGE_EDIT_MODAL:return e.merge(t.data,{isShown:!0});case o.HIDE_IMAGE_EDIT_MODAL:return e.merge({isShown:!1});default:return e}};t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(480),i=a(r),s=n(483),u=a(s),l=n(476),d=a(l),c=n(484),p=a(c),g=n(474),f=a(g),h=n(477),m=a(h),M=n(475),v=a(M),y=n(481),I=a(y),T=n(478),w=a(T),E=n(482),D=a(E);t.default=(0,o.combineReducers)({loadings:i.default,upgradeModal:u.default,confirmModal:d.default,upload:p.default,contactUsModal:m.default,imageEditModal:w.default,alertModal:f.default,cloneModal:v.default,previewModal:I.default,textEditModal:D.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.fromJS)({isShow:!1,isModalShow:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.SHOW_LOADING:return e.merge({isShow:!0,isModalShow:t.isModalShow||!1});case o.HIDE_LOADING:return e.merge({isShow:!1});default:return e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.Map)({isShown:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.SHOW_PREVIEW:return e.merge(t.data,{isShown:!0});case o.HIDE_PREVIEW:return e.merge({isShown:!1});default:return e}};t.default=i},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s),l=i.default.Map({isShown:!1}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case u.SHOW_TEXT_EDIT_MODAL:var n=t.data;return n?e.merge(t.data,{isShown:!0}):i.default.Map({isShown:!0});case u.HIDE_TEXT_EDIT_MODAL:return e.merge({isShown:!1});default:return e}};t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=a(o),i=n(10),s=r.default.Map({isShown:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_UPGRADE:return e.merge({isShown:!0,saveFun:t.upgradeFun});case i.HIDE_UPGRADE:return e.merge({isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=(0,a.Map)({isShown:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case o.TOGGLE_UPLOAD:return e.merge({isShown:t.status});default:return e}};t.default=i},function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=o(r),s=n(10),u=a(s),l=null,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.ADD_NOTIFICATION:var n=t.data;return l.addNotification(n),e;case u.REMOVE_NOTIFICATION:var a=t.uid;return l.removeNotification(a),e;case u.CLEAR_NOTIFICATION:return l.clearNotifications(),e;case u.INIT_NOTIFICATION_SYSTEM:l=t.notificationSystem;default:return e}};t.default=d},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(487),i=a(r);t.default=(0,o.combineReducers)({price:i.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(10),r=n(20),i=n(16),s=(0,a.Map)({}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.API_SUCCESS:switch(t.apiPattern.name){case i.GET_PRODUCT_PRICE:var n=t.response;return e.merge((0,r.convertObjIn)(n.data));default:return e}default:return e}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(489),i=a(r);t.default=(0,o.combineReducers)({tabIndex:i.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];switch(t.type){case a.CHANGE_TAB_IN_SIDEBAR:return t.tabIndex;default:return e}};t.default=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=a(o),i=n(10),s=n(16),u=n(20),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case i.API_SUCCESS:switch(t.apiPattern.name){case s.GET_STYLE_LIST:var n=t.response,a=(0,u.convertObjIn)(n.styles.style);return(0,r.default)([],a);default:return e}default:return e}};t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(45),r=a(o),i=n(11),s=a(i),u=n(12),l=a(u),d=(n(32),n(10)),c=n(16),p=n(55),g=n(39),f=(a(g),n(20),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case d.API_SUCCESS:switch(t.apiPattern.name){case c.APPLY_LAYOUT:var n=t.response,a=(0,s.default)(t,"apiPattern.params.templateIds"),o=(0,s.default)(t,"apiPattern.params.size"),i=(0,p.convertResultToJson)(n),u=(0,p.formatTemplateInstance)(i,a,o);return l.default.apply(void 0,[{},e].concat((0,r.default)(u)));default:return e}default:return e}});t.default=f},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),r=n(494),i=a(r),s=n(491),u=a(s),l=n(493),d=a(l);t.default=(0,o.combineReducers)({list:i.default,details:u.default,isInApplyingTemplate:d.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case a.IS_IN_APPLY_TEMPLATE:return t.value;default:return e}};t.default=o},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),r=a(o),i=n(10),s=(n(16),n(20),{coverTemplateList:[],innerTemplateList:[],coverDefaultTemplateGuid:"",innerDefaultTemplateGuid:""}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SET_TEMPLATE_LIST:var n={};return(0,r.default)(n,t.ListInfo),n;default:return e}};t.default=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[(0,i.applyMiddleware)(m.default),(0,i.applyMiddleware)(l.default),(0,i.applyMiddleware)(f.default)],n=i.compose,a=n.apply(void 0,t)(i.createStore),o=a(p.default,e);return o}Object.defineProperty(t,"__esModule",{value:!0});var r=n(46);a(r);t.default=o;var i=n(22),s=n(2),u=(a(s),n(572)),l=a(u),d=n(571),c=(a(d),n(442)),p=a(c),g=n(25),f=a(g),h=n(441),m=a(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computedWorkSpaceOffset=t.updateWorkspaceRatio=void 0;var a=n(76),o=n(9),r=n(146),i=function(e,t){var n=0,o=(0,a.getSize)().width,r=376,i=o-40,s=Math.round(i/r),u=Math.floor((o-40-20*(s-1)-20)/s);return i<=400&&(u=360),e&&e.width&&(n=u/Math.max(e.width,e.height)),n},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,a=t?200:123;return e&&e.width&&(n=a/e.width),n};t.updateWorkspaceRatio=function(e,t,n,a){var u=n||{},l=u.top,d=void 0===l?130:l,c=u.right,p=void 0===c?0:c,g=u.bottom,f=void 0===g?150:g,h=u.left,m=void 0===h?320:h,M=(0,r.computedWorkSpaceRatio)(t.coverBgParams,{top:d,right:p,bottom:f,left:m},o.percent.lg),v={width:t.innerBgParams.width,height:t.innerBgParams.height*o.innerPageHeightShowRatio[a]},y=(0,r.computedWorkSpaceRatio)(v,{top:d,right:p,bottom:f,left:m},o.percent.lg),I=(0,r.computedWorkSpaceRatio)(t.innerBgParamsLandscape,{top:d,right:p,bottom:f,left:m},o.percent.lg),T=i(t.allPageCoverBgParams,a),w=i(t.allPageInnerBgParams,a),E=s(t.allPageCoverBgParams),D=s(t.allPageInnerBgParams),N=s(t.innerBgParamsLandscape,!0);e.updateRatio([{type:o.ratioTypes.coverWorkspace,ratio:M},{type:o.ratioTypes.innerWorkspace,ratio:y},{type:o.ratioTypes.innerWorkspaceLandscape,ratio:I},{type:o.ratioTypes.coverWorkspaceForArrangePages,ratio:T},{type:o.ratioTypes.innerWorkspaceForArrangePages,ratio:w},{type:o.ratioTypes.coverWorkspaceForUpgrade,ratio:E},{type:o.ratioTypes.innerWorkspaceForUpgrade,ratio:D},{type:o.ratioTypes.innerWorkspaceForUpgradeLandscape,ratio:N}])},t.computedWorkSpaceOffset=function(e,t){var n=150,a=40,r=320,i=130;switch(e){case o.productTypes.WC:n=t?100:77,i=t?150:130;break;case o.productTypes.DC:n=100,i=180;break;case o.productTypes.LC:n=100,i=180}return{top:n,right:a,bottom:i,left:r}}},function(e,t,n){"use strict";function a(e){var t=Math.round((0,o.getPtByPx)(e));return t>i?i:t<r?r:t}Object.defineProperty(t,"__esModule",{value:!0}),t.getFontSizeInPt=a;var o=n(18),r=4,i=120},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e/2,r=t/2,i=(o-r)/e,s=(o+n/2)/e;return a?(i=1-r/e,s=1,[i,s]):[i,s]}function r(e,t,n,a,o,r,i){var s=e;i||(s=c.default.Map({id:e.get("id"),type:e.get("type"),x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height"),encImgId:e.get("encImgId")}));var u=e.get("px"),l=e.get("px")+e.get("pw"),d=a/2;return r&&l<t?s=s.merge({x:e.get("x")-d}):l>t&&l<n||u>t&&u<n||u<t&&l>n?s=s.merge({x:e.get("px")*o,width:e.get("pw")*o}):u>n&&(s=s.merge({x:e.get("x")+(i?d:a)})),s}function i(e,t,n,a){var i=e.get("width"),s=e.get("containers"),u=null,d=null,p=null;s.forEach(function(e){var t=e.get("type");switch(t){case"Full":u=e;break;case"Spine":d=e;break;case"Back":p=e}});var f=d.get("bleed"),h=n.getIn(["spineWidth","baseValue"]),m=d.get("width")-(f.get("left")+f.get("right")),M=Boolean(p),v=o(i,m,h,M),y=(0,l.default)(v,2),I=y[0],T=y[1],w=c.default.List(),E=c.default.List();u&&(E=E.concat(u.get("elements"))),p&&(E=E.concat(p.get("elements")));var D=Boolean(p),N=!1;return E.forEach(function(e){var n=r(e,I,T,a,i,D,N);w=w.push((0,g.default)(n,u||p,t))}),w}function s(e,t,n,a){var i=e.get("width"),s=e.get("containers"),u=null,d=null;
s.forEach(function(e){var t=e.get("type");switch(t){case"cover":u=e}});var p=d.get("width")-(spineBleed.get("left")+spineBleed.get("right")),f=n.getIn(["spineWidth","baseValue"]),h=p-f,m=i-h,M=f,v=o(m,M,f),y=(0,l.default)(v,2),I=y[0],T=y[1],w=c.default.List(),E=!0,D=!0;return a.forEach(function(e){var n=r(e,I,T,h,i,E,D);w=w.push((0,g.default)(n,u,t))}),w}Object.defineProperty(t,"__esModule",{value:!0});var u=n(38),l=a(u);t.getUpdatedCoverElementsOnSheetNumChange=i,t.getUpdatedCoverElementsOnApplyTemplate=s;var d=n(2),c=a(d),p=n(89),g=a(p)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initGlobalVariables=function(){var e=window.__app||{};window.__app=e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.inPointInBox=function(e,t){var o=t.x,r=t.y,i=t.width,s=t.height,u=t.degree,l={x:o+i/2,y:r+s/2},d=n(e,l,-u);return a(d,t)},function(e,t,n){var a=n*Math.PI/180,o=t.x,r=t.y,i=e.x-o,s=e.y-r;return{x:i*Math.cos(a)-s*Math.sin(a)+o,y:i*Math.sin(a)+s*Math.cos(a)+r}}),a=function(e,t){var n=t.x,a=t.y,o=t.width,r=t.height;return e.x>n&&e.x<n+o&&e.y>a&&e.y<a+r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.toCanvas=void 0;var o=n(14),r=a(o),i=(n(112),n(292));t.toCanvas=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"base64",a=new r.default(function(a,o){if(e){var r=e.width,s=e.height;if(r&&s){var u=t||r,l=u*s/r;if(e)if(n&&"blob"===n)(0,i.toObjectUrl)(e).then(function(t){a({url:t,canvas:e})});else{var d=document.createElement("canvas");d.width=u,d.height=l;var c=d.getContext("2d");c.drawImage(e,0,0,r,s,0,0,u,l),a({url:d.toDataURL().replace("data:image/png;base64,",""),canvas:e})}}else o()}else o()});return a}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.transform=function(e,t){var n=e.x,a=e.y,o=e.width,r=e.height,i=Math.sqrt(Math.pow(o,2)+Math.pow(r,2))/2,s=Math.round(180*Math.atan(r/o)/Math.PI),u=180-t-s,l=s-t,d=90-t,c=t,p=o/2,g=r/2,f=n+p,h=a+g,m={x:f+i*Math.cos(u*Math.PI/180),y:h-i*Math.sin(u*Math.PI/180)},M={x:f+g*Math.cos(d*Math.PI/180),y:h-g*Math.sin(d*Math.PI/180)},v={x:f+i*Math.cos(l*Math.PI/180),y:h-i*Math.sin(l*Math.PI/180)},y={x:f+p*Math.cos(c*Math.PI/180),y:h+p*Math.sin(c*Math.PI/180)},I={x:f-i*Math.cos(u*Math.PI/180),y:h+i*Math.sin(u*Math.PI/180)},T={x:f-g*Math.sin(c*Math.PI/180),y:h+g*Math.cos(c*Math.PI/180)},w={x:f-i*Math.cos(l*Math.PI/180),y:h+i*Math.sin(l*Math.PI/180)},E={x:f-p*Math.cos(c*Math.PI/180),y:h-p*Math.sin(c*Math.PI/180)},D=Math.min(m.x,v.x,I.x,w.x),N=Math.max(m.x,v.x,I.x,w.x),S=Math.min(m.y,v.y,I.y,w.y),b=Math.max(m.y,v.y,I.y,w.y);return{point:[m,M,v,y,I,T,w,E],width:N-D,height:b-S,left:D,right:N,top:S,bottom:b}}},function(e,t,n){function a(e,t){var n=null==e?0:e.length;return!!n&&o(e,t,0)>-1}var o=n(612);e.exports=a},function(e,t){function n(e,t,n){for(var a=-1,o=null==e?0:e.length;++a<o;)if(n(t,e[a]))return!0;return!1}e.exports=n},function(e,t,n){function a(e,t,n){for(var a=-1,r=e.length;++a<r;){var i=e[a],s=t(i);if(null!=s&&(void 0===u?s===s&&!o(s):n(s,u)))var u=s,l=i}return l}var o=n(161);e.exports=a},function(e,t){function n(e){return e&&e.length?e[0]:void 0}e.exports=n},function(e,t){function n(e,t){return e>t}e.exports=n},function(e,t,n){function a(e,t,n){for(var a=n?i:r,c=e[0].length,p=e.length,g=p,f=Array(p),h=1/0,m=[];g--;){var M=e[g];g&&t&&(M=s(M,u(t))),h=d(M.length,h),f[g]=!n&&(t||c>=120&&M.length>=120)?new o(g&&M):void 0}M=e[0];var v=-1,y=f[0];e:for(;++v<c&&m.length<h;){var I=M[v],T=t?t(I):I;if(I=n||0!==I?I:0,!(y?l(y,T):a(m,T,n))){for(g=p;--g;){var w=f[g];if(!(w?l(w,T):a(e[g],T,n)))continue e}y&&y.push(T),m.push(I)}}return m}var o=n(611),r=n(503),i=n(504),s=n(97),u=n(176),l=n(615),d=Math.min;e.exports=a},function(e,t,n){function a(e,t,n,d,c){e!==t&&i(t,function(i,l){if(u(i))c||(c=new o),s(e,t,l,n,a,d,c);else{var p=d?d(e[l],i,l+"",e,t,c):void 0;void 0===p&&(p=i),r(e,l,p)}},l)}var o=n(585),r=n(151),i=n(174),s=n(510),u=n(69),l=n(67);e.exports=a},function(e,t,n){function a(e,t,n,a,v,y,I){var T=e[n],w=t[n],E=I.get(w);if(E)return void o(e,n,E);var D=y?y(T,w,n+"",e,t,I):void 0,N=void 0===D;if(N){var S=d(w),b=!S&&p(w),A=!S&&!b&&m(w);D=w,S||b||A?d(T)?D=T:c(T)?D=s(T):b?(N=!1,D=r(w,!0)):A?(N=!1,D=i(w,!0)):D=[]:h(w)||l(w)?(D=T,l(T)?D=M(T):(!f(T)||a&&g(T))&&(D=u(w))):N=!1}N&&(I.set(w,D),v(D,w,a,y,I),I.delete(w)),o(e,n,D)}var o=n(151),r=n(616),i=n(617),s=n(618),u=n(619),l=n(586),d=n(44),c=n(155),p=n(582),g=n(178),f=n(69),h=n(179),m=n(587),M=n(536);e.exports=a},function(e,t,n){function a(e,t,n){var a=-1;t=o(t.length?t:[d],u(r));var c=i(e,function(e,n,r){var i=o(t,function(t){return t(e)});return{criteria:i,index:++a,value:e}});return s(c,function(e,t){return l(e,t,n)})}var o=n(97),r=n(175),i=n(613),s=n(515),u=n(176),l=n(518),d=n(95);e.exports=a},function(e,t,n){function a(e,t){return o(e,t,function(t,n){return r(e,n)})}var o=n(513),r=n(620);e.exports=a},function(e,t,n){function a(e,t,n){for(var a=-1,s=t.length,u={};++a<s;){var l=t[a],d=o(e,l);n(d,l)&&r(u,i(l,e),d)}return u}var o=n(592),r=n(152),i=n(167);e.exports=a},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t,n){function a(e){return o(e)?e:[]}var o=n(155);e.exports=a},function(e,t,n){function a(e,t){if(e!==t){var n=void 0!==e,a=null===e,r=e===e,i=o(e),s=void 0!==t,u=null===t,l=t===t,d=o(t);if(!u&&!d&&!i&&e>t||i&&s&&l&&!u&&!d||a&&s&&l||!n&&l||!r)return 1;if(!a&&!i&&!d&&e<t||d&&n&&r&&!a&&!i||u&&n&&r||!s&&r||!l)return-1}return 0}var o=n(161);e.exports=a},function(e,t,n){function a(e,t,n){for(var a=-1,r=e.criteria,i=t.criteria,s=r.length,u=n.length;++a<s;){var l=o(r[a],i[a]);if(l){if(a>=u)return l;var d=n[a];return l*("desc"==d?-1:1)}}return e.index-t.index}var o=n(517);e.exports=a},function(e,t,n){function a(e,t,n,a){return void 0===e||o(e,r[n])&&!i.call(a,n)?t:e}var o=n(165),r=Object.prototype,i=r.hasOwnProperty;e.exports=a},function(e,t,n){var a=n(514),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=a(o);e.exports=r},function(e,t){function n(e){return"\\"+a[e]}var a={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function a(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,s=r(a.length-t,0),u=Array(s);++i<s;)u[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(u),o(e,this,l)}}var o=n(150),r=Math.max;e.exports=a},function(e,t){var n=/<%-([\s\S]+?)%>/g;e.exports=n},function(e,t){var n=/<%([\s\S]+?)%>/g;e.exports=n},522,function(e,t,n){var a=n(162),o=n(153),r=n(67),i=o(function(e,t,n,o){a(t,r(t),e,o)});e.exports=i},function(e,t,n){var a=n(150),o=n(65),r=n(157),i=o(function(e,t){try{return a(e,void 0,t)}catch(e){return r(e)?e:new Error(e)}});e.exports=i},function(e,t,n){function a(e){return e=r(e),e&&s.test(e)?e.replace(i,o):e}var o=n(520),r=n(169),i=/[&<>"']/g,s=RegExp(i.source);e.exports=a},function(e,t,n){var a=n(97),o=n(508),r=n(65),i=n(516),s=r(function(e){var t=a(e,i);return t.length&&t[0]===e[0]?o(t):[]});e.exports=s},function(e,t,n){function a(e,t){return o(e,t)}var o=n(593);e.exports=a},function(e,t,n){function a(e,t){var n={};return t=i(t,3),r(e,function(e,a,r){o(n,a,t(e,a,r))}),n}var o=n(166),r=n(591),i=n(175);e.exports=a},function(e,t,n){function a(e){return e&&e.length?o(e,i,r):void 0}var o=n(505),r=n(507),i=n(95);e.exports=a},function(e,t,n){var a=n(512),o=n(522),r=o(function(e,t){return null==e?{}:a(e,t)});e.exports=r},function(e,t,n){var a=n(529),o=n(524),r=n(525),i=n(154),s={escape:o,evaluate:r,interpolate:i,variable:"",imports:{_:{escape:a}}};e.exports=s},function(e,t,n){function a(e){return o(e,r(e))}var o=n(162),r=n(67);e.exports=a},function(e,t,n){var a;(function(e,o){!function(r){function i(e){throw new RangeError(L[e])}function s(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function u(e,t){var n=e.split("@"),a="";n.length>1&&(a=n[0]+"@",e=n[1]),e=e.replace(P,".");var o=e.split("."),r=s(o,t).join(".");return a+r}function l(e){for(var t,n,a=[],o=0,r=e.length;o<r;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<r?(n=e.charCodeAt(o++),56320==(64512&n)?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),o--)):a.push(t);return a}function d(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:T}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function g(e,t,n){var a=0;for(e=n?O(e/N):e>>1,e+=O(e/t);e>_*E>>1;a+=T)e=O(e/_);return O(a+(_+1)*e/(e+D))}function f(e){var t,n,a,o,r,s,u,l,p,f,h=[],m=e.length,M=0,v=b,y=S;for(n=e.lastIndexOf(A),n<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&i("not-basic"),h.push(e.charCodeAt(a));for(o=n>0?n+1:0;o<m;){for(r=M,s=1,u=T;o>=m&&i("invalid-input"),l=c(e.charCodeAt(o++)),(l>=T||l>O((I-M)/s))&&i("overflow"),M+=l*s,p=u<=y?w:u>=y+E?E:u-y,!(l<p);u+=T)f=T-p,s>O(I/f)&&i("overflow"),s*=f;t=h.length+1,y=g(M-r,t,0==r),O(M/t)>I-v&&i("overflow"),v+=O(M/t),M%=t,h.splice(M++,0,v)}return d(h)}function h(e){var t,n,a,o,r,s,u,d,c,f,h,m,M,v,y,D=[];for(e=l(e),m=e.length,t=b,n=0,r=S,s=0;s<m;++s)h=e[s],h<128&&D.push(j(h));for(a=o=D.length,o&&D.push(A);a<m;){for(u=I,s=0;s<m;++s)h=e[s],h>=t&&h<u&&(u=h);for(M=a+1,u-t>O((I-n)/M)&&i("overflow"),n+=(u-t)*M,t=u,s=0;s<m;++s)if(h=e[s],h<t&&++n>I&&i("overflow"),h==t){for(d=n,c=T;f=c<=r?w:c>=r+E?E:c-r,!(d<f);c+=T)y=d-f,v=T-f,D.push(j(p(f+y%v,0))),d=O(y/v);D.push(j(p(d,0))),r=g(n,M,a==o),n=0,++a}++n,++t}return D.join("")}function m(e){return u(e,function(e){return C.test(e)?f(e.slice(4).toLowerCase()):e})}function M(e){return u(e,function(e){return x.test(e)?"xn--"+h(e):e})}var v=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);v.global!==v&&v.window!==v&&v.self!==v||(r=v);var y,I=2147483647,T=36,w=1,E=26,D=38,N=700,S=72,b=128,A="-",C=/^xn--/,x=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=T-w,O=Math.floor,j=String.fromCharCode;y={version:"1.4.1",ucs2:{decode:l,encode:d},decode:f,encode:h,toASCII:M,toUnicode:m},a=function(){return y}.call(t,n,t,e),!(void 0!==a&&(e.exports=a))}(this)}).call(t,n(580)(e),function(){return this}())},function(e,t){e.exports='<product-spec version="2.0">\n  <global>\n    <dpi>300</dpi>\n    <imageQualityBufferPercent>30</imageQualityBufferPercent>\n    <imagedimenstions>\n      <imagedimenstion viewWidth="96" viewHeight="96">96x96</imagedimenstion>\n      <imagedimenstion viewWidth="350" viewHeight="350">350x350</imagedimenstion>\n      <imagedimenstion viewWidth="700" viewHeight="700">700x700</imagedimenstion>\n      <imagedimenstion viewWidth="1000" viewHeight="1000">1000x1000</imagedimenstion>\n      <imagedimenstion viewWidth="1500" viewHeight="1500">1500x1500</imagedimenstion>\n    </imagedimenstions>\n    <options>\n      <!-- 台历、挂历产品 -->\n      <optionGroup id="product">\n        <option id="LPS">\n          <title><![CDATA[Little Prints Stand]]></title>\n        </option>\n      </optionGroup>\n\n      <!-- 尺寸 -->\n      <optionGroup id="size">\n        <option id="7X5" name="7X5"/>\n        <option id="8X6" name="8X6"/>\n      </optionGroup>\n\n    </options>\n  </global>\n\n  <configurableOptionMap>\n    <optionMap id="size" keyPattern="product">\n      <entry key="LPS" value="7X5,8X6" />\n    </optionMap>\n  </configurableOptionMap>\n\n  <parameters>\n    <!-- 基础尺寸 -->\n    <parameter id="baseSize" keyPattern="product-size">\n      <entry key="LPS-7X5" widthInInch="5" heightInInch="7.440944881889764" />\n      <entry key="LPS-8X6" widthInInch="5.9842519685" heightInInch="8.425196850" />\n    </parameter>\n\n    <!-- 出血 -->\n    <parameter id="pageBleed" keyPattern="product-size">\n      <entry key="LPS-[7X5,8X6]" top="36" bottom="36" left="36" right="36" />\n    </parameter>\n  </parameters>\n\n  <variables>\n    <variable id="coverForeground" keyPattern="product-size">\n      <entry key="LPS-7X5" width="577" height="915" left="40" top="40" right="40" bottom="135" />\n      <entry key="LPS-8X6" width="632" height="942" left="40" top="40" right="40" bottom="122" />\n    </variable>\n    <variable id="innerForeground" keyPattern="product-size">\n      <entry key="LPS-7X5" width="577" height="915" bottomPageLeft="40" bottomPageTop="40" bottomPageRight="40" bottomPageBottom="135"\n         hwidth="859" hheight="719" hbottomPageLeft="40" hbottomPageTop="40" hbottomPageRight="40" hbottomPageBottom="155" />\n      <entry key="LPS-8X6" width="632" height="942" bottomPageLeft="40" bottomPageTop="40" bottomPageRight="40" bottomPageBottom="122"\n        hwidth="912" hheight="776" hbottomPageLeft="40" hbottomPageTop="40" hbottomPageRight="40" hbottomPageBottom="142" />\n    </variable>\n    <variable id="allPageCoverForeground" keyPattern="product-size">\n      <entry key="LPS-7X5" width="257" height="372" left="10" top="10" right="10" bottom="10" />\n      <entry key="LPS-8X6" width="275" height="380" left="10" top="10" right="10" bottom="10" />\n    </variable>\n    <variable id="allPageInnerForeground" keyPattern="product-size">\n      <entry key="LPS-7X5" width="257" height="372" bottomPageLeft="10" bottomPageTop="10" bottomPageRight="10" bottomPageBottom="10"\n        hwidth="380" hheight="275" hbottomPageLeft="10" hbottomPageTop="10" hbottomPageRight="10" hbottomPageBottom="10" />\n      <entry key="LPS-8X6" width="275" height="380" bottomPageLeft="10" bottomPageTop="10" bottomPageRight="10" bottomPageBottom="10"\n        hwidth="444" hheight="322" hbottomPageLeft="10" hbottomPageTop="10" hbottomPageRight="10" hbottomPageBottom="10" />\n    </variable>\n\n  </variables>\n</product-spec>\n'},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCustomEvent=function(e){var t=this.state.event;return t||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(e){var t=this,a=this.state,r=a.event,i=a.eventOff,s=e.getAttribute("data-event")||r,u=e.getAttribute("data-event-off")||i;s.split(" ").forEach(function(a){e.removeEventListener(a,o),o=n.bind(t,u),e.addEventListener(a,o,!1)}),u&&u.split(" ").forEach(function(n){e.removeEventListener(n,t.hideTooltip),e.addEventListener(n,t.hideTooltip,!1)})},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,a=t.eventOff,r=n||e.getAttribute("data-event"),i=a||e.getAttribute("data-event-off");e.removeEventListener(r,o),i&&e.removeEventListener(i,this.hideTooltip)}};var n=function(e,t){var n=this.state.show,o=this.props.id,r=t.currentTarget.getAttribute("data-iscapture"),i=r&&"true"===r||this.props.isCapture,s=t.currentTarget.getAttribute("currentItem");i||t.stopPropagation(),n&&"true"===s?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),a(t.currentTarget,this.getTargetArray(o)),this.showTooltip(t))},a=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},o=void 0},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.getEffect=function(e){var t=e.getAttribute("data-effect");return t||this.props.effect||"float"}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCapture=function(e){var t=e.getAttribute("data-iscapture");return t&&"true"===t||this.props.isCapture||!1}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.hide=function(e){i(r.default.GLOBAL.HIDE,{target:e})},e.rebuild=function(){i(r.default.GLOBAL.REBUILD)},e.show=function(e){i(r.default.GLOBAL.SHOW,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t={currentTarget:e.detail.target};this.showTooltip(t,!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=e&&e.detail&&e.detail.target&&!0||!1;this.hideTooltip({currentTarget:t&&e.detail.target},t)}}};var o=n(159),r=a(o),i=function(e,t){var n=void 0;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("Event"),n.initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindRemovalTracker=function(){var e=this,t=n();if(null!=t){var a=new t(function(t){var n=!0,a=!1,o=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value,u=!0,l=!1,d=void 0;try{for(var c,p=s.removedNodes[Symbol.iterator]();!(u=(c=p.next()).done);u=!0){var g=c.value;if(g===e.state.currentTarget)return void e.hideTooltip()}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}}}catch(e){a=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}});a.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=a}},e.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}};var n=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(r.default.GLOBAL.HIDE,this.globalHide),window.addEventListener(r.default.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(r.default.GLOBAL.SHOW,this.globalShow),window.addEventListener(r.default.GLOBAL.SHOW,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(r.default.GLOBAL.HIDE,this.globalHide),window.removeEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(r.default.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}};var o=n(159),r=a(o)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top-color:#222;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom-color:#222;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-dark.place-left:after{border-left-color:#222;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-dark.place-right:after{border-right-color:#222;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top-color:#8DC572;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-success.place-bottom:after{border-bottom-color:#8DC572;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-success.place-left:after{border-left-color:#8DC572;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-success.place-right:after{border-right-color:#8DC572;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top-color:#F0AD4E;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom-color:#F0AD4E;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-warning.place-left:after{border-left-color:#F0AD4E;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-warning.place-right:after{border-right-color:#F0AD4E;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top-color:#BE6464;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-error.place-bottom:after{border-bottom-color:#BE6464;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-error.place-left:after{border-left-color:#BE6464;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-error.place-right:after{border-right-color:#BE6464;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top-color:#337AB7;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-info.place-bottom:after{border-bottom-color:#337AB7;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-info.place-left:after{border-left-color:#337AB7;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-info.place-right:after{border-right-color:#337AB7;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top-color:#fff;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-light.place-bottom:after{border-bottom-color:#fff;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-light.place-left:after{border-left-color:#fff;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-light.place-right:after{border-right-color:#fff;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}'},function(e,t){"use strict";function n(e){var t={};return Object.keys(e).filter(function(e){return/(^aria-\w+$|^role$)/.test(e)}).forEach(function(n){t[n]=e[n]}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseAria=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,s,u,l){var d=i.clientWidth,c=i.clientHeight,p=n(e,t,u),g=p.mouseX,f=p.mouseY,h=a(u,t.clientWidth,t.clientHeight,d,c),m=o(l),M=m.extraOffset_X,v=m.extraOffset_Y,y=window.innerWidth,I=window.innerHeight,T=r(i),w=T.parentTop,E=T.parentLeft,D=function(e){var t=h[e].l;return g+t+M},N=function(e){var t=h[e].r;return g+t+M},S=function(e){var t=h[e].t;return f+t+v},b=function(e){var t=h[e].b;return f+t+v},A=function(){var e=!1,t=void 0;return S("left")<0&&b("left")<=I&&b("bottom")<=I?(e=!0,t="bottom"):b("left")>I&&S("left")>=0&&S("top")>=0&&(e=!0,t="top"),{result:e,newPlace:t}},C=function(){var e=A(),t=e.result,n=e.newPlace;return t&&P().result?{result:!1}:(!t&&D("left")<0&&N("right")<=y&&(t=!0,n="right"),{result:t,newPlace:n})},x=function(){var e=A(),t=e.result,n=e.newPlace;return t&&P().result?{result:!1}:(!t&&N("right")>y&&D("left")>=0&&(t=!0,n="left"),{result:t,newPlace:n})},P=function(){var e=!1,t=void 0;return D("top")<0&&N("top")<=y&&N("right")<=y?(e=!0,t="right"):N("top")>y&&D("top")>=0&&D("left")>=0&&(e=!0,t="left"),{result:e,newPlace:t}},L=function(){var e=P(),t=e.result,n=e.newPlace;return t&&A().result?{result:!1}:(!t&&S("top")<0&&b("bottom")<=I&&(t=!0,n="bottom"),{result:t,newPlace:n})},_=function(){var e=P(),t=e.result,n=e.newPlace;return t&&A().result?{result:!1}:(!t&&b("bottom")>I&&S("top")>=0&&(t=!0,n="top"),{result:t,newPlace:n})},O=C(),j=x(),z=L(),k=_();return"left"===s&&O.result?{isNewState:!0,newState:{place:O.newPlace}}:"right"===s&&j.result?{isNewState:!0,newState:{place:j.newPlace}}:"top"===s&&z.result?{isNewState:!0,newState:{place:z.newPlace}}:"bottom"===s&&k.result?{isNewState:!0,newState:{place:k.newPlace}}:{isNewState:!1,position:{left:parseInt(D(s)-E,10),top:parseInt(S(s)-w,10)}}};var n=function(e,t,n){var a=t.getBoundingClientRect(),o=a.top,r=a.left,i=t.clientWidth,s=t.clientHeight;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:r+i/2,mouseY:o+s/2}},a=function(e,t,n,a,o){var r=void 0,i=void 0,s=void 0,u=void 0,l=3,d=2,c=12;return"float"===e?(r={l:-(a/2),r:a/2,t:-(o+l+d),b:-l},s={l:-(a/2),r:a/2,t:l+c,b:o+l+d+c},u={l:-(a+l+d),r:-l,t:-(o/2),b:o/2},i={l:l,r:a+l+d,t:-(o/2),b:o/2}):"solid"===e&&(r={l:-(a/2),r:a/2,t:-(n/2+o+d),b:-(n/2)},s={l:-(a/2),r:a/2,t:n/2,b:n/2+o+d},u={l:-(a+t/2+d),r:-(t/2),t:-(o/2),b:o/2},i={l:t/2,r:a+t/2+d,t:-(o/2),b:o/2}),{top:r,bottom:s,left:u,right:i}},o=function(e){var t=0,n=0;"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/\'/g,'"')));for(var a in e)"top"===a?n-=parseInt(e[a],10):"bottom"===a?n+=parseInt(e[a],10):"left"===a?t-=parseInt(e[a],10):"right"===a&&(t+=parseInt(e[a],10));return{extraOffset_X:t,extraOffset_Y:n}},r=function(e){for(var t=e;t&&"none"===window.getComputedStyle(t).getPropertyValue("transform");)t=t.parentElement;var n=t&&t.getBoundingClientRect().top||0,a=t&&t.getBoundingClientRect().left||0;return{parentTop:n,parentLeft:a}}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){if(t)return t;if(void 0!==n&&null!==n)return n;if(null===n)return null;var o=/<br\s*\/?>/;return a&&"false"!==a&&o.test(e)?e.split(o).map(function(e,t){return r.default.createElement("span",{key:t,className:"multi-line"},e)}):e};var o=n(3),r=a(o)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length;return e.hasOwnProperty?Array.prototype.slice.call(e):new Array(t).fill().map(function(t){return e[t]})}},function(e,t,n){(function(t){var a="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,o=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,r=o&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,e.exports=n(573),o)a.regeneratorRuntime=r;else try{delete a.regeneratorRuntime}catch(e){a.regeneratorRuntime=void 0}}).call(t,function(){return this}())},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImFfX3gyQl9fem5vIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwLjEgMTgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMC4xIDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNOS4xLDQuOCIvPgoJPGcgaWQ9ImEiPgoJCTxwb2x5Z29uIGlkPSJhXzFfIiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjAsMC42IDAsMy4xIDAsMy4xIDAsMTcuNCAzLjEsMTcuNCA0LjIsMTcuNCA4LjQsMTcuNCA4LjQsMTMuMiA0LjIsMTMuMiA0LjIsNC44IAoJCQkxMi43LDQuOCAxMi43LDE3LjQgMTYuOSwxNy40IDE2LjksNC44IDE2LjksMy4xIDE2LjksMC42IAkJIi8+Cgk8L2c+Cgk8ZyBpZD0iem5vIj4KCQk8cGF0aCBpZD0ieiIgZmlsbD0iI0ZGRkZGRiIgZD0iTTUwLjEsMTYuM3YxLjFIMzMuN0w0Ny41LDEuN0gzMy43VjAuNmgxNi4zTDM2LjQsMTYuM0g1MC4xeiIvPgoJCTxwYXRoIGlkPSJuIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTguNSw5djguNGgtMS4xVjljMC0yLjUsMC45LTQuNiwyLjYtNi40QzYxLjgsMC45LDYzLjksMCw2Ni40LDBjMi41LDAsNC42LDAuOSw2LjQsMi42CgkJCWMxLjgsMS44LDIuNiwzLjksMi42LDYuNHY4LjRoLTEuMVY5YzAtMi4yLTAuOC00LTIuMy01LjZjLTEuNS0xLjUtMy40LTIuMy01LjYtMi4zYy0yLjIsMC00LDAuOC01LjYsMi4zQzU5LjMsNSw1OC41LDYuOCw1OC41LDl6CgkJCSIvPgoJCTxwYXRoIGlkPSJvIiBmaWxsPSIjRkZGRkZGIiBkPSJNOTcuNSwyLjZjMS44LDEuOCwyLjYsMy45LDIuNiw2LjRjMCwyLjUtMC45LDQuNi0yLjYsNi40Yy0xLjgsMS44LTMuOSwyLjYtNi40LDIuNgoJCQljLTIuNSwwLTQuNi0wLjktNi40LTIuNmMtMS44LTEuOC0yLjYtMy45LTIuNi02LjRjMC0yLjUsMC45LTQuNiwyLjYtNi40Qzg2LjUsMC45LDg4LjYsMCw5MS4xLDBDOTMuNiwwLDk1LjcsMC45LDk3LjUsMi42egoJCQkgTTk2LjcsMTQuNkM5OC4yLDEzLDk5LDExLjIsOTksOWMwLTIuMi0wLjgtNC0yLjMtNS42Yy0xLjUtMS41LTMuNC0yLjMtNS42LTIuM2MtMi4yLDAtNCwwLjgtNS42LDIuM0M4NCw1LDgzLjIsNi44LDgzLjIsOQoJCQljMCwyLjIsMC44LDQsMi4zLDUuNmMxLjUsMS41LDMuNCwyLjMsNS42LDIuM0M5My4zLDE2LjksOTUuMSwxNi4xLDk2LjcsMTQuNnoiLz4KCTwvZz4KPC9nPgo8L3N2Zz4K";
},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAwcHgiIGhlaWdodD0iMTAwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRGVza3RvcC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTEwLjAwMDAwMCwgLTQxOS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTAuMDAwMDAwLCA0MTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMi1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3LjAwMDAwMCwgMjcuMDAwMDAwKSIgZmlsbD0iIzdCN0I3QiI+CiAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IkxvYWRpbmfigKYtQ29weSIgZm9udC1mYW1pbHk9IkdvdGhhbS1Cb29rLCBHb3RoYW0iIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSIzMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMC4xNTIiIHk9IjQzIj5Mb2FkaW5n4oCmPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9ImxvYWRpbmctKDIpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMy4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuODg5NTAwMTcsMTEuNzQ3MDYzOCBMMC42NzU4NzAzMDYsMTEuNzQ3MDYzOCBDMC4zMTI1MDU4NzMsMTEuNzQ3MDYzOCAwLjAxNTIzMDM5MDUsMTEuNDQ5NDcxOCAwLjAxNTIzMDM5MDUsMTEuMDg1NzcwOSBMMC4wMTUyMzAzOTA1LDExLjA2NzAxMjUgQzAuMDE1MjMwMzkwNSwxMC43MDMyODg5IDAuMzEyNTI4NTU0LDEwLjQwNTcxOTYgMC42NzU4NzAzMDYsMTAuNDA1NzE5NiBMNC44ODk1MDAxNywxMC40MDU3MTk2IEM1LjI1Mjg2NDYxLDEwLjQwNTcxOTYgNS41NTAxNDAwOSwxMC43MDMzMTE2IDUuNTUwMTQwMDksMTEuMDY3MDEyNSBMNS41NTAxNDAwOSwxMS4wODU3NzA5IEM1LjU1MDE2Mjc5LDExLjQ0OTQ5NDUgNS4yNTI4NjQ2MSwxMS43NDcwNjM4IDQuODg5NTAwMTcsMTEuNzQ3MDYzOCBaIE0yMS4zMjAzNTE2LDExLjc0NzA2MzggTDE3LjEwNjY5OTEsMTEuNzQ3MDYzOCBDMTYuNzQzMzM0NiwxMS43NDcwNjM4IDE2LjQ0NjA1OTIsMTEuNDQ5NDcxOCAxNi40NDYwNTkyLDExLjA4NTc3MDkgTDE2LjQ0NjA1OTIsMTEuMDY3MDEyNSBDMTYuNDQ2MDU5MiwxMC43MDMyODg5IDE2Ljc0MzM1NzMsMTAuNDA1NzE5NiAxNy4xMDY2OTkxLDEwLjQwNTcxOTYgTDIxLjMyMDMyODksMTAuNDA1NzE5NiBDMjEuNjgzNjkzNCwxMC40MDU3MTk2IDIxLjk4MDk2ODksMTAuNzAzMzExNiAyMS45ODA5Njg5LDExLjA2NzAxMjUgTDIxLjk4MDk2ODksMTEuMDg1NzcwOSBDMjEuOTgwOTkxNiwxMS40NDk0OTQ1IDIxLjY4MzY5MzQsMTEuNzQ3MDYzOCAyMS4zMjAzNTE2LDExLjc0NzA2MzggWiBNMjAuMzY3MjAwNiw2LjM4MzUyNjU1IEwxNi42OTk4NDI1LDguNDYwNDcwNzUgQzE2LjM4MzYwMDIsOC42Mzk1NjE5MSAxNS45Nzg0NDUzLDguNTI3MTAxOTEgMTUuNzk5NTMwOSw4LjIxMDU0NzA1IEwxNS43OTAyOTcxLDguMTk0MjE4NTUgQzE1LjYxMTM4MjcsNy44Nzc2NjM2OSAxNS43MjM3MzE3LDcuNDcyMTA4MjkgMTYuMDM5OTc0LDcuMjkzMDE3MTIgTDE5LjcwNzMzMjEsNS4yMTYwNzI5MiBDMjAuMDIzNTc0NCw1LjAzNjk4MTc1IDIwLjQyODcyOTQsNS4xNDk0NDE3NSAyMC42MDc2NDM3LDUuNDY1OTk2NjIgTDIwLjYxNjg3NzYsNS40ODIzMjUxMSBDMjAuNzk1ODE0Niw1Ljc5ODg3OTk4IDIwLjY4MzQ2NTYsNi4yMDQ0MTI2OCAyMC4zNjcyMDA2LDYuMzgzNTI2NTUgWiBNMTYuNzk0MzU5LDIuMzQzMjEwODkgTDE0LjYyNDE3NzcsNS45NTg1NzY3OCBDMTQuNDM3MDI3Nyw2LjI3MDMzOTgyIDE0LjAyOTA4MjIsNi4zNzIxNDg4MiAxMy43MTc2MjcsNi4xODQ4MzY2NCBMMTMuNzAxNTY0Miw2LjE3NTE2MjE5IEMxMy4zOTAxMDg5LDUuOTg3ODI3MjkgMTMuMjg4NDAwNSw1LjU3OTQ3ODU1IDEzLjQ3NTUyNzcsNS4yNjc3MTU1IEwxNS42NDU3MDkxLDEuNjUyMzQ5NjIgQzE1LjgzMjg1OSwxLjM0MDU4NjU3IDE2LjI0MDgwNDUsMS4yMzg3Nzc1OCAxNi41NTIyNTk4LDEuNDI2MDg5NzUgTDE2LjU2ODMyMjYsMS40MzU3NDE1MSBDMTYuODc5Nzc3OCwxLjYyMzA5OTExIDE2Ljk4MTUwOSwyLjAzMTQ0Nzg1IDE2Ljc5NDM1OSwyLjM0MzIxMDg5IFogTTExLjY1OTU5MDMsMC42ODkxMjcxMiBMMTEuNjM3ODEwMiw0LjkwNjg3NjEgQzExLjYzNTkyNzIsNS4yNzA1NzY5NSAxMS4zMzcxMDg5LDUuNTY2NjI0NjcgMTAuOTczNzY3Miw1LjU2NDczOTc0IEwxMC45NTUwMjcyLDUuNTY0NjQ4OTEgQzEwLjU5MTY4NTUsNS41NjI3NjM5OSAxMC4yOTU5MzAxLDUuMjYzNjUwNDEgMTAuMjk3ODEzMSw0Ljg5OTk0OTU1IEwxMC4zMTk1OTMyLDAuNjgyMjAwNTc1IEMxMC4zMjE0NzYzLDAuMzE4NDk5NzE3IDEwLjYyMDI5NDUsMC4wMjI0NTIwMDU1IDEwLjk4MzYzNjMsMC4wMjQzMzY5MjczIEwxMS4wMDIzNzYyLDAuMDI0NDI3NzYyNCBDMTEuMzY1NzE4LDAuMDI2Mjg5OTgxIDExLjY2MTQ3MzQsMC4zMjU0MjYyNjIgMTEuNjU5NTkwMywwLjY4OTEyNzEyIFogTTYuNDYwOTEwNzEsMS42NDQ4MzI1OSBMOC41NzYwMDY2Miw1LjI5Mjc2NDYzIEM4Ljc1ODM5MjE2LDUuNjA3MzQzNzIgOC42NTA1MTI2Nyw2LjAxNDEwMjc3IDguMzM2MjQ0MTcsNi4xOTY2Njg1NSBMOC4zMjAwMjI1NCw2LjIwNjA5MzIgQzguMDA1NzU0MDYsNi4zODg2NTkwMSA3LjU5OTM5NjYzLDYuMjgwNjcyODkgNy40MTcwMTExMSw1Ljk2NjA5Mzc5IEw1LjMwMTkxNTIsMi4zMTgxNjE3NCBDNS4xMTk1Mjk2NSwyLjAwMzU4MjY2IDUuMjI3NDA5MTQsMS41OTY4MjM2MSA1LjU0MTY3NzY1LDEuNDE0MjU3ODMgTDUuNTU3ODk5MjcsMS40MDQ4MzMxNyBDNS44NzIxNjc3NSwxLjIyMjI2NzM5IDYuMjc4NTAyNDgsMS4zMzAyNzYyMSA2LjQ2MDkxMDcxLDEuNjQ0ODMyNTkgWiBNMi4zNDIwMjQyLDUuMjA3Mzc0OTkgTDUuOTk1OTA1ODcsNy4zMDc5ODMwMiBDNi4zMTA5OTExLDcuNDg5MTE4MDggNi40MjA3MzA5OSw3Ljg5NTM3NzUgNi4yMzk3NzQ3Niw4LjIxMDc3NDE1IEw2LjIzMDQ1MDE2LDguMjI3MDM0NTEgQzYuMDQ5NDkzOTUsOC41NDI0MzExNiA1LjY0MzYzNTY1LDguNjUyMjc5NTEgNS4zMjg1NTA0Miw4LjQ3MTE0NDQzIEwxLjY3NDY0NjA2LDYuMzcwNTU5MTMgQzEuMzU5NTYwODMsNi4xODk0MjQwNyAxLjI0OTgyMDk0LDUuNzgzMTY0NjQgMS40MzA3NzcxNyw1LjQ2Nzc2OCBMMS40NDAxMDE3Nyw1LjQ1MTUwNzY0IEMxLjYyMTA4MDY2LDUuMTM2MDg4MjQgMi4wMjY5Mzg5NCw1LjAyNjIzOTkxIDIuMzQyMDI0Miw1LjIwNzM3NDk5IFogTTE5LjY5MzE1MjQsMTYuNzU1MzkzNyBMMTYuMDQ0MDM1MSwxNC42NDY0OTY1IEMxNS43MjkzNTgyLDE0LjQ2NDYzNDcgMTUuNjIwNTQ4NSwxNC4wNTgxMjU1IDE1LjgwMjIzMDcsMTMuNzQzMTM3NiBMMTUuODExNjAwNywxMy43MjY5IEMxNS45OTMyODI5LDEzLjQxMTkxMjEgMTYuMzk5MzkwOCwxMy4zMDI5OTQ5IDE2LjcxNDA2NzcsMTMuNDg0ODU2NyBMMjAuMzYzMTg0OSwxNS41OTM3NTM5IEMyMC42Nzc4NjE4LDE1Ljc3NTYxNTYgMjAuNzg2NjcxNSwxNi4xODIxMjQ5IDIwLjYwNDk4OTMsMTYuNDk3MTEyNyBMMjAuNTk1NjE5MywxNi41MTMzNTA0IEMyMC40MTM5MTQ0LDE2LjgyODMzODMgMjAuMDA3ODA2NSwxNi45MzcyNTU1IDE5LjY5MzE1MjQsMTYuNzU1MzkzNyBaIE02LjAyNjk2NTE3LDE0LjU5NDQ5MDYgTDIuMzkwNzExNzYsMTYuNzI1NTUyOCBDMi4wNzcxNDY1OCwxNi45MDkzMjIyIDEuNjcwMzgwNzksMTYuODAyODU3NiAxLjQ4Njc5MjgxLDE2LjQ4ODk4MjUgTDEuNDc3MzMyMDgsMTYuNDcyNzkwMyBDMS4yOTM3NDQxLDE2LjE1ODkxNTIgMS40MDAxMDM1MywxNS43NTE3NDc0IDEuNzEzNjY4NywxNS41Njc5NzggTDUuMzQ5OTIyMTIsMTMuNDM2OTE1OCBDNS42NjM0ODcyOSwxMy4yNTMxNDY0IDYuMDcwMjUzMDksMTMuMzU5NjEwOSA2LjI1Mzg0MTA3LDEzLjY3MzQ4NiBMNi4yNjMzMDE4LDEzLjY4OTY3ODMgQzYuNDQ2ODY3MDgsMTQuMDAzNTUzMyA2LjM0MDUzMDM1LDE0LjQxMDcyMTIgNi4wMjY5NjUxNywxNC41OTQ0OTA2IFogTTguNTY1MTM5MjUsMTYuNTc1OTYxOSBMNi40NzY1ODc4MiwyMC4yMzkxNzc4IEM2LjI5NjQ5MzcyLDIwLjU1NTA3NDEgNS44OTA5MzAzOSwyMC42NjYwMTI1IDUuNTc1MzQ2MDIsMjAuNDg1NzQwNCBMNS41NTkwNzkwMSwyMC40NzY0NTIgQzUuMjQzNDk0NjQsMjAuMjk2MTc5OSA1LjEzMjY2NTc2LDE5Ljg5MDIxNTcgNS4zMTI3NTk4NiwxOS41NzQzMTk1IEw3LjQwMTMxMTI5LDE1LjkxMTEwMzYgQzcuNTgxNDA1MzksMTUuNTk1MjA3MyA3Ljk4Njk2ODcyLDE1LjQ4NDI2ODkgOC4zMDI1NTMwOSwxNS42NjQ1NDEgTDguMzE4ODQyNzgsMTUuNjczODI5NCBDOC42MzQ0MDQ0NywxNS44NTQxMjQxIDguNzQ1MjU2MDMsMTYuMjYwMDg4MyA4LjU2NTEzOTI1LDE2LjU3NTk2MTkgWiBNMTEuNjk1MzkxNCwxNy4wOTYzMzkxIEwxMS42Nzk2OTE1LDIxLjMxNDExMDggQzExLjY3ODMzMDMsMjEuNjc3ODM0NCAxMS4zNzk5NDMxLDIxLjk3NDI5MDkgMTEuMDE2NTc4NywyMS45NzI5MjgzIEwxMC45OTc4Mzg3LDIxLjk3Mjg2MDEgQzEwLjYzNDQ3NDMsMjEuOTcxNDk3NiAxMC4zMzgzMTA1LDIxLjY3MjgxNTUgMTAuMzM5NjQ5MSwyMS4zMDkwOTE5IEwxMC4zNTUzNDg5LDE3LjA5MTMyMDIgQzEwLjM1NjcxMDEsMTYuNzI3NTk2NiAxMC42NTUwOTczLDE2LjQzMTE0MDEgMTEuMDE4NDYxOCwxNi40MzI0OCBMMTEuMDM3MjAxNywxNi40MzI1NDgyIEMxMS40MDA1NjYxLDE2LjQzMzkzMzUgMTEuNjk2NzUyNiwxNi43MzI2MTU2IDExLjY5NTM5MTQsMTcuMDk2MzM5MSBaIE0xNC42ODg3MjM5LDE1Ljk4NTQ3ODggTDE2Ljc0OTkzNjgsMTkuNjY0MTgzIEMxNi45Mjc2NzEzLDE5Ljk4MTQxOTEgMTYuODEzODI1LDIwLjM4NjUyMDMgMTYuNDk2OTAyMSwyMC41NjQ0NTMzIEwxNi40ODA1NDQzLDIwLjU3MzYyODEgQzE2LjE2MzYyMTQsMjAuNzUxNTM4NCAxNS43NTg5MjAyLDIwLjYzNzU3OTUgMTUuNTgxMTYyOSwyMC4zMjAzNDM0IEwxMy41MTk5NSwxNi42NDE2MzkyIEMxMy4zNDIyMTU0LDE2LjMyNDQwMzEgMTMuNDU2MDYxOCwxNS45MTkzMDE5IDEzLjc3Mjk4NDcsMTUuNzQxMzY4OSBMMTMuNzg5MzQyNCwxNS43MzIxOTQxIEMxNC4xMDYyNjU0LDE1LjU1NDI4MzkgMTQuNTEwOTg5MywxNS42NjgyNDI3IDE0LjY4ODcyMzksMTUuOTg1NDc4OCBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTQtQ29weSIgc3Ryb2tlPSIjOTc5Nzk3IiB4PSIwLjUiIHk9IjAuNSIgd2lkdGg9Ijk5IiBoZWlnaHQ9Ijk5IiByeD0iMTAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0LjEgKDQxNDU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCAyIENvcHkgNjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEZXNrdG9wLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MC4wMDAwMDAsIC0yNzAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjN0I3QjdCIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTItQ29weS02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MC4wMDAwMDAsIDI3MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJsb2FkaW5nLSgyKSI+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuNjY3MDAwMSw2LjQwNzQ4OTMzIEwwLjM2ODY1NjUzLDYuNDA3NDg5MzMgQzAuMTcwNDU3NzQ5LDYuNDA3NDg5MzMgMC4wMDgzMDc0ODU3LDYuMjQ1MTY2NDMgMC4wMDgzMDc0ODU3LDYuMDQ2Nzg0MTQgTDAuMDA4MzA3NDg1Nyw2LjAzNjU1MjI1IEMwLjAwODMwNzQ4NTcsNS44MzgxNTc1OCAwLjE3MDQ3MDEyLDUuNjc1ODQ3MDUgMC4zNjg2NTY1Myw1LjY3NTg0NzA1IEwyLjY2NzAwMDEsNS42NzU4NDcwNSBDMi44NjUxOTg4OCw1LjY3NTg0NzA1IDMuMDI3MzQ5MTQsNS44MzgxNjk5NiAzLjAyNzM0OTE0LDYuMDM2NTUyMjUgTDMuMDI3MzQ5MTQsNi4wNDY3ODQxNCBDMy4wMjczNjE1Miw2LjI0NTE3ODgxIDIuODY1MTk4ODgsNi40MDc0ODkzMyAyLjY2NzAwMDEsNi40MDc0ODkzMyBaIE0xMS42MjkyODI3LDYuNDA3NDg5MzMgTDkuMzMwOTI2NzcsNi40MDc0ODkzMyBDOS4xMzI3Mjc5OSw2LjQwNzQ4OTMzIDguOTcwNTc3NzIsNi4yNDUxNjY0MyA4Ljk3MDU3NzcyLDYuMDQ2Nzg0MTQgTDguOTcwNTc3NzIsNi4wMzY1NTIyNSBDOC45NzA1Nzc3Miw1LjgzODE1NzU4IDkuMTMyNzQwMzYsNS42NzU4NDcwNSA5LjMzMDkyNjc3LDUuNjc1ODQ3MDUgTDExLjYyOTI3MDMsNS42NzU4NDcwNSBDMTEuODI3NDY5MSw1LjY3NTg0NzA1IDExLjk4OTYxOTQsNS44MzgxNjk5NiAxMS45ODk2MTk0LDYuMDM2NTUyMjUgTDExLjk4OTYxOTQsNi4wNDY3ODQxNCBDMTEuOTg5NjMxOCw2LjI0NTE3ODgxIDExLjgyNzQ2OTEsNi40MDc0ODkzMyAxMS42MjkyODI3LDYuNDA3NDg5MzMgWiBNMTEuMTA5MzgyMiwzLjQ4MTkyMzU3IEw5LjEwOTAwNTAyLDQuNjE0ODAyMjIgQzguOTM2NTA5MjEsNC43MTI0ODgzMiA4LjcxNTUxNTU5LDQuNjUxMTQ2NSA4LjYxNzkyNTk1LDQuNDc4NDgwMjEgTDguNjEyODg5Myw0LjQ2OTU3Mzc2IEM4LjUxNTI5OTY2LDQuMjk2OTA3NDcgOC41NzY1ODA5Miw0LjA3NTY5NTQzIDguNzQ5MDc2NzIsMy45NzgwMDkzNCBMMTAuNzQ5NDUzOSwyLjg0NTEzMDY4IEMxMC45MjE5NDk3LDIuNzQ3NDQ0NTkgMTEuMTQyOTQzMywyLjgwODc4NjQxIDExLjI0MDUzMjksMi45ODE0NTI3IEwxMS4yNDU1Njk2LDIuOTkwMzU5MTUgQzExLjM0MzE3MTYsMy4xNjMwMjU0NCAxMS4yODE4OTAzLDMuMzg0MjI1MSAxMS4xMDkzODIyLDMuNDgxOTIzNTcgWiBNOS4xNjA1NTk0OCwxLjI3ODExNTAzIEw3Ljk3NjgyNDE4LDMuMjUwMTMyNzkgQzcuODc0NzQyNCwzLjQyMDE4NTM2IDcuNjUyMjI2NjUsMy40NzU3MTc1NCA3LjQ4MjM0MTk4LDMuMzczNTQ3MjYgTDcuNDczNTgwNDUsMy4zNjgyNzAyOCBDNy4zMDM2OTU3OCwzLjI2NjA4NzYxIDcuMjQ4MjE4NDMsMy4wNDMzNTE5NCA3LjM1MDI4NzgzLDIuODczMjk5MzcgTDguNTM0MDIzMTIsMC45MDEyODE2MDkgQzguNjM2MTA0OSwwLjczMTIyOTA0IDguODU4NjIwNjYsMC42NzU2OTY4NjIgOS4wMjg1MDUzMiwwLjc3Nzg2NzEzOCBMOS4wMzcyNjY4NiwwLjc4MzEzMTczIEM5LjIwNzE1MTU0LDAuODg1MzI2Nzg2IDkuMjYyNjQxMjYsMS4xMDgwNjI0NiA5LjE2MDU1OTQ4LDEuMjc4MTE1MDMgWiBNNi4zNTk3NzY1NCwwLjM3NTg4NzUyIEw2LjM0Nzg5NjQ5LDIuNjc2NDc3ODcgQzYuMzQ2ODY5MzcsMi44NzQ4NjAxNiA2LjE4Mzg3NzYsMy4wMzYzNDA3MyA1Ljk4NTY5MTE5LDMuMDM1MzEyNTkgTDUuOTc1NDY5NCwzLjAzNTI2MzA0IEM1Ljc3NzI4Mjk5LDMuMDM0MjM0OSA1LjYxNTk2MTg2LDIuODcxMDgyMDQgNS42MTY5ODg5OCwyLjY3MjY5OTc1IEw1LjYyODg2OTAzLDAuMzcyMTA5NDA1IEM1LjYyOTg5NjE2LDAuMTczNzI3MTE4IDUuNzkyODg3OTIsMC4wMTIyNDY1NDg1IDUuOTkxMDc0MzMsMC4wMTMyNzQ2ODc2IEw2LjAwMTI5NjEzLDAuMDEzMzI0MjM0IEM2LjE5OTQ4MjU0LDAuMDE0MzM5OTg5NyA2LjM2MDgwMzY4LDAuMTc3NTA1MjM0IDYuMzU5Nzc2NTQsMC4zNzU4ODc1MiBaIE0zLjUyNDEzMzExLDAuODk3MTgxNDEyIEw0LjY3NzgyMTc5LDIuODg2OTYyNTMgQzQuNzc3MzA0ODEsMy4wNTg1NTExMiA0LjcxODQ2MTQ2LDMuMjgwNDE5NjkgNC41NDcwNDIyNywzLjM4MDAwMTAzIEw0LjUzODE5NDExLDMuMzg1MTQxNzUgQzQuMzY2Nzc0OTQsMy40ODQ3MjMwOSA0LjE0NTEyNTQzLDMuNDI1ODIxNTggNC4wNDU2NDI0MiwzLjI1NDIzMjk3IEwyLjg5MTk1Mzc0LDEuMjY0NDUxODYgQzIuNzkyNDcwNzIsMS4wOTI4NjMyNyAyLjg1MTMxNDA4LDAuODcwOTk0Njk0IDMuMDIyNzMzMjYsMC43NzE0MTMzNiBMMy4wMzE1ODE0MiwwLjc2NjI3MjY0IEMzLjIwMzAwMDU5LDAuNjY2NjkxMzA1IDMuNDI0NjM3NzIsMC43MjU2MDUyMDQgMy41MjQxMzMxMSwwLjg5NzE4MTQxMiBaIE0xLjI3NzQ2Nzc0LDIuODQwMzg2MzYgTDMuMjcwNDk0MTEsMy45ODYxNzI1NiBDMy40NDIzNTg3OCw0LjA4NDk3MzUgMy41MDIyMTY5LDQuMzA2NTY5NTUgMy40MDM1MTM1MSw0LjQ3ODYwNDA4IEwzLjM5ODQyNzM2LDQuNDg3NDczMzcgQzMuMjk5NzIzOTcsNC42NTk1MDc5IDMuMDc4MzQ2NzIsNC43MTk0MjUxOSAyLjkwNjQ4MjA1LDQuNjIwNjI0MjQgTDAuOTEzNDQzMzA4LDMuNDc0ODUwNDMgQzAuNzQxNTc4NjM2LDMuMzc2MDQ5NDkgMC42ODE3MjA1MTMsMy4xNTQ0NTM0NCAwLjc4MDQyMzkxMiwyLjk4MjQxODkxIEwwLjc4NTUxMDA1OSwyLjk3MzU0OTYyIEMwLjg4NDIyNTgxNywyLjgwMTUwMjY4IDEuMTA1NjAzMDYsMi43NDE1ODU0MSAxLjI3NzQ2Nzc0LDIuODQwMzg2MzYgWiBNMTAuNzQxNzE5NSw5LjEzOTMwNTY2IEw4Ljc1MTI5MTg2LDcuOTg4OTk4MSBDOC41Nzk2NDk5Myw3Ljg4OTgwMDc2IDguNTIwMjk5Miw3LjY2ODA2ODQ2IDguNjE5Mzk4NTksNy40OTYyNTY4OSBMOC42MjQ1MDk0OCw3LjQ4NzM5OTk4IEM4LjcyMzYwODg3LDcuMzE1NTg4NDEgOC45NDUxMjIyNSw3LjI1NjE3OTAzIDkuMTE2NzY0MTcsNy4zNTUzNzYzNiBMMTEuMTA3MTkxOCw4LjUwNTY4MzkyIEMxMS4yNzg4MzM3LDguNjA0ODgxMjYgMTEuMzM4MTg0NCw4LjgyNjYxMzU2IDExLjIzOTA4NSw4Ljk5ODQyNTEzIEwxMS4yMzM5NzQyLDkuMDA3MjgyMDQgQzExLjEzNDg2MjQsOS4xNzkwOTM2MSAxMC45MTMzNDksOS4yMzg1MDI5OSAxMC43NDE3MTk1LDkuMTM5MzA1NjYgWiBNMy4yODc0MzU1NSw3Ljk2MDYzMTIzIEwxLjMwNDAyNDYsOS4xMjMwMjg3OCBDMS4xMzI5ODkwNSw5LjIyMzI2NjY1IDAuOTExMTE2NzkzLDkuMTY1MTk1MDcgMC44MTA5Nzc4OTUsOC45OTM5OTA0OCBMMC44MDU4MTc0OTYsOC45ODUxNTgzNSBDMC43MDU2Nzg1OTgsOC44MTM5NTM3NiAwLjc2MzY5MjgzNCw4LjU5MTg2MjIyIDAuOTM0NzI4Mzg0LDguNDkxNjI0MzUgTDIuOTE4MTM5MzQsNy4zMjkyMjY4MSBDMy4wODkxNzQ4OSw3LjIyODk4ODk0IDMuMzExMDQ3MTQsNy4yODcwNjA1MSAzLjQxMTE4NjA0LDcuNDU4MjY1MSBMMy40MTYzNDY0NCw3LjQ2NzA5NzIzIEMzLjUxNjQ3Mjk1LDcuNjM4MzAxODIgMy40NTg0NzExLDcuODYwMzkzMzYgMy4yODc0MzU1NSw3Ljk2MDYzMTIzIFogTTQuNjcxODk0MTQsOS4wNDE0MzM3NiBMMy41MzI2ODQyNiwxMS4wMzk1NTE1IEMzLjQzNDQ1MTEyLDExLjIxMTg1ODYgMy4yMTMyMzQ3NiwxMS4yNzIzNzA0IDMuMDQxMDk3ODMsMTEuMTc0MDQwMiBMMy4wMzIyMjQ5MSwxMS4xNjg5NzM4IEMyLjg2MDA4Nzk5LDExLjA3MDY0MzYgMi43OTk2MzU4NywxMC44NDkyMDg2IDIuODk3ODY5MDEsMTAuNjc2OTAxNSBMNC4wMzcwNzg4OSw4LjY3ODc4Mzc3IEM0LjEzNTMxMjAzLDguNTA2NDc2NzEgNC4zNTY1Mjg0LDguNDQ1OTY0ODUgNC41Mjg2NjUzMiw4LjU0NDI5NTA4IEw0LjUzNzU1MDYxLDguNTQ5MzYxNDcgQzQuNzA5Njc1MTYsOC42NDc3MDQwNyA0Ljc3MDEzOTY1LDguODY5MTM5MDkgNC42NzE4OTQxNCw5LjA0MTQzMzc2IFogTTYuMzc5MzA0MzgsOS4zMjUyNzU4OSBMNi4zNzA3NDA4NCwxMS42MjU4Nzg2IEM2LjM2OTk5ODM0LDExLjgyNDI3MzMgNi4yMDcyNDE3LDExLjk4NTk3NjggNi4wMDkwNDI5MSwxMS45ODUyMzM2IEw1Ljk5ODgyMTEyLDExLjk4NTE5NjQgQzUuODAwNjIyMzQsMTEuOTg0NDUzMiA1LjYzOTA3ODQ1LDExLjgyMTUzNTcgNS42Mzk4MDg1OCwxMS42MjMxNDEgTDUuNjQ4MzcyMTEsOS4zMjI1MzgyOSBDNS42NDkxMTQ2MSw5LjEyNDE0MzYyIDUuODExODcxMjUsOC45NjI0NDAwOCA2LjAxMDA3MDA1LDguOTYzMTcwOTMgTDYuMDIwMjkxODQsOC45NjMyMDgwOSBDNi4yMTg0OTA2Miw4Ljk2Mzk2MzcyIDYuMzgwMDQ2ODgsOS4xMjY4ODEyMiA2LjM3OTMwNDM4LDkuMzI1Mjc1ODkgWiBNOC4wMTIwMzEyLDguNzE5MzUyMSBMOS4xMzYzMjkxNCwxMC43MjU5MTggQzkuMjMzMjc1MjcsMTAuODk4OTU1OSA5LjE3MTE3NzI3LDExLjExOTkyMDIgOC45OTgzMTAyMiwxMS4yMTY5NzQ1IEw4Ljk4OTM4NzgsMTEuMjIxOTc5IEM4LjgxNjUyMDc1LDExLjMxOTAyMDkgOC41OTU3NzQ2MywxMS4yNTY4NjE2IDguNDk4ODE2MTIsMTEuMDgzODIzNyBMNy4zNzQ1MTgxOCw5LjA3NzI1Nzc3IEM3LjI3NzU3MjA1LDguOTA0MjE5ODYgNy4zMzk2NzAwNSw4LjY4MzI1NTU3IDcuNTEyNTM3MSw4LjU4NjIwMTIzIEw3LjUyMTQ1OTUxLDguNTgxMTk2NzcgQzcuNjk0MzI2NTYsOC40ODQxNTQ4MyA3LjkxNTA4NTA2LDguNTQ2MzE0MTkgOC4wMTIwMzEyLDguNzE5MzUyMSBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTJweCIgaGVpZ2h0PSI2NHB4IiB2aWV3Qm94PSIwIDAgNTIgNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5TaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJQaG90b19sb2FkLV9mYWlsZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTU5LjAwMDAwMCwgLTU2OC4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9IiM3QjdCN0IiPgogICAgICAgICAgICA8ZyBpZD0i5Yi35pawLSg1KS1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg1LjAwMDAwMCwgNTk5Ljc1MDAwMCkgc2NhbGUoLTEsIDEpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTU4NS4wMDAwMDAsIC01OTkuNzUwMDAwKSB0cmFuc2xhdGUoMTU1My41MDAwMDAsIDU3My43NTAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi42NTk1NzU5LDIzLjg4ODg5MDQgTDU1LjI3MzU4MTYsMzEuNDIxNzU5NCBDNTQuNjY2MjQ1MiwzMi4wMTc3NzU4IDUzLjY4MTA3MjgsMzIuMDE3Nzc1OCA1My4wNzMwMzY3LDMxLjQyMTc1OTQgTDQ1LjczNTMyMTUsMjMuODg4ODkwNCBDNDQuODYyODAwMiwyMi44NTUyMzk2IDQ1LjQ0NTY0NzIsMjIuNDg3NzY1NyA0Ni4wNTM2ODMzLDIxLjg5MTA1NDYgTDUyLjc3Mjg2NywyMS44OTEwNTQ2IEM1MC45MTg2NzE4LDExLjcyODkwNTkgNDIuMTA1OTk2Nyw0LjAyMzc2MTc5IDMxLjQ5MjMwMzMsNC4wMjM3NjE3OSBDMjMuMjg2OTY0Nyw0LjAyMzc2MTc5IDE2LjE0OTM2MjYsOC42MjcyNTg5MiAxMi40NzU5NTcsMTUuNDExMjg2OCBMOC44MTA5NDc2OCwxMy45MzMwNTUxIEMxMy4wODMyOTM0LDUuNjg4ODU2NSAyMS42MjkzODQxLDAuMDUzNzkyNTYyMSAzMS40OTIzMDMzLDAuMDUzNzkyNTYyMSBDNDQuMjg0MTUxMywwLjA1Mzc5MjU2MjEgNTQuODUyMzY0NCw5LjUyODIzMDA3IDU2Ljc1MDY0MDUsMjEuODkxMDU0NiBMNjIuMzQxOTEzOCwyMS44OTEwNTQ2IEM2Mi45NDkyNTAyLDIyLjQ4Nzc2NTcgNjMuMjY3NjEyLDIzLjI5MjE3OTQgNjIuNjU5NTc1OSwyMy44ODg4OTA0IFogTTkuOTk0ODMzODQsMjIuMjg3MDA5NiBMMTcuMzgxNTI3OCwyOS44MTk4Nzg2IEMxNy45ODg4NjQyLDMwLjQxNTg5NDkgMTcuNjcxMjAyMSwzMS4yMjE2OTggMTcuMDYzMTY2LDMxLjgxNzcxNDQgTDEwLjY2NzI0MiwzMS44MTc3MTQ0IEMxMy4yMzcyMjY2LDQwLjk4MjMzNDUgMjEuNTgxODA0OCw0Ny42OTk2NzUzIDMxLjQ5MjMwMzMsNDcuNjk5Njc1MyBDMzkuMDM0MzI5OSw0Ny42OTk2NzUzIDQ1LjY2OTU1LDQzLjgwNjgxMyA0OS41NDY1NjczLDM3LjkwOTE2ODUgTDUzLjI0OTM2MDIsMzkuNDAyNjgyNyBDNDguNzM5ODE3NCw0Ni43NTQ5NDA3IDQwLjY5NTQwODksNTEuNjcwMzM5MSAzMS40OTIzMDMzLDUxLjY3MDMzOTEgQzE5LjM5NjY1MzIsNTEuNjcwMzM5MSA5LjMwNTYzMjk3LDQzLjE5MzQzMDIgNi42Mzc2OTA5MywzMS44MTc3MTQ0IEwwLjc3NDkzNTUzMSwzMS44MTc3MTQ0IEMwLjE2NzU5OTEzMiwzMS4yMjE2OTggLTAuNDE1MjQ3ODk2LDMwLjg1MzUyOTQgMC40NTcyNzM0MDYsMjkuODE5ODc4NiBMNy43OTQyODg5NCwyMi4yODcwMDk2IEM4LjQwMTYyNTM0LDIxLjY5MDk5MzIgOS4zODc0OTc0NCwyMS42OTA5OTMyIDkuOTk0ODMzODQsMjIuMjg3MDA5NiBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNjdweCIgaGVpZ2h0PSI0NnB4IiB2aWV3Qm94PSIwIDAgNjcgNDYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0LjEgKDQxNDU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCAyIENvcHkgNDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEZXNrdG9wLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMTg3LjAwMDAwMCwgLTQ3My4wMDAwMDApIiBmaWxsPSIjN0I3QjdCIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTItQ29weS00IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTg3LjAwMDAwMCwgNDczLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHRleHQgaWQ9IkxvYWRpbmfigKYtQ29weSIgZm9udC1mYW1pbHk9IkdvdGhhbS1Cb29rLCBHb3RoYW0iIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSIzMDAiPgogICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIwLjE1MiIgeT0iNDMiPkxvYWRpbmfigKY8L3RzcGFuPgogICAgICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICAgICAgPGcgaWQ9ImxvYWRpbmctKDIpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMy4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNC44ODk1MDAxNywxMS43NDcwNjM4IEwwLjY3NTg3MDMwNiwxMS43NDcwNjM4IEMwLjMxMjUwNTg3MywxMS43NDcwNjM4IDAuMDE1MjMwMzkwNSwxMS40NDk0NzE4IDAuMDE1MjMwMzkwNSwxMS4wODU3NzA5IEwwLjAxNTIzMDM5MDUsMTEuMDY3MDEyNSBDMC4wMTUyMzAzOTA1LDEwLjcwMzI4ODkgMC4zMTI1Mjg1NTQsMTAuNDA1NzE5NiAwLjY3NTg3MDMwNiwxMC40MDU3MTk2IEw0Ljg4OTUwMDE3LDEwLjQwNTcxOTYgQzUuMjUyODY0NjEsMTAuNDA1NzE5NiA1LjU1MDE0MDA5LDEwLjcwMzMxMTYgNS41NTAxNDAwOSwxMS4wNjcwMTI1IEw1LjU1MDE0MDA5LDExLjA4NTc3MDkgQzUuNTUwMTYyNzksMTEuNDQ5NDk0NSA1LjI1Mjg2NDYxLDExLjc0NzA2MzggNC44ODk1MDAxNywxMS43NDcwNjM4IFogTTIxLjMyMDM1MTYsMTEuNzQ3MDYzOCBMMTcuMTA2Njk5MSwxMS43NDcwNjM4IEMxNi43NDMzMzQ2LDExLjc0NzA2MzggMTYuNDQ2MDU5MiwxMS40NDk0NzE4IDE2LjQ0NjA1OTIsMTEuMDg1NzcwOSBMMTYuNDQ2MDU5MiwxMS4wNjcwMTI1IEMxNi40NDYwNTkyLDEwLjcwMzI4ODkgMTYuNzQzMzU3MywxMC40MDU3MTk2IDE3LjEwNjY5OTEsMTAuNDA1NzE5NiBMMjEuMzIwMzI4OSwxMC40MDU3MTk2IEMyMS42ODM2OTM0LDEwLjQwNTcxOTYgMjEuOTgwOTY4OSwxMC43MDMzMTE2IDIxLjk4MDk2ODksMTEuMDY3MDEyNSBMMjEuOTgwOTY4OSwxMS4wODU3NzA5IEMyMS45ODA5OTE2LDExLjQ0OTQ5NDUgMjEuNjgzNjkzNCwxMS43NDcwNjM4IDIxLjMyMDM1MTYsMTEuNzQ3MDYzOCBaIE0yMC4zNjcyMDA2LDYuMzgzNTI2NTUgTDE2LjY5OTg0MjUsOC40NjA0NzA3NSBDMTYuMzgzNjAwMiw4LjYzOTU2MTkxIDE1Ljk3ODQ0NTMsOC41MjcxMDE5MSAxNS43OTk1MzA5LDguMjEwNTQ3MDUgTDE1Ljc5MDI5NzEsOC4xOTQyMTg1NSBDMTUuNjExMzgyNyw3Ljg3NzY2MzY5IDE1LjcyMzczMTcsNy40NzIxMDgyOSAxNi4wMzk5NzQsNy4yOTMwMTcxMiBMMTkuNzA3MzMyMSw1LjIxNjA3MjkyIEMyMC4wMjM1NzQ0LDUuMDM2OTgxNzUgMjAuNDI4NzI5NCw1LjE0OTQ0MTc1IDIwLjYwNzY0MzcsNS40NjU5OTY2MiBMMjAuNjE2ODc3Niw1LjQ4MjMyNTExIEMyMC43OTU4MTQ2LDUuNzk4ODc5OTggMjAuNjgzNDY1Niw2LjIwNDQxMjY4IDIwLjM2NzIwMDYsNi4zODM1MjY1NSBaIE0xNi43OTQzNTksMi4zNDMyMTA4OSBMMTQuNjI0MTc3Nyw1Ljk1ODU3Njc4IEMxNC40MzcwMjc3LDYuMjcwMzM5ODIgMTQuMDI5MDgyMiw2LjM3MjE0ODgyIDEzLjcxNzYyNyw2LjE4NDgzNjY0IEwxMy43MDE1NjQyLDYuMTc1MTYyMTkgQzEzLjM5MDEwODksNS45ODc4MjcyOSAxMy4yODg0MDA1LDUuNTc5NDc4NTUgMTMuNDc1NTI3Nyw1LjI2NzcxNTUgTDE1LjY0NTcwOTEsMS42NTIzNDk2MiBDMTUuODMyODU5LDEuMzQwNTg2NTcgMTYuMjQwODA0NSwxLjIzODc3NzU4IDE2LjU1MjI1OTgsMS40MjYwODk3NSBMMTYuNTY4MzIyNiwxLjQzNTc0MTUxIEMxNi44Nzk3Nzc4LDEuNjIzMDk5MTEgMTYuOTgxNTA5LDIuMDMxNDQ3ODUgMTYuNzk0MzU5LDIuMzQzMjEwODkgWiBNMTEuNjU5NTkwMywwLjY4OTEyNzEyIEwxMS42Mzc4MTAyLDQuOTA2ODc2MSBDMTEuNjM1OTI3Miw1LjI3MDU3Njk1IDExLjMzNzEwODksNS41NjY2MjQ2NyAxMC45NzM3NjcyLDUuNTY0NzM5NzQgTDEwLjk1NTAyNzIsNS41NjQ2NDg5MSBDMTAuNTkxNjg1NSw1LjU2Mjc2Mzk5IDEwLjI5NTkzMDEsNS4yNjM2NTA0MSAxMC4yOTc4MTMxLDQuODk5OTQ5NTUgTDEwLjMxOTU5MzIsMC42ODIyMDA1NzUgQzEwLjMyMTQ3NjMsMC4zMTg0OTk3MTcgMTAuNjIwMjk0NSwwLjAyMjQ1MjAwNTUgMTAuOTgzNjM2MywwLjAyNDMzNjkyNzMgTDExLjAwMjM3NjIsMC4wMjQ0Mjc3NjI0IEMxMS4zNjU3MTgsMC4wMjYyODk5ODEgMTEuNjYxNDczNCwwLjMyNTQyNjI2MiAxMS42NTk1OTAzLDAuNjg5MTI3MTIgWiBNNi40NjA5MTA3MSwxLjY0NDgzMjU5IEw4LjU3NjAwNjYyLDUuMjkyNzY0NjMgQzguNzU4MzkyMTYsNS42MDczNDM3MiA4LjY1MDUxMjY3LDYuMDE0MTAyNzcgOC4zMzYyNDQxNyw2LjE5NjY2ODU1IEw4LjMyMDAyMjU0LDYuMjA2MDkzMiBDOC4wMDU3NTQwNiw2LjM4ODY1OTAxIDcuNTk5Mzk2NjMsNi4yODA2NzI4OSA3LjQxNzAxMTExLDUuOTY2MDkzNzkgTDUuMzAxOTE1MiwyLjMxODE2MTc0IEM1LjExOTUyOTY1LDIuMDAzNTgyNjYgNS4yMjc0MDkxNCwxLjU5NjgyMzYxIDUuNTQxNjc3NjUsMS40MTQyNTc4MyBMNS41NTc4OTkyNywxLjQwNDgzMzE3IEM1Ljg3MjE2Nzc1LDEuMjIyMjY3MzkgNi4yNzg1MDI0OCwxLjMzMDI3NjIxIDYuNDYwOTEwNzEsMS42NDQ4MzI1OSBaIE0yLjM0MjAyNDIsNS4yMDczNzQ5OSBMNS45OTU5MDU4Nyw3LjMwNzk4MzAyIEM2LjMxMDk5MTEsNy40ODkxMTgwOCA2LjQyMDczMDk5LDcuODk1Mzc3NSA2LjIzOTc3NDc2LDguMjEwNzc0MTUgTDYuMjMwNDUwMTYsOC4yMjcwMzQ1MSBDNi4wNDk0OTM5NSw4LjU0MjQzMTE2IDUuNjQzNjM1NjUsOC42NTIyNzk1MSA1LjMyODU1MDQyLDguNDcxMTQ0NDMgTDEuNjc0NjQ2MDYsNi4zNzA1NTkxMyBDMS4zNTk1NjA4Myw2LjE4OTQyNDA3IDEuMjQ5ODIwOTQsNS43ODMxNjQ2NCAxLjQzMDc3NzE3LDUuNDY3NzY4IEwxLjQ0MDEwMTc3LDUuNDUxNTA3NjQgQzEuNjIxMDgwNjYsNS4xMzYwODgyNCAyLjAyNjkzODk0LDUuMDI2MjM5OTEgMi4zNDIwMjQyLDUuMjA3Mzc0OTkgWiBNMTkuNjkzMTUyNCwxNi43NTUzOTM3IEwxNi4wNDQwMzUxLDE0LjY0NjQ5NjUgQzE1LjcyOTM1ODIsMTQuNDY0NjM0NyAxNS42MjA1NDg1LDE0LjA1ODEyNTUgMTUuODAyMjMwNywxMy43NDMxMzc2IEwxNS44MTE2MDA3LDEzLjcyNjkgQzE1Ljk5MzI4MjksMTMuNDExOTEyMSAxNi4zOTkzOTA4LDEzLjMwMjk5NDkgMTYuNzE0MDY3NywxMy40ODQ4NTY3IEwyMC4zNjMxODQ5LDE1LjU5Mzc1MzkgQzIwLjY3Nzg2MTgsMTUuNzc1NjE1NiAyMC43ODY2NzE1LDE2LjE4MjEyNDkgMjAuNjA0OTg5MywxNi40OTcxMTI3IEwyMC41OTU2MTkzLDE2LjUxMzM1MDQgQzIwLjQxMzkxNDQsMTYuODI4MzM4MyAyMC4wMDc4MDY1LDE2LjkzNzI1NTUgMTkuNjkzMTUyNCwxNi43NTUzOTM3IFogTTYuMDI2OTY1MTcsMTQuNTk0NDkwNiBMMi4zOTA3MTE3NiwxNi43MjU1NTI4IEMyLjA3NzE0NjU4LDE2LjkwOTMyMjIgMS42NzAzODA3OSwxNi44MDI4NTc2IDEuNDg2NzkyODEsMTYuNDg4OTgyNSBMMS40NzczMzIwOCwxNi40NzI3OTAzIEMxLjI5Mzc0NDEsMTYuMTU4OTE1MiAxLjQwMDEwMzUzLDE1Ljc1MTc0NzQgMS43MTM2Njg3LDE1LjU2Nzk3OCBMNS4zNDk5MjIxMiwxMy40MzY5MTU4IEM1LjY2MzQ4NzI5LDEzLjI1MzE0NjQgNi4wNzAyNTMwOSwxMy4zNTk2MTA5IDYuMjUzODQxMDcsMTMuNjczNDg2IEw2LjI2MzMwMTgsMTMuNjg5Njc4MyBDNi40NDY4NjcwOCwxNC4wMDM1NTMzIDYuMzQwNTMwMzUsMTQuNDEwNzIxMiA2LjAyNjk2NTE3LDE0LjU5NDQ5MDYgWiBNOC41NjUxMzkyNSwxNi41NzU5NjE5IEw2LjQ3NjU4NzgyLDIwLjIzOTE3NzggQzYuMjk2NDkzNzIsMjAuNTU1MDc0MSA1Ljg5MDkzMDM5LDIwLjY2NjAxMjUgNS41NzUzNDYwMiwyMC40ODU3NDA0IEw1LjU1OTA3OTAxLDIwLjQ3NjQ1MiBDNS4yNDM0OTQ2NCwyMC4yOTYxNzk5IDUuMTMyNjY1NzYsMTkuODkwMjE1NyA1LjMxMjc1OTg2LDE5LjU3NDMxOTUgTDcuNDAxMzExMjksMTUuOTExMTAzNiBDNy41ODE0MDUzOSwxNS41OTUyMDczIDcuOTg2OTY4NzIsMTUuNDg0MjY4OSA4LjMwMjU1MzA5LDE1LjY2NDU0MSBMOC4zMTg4NDI3OCwxNS42NzM4Mjk0IEM4LjYzNDQwNDQ3LDE1Ljg1NDEyNDEgOC43NDUyNTYwMywxNi4yNjAwODgzIDguNTY1MTM5MjUsMTYuNTc1OTYxOSBaIE0xMS42OTUzOTE0LDE3LjA5NjMzOTEgTDExLjY3OTY5MTUsMjEuMzE0MTEwOCBDMTEuNjc4MzMwMywyMS42Nzc4MzQ0IDExLjM3OTk0MzEsMjEuOTc0MjkwOSAxMS4wMTY1Nzg3LDIxLjk3MjkyODMgTDEwLjk5NzgzODcsMjEuOTcyODYwMSBDMTAuNjM0NDc0MywyMS45NzE0OTc2IDEwLjMzODMxMDUsMjEuNjcyODE1NSAxMC4zMzk2NDkxLDIxLjMwOTA5MTkgTDEwLjM1NTM0ODksMTcuMDkxMzIwMiBDMTAuMzU2NzEwMSwxNi43Mjc1OTY2IDEwLjY1NTA5NzMsMTYuNDMxMTQwMSAxMS4wMTg0NjE4LDE2LjQzMjQ4IEwxMS4wMzcyMDE3LDE2LjQzMjU0ODIgQzExLjQwMDU2NjEsMTYuNDMzOTMzNSAxMS42OTY3NTI2LDE2LjczMjYxNTYgMTEuNjk1MzkxNCwxNy4wOTYzMzkxIFogTTE0LjY4ODcyMzksMTUuOTg1NDc4OCBMMTYuNzQ5OTM2OCwxOS42NjQxODMgQzE2LjkyNzY3MTMsMTkuOTgxNDE5MSAxNi44MTM4MjUsMjAuMzg2NTIwMyAxNi40OTY5MDIxLDIwLjU2NDQ1MzMgTDE2LjQ4MDU0NDMsMjAuNTczNjI4MSBDMTYuMTYzNjIxNCwyMC43NTE1Mzg0IDE1Ljc1ODkyMDIsMjAuNjM3NTc5NSAxNS41ODExNjI5LDIwLjMyMDM0MzQgTDEzLjUxOTk1LDE2LjY0MTYzOTIgQzEzLjM0MjIxNTQsMTYuMzI0NDAzMSAxMy40NTYwNjE4LDE1LjkxOTMwMTkgMTMuNzcyOTg0NywxNS43NDEzNjg5IEwxMy43ODkzNDI0LDE1LjczMjE5NDEgQzE0LjEwNjI2NTQsMTUuNTU0MjgzOSAxNC41MTA5ODkzLDE1LjY2ODI0MjcgMTQuNjg4NzIzOSwxNS45ODU0Nzg4IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzICgzODk5OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+5LiL6L29PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTMuMDAwMDAwLCAtMTA1LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i5LiL6L29IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5My4wMDAwMDAsIDEwNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMiIgeD0iMCIgeT0iMCIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0iI0ZGQTUwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBjeD0iMTEiIGN5PSIxMSIgcj0iMTAiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLDEyLjg4ODY3MTkgTDEwLjQ0NTMxMjUsMTIuODg4NjcxOSBDMTAuMTExMzI4MSwxMi44ODg2NzE5IDkuODkwNjI1LDEyLjY2NjAxNTYgOS44OTA2MjUsMTIuMzMzOTg0NCBMOS44OTA2MjUsNi4yMjI2NTYyNSBDOS44OTA2MjUsNS44ODg2NzE4NyAxMC4xMTMyODEyLDUuNjY3OTY4NzUgMTAuNDQ1MzEyNSw1LjY2Nzk2ODc1IEwxMiw1LjY2Nzk2ODc1IEMxMi4zMzM5ODQ0LDUuNjY3OTY4NzUgMTIuNTU0Njg3NSw1Ljg5MDYyNSAxMi41NTQ2ODc1LDYuMjIyNjU2MjUgTDEyLjU1NDY4NzUsMTIuMzMzOTg0NCBDMTIuNTU0Njg3NSwxMi42NjYwMTU2IDEyLjMzMzk4NDQsMTIuODg4NjcxOSAxMiwxMi44ODg2NzE5IFoiIGlkPSJTaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIsMTYuMzMzOTg0NCBMMTAuNDQ1MzEyNSwxNi4zMzM5ODQ0IEMxMC4xMTEzMjgxLDE2LjMzMzk4NDQgOS44OTA2MjUsMTYuMTExMzI4MSA5Ljg5MDYyNSwxNS43NzkyOTY5IEw5Ljg5MDYyNSwxNC44OTA2MjUgQzkuODkwNjI1LDE0LjU1NjY0MDYgMTAuMTEzMjgxMiwxNC4zMzU5Mzc1IDEwLjQ0NTMxMjUsMTQuMzM1OTM3NSBMMTIsMTQuMzM1OTM3NSBDMTIuMzMzOTg0NCwxNC4zMzU5Mzc1IDEyLjU1NDY4NzUsMTQuNTU4NTkzOCAxMi41NTQ2ODc1LDE0Ljg5MDYyNSBMMTIuNTU0Njg3NSwxNS43NzkyOTY5IEMxMi41NTQ2ODc1LDE2LjExMTMyODEgMTIuMzMzOTg0NCwxNi4zMzM5ODQ0IDEyLDE2LjMzMzk4NDQgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTlweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNTkgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzICgzODk5OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+QWRkUGhvdG9zLWhvdmVyPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkFkZFBob3RvcyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE2ODAuMDAwMDAwLCAtMjA3LjAwMDAwMCkiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iIzNBM0EzQSI+CiAgICAgICAgICAgIDxnIGlkPSJBZGRQaG90b3MtaG92ZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2ODAuMDAwMDAwLCAyMDcuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMi4yOTQsMC41MDQgQzEuMjI5ODA4OCwwLjUxNzUwODg3NCAwLjM3MDg2MDIyOCwxLjM3Nzc4OTE1IDAuMzU5LDIuNDQyIEwwLjM1OSwzNy4yNyBDMC4zNzI0NzQ4NjgsMzguMzMzMDM5NSAxLjIzMDk2MDUxLDM5LjE5MTUyNTEgMi4yOTQsMzkuMjA1IEw0MC4wNDUsMzkuMjA1IEM0Mi42MzYyMjY1LDQyLjQ0MTEzNyA0Ni45MTM0ODgsNDMuODEwODU2MyA1MC45MDI1NDY5LDQyLjY4MTk0MjQgQzU0Ljg5MTYwNTcsNDEuNTUzMDI4NCA1Ny44MTY3NTQ3LDM4LjE0NTAwODMgNTguMzI3ODQ0OSwzNC4wMzA5MDc2IEM1OC44Mzg5MzUxLDI5LjkxNjgwNyA1Ni44MzY1ODA3LDI1Ljg5NjY0ODUgNTMuMjQ1LDIzLjgyNiBMNTMuMjQ1LDIuNDQyIEM1My4yMzIwNTE3LDEuMzc4NzM4NTUgNTIuMzczMjYxNCwwLjUxOTk0ODMwMSA1MS4zMSwwLjUwNyBMMi4yOTQsMC41MDQgWiBNMi45MzksMy4wODQgTDUwLjY2NywzLjA4NCBMNTAuNjY3LDIyLjc3NiBDNDguOTYzNzA3MiwyMi4zMTk2MjIxIDQ3LjE3MDI5MjgsMjIuMzE5NjIyMSA0NS40NjcsMjIuNzc2IEwzNi4wNzQsMTMuNzQyIEMzNS44MjI3OTcyLDEzLjUwMzg0OTEgMzUuNDg1NjE5NiwxMy4zNzc5NzM2IDM1LjEzOTgwODMsMTMuMzkzMjQ2NiBDMzQuNzkzOTk3MSwxMy40MDg1MTk2IDM0LjQ2OTIyOTQsMTMuNTYzNjMwNSAzNC4yNCwxMy44MjMgTDIyLjgxMiwyNi40NDIgTDEzLjg1OSwxOC44NjYgQzEzLjM4NzgwOTUsMTguNDgwOTQxNyAxMi43MTU0NzgsMTguNDY0NDczMSAxMi4yMjYsMTguODI2IEwyLjkzOSwyNi4yMDIgTDIuOTM5LDMuMDg0IFogTTIwLjk5OCw2Ljk1NCBDMTguMTQ4MjEwNyw2Ljk1NCAxNS44MzgsOS4yNjQyMTA2OSAxNS44MzgsMTIuMTE0IEMxNS44MzgsMTQuOTYzNzg5MyAxOC4xNDgyMTA3LDE3LjI3NCAyMC45OTgsMTcuMjc0IEMyMy44NDc3ODkzLDE3LjI3NCAyNi4xNTgsMTQuOTYzNzg5MyAyNi4xNTgsMTIuMTE0IEMyNi4xNDcwMzU2LDkuMjY4NzY0NjggMjMuODQzMjM1Myw2Ljk2NDk2NDQyIDIwLjk5OCw2Ljk1NCBMMjAuOTk4LDYuOTU0IFogTTIwLjk5OCw5LjUzNCBDMjIuMDQxNTEyNiw5LjUzNCAyMi45ODIyNzQyLDEwLjE2MjU5NjggMjMuMzgxNjA5MiwxMS4xMjY2NzY3IEMyMy43ODA5NDQyLDEyLjA5MDc1NjcgMjMuNTYwMjEwMywxMy4yMDA0NjA3IDIyLjgyMjMzNTUsMTMuOTM4MzM1NSBDMjIuMDg0NDYwNywxNC42NzYyMTAzIDIwLjk3NDc1NjcsMTQuODk2OTQ0MiAyMC4wMTA2NzY3LDE0LjQ5NzYwOTIgQzE5LjA0NjU5NjgsMTQuMDk4Mjc0MiAxOC40MTgsMTMuMTU3NTEyNiAxOC40MTgsMTIuMTE0IEMxOC40MTI4OTI4LDExLjQyODE4ODUgMTguNjgzMDczMSwxMC43Njg5ODM5IDE5LjE2ODAyODUsMTAuMjg0MDI4NSBDMTkuNjUyOTgzOSw5Ljc5OTA3MzE1IDIwLjMxMjE4ODUsOS41Mjg4OTI4MiAyMC45OTgsOS41MzQgTDIwLjk5OCw5LjUzNCBaIE0zNS4yNDgsMTYuNTI4IEw0Mi44NjcsMjMuODY0IEMzOC40NTcwNTg5LDI2LjQ1MjA3NjYgMzYuNjA1MzYwNSwzMS44Nzc4ODQ0IDM4LjUxMywzNi42MjIgTDIuOTM5LDM2LjYyMiBMMi45MzksMjkuNTA3IEwxMi45OTcsMjEuNTA3IEwyMi4xMDcsMjkuMjA3IEMyMi42MzgzMTM3LDI5LjYyNzc4MTIgMjMuNDAwMzQwNiwyOS41ODQ4MjU5IDIzLjg4MSwyOS4xMDcgTDM1LjI0OCwxNi41MjggWiBNNDguMDg3LDI1LjAxMyBDNTIuMzYxNjg0LDI1LjAxMyA1NS44MjcsMjguNDc4MzE2IDU1LjgyNywzMi43NTMgQzU1LjgyNywzNy4wMjc2ODQgNTIuMzYxNjg0LDQwLjQ5MyA0OC4wODcsNDAuNDkzIEM0My44MTIzMTYsNDAuNDkzIDQwLjM0NywzNy4wMjc2ODQgNDAuMzQ3LDMyLjc1MyBDNDAuMzQxNjcwOCwzMC42OTg1OTUzIDQxLjE1NTQyMTMsMjguNzI2Nzk4MSA0Mi42MDgxMDk3LDI3LjI3NDEwOTcgQzQ0LjA2MDc5ODEsMjUuODIxNDIxMyA0Ni4wMzI1OTUzLDI1LjAwNzY3MDggNDguMDg3LDI1LjAxMyBMNDguMDg3LDI1LjAxMyBaIE00OC4wODcsMjYuOTQ4IEM0Ny4zNzQ1NTI3LDI2Ljk0OCA0Ni43OTcsMjcuNTI1NTUyNyA0Ni43OTcsMjguMjM4IEw0Ni43OTcsMzEuNDYyIEw0My41NzIsMzEuNDYyIEM0Mi44NTk1NTI3LDMxLjQ2MiA0Mi4yODIsMzIuMDM5NTUyNyA0Mi4yODIsMzIuNzUyIEM0Mi4yODIsMzMuNDY0NDQ3MyA0Mi44NTk1NTI3LDM0LjA0MiA0My41NzIsMzQuMDQyIEw0Ni43OTcsMzQuMDQyIEw0Ni43OTcsMzcuMjY3IEM0Ni43OTcsMzcuOTc5NDQ3MyA0Ny4zNzQ1NTI3LDM4LjU1NyA0OC4wODcsMzguNTU3IEM0OC43OTk0NDczLDM4LjU1NyA0OS4zNzcsMzcuOTc5NDQ3MyA0OS4zNzcsMzcuMjY3IEw0OS4zNzcsMzQuMDQyIEw1Mi42MDIsMzQuMDQyIEM1My4zMTQ0NDczLDM0LjA0MiA1My44OTIsMzMuNDY0NDQ3MyA1My44OTIsMzIuNzUyIEM1My44OTIsMzIuMDM5NTUyNyA1My4zMTQ0NDczLDMxLjQ2MiA1Mi42MDIsMzEuNDYyIEw0OS4zNzcsMzEuNDYyIEw0OS4zNzcsMjguMjQyIEM0OS4zNzgwNjMsMjcuODk5MTc4MiA0OS4yNDI2MjIxLDI3LjU3MDAzMzEgNDkuMDAwNTg0OSwyNy4zMjcyNDU0IEM0OC43NTg1NDc2LDI3LjA4NDQ1NzYgNDguNDI5ODIzNCwyNi45NDc5OTg0IDQ4LjA4NywyNi45NDggWiIgaWQ9IlBhdGhfNCI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=";
},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTlweCIgaGVpZ2h0PSI0NHB4IiB2aWV3Qm94PSIwIDAgNTkgNDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzICgzODk5OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+QWRkUGhvdG9zLW5vcm1hbDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEZWZhdWx0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTMwLjAwMDAwMCwgLTM2OC4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9IiM3QjdCN0IiPgogICAgICAgICAgICA8ZyBpZD0iQWRkUGhvdG9zLW5vcm1hbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTMwLjAwMDAwMCwgMzY4LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjk0LDAuNTA0IEMxLjIyOTgwODgsMC41MTc1MDg4NzQgMC4zNzA4NjAyMjgsMS4zNzc3ODkxNSAwLjM1OSwyLjQ0MiBMMC4zNTksMzcuMjcgQzAuMzcyNDc0ODY4LDM4LjMzMzAzOTUgMS4yMzA5NjA1MSwzOS4xOTE1MjUxIDIuMjk0LDM5LjIwNSBMNDAuMDQ1LDM5LjIwNSBDNDIuNjM2MjI2NSw0Mi40NDExMzcgNDYuOTEzNDg4LDQzLjgxMDg1NjMgNTAuOTAyNTQ2OSw0Mi42ODE5NDI0IEM1NC44OTE2MDU3LDQxLjU1MzAyODQgNTcuODE2NzU0NywzOC4xNDUwMDgzIDU4LjMyNzg0NDksMzQuMDMwOTA3NiBDNTguODM4OTM1MSwyOS45MTY4MDcgNTYuODM2NTgwNywyNS44OTY2NDg1IDUzLjI0NSwyMy44MjYgTDUzLjI0NSwyLjQ0MiBDNTMuMjMyMDUxNywxLjM3ODczODU1IDUyLjM3MzI2MTQsMC41MTk5NDgzMDEgNTEuMzEsMC41MDcgTDIuMjk0LDAuNTA0IFogTTIuOTM5LDMuMDg0IEw1MC42NjcsMy4wODQgTDUwLjY2NywyMi43NzYgQzQ4Ljk2MzcwNzIsMjIuMzE5NjIyMSA0Ny4xNzAyOTI4LDIyLjMxOTYyMjEgNDUuNDY3LDIyLjc3NiBMMzYuMDc0LDEzLjc0MiBDMzUuODIyNzk3MiwxMy41MDM4NDkxIDM1LjQ4NTYxOTYsMTMuMzc3OTczNiAzNS4xMzk4MDgzLDEzLjM5MzI0NjYgQzM0Ljc5Mzk5NzEsMTMuNDA4NTE5NiAzNC40NjkyMjk0LDEzLjU2MzYzMDUgMzQuMjQsMTMuODIzIEwyMi44MTIsMjYuNDQyIEwxMy44NTksMTguODY2IEMxMy4zODc4MDk1LDE4LjQ4MDk0MTcgMTIuNzE1NDc4LDE4LjQ2NDQ3MzEgMTIuMjI2LDE4LjgyNiBMMi45MzksMjYuMjAyIEwyLjkzOSwzLjA4NCBaIE0yMC45OTgsNi45NTQgQzE4LjE0ODIxMDcsNi45NTQgMTUuODM4LDkuMjY0MjEwNjkgMTUuODM4LDEyLjExNCBDMTUuODM4LDE0Ljk2Mzc4OTMgMTguMTQ4MjEwNywxNy4yNzQgMjAuOTk4LDE3LjI3NCBDMjMuODQ3Nzg5MywxNy4yNzQgMjYuMTU4LDE0Ljk2Mzc4OTMgMjYuMTU4LDEyLjExNCBDMjYuMTQ3MDM1Niw5LjI2ODc2NDY4IDIzLjg0MzIzNTMsNi45NjQ5NjQ0MiAyMC45OTgsNi45NTQgTDIwLjk5OCw2Ljk1NCBaIE0yMC45OTgsOS41MzQgQzIyLjA0MTUxMjYsOS41MzQgMjIuOTgyMjc0MiwxMC4xNjI1OTY4IDIzLjM4MTYwOTIsMTEuMTI2Njc2NyBDMjMuNzgwOTQ0MiwxMi4wOTA3NTY3IDIzLjU2MDIxMDMsMTMuMjAwNDYwNyAyMi44MjIzMzU1LDEzLjkzODMzNTUgQzIyLjA4NDQ2MDcsMTQuNjc2MjEwMyAyMC45NzQ3NTY3LDE0Ljg5Njk0NDIgMjAuMDEwNjc2NywxNC40OTc2MDkyIEMxOS4wNDY1OTY4LDE0LjA5ODI3NDIgMTguNDE4LDEzLjE1NzUxMjYgMTguNDE4LDEyLjExNCBDMTguNDEyODkyOCwxMS40MjgxODg1IDE4LjY4MzA3MzEsMTAuNzY4OTgzOSAxOS4xNjgwMjg1LDEwLjI4NDAyODUgQzE5LjY1Mjk4MzksOS43OTkwNzMxNSAyMC4zMTIxODg1LDkuNTI4ODkyODIgMjAuOTk4LDkuNTM0IEwyMC45OTgsOS41MzQgWiBNMzUuMjQ4LDE2LjUyOCBMNDIuODY3LDIzLjg2NCBDMzguNDU3MDU4OSwyNi40NTIwNzY2IDM2LjYwNTM2MDUsMzEuODc3ODg0NCAzOC41MTMsMzYuNjIyIEwyLjkzOSwzNi42MjIgTDIuOTM5LDI5LjUwNyBMMTIuOTk3LDIxLjUwNyBMMjIuMTA3LDI5LjIwNyBDMjIuNjM4MzEzNywyOS42Mjc3ODEyIDIzLjQwMDM0MDYsMjkuNTg0ODI1OSAyMy44ODEsMjkuMTA3IEwzNS4yNDgsMTYuNTI4IFogTTQ4LjA4NywyNS4wMTMgQzUyLjM2MTY4NCwyNS4wMTMgNTUuODI3LDI4LjQ3ODMxNiA1NS44MjcsMzIuNzUzIEM1NS44MjcsMzcuMDI3Njg0IDUyLjM2MTY4NCw0MC40OTMgNDguMDg3LDQwLjQ5MyBDNDMuODEyMzE2LDQwLjQ5MyA0MC4zNDcsMzcuMDI3Njg0IDQwLjM0NywzMi43NTMgQzQwLjM0MTY3MDgsMzAuNjk4NTk1MyA0MS4xNTU0MjEzLDI4LjcyNjc5ODEgNDIuNjA4MTA5NywyNy4yNzQxMDk3IEM0NC4wNjA3OTgxLDI1LjgyMTQyMTMgNDYuMDMyNTk1MywyNS4wMDc2NzA4IDQ4LjA4NywyNS4wMTMgTDQ4LjA4NywyNS4wMTMgWiBNNDguMDg3LDI2Ljk0OCBDNDcuMzc0NTUyNywyNi45NDggNDYuNzk3LDI3LjUyNTU1MjcgNDYuNzk3LDI4LjIzOCBMNDYuNzk3LDMxLjQ2MiBMNDMuNTcyLDMxLjQ2MiBDNDIuODU5NTUyNywzMS40NjIgNDIuMjgyLDMyLjAzOTU1MjcgNDIuMjgyLDMyLjc1MiBDNDIuMjgyLDMzLjQ2NDQ0NzMgNDIuODU5NTUyNywzNC4wNDIgNDMuNTcyLDM0LjA0MiBMNDYuNzk3LDM0LjA0MiBMNDYuNzk3LDM3LjI2NyBDNDYuNzk3LDM3Ljk3OTQ0NzMgNDcuMzc0NTUyNywzOC41NTcgNDguMDg3LDM4LjU1NyBDNDguNzk5NDQ3MywzOC41NTcgNDkuMzc3LDM3Ljk3OTQ0NzMgNDkuMzc3LDM3LjI2NyBMNDkuMzc3LDM0LjA0MiBMNTIuNjAyLDM0LjA0MiBDNTMuMzE0NDQ3MywzNC4wNDIgNTMuODkyLDMzLjQ2NDQ0NzMgNTMuODkyLDMyLjc1MiBDNTMuODkyLDMyLjAzOTU1MjcgNTMuMzE0NDQ3MywzMS40NjIgNTIuNjAyLDMxLjQ2MiBMNDkuMzc3LDMxLjQ2MiBMNDkuMzc3LDI4LjI0MiBDNDkuMzc4MDYzLDI3Ljg5OTE3ODIgNDkuMjQyNjIyMSwyNy41NzAwMzMxIDQ5LjAwMDU4NDksMjcuMzI3MjQ1NCBDNDguNzU4NTQ3NiwyNy4wODQ0NTc2IDQ4LjQyOTgyMzQsMjYuOTQ3OTk4NCA0OC4wODcsMjYuOTQ4IFoiIGlkPSJQYXRoXzQiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjI3NzcgOTUgMjQgMjQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIG9wYWNpdHk6IDAuNzsKICAgICAgfQoKICAgICAgLmNscy0yIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICAgIGZpbGwtcnVsZTogZXZlbm9kZDsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9Ikdyb3VwXzEwNSIgZGF0YS1uYW1lPSJHcm91cCAxMDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5MDMgLTM4KSI+CiAgICA8Y2lyY2xlIGlkPSJFbGxpcHNlXzUiIGRhdGEtbmFtZT0iRWxsaXBzZSA1IiBjbGFzcz0iY2xzLTEiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODc0IDEzMykiLz4KICAgIDxnIGlkPSJHcm91cF81IiBkYXRhLW5hbWU9Ikdyb3VwIDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYxOSAxMzkpIj4KICAgICAgPGcgaWQ9IkRlbGV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYyIDEpIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAwKSI+CiAgICAgICAgICA8cGF0aCBpZD0iRGVsZXRlLTIiIGRhdGEtbmFtZT0iRGVsZXRlIiBjbGFzcz0iY2xzLTIiIGQ9Ik01LDQuODEyLDEuNDM2LDEuMjQ3QS44NC44NCwwLDEsMCwuMjQ3LDIuNDM2TDMuODEyLDYsLjI0Nyw5LjU2NGEuODQuODQsMCwxLDAsMS4xODgsMS4xODhMNSw3LjE4OGwzLjU2NCwzLjU2NEEuODQuODQsMCwxLDAsOS43NTMsOS41NjRMNi4xODgsNiw5Ljc1MywyLjQzNkEuODQuODQsMCwxLDAsOC41NjQsMS4yNDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xKSIvPgogICAgICAgIDwvZz4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSItMTM2NiAtMTE4NCAyMCAyMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgc3Ryb2tlOiAjZDZkNmQ2OwogICAgICAgIHN0cm9rZS13aWR0aDogMC41cHg7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzYTNhM2E7CiAgICAgIH0KCiAgICAgIC5jbHMtMyB7CiAgICAgICAgc3Ryb2tlOiBub25lOwogICAgICB9CgogICAgICAuY2xzLTQgewogICAgICAgIGZpbGw6IG5vbmU7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJncmF5IiBzdG9wLW9wYWNpdHk9IjAuMzIyIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0iZ3JvdXAtMTI4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTczMSAtMTIzNikiPgogICAgPGcgaWQ9InJlY3RhbmdsZS0zMCIgY2xhc3M9ImNscy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjUgNTIpIj4KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiLz4KICAgICAgPHJlY3QgY2xhc3M9ImNscy00IiB4PSIwLjI1IiB5PSIwLjI1IiB3aWR0aD0iMTkuNSIgaGVpZ2h0PSIxOS41Ii8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0icGF0aC0yNSIgY2xhc3M9ImNscy0yIiBkPSJNNC43NjgsNS4wOS41LDkuMjExLDAsOC43MjcsNC4yNjYsNC42MDYsMCwuNDg0LjUsMCw0Ljc2OCw0LjEyMSw5LjAzMywwbC41LjQ4NEw1LjI2OCw0LjYwNiw5LjUzNSw4LjcyN2wtLjUuNDg0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzcwIDU3KSIvPgogIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSItMTM4OSAtMTE4NCAyMCAyMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgc3Ryb2tlOiAjZDZkNmQ2OwogICAgICAgIHN0cm9rZS13aWR0aDogMC41cHg7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzYTNhM2E7CiAgICAgIH0KCiAgICAgIC5jbHMtMyB7CiAgICAgICAgc3Ryb2tlOiBub25lOwogICAgICB9CgogICAgICAuY2xzLTQgewogICAgICAgIGZpbGw6IG5vbmU7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJncmF5IiBzdG9wLW9wYWNpdHk9IjAuMzIyIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0iZ3JvdXAtMTI3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyOCAtMTE5OSkiPgogICAgPGcgaWQ9InJlY3RhbmdsZS0zMCIgY2xhc3M9ImNscy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMzkgMTUpIj4KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiLz4KICAgICAgPHJlY3QgY2xhc3M9ImNscy00IiB4PSIwLjI1IiB5PSIwLjI1IiB3aWR0aD0iMTkuNSIgaGVpZ2h0PSIxOS41Ii8+CiAgICA8L2c+CiAgICA8ZyBpZD0i5q2j56GuXzFfIiBkYXRhLW5hbWU9Iuato+ehriAoMSkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0My4yNTYgMjAuNzc1KSI+CiAgICAgIDxnIGlkPSJncm91cCI+CiAgICAgICAgPHBhdGggaWQ9InBhdGgiIGNsYXNzPSJjbHMtMiIgZD0iTTI2Ljc0Nyw0My43MDdsLTcuNSw3LjUtLjAyOC0uMDI4LS4wNDcuMDQ3LTQuNDE3LTQuMzU4LjQ2NC0uNDY5TDE5LjIsNTAuMzI2bDcuMDgtNy4wODhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQuNzU5IC00My4yMzgpIi8+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0zNDk0LjQ0OSAtMTIxNiAxMCAxMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9Iue8lui+kSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM1NDEuODE0IC0xMjU0LjAyNSkiPgogICAgPGcgaWQ9Imdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0Ny4zNjUgMzguMDI1KSI+CiAgICAgIDxwYXRoIGlkPSJwYXRoIiBjbGFzcz0iY2xzLTEiIGQ9Ik01Ni45NCw0OC4wMjVINDcuOTgzYS40MzEuNDMxLDAsMCwxLS4yNDgtLjA4NGMtLjAxLDAtLjAyLDAtLjAzLDBhLjM1Mi4zNTIsMCwwLDEtLjIxOS0uMDc1LjMxLjMxLDAsMCwxLS4xMTktLjI3OGwuMy0yLjc0OGEuMzA3LjMwNywwLDAsMSwuMDc4LS4xNzJsNC4yODQtNC44MzJhLjM1NS4zNTUsMCwwLDEsLjQ4LS4wMzhsMi41MTcsMi4wMDdhLjMwNi4zMDYsMCwwLDEsLjA0LjQ0OWwtNC4yNzUsNC44MjFhLjM0LjM0LDAsMCwxLS4xNjguMWwtLjgxOS4yMTlINTYuOTJjLjIzNSwwLC40NDQtLjAxMi40NDQuMjA4YS40MjcuNDI3LDAsMCwxLS40MjUuNDE3Wk01NS44LDQxLjQ0N2wtMy4wNDctMi40MDguNDg5LS41NDZhMS40MjgsMS40MjgsMCwwLDEsMS4wNjUtLjQ2OSwxLjQsMS40LDAsMCwxLC44NjIuMjk0bC45NzIuNzY4YTEuMjM1LDEuMjM1LDAsMCwxLC4xNDcsMS44MTRsLS40ODkuNTQ2WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ3LjM2NSAtMzguMDI1KSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},function(e,t,n){e.exports=n.p+"91875c2e8cc7f757f39300b54043672f.svg"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTVweCIgaGVpZ2h0PSIxNXB4IiB2aWV3Qm94PSIwIDAgMTUgMTUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ2LjIgKDQ0NDk2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCAxMTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJ1cGxvYWQtMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyNjYuMDAwMDAwLCAtMjM0LjAwMDAwMCkiIGZpbGw9IiM3QjdCN0IiPgogICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyNjYuMDAwMDAwLCAyMzQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTE3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3LjQyNDYyMSwgNy40MjQ2MjEpIHJvdGF0ZSg0NS4wMDAwMDApIHRyYW5zbGF0ZSgtNy40MjQ2MjEsIC03LjQyNDYyMSkgIiB4PSItMi41NzUzNzg4IiB5PSI2LjkyNDYyMTIiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTE3LUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcuNDI0NjIxLCA3LjQyNDYyMSkgcm90YXRlKDEzNS4wMDAwMDApIHRyYW5zbGF0ZSgtNy40MjQ2MjEsIC03LjQyNDYyMSkgIiB4PSItMi41NzUzNzg4IiB5PSI2LjkyNDYyMTIiIHdpZHRoPSIyMCIgaGVpZ2h0PSIxIj48L3JlY3Q+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTRweCIgaGVpZ2h0PSIxNHB4IiB2aWV3Qm94PSIwIDAgMTQgMTQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ2LjIgKDQ0NDk2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT7liLfmlrA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0idXBsb2FkLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMTgzLjAwMDAwMCwgLTUzNi4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9IiMzQTNBM0EiPgogICAgICAgICAgICA8ZyBpZD0i5Yi35pawIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTgzLjAwMDAwMCwgNTM2LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTk0ODcyMDgsMTMuOTg1ODEyNCBDNi4yNjUxMzk4LDEzLjk4NTgyODMgNS41NDEzNTE1NiwxMy44NzA4ODM0IDQuODM5ODA5NzIsMTMuNjQzMzM2IEMzLjk0MzEwMjA5LDEzLjM1MjUwNzYgMy4xMjk5NjE4MSwxMi44OTQ1NjA1IDIuNDIyOTg1ODYsMTIuMjgyMjQzMiBDMS43NDAzMjc5MywxMS42OTA5NjExIDEuMTg1MjA0MjQsMTAuOTgxNTYyOSAwLjc3MzA0MDYzMiwxMC4xNzM3MTM0IEMwLjM2MDg5Mjk2Niw5LjM2NTgzMTg5IDAuMTEyMzQyMjQ1LDguNTAwMDA3ODYgMC4wMzQzMDQ2MDk2LDcuNjAwMjcyNDIgQy0wLjA0NjUwNTg1MDksNi42Njg0OTAwOSAwLjA1OTk3NzE4MzUsNS43NDEzNzY5NSAwLjM1MDgyMTUzMSw0Ljg0NDY2OTMyIEMwLjY0MTY0OTkzMSwzLjk0Nzk0NTc2IDEuMDk5NTk3MDksMy4xMzQ4MjE0MSAxLjcxMTkxNDM5LDIuNDI3ODQ1NDYgQzIuMzAzMTY0NTYsMS43NDUxODc1NCAzLjAxMjU3ODY5LDEuMTkwMDYzODUgMy44MjA0MjgyOCwwLjc3NzkwMDIzNiBDNC42MjgyNjE5MywwLjM2NTczNjYyMyA1LjQ5NDA3MDA0LDAuMTE3MTg1OTE4IDYuMzkzNzczNiwwLjAzOTE0ODI4MjUgQzcuMzI1NDc2MjUsLTAuMDQxNjYyMTc4IDguMjUyNjA1MzQsMC4wNjQ4MjA4NTY1IDkuMTQ5MjQ5MjEsMC4zNTU2NjUyMDQgQzEwLjE2NzM1NTgsMC42ODU4NzA5NzkgMTEuMDcxMTM4OSwxLjIwMjc0ODc0IDExLjgzNTQ4MzgsMS44OTE5MDg0NyBDMTIuNTkxNDc4MywyLjU3MzU0NjUgMTMuMTY4MDk5NCwzLjM4NDA1NzM3IDEzLjU0OTMxNTYsNC4zMDA5MDc4NiBDMTMuNjUwNjY3Myw0LjU0NDcwOTcxIDEzLjUzNTIxMjQsNC44MjQ1MTA1NCAxMy4yOTE0MTA2LDQuOTI1ODk0MTEgQzEzLjA0NzY3MjUsNS4wMjcyNDU4MSAxMi43Njc4MDc5LDQuOTExODA2ODYgMTIuNjY2NDI0Myw0LjY2Nzk4OTA3IEMxMi4wMDQ3Njk4LDMuMDc2NjIzODcgMTAuNjE1Mjc5MywxLjgzNjM0MDMyIDguODU0MjI5NjksMS4yNjUxNTMzNCBDNy4zMjI2NTU2MiwwLjc2ODM1NDY4MSA1LjY4OTIzNTgxLDAuODk3ODE3MTUgNC4yNTQ5NDk4MSwxLjYyOTU4OTIxIEMyLjgyMDYxNiwyLjM2MTM5MzE0IDEuNzU3MDkyMzksMy42MDc5NTUzOSAxLjI2MDMyNTYxLDUuMTM5NjQxMDIgQzAuMjM0NzkyOTU3LDguMzAxNTU5MjkgMS45NzI4NzkxLDExLjcwODI5OTMgNS4xMzQ3OTczNiwxMi43MzM4MzE5IEM3LjgxNDIyNzMyLDEzLjYwMjkwNjkgMTAuNzg2MjA2NywxMi40Njk4NTU0IDEyLjIwMTYyNDgsMTAuMDM5Njc3MyBDMTIuMzM0NTI5NCw5LjgxMTUwODUgMTIuNjI3MjA2Myw5LjczNDI5OTUzIDEyLjg1NTM0MzMsOS44NjcxNzIyNSBDMTMuMDgzNDk2MiwxMC4wMDAwNjA5IDEzLjE2MDczNywxMC4yOTI3Mzc5IDEzLjAyNzg0ODMsMTAuNTIwODkwOCBDMTIuMjM3NzAzNCwxMS44Nzc1MDU3IDEwLjk5MjIyNDgsMTIuOTM5NTE1NCA5LjUyMDgwODM5LDEzLjUxMTMyMzggQzguNzg3MDkyMTUsMTMuNzk2NDYzMiA4LjAxNzg1NTAyLDEzLjk1NDcwNTcgNy4yMzQ0ODI4MSwxMy45ODE2ODUgQzcuMTU0NTY0NzcsMTMuOTg0NDQxOSA3LjA3NDY2MjY0LDEzLjk4NTgxMjQgNi45OTQ4NzIwOCwxMy45ODU4MTI0IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjE5NDM0NTYsNS4xMDMwMjA1NiBMOS44Nzk2OTg2MSw1LjEwMzAyMDU2IEM5LjYxNTY3NDIyLDUuMTAzMDIwNTYgOS40MDE2MjQ1Miw0Ljg4ODk3MDg1IDkuNDAxNjI0NTIsNC42MjQ5NDY0NyBDOS40MDE2MjQ1Miw0LjM2MDkyMjA5IDkuNjE1Njc0MjIsNC4xNDY4NzIzOCA5Ljg3OTY5ODYxLDQuMTQ2ODcyMzggTDEzLjE5NDM0NTYsNC4xNDY4NzIzOCBDMTMuNDU4MzcsNC4xNDY4NzIzOCAxMy42NzI0MTk3LDQuMzYwOTIyMDkgMTMuNjcyNDE5Nyw0LjYyNDk0NjQ3IEMxMy42NzI0MTk3LDQuODg4OTcwODUgMTMuNDU4MzcsNS4xMDMwMjA1NiAxMy4xOTQzNDU2LDUuMTAzMDIwNTYgWiIgaWQ9IlNoYXBlIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuNDAyMzg3NSw1LjEwMzAyMDU2IEMxMy4xMzgzNjMxLDUuMTAzMDIwNTYgMTIuOTI0MzEzNCw0Ljg4ODk3MDg1IDEyLjkyNDMxMzQsNC42MjQ5NDY0NyBMMTIuOTI0MzEzNCwxLjMxMDI5OTQ4IEMxMi45MjQzMTM0LDEuMDQ2Mjc1MSAxMy4xMzgzNjMxLDAuODMyMjI1MzkgMTMuNDAyMzg3NSwwLjgzMjIyNTM5IEMxMy42NjY0MTE5LDAuODMyMjI1MzkgMTMuODgwNDYxNiwxLjA0NjI3NTEgMTMuODgwNDYxNiwxLjMxMDI5OTQ4IEwxMy44ODA0NjE2LDQuNjI0OTQ2NDcgQzEzLjg4MDQ2MTYsNC44ODg5NzA4NSAxMy42NjY0Mjc4LDUuMTAzMDIwNTYgMTMuNDAyMzg3NSw1LjEwMzAyMDU2IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},556,function(e,t,n){e.exports=n(1)(10)},function(e,t,n){e.exports=n(1)(100)},function(e,t,n){e.exports=n(1)(1009)},function(e,t,n){e.exports=n(1)(1016)},function(e,t,n){e.exports=n(1)(1051)},function(e,t,n){e.exports=n(1)(1052)},function(e,t,n){e.exports=n(1)(1056)},function(e,t,n){e.exports=n(1)(1057)},function(e,t,n){e.exports=n(1)(1067)},function(e,t,n){e.exports=n(1)(109)},function(e,t,n){e.exports=n(1)(110)},function(e,t,n){e.exports=n(1)(111)},function(e,t,n){e.exports=n(1)(112)},function(e,t,n){e.exports=n(1)(127)},function(e,t,n){e.exports=n(1)(153)},function(e,t,n){e.exports=n(1)(154)},function(e,t,n){e.exports=n(1)(166)},function(e,t,n){e.exports=n(1)(169)},function(e,t,n){e.exports=n(1)(212)},function(e,t,n){e.exports=n(1)(221)},function(e,t,n){e.exports=n(1)(223)},function(e,t,n){e.exports=n(1)(256)},function(e,t,n){e.exports=n(1)(264)},function(e,t,n){e.exports=n(1)(318)},function(e,t,n){e.exports=n(1)(321)},function(e,t,n){e.exports=n(1)(322)},function(e,t,n){e.exports=n(1)(324)},function(e,t,n){e.exports=n(1)(326)},function(e,t,n){e.exports=n(1)(332)},function(e,t,n){e.exports=n(1)(343)},function(e,t,n){e.exports=n(1)(4)},function(e,t,n){e.exports=n(1)(410)},function(e,t,n){e.exports=n(1)(411)},function(e,t,n){e.exports=n(1)(415)},function(e,t,n){e.exports=n(1)(436)},function(e,t,n){e.exports=n(1)(437)},function(e,t,n){e.exports=n(1)(439)},function(e,t,n){e.exports=n(1)(441)},function(e,t,n){e.exports=n(1)(448)},function(e,t,n){e.exports=n(1)(459)},function(e,t,n){e.exports=n(1)(60)},function(e,t,n){e.exports=n(1)(666)},function(e,t,n){e.exports=n(1)(67)},function(e,t,n){e.exports=n(1)(693)},function(e,t,n){e.exports=n(1)(713)},function(e,t,n){e.exports=n(1)(726)},function(e,t,n){e.exports=n(1)(735)},function(e,t,n){e.exports=n(1)(743)},function(e,t,n){e.exports=n(1)(744)},function(e,t,n){e.exports=n(1)(745)},function(e,t,n){e.exports=n(1)(751)},function(e,t,n){e.exports=n(1)(752)},function(e,t,n){e.exports=n(1)(773)},function(e,t,n){e.exports=n(1)(804)},function(e,t,n){e.exports=n(1)(838)},function(e,t,n){e.exports=n(1)(849)},function(e,t,n){e.exports=n(1)(89)},function(e,t,n){e.exports=n(1)(896)},function(e,t,n){e.exports=n(1)(96)},function(e,t,n){e.exports=n(1)(971)},function(e,t,n){e.exports=n(1)(978)},function(e,t,n){e.exports=n(1)(99)}]));