!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),i=e[t[0]];return function(e,t,o){i.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(223);var o=n(2),a=i(o),r=n(69),l=i(r),s=n(76),u=n(155),c=i(u),d=n(164),f=i(d),p=(0,f.default)(),h=document.getElementById("app");l.default.render(a.default.createElement(s.Provider,{store:p},a.default.createElement(c.default,null)),h)},function(e,t){e.exports=vendor},function(e,t,n){e.exports=n(1)(2)},function(e,t,n){e.exports={default:n(84),__esModule:!0}},function(e,t,n){e.exports=n(1)(360)},function(e,t,n){e.exports=n(1)(77)},function(e,t,n){e.exports=n(1)(78)},function(e,t,n){e.exports=n(1)(79)},function(e,t,n){var i=n(172),o=n(52),a=o(function(e,t,n){i(e,t,n)});e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_BASE="/",t.GET_ENV="<%=baseUrl%>userid/getEnv",t.GET_TEMPLATE="/portal/templateService/getTemplate.ep?uidPk=<%=uidPk%>",t.GET_SPREAD="/portal/templateService/getBookInformation.ep",t.SAVE_TEMPLATE="/portal/templateService/updateTemplate.ep",t.PUBLISH_TEMPLATE="/portal/templateService/publishTemplate.ep",t.COPY_TEMPLATE="/portal/templateService/copyTemplate.ep?uidPk=<%=uidPk%>",t.GET_FONTS="<%=baseUrl%>api/product/text/fontmap",t.GET_FONT_THUMBNAIL="<%=baseUrl%>prod-assets/static/font_thumbnail/<%=fontName%>.png",t.GET_STYLE_LIST="/portal/templateService/getStyleList.ep?styleSize=<%=styleSize%>&styleType=<%=styleType%>",t.GET_TEST_IMAGE_URL="http://test-zno-artwork.s3.amazonaws.com/styleimage/<%=guid%>/<%=position%>.jpg",t.GET_LIVE_IMAGE_URL="http://artisanstate-artwork.s3.amazonaws.com/styleimage/<%=guid%>/<%=position%>.jpg",t.TEXT_SRC="<%=baseUrl%>api/product/text/textImage?ratio=<%=ratio%>&textAutoWrap=%7B%22autoWrapType%22%3A%22noWrap%22%2C%22autowrapPosition%22%3A%5B%5D%7D&text=<%=text%>&font=<%=fontFamily%>&fontSize=<%=fontSize%>&color=<%=fontColor%>&align=<%=textAlign%>&verticalTextAlign=<%=verticalTextAlign%>&width=<%=width%>&height=<%=height%>&originalWidth=<%=originalWidth%>&originalHeight=<%=originalHeight%>&originalFontSize=<%=originalFontSize%>&lineSpacing=<%=lineSpacing%>",t.GET_TAG_LIST="<%=wwwBaseUrl%>web-api/decoration/getCardTagList"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_REQUEST="API_REQUEST",t.API_SUCCESS="API_SUCCESS",t.API_FAILURE="API_FAILURE",t.INIT_SPREAD="INIT_SPREAD",t.CHANGE_SPREAD_DATA="CHANGE_SPREAD_DATA",t.INIT_SPREAD_SETTING="INIT_SPREAD_SETTING",t.INIT_ELEMENTS="INIT_ELEMENTS",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.UPDATE_SETTING="UPDATE_SETTING",t.UPDATE_SELECT_ELEMENT_INDEX="UPDATE_SELECT_ELEMENT_INDEX",t.UPDATE_MULTI_ELEMENT="UPDATE_MULTI_ELEMENT",t.UPDATE_ELEMENT_DEPTH="UPDATE_ELEMENT_DEPTH",t.DELETE_ELEMENT="DELETE_ELEMENT",t.CHANGE_SPREAD_SETTING="CHANGE_SPREAD_SETTING",t.SHOW_TEXT_EDIT_MODAL="SHOW_TEXT_EDIT_MODAL",t.HIDE_TEXT_EDIT_MODAL="HIDE_TEXT_EDIT_MODAL"},function(e,t,n){e.exports=n(1)(42)},function(e,t,n){e.exports=n(1)(51)},function(e,t,n){e.exports=n(1)(718)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return Math.random()*(t-e)+e}function a(e,t){return Math.floor(Math.random()*(t-e+1))+e}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePropertiesToInt=t.parsePropertiesToFloat=t.toInt=t.toFloat=t.guid=t.makeId=t.hexToRgb=t.decToHex=t.hexToDec=t.getPxByMM=t.getPxByPt=t.getPtByPx=t.getInchByMM=t.getPxByInch=t.getInchByPx=t.getRandomNum=void 0;var r=n(8),l=i(r);t.getRandomArbitrary=o,t.getRandomInt=a;var s=n(169),u=i(s),c=t.getRandomNum=function(){return Math.round(1e13*Math.random())},d=(t.getInchByPx=function(e){var t=parseFloat(e)||0;return t/300},t.getPxByInch=function(e){var t=parseFloat(e)||0;return 300*t},t.getInchByMM=function(e){var t=parseFloat(e)||0,n=parseFloat(30*t/2.54);return parseFloat((n/300).toFixed(7))},t.getPtByPx=function(e){var t=parseFloat(e)||0;return t/300*72},t.getPxByPt=function(e){var t=parseFloat(e)||0;return 300*t/72},t.getPxByMM=function(e){var t=parseFloat(e)||0;return 30*t/2.54},t.hexToDec=function(e){return parseInt(e.replace("#",""),16)},t.decToHex=function(e){if(0===e)return"#000000";if(!e)return"#ffffff";for(var t=e.toString(16);t.length<6;)t="0"+t;return"#"+t},t.hexToRgb=function(e){return(0,u.default)(e)},t.makeId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ID",t=c();return e+"_"+t},t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.toFloat=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseFloat(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t}),f=t.toInt=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseInt(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t};t.parsePropertiesToFloat=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=d(e[t])}),(0,l.default)({},e,n)},t.parsePropertiesToInt=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=f(e[t])}),(0,l.default)({},e,n)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertObjOut=t.convertObjIn=void 0;var o=n(222),a=i(o),r=n(37),l=i(r),s=n(16),u=i(s),c=n(191),d=i(c),f=n(25),p=i(f);t.convertObjIn=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=(0,u.default)(t)?[]:{};return(0,l.default)(t,function(t,o){n.indexOf(o)!==-1?i[o]=t:(0,p.default)(t)?i[o]=e(t,n):"true"===t||"false"===t?i[o]=Boolean("true"===t):"null"===t?i[o]=null:(0,d.default)(t)?i[o]=t:isNaN((0,a.default)(t))?i[o]=t:i[o]=(0,a.default)(t)}),i},t.convertObjOut=function e(t){var n=(0,u.default)(t)?[]:{};return(0,l.default)(t,function(t,i){(0,d.default)(t)?n[i]=t?"true":"false":(0,p.default)(t)?n[i]=e(t):n[i]=t}),n}},function(e,t,n){e.exports=n(1)(22)},function(e,t,n){e.exports=n(1)(347)},function(e,t){"use strict";function n(e,t,n){var i=e<<16|t<<8|n;return function(e){return"#"+new Array(7-e.length).join("0")+e}(i.toString(16).toUpperCase())}function i(e){var t=e.replace(/^#/,""),n=t.split("");return 3===t.length&&(n[5]=t[2],n[4]=t[2],n[3]=t[1],n[2]=t[1],n[1]=t[0],n[0]=t[0]),parseInt(n.join(""),16)}function o(e){var t=i(e),n=t>>16,o=t>>8&255,a=255&t;return[n,o,a]}function a(e,t){var n=i(e),o=n>>16,a=n>>8&255,r=255&n;return"rgba("+o+", "+a+", "+r+", "+t/100+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.RGBToHex=n,t.hexString2Number=i,t.hexToRGB=o,t.hexToRGBA=a;t.numberToHex=function(e){for(var t=parseInt(e).toString(16).toUpperCase();t.length<6;)t="0"+t;return"#"+t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.elementTypes={photo:"PhotoElement",text:"TextElement"},t.elementAction={MOVE:"MOVE",RESIZE:"RESIZE",ROTATE:"ROTATE"},t.DEFAULT_FONT_FAMILY_ID="roboto",t.DEFAULT_FONT_WEIGHT_ID="roboto",t.DEFAULT_FONT_COLOR="#000000"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,f.default)(e.name)(e.params),i={method:"GET",credentials:"same-origin"};return fetch(n,(0,c.default)({},i,t)).then(function(e){return e.text().then(function(t){return{text:t,response:e}})}).then(function(e){var t=e.text,n=e.response;if(!n.ok)return s.default.reject(n);var i=null;try{i=JSON.parse(t)}catch(e){i=m.default.xml2js(t)}finally{return i}})}Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_API=void 0;var a=n(224),r=i(a),l=n(42),s=i(l),u=n(66),c=i(u),d=n(21),f=i(d);n(73);var p=n(10),h=n(30),m=i(h),v=t.CALL_API=(0,r.default)("Call API");t.default=function(e){return function(e){return function(t){var n=t[v];if("undefined"==typeof n)return e(t);var i=n.apiPattern,a=n.options;return e({apiPattern:i,type:p.API_REQUEST,options:a}),o(i,a).then(function(t){return e({apiPattern:i,type:p.API_SUCCESS,response:t}),t},function(t){return e({apiPattern:i,type:p.API_FAILURE,result:t}),t})}}}},function(e,t,n){function i(e,t,n){var i=p.imports._.templateSettings||p;n&&c(e,t,n)&&(t=void 0),e=h(e),t=o({},t,i,l);var x,S,T=o({},t.imports,i.imports,l),_=d(T),P=r(T,_),w=0,M=t.interpolate||b,k="__p += '",R=RegExp((t.escape||b).source+"|"+M.source+"|"+(M===f?y:b).source+"|"+(t.evaluate||b).source+"|$","g"),C="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(R,function(t,n,i,o,a,r){return i||(i=o),k+=e.slice(w,r).replace(E,s),n&&(x=!0,k+="' +\n__e("+n+") +\n'"),a&&(S=!0,k+="';\n"+a+";\n__p += '"),i&&(k+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),w=r+t.length,t}),k+="';\n";var N=t.variable;N||(k="with (obj) {\n"+k+"\n}\n"),k=(S?k.replace(m,""):k).replace(v,"$1").replace(g,"$1;"),k="function("+(N||"obj")+") {\n"+(N?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(x?", __e = _.escape":"")+(S?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+k+"return __p\n}";var A=a(function(){return Function(_,C+"return "+k).apply(void 0,P)});if(A.source=k,u(A))throw A;return A}var o=n(185),a=n(186),r=n(234),l=n(177),s=n(179),u=n(55),c=n(53),d=n(247),f=n(54),p=n(195),h=n(65),m=/\b__p \+= '';/g,v=/\b(__p \+=) '' \+/g,g=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,b=/($^)/,E=/['\n\r\u2028\u2029\\]/g;e.exports=i},function(e,t,n){e.exports=n(1)(298)},function(e,t,n){e.exports=n(1)(36)},function(e,t,n){e.exports=n(1)(361)},function(e,t,n){e.exports=n(1)(47)},function(e,t,n){e.exports=n(1)(52)},function(e,t,n){e.exports=n(1)(648)},function(e,t,n){e.exports=n(1)(75)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(81),a=i(o),r=n(80),l=i(r);t.default=function(){function e(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=(0,l.default)(e);!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(78),a=i(o),r=new a.default({attributePrefix:""});t.default=r},function(e,t,n){function i(e,t){return o(e,t)}var o=n(219);e.exports=i},function(e,t,n){e.exports=n(1)(144)},function(e,t,n){e.exports=n(1)(147)},function(e,t,n){e.exports=n(1)(236)},function(e,t,n){e.exports=n(1)(417)},function(e,t,n){e.exports=n(1)(622)},function(e,t,n){e.exports=n(1)(717)},function(e,t,n){e.exports=n(1)(73)},function(e,t,n){e.exports=n(1)(80)},function(e,t,n){e.exports=n(1)(877)},function(e,t,n){e.exports={default:n(85),__esModule:!0}},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){var i=n(72),o=n(11),a=n(249);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",r)}},function(e,t,n){var i,o,a,r=n(33),l=n(89),s=n(225),u=n(214),c=n(26),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,m=0,v={},g="onreadystatechange",y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){l("function"==typeof e?e:Function(e),t)},i(m),m},p=function(e){delete v[e]},"process"==n(60)(d)?i=function(e){d.nextTick(r(y,e,1))}:h?(o=new h,a=o.port2,o.port1.onmessage=b,i=r(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(e){c.postMessage(e+"","*")},c.addEventListener("message",b,!1)):i=g in u("script")?function(e){s.appendChild(u("script"))[g]=function(){s.removeChild(this),y.call(e)}}:function(e){setTimeout(r(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.toDecode=function(e){var t=e;try{t=decodeURIComponent(e)}catch(e){}return t},i=t.isEncode=function(e){return"string"==typeof e&&n(e)!==e};t.toEncode=function(e){var t=i(e);return t?e:encodeURIComponent(e)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(66),a=i(o),r=n(3),l=i(r),s=n(5),u=i(s),c=n(4),d=i(c),f=n(7),p=i(f),h=n(6),m=i(h),v=n(2),g=i(v),y=n(40),b=n(12),E=i(b),x=n(149),S=i(x),T=n(148),_=i(T);n(108);var P=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.onDrag=n.onDrag.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStart=n.onResizeStart.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onRotate=n.onRotate.bind(n),n.onRotateStart=n.onRotateStart.bind(n),n.onRotateStop=n.onRotateStop.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"onDragStart",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onDragStart(n,e)}},{key:"onDrag",value:function(e,t){var n=this.props,i=n.id,o=n.actions;o.onDrag(i,e,t)}},{key:"onDragStop",value:function(e,t){var n=this.props,i=n.id,o=n.actions;o.onDragStop(i,e,t)}},{key:"onResizeStart",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onResizeStart(n,e)}},{key:"onResize",value:function(e,t,n){var i=this.props,o=i.id,a=i.actions;a.onResize(o,e,t,n)}},{key:"onResizeStop",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onResizeStop(n,e)}},{key:"onRotateStart",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onRotateStart(n,e)}},{key:"onRotate",value:function(e,t){var n=this.props,i=n.id,o=n.actions;o.onRotate(i,e,t)}},{key:"onRotateStop",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onRotateStop(n,e)}},{key:"onMouseDown",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onMouseDown(n,e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.position,i=e.width,o=e.height,r=e.dep,l=e.rot,s=e.isDisabled,u=e.isSelected,c=e.children,d=(0,a.default)({},{width:i,height:o,left:n.x+"px",top:n.y+"px",transform:"rotate("+l+"deg)",zIndex:r}),f=(0,E.default)("element",t,{selected:u});return g.default.createElement(y.DraggableCore,{axis:"both",onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,onMouseDown:this.onMouseDown},g.default.createElement("div",{className:f,style:d},s?g.default.createElement("span",{className:"lock-icon glyphicon glyphicon-lock"}):null,g.default.createElement(S.default,{isDisabled:s,isSelected:u,rot:l,actions:{onRotate:this.onRotate,onRotateStart:this.onRotateStart,onRotateStop:this.onRotateStop}}),g.default.createElement(_.default,{isDisabled:s,isSelected:u,actions:{onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop}}),c,u?g.default.createElement("div",{className:"element-border"}):null))}}]),t}(v.Component);P.propTypes={id:v.PropTypes.string.isRequired,position:v.PropTypes.shape({x:v.PropTypes.number.isRequired,y:v.PropTypes.number.isRequired}).isRequired,width:v.PropTypes.number.isRequired,height:v.PropTypes.number.isRequired,actions:v.PropTypes.shape({onDragStart:v.PropTypes.func.isRequired,onDrag:v.PropTypes.func.isRequired,onDragStop:v.PropTypes.func.isRequired,onResizeStart:v.PropTypes.func.isRequired,onResize:v.PropTypes.func.isRequired,onResizeStop:v.PropTypes.func.isRequired,onRotateStart:v.PropTypes.func.isRequired,onRotate:v.PropTypes.func.isRequired,onRotateStop:v.PropTypes.func.isRequired}).isRequired,dep:v.PropTypes.number.isRequired,rot:v.PropTypes.number.isRequired,keepRatio:v.PropTypes.bool.isRequired,bounds:v.PropTypes.shape({left:v.PropTypes.number.isRequired,top:v.PropTypes.number.isRequired,right:v.PropTypes.number.isRequired,bottom:v.PropTypes.number.isRequired}),isDisabled:v.PropTypes.bool,isSelected:v.PropTypes.bool,className:v.PropTypes.string},t.default=P},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function i(e,t,n){(void 0===n||a(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(63),a=n(62);e.exports=i},function(e,t,n){function i(e,t,n){for(var i=-1,a=e.length;++i<a;){var r=e[i],l=t(r);if(null!=l&&(void 0===s?l===l&&!o(l):n(l,s)))var s=l,u=r}return u}var o=n(204);e.exports=i},function(e,t,n){function i(e,t){return r(a(e,t,o),e+"")}var o=n(203),a=n(181),r=n(184);e.exports=i},function(e,t,n){function i(e,t,n,i){if(!l(e))return e;t=a(t,e);for(var u=-1,c=t.length,d=c-1,f=e;null!=f&&++u<c;){var p=s(t[u]),h=n;if(u!=d){var m=f[p];h=i?i(m,p,f):void 0,void 0===h&&(h=l(m)?m:r(t[u+1])?[]:{})}o(f,p,h),f=f[p]}return e}var o=n(216),a=n(64),r=n(221),l=n(25),s=n(205);e.exports=i},function(e,t,n){function i(e){return o(function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:void 0,l=o>2?n[2]:void 0;for(r=e.length>3&&"function"==typeof r?(o--,r):void 0,l&&a(n[0],n[1],l)&&(r=o<3?void 0:r,o=1),t=Object(t);++i<o;){var s=n[i];s&&e(t,s,i,r)}return t})}var o=n(50),a=n(53);e.exports=i},function(e,t){function n(){return!1}e.exports=n},function(e,t){var n=/<%=([\s\S]+?)%>/g;e.exports=n},function(e,t,n){function i(e){if(!a(e))return!1;var t=o(e);return t==s||t==l||"string"==typeof e.message&&"string"==typeof e.name&&!r(e)}var o=n(38),a=n(28),r=n(77),l="[object DOMException]",s="[object Error]";e.exports=i},function(e,t,n){function i(e,t){var n={};return t=r(t,3),a(e,function(e,i,a){o(n,i,t(e,i,a))}),n}var o=n(63),a=n(217),r=n(27);e.exports=i},function(e,t,n){var i=n(174),o=n(180),a=o(function(e,t){return null==e?{}:i(e,t)});e.exports=a},function(e,t,n){function i(e,t,n){return null==e?e:o(e,t,n)}var o=n(51);e.exports=i},function(e,t,n){e.exports=n(1)(132)},function(e,t,n){e.exports=n(1)(146)},function(e,t,n){e.exports=n(1)(157)},function(e,t,n){e.exports=n(1)(197)},function(e,t,n){e.exports=n(1)(276)},function(e,t,n){e.exports=n(1)(284)},function(e,t,n){e.exports=n(1)(301)},function(e,t,n){e.exports=n(1)(355)},function(e,t,n){e.exports=n(1)(384)},function(e,t,n){e.exports=n(1)(387)},function(e,t,n){e.exports=n(1)(40)},function(e,t,n){e.exports=n(1)(406)},function(e,t,n){e.exports=n(1)(58)},function(e,t,n){e.exports=n(1)(60)},function(e,t,n){e.exports=n(1)(623)},function(e,t,n){e.exports=n(1)(639)},function(e,t,n){e.exports=n(1)(736)},function(e,t,n){e.exports=n(1)(886)},function(e,t,n){e.exports=n(1)(90)},function(e,t,n){e.exports=n(1)(934)},,function(e,t,n){e.exports={default:n(82),__esModule:!0}},function(e,t,n){e.exports={default:n(83),__esModule:!0}},function(e,t,n){n(35),n(34),e.exports=n(94)},function(e,t,n){n(35),n(34),e.exports=n(95)},function(e,t,n){n(96),e.exports=n(11).Object.getPrototypeOf},function(e,t,n){n(97),e.exports=n(11).Object.keys},function(e,t,n){n(230),n(34),n(35),n(98),e.exports=n(11).Promise},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(33),o=n(227),a=n(226),r=n(39),l=n(215),s=n(70),u={},c={},t=e.exports=function(e,t,n,d,f){var p,h,m,v,g=f?function(){return e}:s(e),y=i(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(p=l(e.length);p>b;b++)if(v=t?y(r(h=e[b])[0],h[1]):y(e[b]),v===u||v===c)return v}else for(m=g.call(e);!(h=m.next()).done;)if(v=o(m,y,h.value,t),v===u||v===c)return v};t.BREAK=u,t.RETURN=c},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(26),o=n(44).set,a=i.MutationObserver||i.WebKitMutationObserver,r=i.process,l=i.Promise,s="process"==n(60)(r);e.exports=function(){var e,t,n,u=function(){var i,o;for(s&&(i=r.domain)&&i.exit();e;){o=e.fn,e=e.next;try{o()}catch(i){throw e?n():t=void 0,i}}t=void 0,i&&i.enter()};if(s)n=function(){r.nextTick(u)};else if(a){var c=!0,d=document.createTextNode("");new a(u).observe(d,{characterData:!0}),n=function(){d.data=c=!c}}else if(l&&l.resolve){var f=l.resolve();n=function(){f.then(u)}}else n=function(){o.call(i,u)};return function(i){var o={fn:i,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var i=n(244);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:i(e,o,t[o]);return e}},function(e,t,n){"use strict";var i=n(26),o=n(11),a=n(231),r=n(232),l=n(23)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:i[e];r&&t&&!t[l]&&a.f(t,l,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(39),o=n(67),a=n(23)("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||void 0==(n=i(r)[a])?t:o(n)}},function(e,t,n){var i=n(39),o=n(70);e.exports=n(11).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i=n(68),o=n(23)("iterator"),a=n(201);e.exports=n(11).isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||a.hasOwnProperty(i(t))}},function(e,t,n){var i=n(61),o=n(229);n(43)("getPrototypeOf",function(){return function(e){return o(i(e))}})},function(e,t,n){var i=n(61),o=n(202);n(43)("keys",function(){return function(e){return o(i(e))}})},function(e,t,n){"use strict";var i,o,a,r=n(208),l=n(26),s=n(33),u=n(68),c=n(72),d=n(200),f=n(67),p=n(87),h=n(88),m=n(93),v=n(44).set,g=n(90)(),y="Promise",b=l.TypeError,E=l.process,x=l[y],E=l.process,S="process"==u(E),T=function(){},_=!!function(){try{var e=x.resolve(1),t=(e.constructor={})[n(23)("species")]=function(e){e(T,T)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof t}catch(e){}}(),P=function(e,t){return e===t||e===x&&t===a},w=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},M=function(e){return P(x,e)?new k(e):new o(e)},k=o=function(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=i}),this.resolve=f(t),this.reject=f(n)},R=function(e){try{e()}catch(e){return{error:e}}},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;g(function(){for(var i=e._v,o=1==e._s,a=0,r=function(t){var n,a,r=o?t.ok:t.fail,l=t.resolve,s=t.reject,u=t.domain;try{r?(o||(2==e._h&&I(e),e._h=1),r===!0?n=i:(u&&u.enter(),n=r(i),u&&u.exit()),n===t.promise?s(b("Promise-chain cycle")):(a=w(n))?a.call(n,l,s):l(n)):s(i)}catch(e){s(e)}};n.length>a;)r(n[a++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){v.call(l,function(){var t,n,i,o=e._v;if(A(e)&&(t=R(function(){S?E.emit("unhandledRejection",o,e):(n=l.onunhandledrejection)?n({promise:e,reason:o}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",o)}),e._h=S||A(e)?2:1),e._a=void 0,t)throw t.error})},A=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!A(t.promise))return!1;return!0},I=function(e){v.call(l,function(){var t;S?E.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},D=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=w(e))?g(function(){var i={_w:n,_d:!1};try{t.call(e,s(D,i,1),s(L,i,1))}catch(e){L.call(i,e)}}):(n._v=e,n._s=1,C(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};_||(x=function(e){p(this,x,y,"_h"),f(e),i.call(this);try{e(s(D,this,1),s(L,this,1))}catch(e){L.call(this,e)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(91)(x.prototype,{then:function(e,t){var n=M(m(this,x));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&C(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),k=function(){var e=new i;this.promise=e,this.resolve=s(D,e,1),this.reject=s(L,e,1)}),c(c.G+c.W+c.F*!_,{Promise:x}),n(209)(x,y),n(92)(y),a=n(11)[y],c(c.S+c.F*!_,y,{reject:function(e){var t=M(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(r||!_),y,{resolve:function(e){if(e instanceof x&&P(e.constructor,this))return e;var t=M(this),n=t.resolve;return n(e),t.promise}}),c(c.S+c.F*!(_&&n(228)(function(e){x.all(e).catch(T)})),y,{all:function(e){var t=this,n=M(t),i=n.resolve,o=n.reject,a=R(function(){var n=[],a=0,r=1;h(e,!1,function(e){var l=a++,s=!1;n.push(void 0),r++,t.resolve(e).then(function(e){s||(s=!0,n[l]=e,--r||i(n))},o)}),--r||i(n)});return a&&o(a.error),n.promise},race:function(e){var t=this,n=M(t),i=n.reject,o=R(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return o&&i(o.error),n.promise}})},function(e,t){},99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(12),g=i(v);n(99);var y=function(e){function t(e){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=e.onClicked,o=e.width,a=e.height,r=e.disabled,l=(0,g.default)("button",n,{disabled:r});return m.default.createElement("button",{className:l,onClick:i,style:{width:o?o+"px":"",height:a?a+"px":""},disabled:r},t)}}]),t}(h.Component);t.default=y,y.propTypes={onClicked:h.PropTypes.func,className:h.PropTypes.string,width:h.PropTypes.number,height:h.PropTypes.number,disabled:h.PropTypes.bool}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(29),a=i(o),r=n(3),l=i(r),s=n(5),u=i(s),c=n(4),d=i(c),f=n(7),p=i(f),h=n(6),m=i(h),v=n(8),g=i(v),y=n(2),b=i(y),E=n(243),x=n(18);n(100);var S=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e)),i=n.props.initHexString,o={r:"255",g:"255",b:"255"},r=o;if(i){var s=(0,x.hexToRGB)(i),c=(0,a.default)(s,3),d=c[0],f=c[1],h=c[2];r=(0,g.default)({},o,{r:d,g:f,b:h})}return n.state={displayColorPicker:!1,color:r},n.handleClick=n.handleClick.bind(n),n.handleChange=n.handleChange.bind(n),n.handleClose=n.handleClose.bind(n),n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.needResetColor,n=e.needResetColor;if(t!==n&&n){var i=(0,x.hexToRGB)(e.initHexString),o=(0,a.default)(i,3),r=o[0],l=o[1],s=o[2];this.setState({color:{r:r,g:l,b:s}})}}},{key:"handleClick",value:function(){var e=this;this.setState({displayColorPicker:!this.state.displayColorPicker},function(){e.state.displayColorPicker&&e.popover.focus()})}},{key:"handleChange",value:function(e){this.setState({color:e.rgb}),this.props.onColorChange(e)}},{key:"handleClose",value:function(e){var t=this,n=e.currentTarget;setTimeout(function(){n.contains(document.activeElement)||t.setState({displayColorPicker:!1})},0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.displayColorPicker,i=t.color,o={background:"rgb("+i.r+", "+i.g+", "+i.b+")"},a=["#E5F1E1","#F6D8DA","#7CE0D3","#FF9999","#ADC1E4","#E2DAC8","#93B55A","#FFCE43","#CC000E","#71000A","#155B4D","#4D8BF5","#121639","#000000","#E3E3E3","#FFFFFF"];return b.default.createElement("div",{className:"color-picker"},b.default.createElement("div",{className:"swatch",onClick:this.handleClick},b.default.createElement("div",{className:"color",style:o})),n?b.default.createElement("div",{className:"popover",tabIndex:"-1",ref:function(t){e.popover=t},onBlur:this.handleClose},b.default.createElement(E.SketchPicker,{color:i,onChange:this.handleChange,presetColors:a,disableAlpha:!0})):null)}}]),t}(y.Component);S.propTypes={onColorChange:y.PropTypes.func.isRequired,initHexString:y.PropTypes.string,needResetColor:y.PropTypes.bool},t.default=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(12),g=i(v);n(101);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.stopEvent=n.stopEvent.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.onBackDropClick=n.onBackDropClick.bind(n),n.stopDragEvent=function(e){var t=e||window.event;t.stopPropagation(),t.preventDefault()},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentDidUpdate",value:function(e,t){var n=e.opened,i=this.props.opened;n!==i&&i&&this.modalContainer.focus()}},{key:"handleKeyDown",value:function(e){this.props.escapeClose&&27===e.keyCode&&(e.preventDefault(),this.props.onClosed())}},{key:"onBackDropClick",value:function(){var e=this.props,t=e.closeByBackDropClick,n=e.onClosed;t&&n()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,i=t.className,o=t.opened,a=t.onClosed,r=t.isHideIcon,l=(0,g.default)("x-modal",{show:o}),s=(0,g.default)("icon-close",{hide:r}),u=(0,g.default)("content",i);return m.default.createElement("div",{ref:function(t){e.modalContainer=t},tabIndex:"-1",className:l,onClick:this.stopEvent,onMouseDown:this.stopEvent,onKeyDown:this.handleKeyDown},m.default.createElement("div",{className:"backdrop",onClick:this.onBackDropClick}),m.default.createElement("div",{className:u,onDragStart:this.stopDragEvent},m.default.createElement("span",{className:s,onClick:a}),n))}}]),t}(h.Component);t.default=y,y.defaultProps={escapeClose:!0,closeByBackDropClick:!1},y.propTypes={onClosed:h.PropTypes.func.isRequired,className:h.PropTypes.string,opened:h.PropTypes.bool.isRequired,escapeClose:h.PropTypes.bool,isHideIcon:h.PropTypes.bool,closeByBackDropClick:h.PropTypes.bool}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(31),m=i(h),v=n(2),g=i(v),y=n(207),b=i(y);n(102);var E=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={value:e.value},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){(0,m.default)(this.props.value,e.value)||this.setState({value:e.value})}},{key:"onOpen",value:function(){var e=this;setTimeout(function(){e.rePositionScrollBar(e.state.value)})}},{key:"rePositionScrollBar",value:function(e){var t=document.querySelectorAll(".Select-option"),n=void 0;if(t.forEach(function(t){var i=t.getAttribute("class");/is-focused/.test(i)&&(i=i.replace("is-focused",""),t.setAttribute("class",i)),t.innerHTML===e.label&&(i+=i.indexOf("is-selected")>=0?"":" is-selected",t.setAttribute("class",i),n=t)}),n){var i=n.parentNode;i.scrollTop=n.offsetTop}}},{key:"render",value:function(){var e=this.props,t=e.onChanged,n=e.optionComponent,i=e.options,o=e.searchable,a=e.placeholder,r=e.arrowRenderer,l=(e.value,e.valueComponent);return g.default.createElement(b.default,{arrowRenderer:r,onChange:t,optionComponent:n,options:i,placeholder:a,value:this.state.value,searchable:o,onOpen:this.onOpen.bind(this),valueComponent:l})}}]),t}(v.Component);t.default=E},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{
default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(242),g=i(v);n(103);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={defaultValue:0,defaultStep:1,defaultMin:0,defaultMax:100,defaultVertical:!1},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"percentFormatter",value:function(e){return e+" in."}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.min,i=e.vertical,o=e.step,a=e.max,r=e.tipFormatter,l=e.handleSliderChange,s=e.handleAfterChange,u=e.handleBeforeChange;return m.default.createElement(g.default,{value:t,defaultValue:this.state.defaultValue,min:n?n:this.state.defaultMin,max:a?a:this.state.defaultMax,step:o?o:this.state.defaultStep,tipFormatter:r?r:this.percentFormatter.bind(this),vertical:i?i:this.state.defaultVertical,onChange:l,onAfterChange:s,onBeforeChange:u})}}]),t}(h.Component);y.propTypes={value:h.PropTypes.number,min:h.PropTypes.number,max:h.PropTypes.number,step:h.PropTypes.number,tipFormatter:h.PropTypes.func,vertical:h.PropTypes.bool,handleSliderChange:h.PropTypes.func},t.default=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.webClientId=1,t.supportedImagesTypes=["image/jpeg","image/jpg","image/png","image/x-png","image/png"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.transform=function(e,t){var n=e.x,i=e.y,o=e.width,a=e.height,r=Math.sqrt(Math.pow(o,2)+Math.pow(a,2))/2,l=Math.round(180*Math.atan(a/o)/Math.PI),s=180-t-l,u=l-t,c={x:n+o/2+r*Math.cos(s*Math.PI/180),y:i+a/2-r*Math.sin(s*Math.PI/180)},d={x:n+o/2+r*Math.cos(u*Math.PI/180),y:i+a/2-r*Math.sin(u*Math.PI/180)},f={x:n+o/2-r*Math.cos(s*Math.PI/180),y:i+a/2+r*Math.sin(s*Math.PI/180)},p={x:n+o/2-r*Math.cos(u*Math.PI/180),y:i+a/2+r*Math.sin(u*Math.PI/180)},h=Math.min(c.x,d.x,f.x,p.x),m=Math.max(c.x,d.x,f.x,p.x),v=Math.min(c.y,d.y,f.y,p.y),g=Math.max(c.y,d.y,f.y,p.y);return{point:{topLeft:c,topRight:d,bottomLeft:p,bottomRight:f},width:m-h,height:g-v,left:h,right:m,top:v,bottom:g}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParam=t.getUrl=t.combine=void 0;var o=n(13),a=i(o),r=n(189),l=i(r);t.combine=function(e,t,n){if(!e||!t)return"";var i=e;i.endsWith("/")&&(i=i.slice(0,i.length-1));var o=[];return n&&(0,l.default)(n,function(e,t){o.push(t+"="+e)}),i+"/"+t+"?"+o.join("&")},t.getUrl=function(e,t){return(0,a.default)(e,t)||""},t.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){return function(e){return e((0,r.default)({},l.CALL_API,{apiPattern:{name:s.GET_ENV,params:{webClientId:u.webClientId,baseUrl:s.API_BASE,autoRandomNum:(0,c.getRandomNum)()}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(32),r=i(a);t.getEnv=o;var l=n(20),s=n(9),u=n(129),c=n(14)},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t){var n=(0,u.default)(t(),"system.env.urls");return e((0,l.default)({},c.CALL_API,{apiPattern:{name:f.GET_FONTS,params:{baseUrl:n.baseUrl}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),l=o(r),s=n(13),u=o(s);t.getFontList=a;var c=n(20),d=n(9),f=i(d)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){return function(e,t){var n=t(),i=(0,_.default)(n,"project.__originalData__.belongProductId");e((0,v.default)({},N.CALL_API,{apiPattern:{name:M.GET_SPREAD},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:w.default.stringify({belongProductId:i})}})).then(function(t){q(t,e,n)})}}function a(){return function(e,t){var n=t(),i=(0,_.default)(t(),"system.env.urls"),o=(0,D.getUrlParam)("format"),a=(0,_.default)(n,"project.setting.size");e((0,v.default)({},N.CALL_API,{apiPattern:{name:M.GET_STYLE_LIST,params:{styleType:o,styleSize:a}}})).then(function(t){V(t,e,n,i)})}}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPublish:!1};return function(t,n){var i=n(),o=i.project,a=i.system,r=o.spread,l=o.setting,s=o.spreadOptions,u=s.oriWidth,c=s.oriHeight,d=0,f=0,p=0,h=0,m=0,g=(0,S.default)({},r);g.elements.element.map(function(e){var t=e.width/e.height;e.px=e.x/u,e.pw=e.width/u,e.py=e.y/c,e.ph=e.height/c;var n=e.type;t>1?n===k.elementTypes.photo?d++:h++:t<1?n===k.elementTypes.photo?f++:m++:n===k.elementTypes.photo&&p++,e.fontColor&&(e.color=(0,j.hexString2Number)(e.fontColor),delete e.fontColor)});var y=(0,A.generateTemplate)(g,a.tagList),b=(0,S.default)({},l,{frameHorizonNum:d,frameVertialNum:f,frameSquareNum:p,textFrameHorizonNum:h,textFrameVertialNum:m}),E=(0,S.default)({},b,{xmlViewData:y,xmlViewDataPublish:y});return e.isPublish&&(E=(0,S.default)({},E,{status:"Review"})),t((0,v.default)({},N.CALL_API,{apiPattern:{name:e.isPublish?M.PUBLISH_TEMPLATE:M.SAVE_TEMPLATE},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:w.default.stringify(E)}})).then(function(t){var n=e.isPublish?"Submit":"Save";0===t.errorCode?alert(n+" Successful!"):alert(n+" Failed!")})}}function l(){return function(e,t){var n=t(),i=(0,_.default)(n,"project.uidPk"),o=(0,_.default)(n,"project.__originalData__.parentUidpk");return 0!=o?void alert("This is not original template"):void(""==i||0==i?alert("uidpk is error"):window.open((0,E.default)(M.COPY_TEMPLATE)({uidPk:i})))}}function s(e){return function(t,n){t({type:R.DELETE_ELEMENT,elementId:e})}}function u(e,t){return function(n,i){var o=i(),a=(0,_.default)(o,"project.spread.elements.element"),r=a.filter(function(t){return t.id===e});return("undefined"!=typeof t.isLock||!r[0].isLock)&&void n({type:R.UPDATE_ELEMENT,elementId:e,newAttribute:t})}}function c(e){return function(t,n){t({type:R.UPDATE_MULTI_ELEMENT,newElementArray:e})}}function d(e){return function(t,n){t({type:R.UPDATE_SETTING,newSetting:e})}}function f(e){var t=0;return function(n,i){var o=i(),a=(0,_.default)(o,"project.spread.elements.element"),r=a.findIndex(function(t){return t.id===e}),l=a[r];if(l.isLock)return!1;var s=a.map(function(t){return t.id!==e?{dep:t.dep,id:t.id}:{dep:a.length,id:t.id}});s.sort(function(e,t){return e.dep>t.dep}),s=s.map(function(n){return e!=n.id?(0,S.default)({},n,{dep:t++}):n}),n({type:R.UPDATE_ELEMENT_DEPTH,newElementArray:s})}}function p(e){var t=1;return function(n,i){var o=i(),a=(0,_.default)(o,"project.spread.elements.element"),r=a.map(function(n){return n.id!==e?{dep:t++,id:n.id}:{dep:0,id:n.id}});n({type:R.UPDATE_ELEMENT_DEPTH,newElementArray:r})}}function h(e){return function(t,n){n();return t((0,v.default)({},N.CALL_API,{apiPattern:{name:M.GET_TEMPLATE,params:{uidPk:e}}})).then(function(e){var n=e.data;G(n,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var m=n(32),v=i(m),g=n(192),y=i(g),b=n(21),E=i(b),x=n(8),S=i(x),T=n(13),_=i(T);t.getSpreadInfomation=o,t.getStyleList=a,t.saveProject=r,t.copyProject=l,t.deleteElement=s,t.updateElement=u,t.updateMultiElement=c,t.updateSetting=d,t.elementToFront=f,t.elementToBack=p,t.getProjectData=h;var P=n(75),w=i(P),M=n(9),k=n(19),R=n(10),C=n(154),N=n(20),A=n(167),I=n(168),L=n(14),D=n(131),O=n(15),j=n(18),z=n(30),F=i(z),U=[],B={},G=function(e,t){var n=e.sheetType,i=e.frameHorizonNum,o=e.textFrameHorizonNum,a=e.xmlViewData;if(null==a){var r=0;for(t({type:R.INIT_SPREAD,spread:{type:n,bgColor:16777215}});i--;)U.push(H(r++));for(;o--;)U.push(H(r++,k.elementTypes.text))}else{var l=F.default.xml2js((0,_.default)(e,"xmlViewData"));B=l.templateView.spread}},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.elementTypes.photo,n={id:(0,L.guid)(),type:t,x:20*e,y:10*e,width:500,height:600,rot:0,dep:e,isLock:!1,keepRatio:!1};return t===k.elementTypes.text?(0,S.default)({},n,{text:"Double click to edit text",fontColor:k.DEFAULT_FONT_COLOR,fontSize:95.8,textAlign:"center",fontWeight:"normal",fontFamily:"Roboto",textVAlign:"middle",width:1200,height:120}):n},W=function(e,t){var n=C.innerSafeZong.filter(function(t){return t.type.indexOf(e)>=0});if(n.length){if(1===n.length)return n[0].safeZone;var i=n.filter(function(e){return e.size.indexOf(t)>=0});return i[0].safeZone}return{top:0,left:0,right:0,bottom:0}},q=function(e,t,n){var i=(0,O.convertObjIn)((0,_.default)(e,"book")),o=(0,_.default)(n,"project.setting.size"),a=(0,_.default)(n,"project.setting.sheetType"),r=((0,_.default)(n,"project.setting.xmlViewData"),i.bookWidth),l=i.bookHeight,s=i.bleedingPixelTop,u=i.bleedingPixelBottom,c=i.bleedingPixelLeft,d=i.bleedingPixelRight,f=(0,I.getBoxLimit)(r+c+d,l+s+u),p=f.ratio,h=f.width,m=f.height,v=W(a,o);t({type:R.INIT_SPREAD_SETTING,options:{oriWidth:r+c+d,oriHeight:l+s+u,bleed:{top:s,left:c,right:d,bottom:u},safeZone:{top:v.top,left:v.left,right:v.right,bottom:v.bottom},ratio:p,width:h,height:m}});var g=(0,O.convertObjIn)((0,_.default)(B,"elements.element")||U).map(function(e){var t=(0,S.default)({},e,{px:e.x/r,py:e.y/l,pw:e.width/r,ph:e.height/l});if(e.type===k.elementTypes.text){var n=t.fontSize,i=t.color,o=t.lineSpacing;n&&n>1&&(t.fontSize=e.fontSize/l),(0,y.default)(i)&&(t.fontColor=(0,j.numberToHex)(i),delete t.color),"undefined"==typeof o&&(t.lineSpacing=1.2)}return t}),b=(0,S.default)({},B);b.elements&&(b.elements.element=g),t({type:R.INIT_SPREAD,spread:b}),B={},t({type:R.INIT_ELEMENTS,elements:(0,O.convertObjIn)(g),bookWidth:r,bookHeight:l}),U=[]},V=function(e,t,n,i){var o=(0,_.default)(e,"data"),a=(0,_.default)(n,"project.setting.usePosition"),r={front:"0",back:"1",inside:"2"},l=r[a],s=(0,D.getUrlParam)("styleId"),u="";if(o.length){var c=o.find(function(e){return e.uidPk==s}),d=c.guid;u=/portal.zno.com\//.test(location.href)?(0,E.default)(M.GET_LIVE_IMAGE_URL)({guid:d,position:l}):(0,E.default)(M.GET_TEST_IMAGE_URL)({guid:d,position:l}),t({type:R.CHANGE_SPREAD_SETTING,bgUrl:u}),t((0,v.default)({},N.CALL_API,{apiPattern:{name:M.GET_TAG_LIST,params:{wwwBaseUrl:i.wwwBaseUrl}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:w.default.stringify({categoryLeafNode:c.festival})}}))}}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return{type:l.SHOW_TEXT_EDIT_MODAL,data:e}}function a(){return{type:l.HIDE_TEXT_EDIT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showTextEditModal=o,t.hideTextEditModal=a;var r=n(10),l=i(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h);n(104);var v=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"handleToFront",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=t[0];n.elementToFront(i.id)}},{key:"handleToBack",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=t[0];n.elementToBack(i.id)}},{key:"handleSetKeepRatio",value:function(e){var t=this.props,n=t.selectedElementArray,i=t.actions,o=n[0];i.updateElement(o.id,{keepRatio:e})}},{key:"handleSetLock",value:function(e){var t=this.props,n=t.selectedElementArray,i=t.actions,o=n[0];i.updateElement(o.id,{isLock:e})}},{key:"render",value:function(){var e=this.props,t=e.selectedElementArray,n=(e.actions,t[0]),i=!(!n||!n.keepRatio),o=!(!n||!n.isLock),a=1===t.length,r={display:a?"block":"none"};return m.default.createElement("div",{className:"action-button",style:r},m.default.createElement("div",{className:"label-detail"},m.default.createElement("i",{className:"glyphicon glyphicon-sort"})," Depth"),m.default.createElement("div",{className:"label-item",id:"inputbox-oy"},m.default.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleToFront.bind(this)},"Front"),m.default.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:this.handleToBack.bind(this)},"Back")),m.default.createElement("div",{className:"label-detail"},m.default.createElement("i",{className:"glyphicon glyphicon-lock"})," Element"),m.default.createElement("div",{className:"label-item",id:"inputbox-oy"},m.default.createElement("input",{type:"radio",id:"lock",name:"islock",checked:o===!0,onChange:this.handleSetLock.bind(this,!0)})," ",m.default.createElement("label",{htmlFor:"lock"},"Lock")," ",m.default.createElement("br",null),m.default.createElement("input",{type:"radio",id:"unlock",name:"islock",checked:o===!1,onChange:this.handleSetLock.bind(this,!1)})," ",m.default.createElement("label",{htmlFor:"unlock"},"Unlock")," ",m.default.createElement("br",null)),m.default.createElement("div",{className:"label-detail"},m.default.createElement("i",{className:"glyphicon glyphicon-fullscreen"})," Scale"),m.default.createElement("div",{className:"label-item",id:"inputbox-oy"},m.default.createElement("input",{type:"radio",id:"keep",name:"keepratio",checked:i===!0,onChange:this.handleSetKeepRatio.bind(this,!0)})," ",m.default.createElement("label",{htmlFor:"keep"},"Keep Ratio")," ",m.default.createElement("br",null),m.default.createElement("input",{type:"radio",id:"free",name:"keepratio",checked:i===!1,onChange:this.handleSetKeepRatio.bind(this,!1)})," ",m.default.createElement("label",{htmlFor:"free"},"Free Ratio")," ",m.default.createElement("br",null)))}}]),t}(h.Component);v.propTypes={selectedElementArray:h.PropTypes.array.isRequired,actions:h.PropTypes.shape({elementToFront:h.PropTypes.func.isRequired,elementToBack:h.PropTypes.func.isRequired,updateElement:h.PropTypes.func.isRequired})},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(57),m=i(h),v=n(2),g=i(v);n(105);var y=function(e){function t(e){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"getShowParamKey",value:function(){return["sheetType","size","status","frameTotalNum","frameHorizonNum","frameVertialNum","frameSquareNum","coverDefault","pressBookSheet","textFrameTotalNum"]}},{key:"getCustomKey",value:function(){return{sheetType:"Type",frameTotalNum:"Images Total",frameHorizonNum:"Horizontals",frameVertialNum:"Verticals",frameSquareNum:"Square",pressBookSheet:"PressBookSheet",coverDefault:"IsCoverDefault",textFrameTotalNum:"textFrame Total",textFrameHorizonNum:"Horiz textFrame",textFrameVertialNum:"Verti textFrame",bestChosen:"Chosen For app",shareFlag:"If Share"}}},{key:"getBasicInfoHtml",value:function(){var e=this.props.setting,t=this.getShowParamKey(),n=this.getCustomKey(),i=(0,m.default)(e,t),o=[],a=0;for(var r in i){var l=i[r];l=null==l?"":l,r=n[r]?n[r]:r.replace(/([A-Z]+)/g," $1");var s='<div class="col-md-2 text-right">'+r+':</div><div class="col-md-2 text-left"><strong id="detail-sheettype">'+l+"</strong></div>";a%3===0?o.push('<div class="row">'+s):a%3===2?o.push(s+"</div>"):o.push(s),a++}return o.join("")}},{key:"render",value:function(){var e=this.props.setting,t=e.size,n=e.sheetType;return g.default.createElement("div",null,g.default.createElement("div",{className:"title"},"Editing Layout |",g.default.createElement("span",{className:"color-highlight",id:"book-type"}," ",n)," |",g.default.createElement("span",{className:"color-highlight",id:"book-size"}," ",t)),g.default.createElement("div",{className:"basic-info",dangerouslySetInnerHTML:{__html:this.getBasicInfoHtml()}}))}}]),t}(v.Component);y.propTypes={setting:v.PropTypes.object.isRequired},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h);n(106);var v=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"bleed-container",style:this.props.style})}}]),t}(h.Component);v.propTypes={style:h.PropTypes.shape({left:h.PropTypes.number.isRequired,right:h.PropTypes.number.isRequired,top:h.PropTypes.number.isRequired,bottom:h.PropTypes.number.isRequired}).isRequired},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h);n(107);var v=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"handleSave",value:function(){var e=this.props.actions,t=e.saveProject;t()}},{key:"handlePublish",value:function(){var e=this.props.actions,t=e.saveProject;t({isPublish:!0})}},{key:"handleCopy",value:function(){var e=this.props.actions,t=e.copyProject;t()}},{key:"handleCoverDefaultChange",value:function(e){var t=e;this.updateSetting({isCoverDefault:t})}},{key:"handleBestChosenChange",value:function(e){var t=e;this.updateSetting({bestChosen:t})}},{key:"handleShareFlagChange",value:function(e){var t=e;this.updateSetting({shareFlag:t})}},{key:"updateSetting",value:function e(t){var n=this.props.actions,e=n.updateSetting;e(t)}},{key:"render",value:function(){var e=this.props.setting,t=e.isCoverDefault,n=e.bestChosen,i=e.shareFlag,o=t||!1,a=!(!n||1!=n),r=!(!i||1!=i);return m.default.createElement("div",{className:"panel panel-info  panel-info canvas-panel"},m.default.createElement("div",{className:"panel-heading"},m.default.createElement("h3",{className:"panel-title"},m.default.createElement("i",{className:"glyphicon glyphicon-wrench"}),"Control Panel")),m.default.createElement("div",{className:"panel-body"},m.default.createElement("div",null,m.default.createElement("h5",null,m.default.createElement("i",{className:"glyphicon glyphicon-move"}),"Circle handler scaling",m.default.createElement("small",null,"(enable circle handler for scaling)")),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",{title:"circle handler can be used for scaling"},m.default.createElement("input",{type:"radio",name:"scaleRadio"}),"Enable")),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"scaleRadio"}),"Disable"))),m.default.createElement("div",null,m.default.createElement("h5",null,m.default.createElement("i",{className:"glyphicon glyphicon-heart-empty"})," The same type,size,Images total is the default"," "),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"defaultRadio",checked:1==o,onClick:this.handleCoverDefaultChange.bind(this,!0)}),"is default")),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"defaultRadio",checked:0==o,onClick:this.handleCoverDefaultChange.bind(this,!1)}),"not default"))),m.default.createElement("div",null,m.default.createElement("h5",null,m.default.createElement("i",{className:"glyphicon glyphicon-check"})," Chosen for App "),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"chosenRadio",checked:1==a,onClick:this.handleBestChosenChange.bind(this,1)}),"is chosen")),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"chosenRadio",checked:0==a,onClick:this.handleBestChosenChange.bind(this,0)}),"not chosen"))),m.default.createElement("div",null,m.default.createElement("h5",null,m.default.createElement("i",{className:"glyphicon glyphicon-share"})," if share: "),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"shareRadio",checked:1==r,onClick:this.handleShareFlagChange.bind(this,1)}),"is share for relation")),m.default.createElement("div",{className:"radio radio-block"},m.default.createElement("label",null,m.default.createElement("input",{type:"radio",name:"shareRadio",checked:0==r,onClick:this.handleShareFlagChange.bind(this,0)}),"not share for relation"))),m.default.createElement("div",{className:"button-block"},m.default.createElement("a",{className:"btn btn-sm btn-danger",id:"button-close",href:"javascript:window.opener=null;window.open('','_self');window.close();"},m.default.createElement("i",{className:"glyphicon glyphicon-remove"})," Close"),m.default.createElement("a",{className:"btn btn-sm btn-primary admin-btn",id:"button-save",href:"javascript:void(0);",onClick:this.handleSave.bind(this)},m.default.createElement("i",{className:"glyphicon glyphicon-floppy-disk"})," Save"),m.default.createElement("a",{className:"btn btn-sm btn-primary admin-btn",id:"button-publish",href:"javascript:void(0);",title:"Your data will be saved automatically before submitting",onClick:this.handlePublish.bind(this)},m.default.createElement("i",{className:"glyphicon glyphicon-send"})," Submit"),m.default.createElement("a",{className:"btn btn-sm btn-primary admin-btn",id:"button-copy",href:"javascript:void(0);",onClick:this.handleCopy.bind(this)},m.default.createElement("i",{className:"glyphicon glyphicon-plus"})," Copy"))))}}]),t}(h.Component);v.propTypes={setting:h.PropTypes.object.isRequired,selectedElementIndex:h.PropTypes.number.isRequired,elements:h.PropTypes.array.isRequired,actions:h.PropTypes.shape({saveProject:h.PropTypes.func.isRequired,copyProject:h.PropTypes.func.isRequired,updateSetting:h.PropTypes.func.isRequired})},t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(12),g=i(v);n(109);var y=function(e){function t(e,n){(0,l.default)(this,t);var i=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e,n));return i.handleMouseDown=i.handleMouseDown.bind(i),i.handleMouseEnter=i.handleMouseEnter.bind(i),i.handleMouseMove=i.handleMouseMove.bind(i),i}return(0,p.default)(t,e),(0,u.default)(t,[{key:"handleMouseDown",value:function(e){var t=this.props,n=t.onSelect,i=t.option;n(i,e),e.preventDefault(),e.stopPropagation()}},{key:"handleMouseEnter",value:function(e){var t=this.props,n=t.onFocus,i=t.option;n(i,e)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.onFocus,i=t.option;n(i,e)}},{key:"render",value:function(){var e=this.props.className,t=this.props.option,n=(t.label,t.title),i=t.fontThumbnailUrl,o=t.disabled,a=(0,g.default)(e,{"font-option-disabled":o});return m.default.createElement("div",{className:a,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,title:n},m.default.createElement("img",{src:i,alt:""}))}}]),t}(h.Component);y.propTypes={option:h.PropTypes.shape({label:h.PropTypes.string,title:h.PropTypes.string.isRequired,fontThumbnailUrl:h.PropTypes.string.isRequire}).isRequired},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(8),m=i(h),v=n(2),g=i(v),y=n(12),b=i(y);n(110);var E=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.style,i=e.lineStyle,o=e.direction,a=e.lineColor,r=(0,b.default)("guide-line",{isShown:t}),l="1px "+i+" "+a,s="horizontal"===o?{borderTop:l}:{borderLeft:l};return n=(0,m.default)({},n,s),g.default.createElement("div",{className:r,style:n,"data-html2canvas-ignore":"true"})}}]),t}(v.Component);E.propTypes={lineStyle:v.PropTypes.string,lineColor:v.PropTypes.string,direction:v.PropTypes.string,isShown:v.PropTypes.bool.isRequired,style:v.PropTypes.shape({left:v.PropTypes.number,width:v.PropTypes.number,height:v.PropTypes.number,top:v.PropTypes.number}).isRequired},E.defaultProps={direction:"horizontal",lineStyle:"solid",lineColor:"#4CC1FC"},t.default=E},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedElementPosition=t.getElementGuideLines=t.convertElementsGuideLines=t.covertStaticGuideLines=t.checkClampedGuideLine=t.filterDynamicGuideLines=t.hideAllGuideLines=t.showGuideLineIfNear=t.getAbsoluteMinValue=t.snapToGuideLine=t.renderGuideLines=t.convertLinePositionToStyle=void 0;var o=n(29),a=i(o),r=n(56),l=i(r),s=n(8),u=i(s),c=n(13),d=i(c),f=n(2),p=i(f),h=n(141),m=i(h),v=n(130),g=n(19),y=2,b=!1,E=!1,x=t.convertLinePositionToStyle=function(e,t){var n=t.startPosition,i=t.endPosition,o={left:n.x,top:n.y,width:i.x-n.x||1,height:i.y-n.y||1,display:t.isShown?"block":"none"};return o},S=(t.renderGuideLines=function(e){var t=e.state,n=t.staticGuideLines,i=t.dynamicGuideLines,o=[];return n.length&&n.map(function(t,n){var i=x(e,t);o.push(p.default.createElement(m.default,{style:i,isShown:t.isShown,direction:t.direction,key:n}))}),i.length&&i.map(function(t,i){var a=x(e,t);o.push(p.default.createElement(m.default,{style:a,isShown:t.isShown,direction:t.direction,key:n.length+i}))}),o},t.snapToGuideLine=function(e,t){var n=t.deltaX,i=t.deltaY,o=t.baseDelta,r=t.eleAction,l=t.e,s=e.state,u=s.dynamicGuideLines,c=s.staticGuideLines,d=c.concat(u),f=P(e),p=(0,a.default)(f,3),h=p[0],m=p[1],v=p[2],x=n,S=i;if(b=!1,E=!1,d.find(function(e){var t=e.startPosition,n=e.endPosition,i=t.x===n.x;if(i){if(t.x===h.x||t.x===m.x||t.x===v.x)return x=0,b=!0,!0;if(Math.abs(t.x-h.x)<y)return x=t.x-h.x,b=!0,!0;if(Math.abs(t.x-m.x)<y)return x=t.x-m.x,b=!0,!0;if(Math.abs(t.x-v.x)<y)return x=t.x-v.x,b=!0,!0}else{if(t.y===h.y||t.y===m.y||t.y===v.y)return S=0,E=!0,!0;if(Math.abs(t.y-h.y)<y)return S=t.y-h.y,E=!0,!0;if(Math.abs(t.y-m.y)<y)return S=t.y-m.y,E=!0,!0;if(Math.abs(t.y-v.y)<y)return S=t.y-v.y,E=!0,!0}}),b&&Math.abs(n)>1)if(r===g.elementAction.MOVE){var T=l.pageX-o.x;x=T-h.x}else{var _=n>0?1:-1;x=y*_}if(E&&Math.abs(i)>1)if(r===g.elementAction.MOVE){var w=l.pageY-o.y;S=w-h.y}else{var M=i>0?1:-1;S=y*M}return[x,S]},t.getAbsoluteMinValue=function(e){for(var t=e[0],n=0;n<e.length;n++)Math.abs(t)>Math.abs(e[n])&&(t=e[n]);return t},t.showGuideLineIfNear=function(e){var t=P(e),n=e.state.staticGuideLines,i=S(e,e.state.dynamicGuideLines),o=T(e,n,t),a=T(e,i,t);e.setState({dynamicGuideLines:a,staticGuideLines:o})},t.hideAllGuideLines=function(e){var t=e.state,n=t.staticGuideLines,i=t.dynamicGuideLines,o=[],a=[];n.forEach(function(e){var t=(0,u.default)({},e,{isShown:!1});e.showForever&&(t.isShown=!0),o.push(t)}),i.forEach(function(e){var t=(0,u.default)({},e,{isShown:!1});a.push(t)}),e.setState({dynamicGuideLines:a,staticGuideLines:o})},t.filterDynamicGuideLines=function(e,t){var n=e.state.elementArray,i=[];return n.forEach(function(e){e.isSelected&&i.push(e.id)}),t.filter(function(e){return i.indexOf(e.eid)===-1})}),T=t.checkClampedGuideLine=function(e,t,n){var i=(0,a.default)(n,3),o=i[0],r=i[1],l=i[2],s=[];return t.forEach(function(e){var t=e.startPosition,n=e.endPosition,i=t.x===n.x,a=(0,u.default)({},e,{isShown:!1});e.showForever&&(a.isShown=!0),i?t.x===o.x||t.x===r.x||t.x===l.x?a.isShown=!0:(Math.abs(t.x-o.x)<2&&(a.isShown=!0),Math.abs(t.x-r.x)<2&&(a.isShown=!0),Math.abs(t.x-l.x)<2&&(a.isShown=!0)):t.y===o.y||t.y===r.y||t.y===l.y?a.isShown=!0:(Math.abs(t.y-o.y)<2&&(a.isShown=!0),Math.abs(t.y-r.y)<2&&(a.isShown=!0),Math.abs(t.y-l.y)<2&&(a.isShown=!0)),s.push(a)}),s},_=(t.covertStaticGuideLines=function(e,t){var n=t.bleed,i=t.width,o=t.height,a=t.ratio,r=(0,l.default)(n,function(e,t){return e*a}),s=[{startPosition:{x:r.left,y:0},endPosition:{x:r.left,y:o},isShown:!1,direction:"vertical"},{startPosition:{x:i-r.right,y:0},endPosition:{x:i-r.right,y:o},isShown:!1,direction:"vertical"},{startPosition:{x:i/2,y:0},endPosition:{x:i/2,y:o},isShown:!0,showForever:!0,direction:"vertical"},{startPosition:{x:0,y:r.top},endPosition:{x:i,y:r.top},isShown:!1,direction:"horizontal"},{startPosition:{x:0,y:o-r.bottom},endPosition:{x:i,y:o-r.bottom},isShown:!1,direction:"horizontal"},{startPosition:{x:0,y:o/2},endPosition:{x:i,y:o/2},isShown:!1,direction:"horizontal"}],c=[];return s.forEach(function(e){var t=(0,u.default)({},e,{startPosition:{x:Math.round(e.startPosition.x),y:Math.round(e.startPosition.y)},endPosition:{x:Math.round(e.endPosition.x),y:Math.round(e.endPosition.y)}});c.push(t)}),c},t.convertElementsGuideLines=function(e,t,n){var i=[];return n.forEach(function(e){i=i.concat(_(t,e))}),i},t.getElementGuideLines=function(e,t){var n=e.width,i=e.height,o=t.id,a=t.rot,r=(0,d.default)(t,"position.x"),l=(0,d.default)(t,"position.y"),s=t.width,u=t.height,c=[];if(a%360!==0){var f=(0,v.transform)({width:s,height:u,x:r,y:l},a);r=f.left,l=f.top,s=f.width,u=f.height}return c.push({eid:o,startPosition:{x:0,y:l},endPosition:{x:n,y:l},isShown:!1,direction:"horizontal"}),c.push({eid:o,startPosition:{x:0,y:l+u/2},endPosition:{x:n,y:l+u/2},isShown:!1,direction:"horizontal"}),c.push({eid:o,startPosition:{x:0,y:l+u},endPosition:{x:n,y:l+u},isShown:!1,direction:"horizontal"}),c.push({eid:o,startPosition:{x:r,y:0},endPosition:{x:r,y:i},isShown:!1,direction:"vertical"}),c.push({eid:o,startPosition:{x:r+s/2,y:0},endPosition:{x:r+s/2,y:i},isShown:!1,direction:"vertical"}),c.push({eid:o,startPosition:{x:r+s,y:0},endPosition:{x:r+s,y:i},isShown:!1,direction:"vertical"}),c}),P=t.getSelectedElementPosition=function(e){var t=e.state.elementArray,n=t.filter(function(e){return e.isSelected}),i=n[0],o=i.position.x,a=i.position.y,r=0,l=0;return n.forEach(function(e){var t=e.position,n=t.x,i=t.y,s=e.width,u=e.height,c=e.rot;if(c%360!==0){var d=(0,v.transform)({width:s,height:u,x:n,y:i},c);n=d.left,i=d.top,s=d.width,u=d.height}var f=n+s,p=i+u;n<o&&(o=n),f>r&&(r=f),i<a&&(a=i),p>l&&(l=p)}),[{x:o,y:a},{x:o+(r-o)/2,y:a+(l-a)/2},{x:r,y:l}]}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){switch(e.type){case te.elementTypes.photo:return O.default.createElement(W.default,(0,S.default)({key:e.id},e));case te.elementTypes.text:return O.default.createElement(V.default,(0,S.default)({key:e.id},e));default:return null}}function r(e,t,n){var i=t.ratio,o=t.oriHeight,a=t.oriWidth,r=function(e){return n?e*i:Math.round(e*i)},l=(0,C.default)({},e,{position:{x:r(e.px*a),y:r(e.py*o)},width:r(e.pw*a),height:r(e.ph*o),isDisabled:e.isLock,isSelected:!1});return delete l.x,delete l.y,l}Object.defineProperty(t,"__esModule",{value:!0}),t.getOffset=void 0;var l=n(24),s=o(l),u=n(29),c=o(u),d=n(3),f=o(d),p=n(5),h=o(p),m=n(4),v=o(m),g=n(7),y=o(g),b=n(6),E=o(b),x=n(71),S=o(x),T=n(21),_=o(T),P=n(56),w=o(P),M=n(31),k=o(M),R=n(8),C=o(R),N=n(58),A=o(N),I=n(188),L=o(I),D=n(2),O=o(D),j=n(36),z=o(j),F=n(142),U=i(F),B=n(138),G=o(B),H=n(147),W=o(H),q=n(152),V=o(q),X=n(150),Y=o(X),Z=n(144),K=o(Z),J=n(145),Q=o(J),$=n(136),ee=o($),te=n(19),ne=n(9),ie=n(18),oe=n(45);
n(111);var ae=t.getOffset=function(e){for(var t=0,n=0,i=e.offsetWidth,o=e.offsetHeight;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{top:n,left:t,width:i,height:o}},re=function(e){function t(e){(0,h.default)(this,t);var n=(0,y.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return n.startRadians=0,n.lastRadians=0,n.elementRadians={},n.startDragPosition={},n.startResizePosition={},n.state={elementArray:[],dynamicGuideLines:[],staticGuideLines:[],containerOffset:{top:0,left:0,width:0,height:0},isFocusSideBar:!1,focusSideBarTimer:null,isShowOriginalParams:!1},n.isDragging=!1,n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onRotateStart=n.onRotateStart.bind(n),n.onRotate=n.onRotate.bind(n),n.onRotateStop=n.onRotateStop.bind(n),n.unselectElements=n.unselectElements.bind(n),n.selectSingleElement=n.selectSingleElement.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.onSelect=n.onSelect.bind(n),n.onSelectStop=n.onSelectStop.bind(n),n.onTextDblClick=n.onTextDblClick.bind(n),n.moveElementByKeyboard=n.moveElementByKeyboard.bind(n),n.updateSelectedElementPosition=n.updateSelectedElementPosition.bind(n),n.updateElementPosition=n.updateElementPosition.bind(n),n.updateElementSize=n.updateElementSize.bind(n),n.renderGuideLines=function(){return U.renderGuideLines(n)},n.snapToGuideLine=function(e){return U.snapToGuideLine(n,e)},n.showGuideLineIfNear=function(){return U.showGuideLineIfNear(n)},n.getSelectedElementPosition=function(){return U.getSelectedElementPosition(n)},n.hideAllGuideLines=function(){return U.hideAllGuideLines(n)},n.updateOffset=n.updateOffset.bind(n),n.focusSideBar=n.focusSideBar.bind(n),n.toggleParamsMode=n.toggleParamsMode.bind(n),n}return(0,E.default)(t,e),(0,v.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.spreadOptions,t=U.covertStaticGuideLines(this,e);this.setState({staticGuideLines:t})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.elements,i=e.elements;if(!(0,k.default)(n,i)){var o=this.state,a=o.elementArray,l=o.isShowOriginalParams,s=e.spreadOptions,u=e.baseUrls,c=[];i.forEach(function(e){var n=r(e,s,l),i=t.getElement(e.id);a.length&&(n.isSelected=i.isSelected);var o=(0,C.default)({},n,{actions:{onDragStart:t.onDragStart,onDrag:t.onDrag,onDragStop:t.onDragStop,onResizeStart:t.onResizeStart,onResize:t.onResize,onResizeStop:t.onResizeStop,onRotateStart:t.onRotateStart,onRotate:t.onRotate,onRotateStop:t.onRotateStop,onMouseDown:t.onMouseDown}});if(o.type===te.elementTypes.text){var d=o.text,f=o.fontFamily,p=o.fontColor,h=o.textAlign,m=o.textVAlign,v=o.lineSpacing;o.actions.onDblClick=t.onTextDblClick;var g=e.fontSize,y=g*s.oriHeight;o.imgUrl=(0,_.default)(ne.TEXT_SRC)({text:(0,oe.toEncode)(d),fontSize:y,fontColor:(0,ie.hexString2Number)(p),fontFamily:f,width:e.width,height:e.height,originalWidth:e.width,originalHeight:e.height,originalFontSize:y,baseUrl:u.baseUrl,textAlign:h,verticalTextAlign:m,ratio:s.ratio,lineSpacing:v})}c.push(o)});var d=U.convertElementsGuideLines(this,e.spreadOptions,c);this.setState({elementArray:c,dynamicGuideLines:d})}}},{key:"componentDidMount",value:function(){this.updateOffset(),window.addEventListener("resize",this.updateOffset)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateOffset)}},{key:"updateOffset",value:function(){var e=this.refs.layoutContainer;this.setState({containerOffset:ae(e)})}},{key:"getElementIndex",value:function(e){var t=this.state.elementArray,n=(0,L.default)(t,function(t){return t.id===e});return n}},{key:"getElement",value:function(e){var t=this.state.elementArray,n=this.getElementIndex(e);return t[n]}},{key:"moveElementByKeyboard",value:function(e){var t=this,n=e.keyCode,i=0,o=0;switch(n){case 38:i=0,o=-1;break;case 40:i=0,o=1;break;case 37:i=-1,o=0;break;case 39:i=1,o=0;break;default:return}this.moveElement(i,o,function(){t.showGuideLineIfNear()}),e.preventDefault()}},{key:"moveElement",value:function(e,t,n){var i=this.state.elementArray,o=i.filter(function(e){return e.isSelected});if(o.length){var a=i.map(function(n){var i=n.position;return n.isSelected&&!n.isDisabled?(0,C.default)({},n,{position:{x:i.x+e,y:i.y+t}}):n});this.setState({elementArray:a},function(){n&&n()})}}},{key:"onDragStart",value:function(e,t){this.isDragging=!0,this.startDragPosition={x:t.pageX,y:t.pageY}}},{key:"onDrag",value:function(e,t,n){var i=this;if(this.isDragging){var o=t.pageX,a=t.pageY,r=o-this.startDragPosition.x,l=a-this.startDragPosition.y,s=this.snapToGuideLine({deltaX:r,deltaY:l,e:t,baseDelta:this.baseDelta,eleAction:te.elementAction.MOVE}),u=(0,c.default)(s,2),d=u[0],f=u[1];this.startDragPosition={x:o,y:a},this.moveElement(Math.round(d),Math.round(f),function(){i.showGuideLineIfNear()})}}},{key:"getEdgePositionIfOutBleed",value:function(e){var t=this.props.spreadOptions,n=t.width,i=t.height,o=t.bleed,a=t.ratio,r=(0,w.default)(o,function(e){return Math.round(e*a)}),l=e.position,s=e.width,u=e.height,c={x:l.x+s,y:l.y+u},d=(0,C.default)({},l);return l.x<r.left&&(d.x=0),l.y<r.top&&(d.y=0),c.x>n-r.right&&(d.x=n-s),c.y>i-r.bottom&&(d.y=i-u),d}},{key:"updateElementPosition",value:function(e){var t=this;if(e.length){var n=this.props,i=n.actions,o=n.spreadOptions,a=e.map(function(e){if(e&&!e.isDisabled){var n=t.getEdgePositionIfOutBleed(e);return{id:e.id,x:n.x/o.ratio,y:n.y/o.ratio}}return null});i.updateMultiElement(a)}}},{key:"updateElementSize",value:function(e){if(e.length){var t=this.props,n=t.actions,i=t.spreadOptions,o=e.map(function(e){if(!e.isDisabled)return{id:e.id,width:e.width/i.ratio,height:e.height/i.ratio}});n.updateMultiElement(o)}}},{key:"updateSelectedElementPosition",value:function(){var e=this.state.elementArray,t=e.filter(function(e){return e.isSelected});this.updateElementPosition(t)}},{key:"onDragStop",value:function(e,t,n){this.isDragging=!1;var i=this.state.elementArray,o=i.filter(function(e){return e.isSelected});this.updateElementPosition(o),this.hideAllGuideLines(),t.stopPropagation()}},{key:"onResizeStart",value:function(e,t){this.startResizePosition={x:t.pageX,y:t.pageY}}},{key:"onResize",value:function(e,t,n,i){var o=this,a=this.state.elementArray,r=this.getElementIndex(e),l=a[r],u=l.position,c=l.width,d=l.height,f=l.keepRatio,p=n.pageX,h=n.pageY,m=p-this.startResizePosition.x,v=h-this.startResizePosition.y;this.startResizePosition={x:p,y:h};var g={};"bottomRight"===t&&(g={width:c+m,height:d+v}),"bottomLeft"===t&&(g={width:c-m,height:d+v,position:{x:u.x+m}}),"topLeft"===t&&(g={width:c-m,height:d-v,position:{x:u.x+m,y:u.y+v}}),"topRight"===t&&(g={width:c+m,height:d-v,position:{y:u.y+v}});var y=d/c;if(f){var b=Math.abs(g.width-c),E=Math.abs(g.height-d);b<E?g.width=g.height/y:g.height=g.width*y}this.setState({elementArray:[].concat((0,s.default)(a.slice(0,r)),[(0,C.default)({},l,g)],(0,s.default)(a.slice(r+1)))},function(){o.showGuideLineIfNear()})}},{key:"onResizeStop",value:function(e,t){var n=this.props,i=n.actions,o=n.spreadOptions,a=this.getElement(e);i.updateElement(e,{width:a.width/o.ratio,height:a.height/o.ratio,x:a.position.x/o.ratio,y:a.position.y/o.ratio}),this.hideAllGuideLines()}},{key:"onRotate",value:function(e,t,n){var i=this,o=this.state,a=o.elementArray,r=o.containerOffset,l=this.getElementIndex(e),u=a[l],c=u.position,d=u.width,f=u.height,p={x:c.x+r.left+d/2,y:c.y+r.top+f/2},h={x:t.pageX,y:t.pageY},m=this.elementRadians,v=m[e],g=v?v.startRadians:0,y=Math.atan2(h.y-p.y,h.x-p.x)-g,b=Math.round(y*(180/Math.PI)),E=0;E=b<0?b%360+360:b%360,(0,A.default)(this,"elementRadians."+e+".lastRadians",y),this.setState({elementArray:[].concat((0,s.default)(a.slice(0,l)),[(0,C.default)({},u,{rot:E})],(0,s.default)(a.slice(l+1)))},function(){i.showGuideLineIfNear()})}},{key:"onRotateStart",value:function(e,t){var n=this.state.containerOffset,i=this.getElement(e),o=i.position,a=i.width,r=i.height,l={x:o.x+n.left+a/2,y:o.y+n.top+r/2},s={x:t.pageX,y:t.pageY},u=this.elementRadians,c=u[e],d=c?c.lastRadians:0;(0,A.default)(this,"elementRadians."+e+".startRadians",Math.atan2(s.y-l.y,s.x-l.x)-d)}},{key:"onRotateStop",value:function(e,t){var n=this.props.actions,i=this.getElement(e);n.updateElement(e,{rot:i.rot}),this.hideAllGuideLines()}},{key:"selectSingleElement",value:function(e,t,n){var i=this,o=this.state.elementArray;this.setState({elementArray:o.map(function(t){return t.id===e?(0,C.default)({},t,{isSelected:!0}):(0,C.default)({},t,{isSelected:!1})})},function(){var o=i.props.actions;o.elementToFront(e);var a=i.getSelectedElementPosition(),r=(0,c.default)(a,1),l=r[0];i.baseDelta={x:t-l.x,y:n-l.y}})}},{key:"onMouseUp",value:function(){this.state.isFocusSideBar||this.unselectElements()}},{key:"onMouseDown",value:function(e,t){var n=this,i=t.pageX,o=t.pageY;if(t.ctrlKey||t.metaKey){var a=this.state.elementArray,r=a.map(function(t){return t.id===e?(0,C.default)({},t,{isSelected:!t.isSelected}):t});this.setState({elementArray:r},function(){var e=n.getSelectedElementPosition(),t=(0,c.default)(e,1),a=t[0];n.baseDelta={x:i-a.x,y:o-a.y}})}else{var l=this.getElement(e);if(l.isSelected){var s=this.getSelectedElementPosition(),u=(0,c.default)(s,1),d=u[0];this.baseDelta={x:i-d.x,y:o-d.y}}else this.selectSingleElement(e,i,o)}}},{key:"unselectElements",value:function(){var e=this.state.elementArray;this.setState({elementArray:e.map(function(e){return(0,C.default)({},e,{isSelected:!1})})})}},{key:"selectElements",value:function(e,t,n){var i=this.state.elementArray,o={x:e.x<t.x?e.x:t.x,y:e.y<t.y?e.y:t.y},a={x:t.x>e.x?t.x:e.x,y:t.y>e.y?t.y:e.y},r=i.filter(function(e){var t=e.position,n={x:t.x+e.width,y:t.y+e.height};return o.y<n.y&&a.y>t.y&&o.x<n.x&&a.x>t.x}),l=i.filter(function(e){return e.isSelected});if(r.length!==l.length){var s=r.map(function(e){return e.id}),u=i.map(function(e){return s.indexOf(e.id)!==-1?(0,C.default)({},e,{isSelected:!0}):(0,C.default)({},e,{isSelected:!1})});this.setState({elementArray:u},n)}}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"onSelect",value:function(e){e.p1&&e.p2&&this.selectElements(e.p1,e.p2)}},{key:"onSelectStop",value:function(e){e.p1&&e.p2&&this.selectElements(e.p1,e.p2)}},{key:"onTextDblClick",value:function(e){var t=this.props.actions,n=t.onEditText,i=this.getElement(e);n(z.default.fromJS({element:i}))}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"focusSideBar",value:function(e){var t=this;window.clearTimeout(this.state.focusSideBarTimer);var n=window.setTimeout(function(){t.setState({isFocusSideBar:!1})},700);this.setState({isFocusSideBar:!0,focusSideBarTimer:n}),this.stopEvent(e)}},{key:"toggleParamsMode",value:function(){this.setState({isShowOriginalParams:!this.state.isShowOriginalParams})}},{key:"render",value:function(){var e=this.props,t=e.spreadOptions,n=e.bgUrl,i=(e.baseUrls,e.actions),o=t.bleed,r=t.width,l=t.height,s=t.ratio,u=(t.oriHeight,this.state),c=u.elementArray,d=u.containerOffset,f=u.isShowOriginalParams,p=c.filter(function(e){return e.isSelected}),h={width:r,height:l,background:n?"url("+n+") no-repeat":""},m=(0,w.default)(o,function(e){return Math.round(e*s)}),v=d.left+d.width+35,g={selectedElementArray:p,sideBarLeft:v,actions:{updateElementPosition:this.updateElementPosition,updateElementSize:this.updateElementSize}},y={selectedElementArray:p,sideBarLeft:v,spreadOptions:t,isShowOriginalParams:f,actions:{updateElement:i.updateElement,elementToFront:i.elementToFront,elementToBack:i.elementToBack,toggleParamsMode:this.toggleParamsMode}},b={containerOffsetTop:d.top,containerOffsetLeft:d.left,actions:{onSelect:this.onSelect,onSelectStop:this.onSelectStop}},E={left:v};return O.default.createElement("div",{ref:"layoutContainer",className:"layout-container",tabIndex:"0",style:h,onMouseUp:this.onMouseUp,onKeyDown:this.moveElementByKeyboard,onKeyUp:this.updateSelectedElementPosition},O.default.createElement("div",{onMouseDown:this.stopEvent},c?c.map(function(e){return a(e)}):null,b?O.default.createElement(Y.default,b):null,this.renderGuideLines()),O.default.createElement(G.default,{style:m}),O.default.createElement("div",{className:"side-bar",style:E,onMouseDown:this.focusSideBar,onMouseUp:this.stopEvent,onKeyUp:this.stopEvent,onKeyDown:this.stopEvent},O.default.createElement(K.default,g),O.default.createElement(Q.default,y),O.default.createElement(ee.default,y)))}}]),t}(D.Component);re.defaultProps={nearOffset:10},re.propTypes={elements:D.PropTypes.array,bgUrl:D.PropTypes.string,spreadOptions:D.PropTypes.object.isRequired,actions:D.PropTypes.shape({updateElement:D.PropTypes.func.isRequired,updateMultiElement:D.PropTypes.func.isRequired,elementToFront:D.PropTypes.func.isRequired}).isRequired,nearOffset:D.PropTypes.number},t.default=re},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(71),a=i(o),r=n(3),l=i(r),s=n(5),u=i(s),c=n(4),d=i(c),f=n(7),p=i(f),h=n(6),m=i(h),v=n(194),g=i(v),y=n(193),b=i(y),E=n(8),x=i(E),S=n(2),T=i(S),_=n(12),P=i(_);n(112);var w=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return n.alignLeft=n.alignLeft.bind(n),n.alignRight=n.alignRight.bind(n),n.alignTop=n.alignTop.bind(n),n.alignBottom=n.alignBottom.bind(n),n.alignVertical=n.alignVertical.bind(n),n.alignHorizontal=n.alignHorizontal.bind(n),n.spaceHorizontally=n.spaceHorizontally.bind(n),n.spaceVertically=n.spaceVertically.bind(n),n.matchMinWidth=n.matchMinWidth.bind(n),n.matchMaxWidth=n.matchMaxWidth.bind(n),n.matchMinHeight=n.matchMinHeight.bind(n),n.matchMaxHeight=n.matchMaxHeight.bind(n),n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"alignPosition",value:function(e){var t=this.props,n=t.selectedElementArray,i=t.actions,o={};switch(e){case"left":var a=(0,g.default)(n,function(e){return e.position.x});o.x=a.position.x;break;case"top":var r=(0,g.default)(n,function(e){return e.position.y});o.y=r.position.y}var l=n.map(function(e){return(0,x.default)({},e,{position:o})});i.updateElementPosition(l)}},{key:"alignLeft",value:function(){this.alignPosition("left")}},{key:"alignRight",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=(0,b.default)(t,function(e){return e.position.x+e.width}),o=i.position.x+i.width,a=t.map(function(e){return(0,x.default)({},e,{position:{x:o-e.width}})});n.updateElementPosition(a)}},{key:"alignTop",value:function(){this.alignPosition("top")}},{key:"alignBottom",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=(0,b.default)(t,function(e){return e.position.y+e.height}),o=i.position.y+i.height,a=t.map(function(e){return(0,x.default)({},e,{position:{y:o-e.height}})});n.updateElementPosition(a)}},{key:"alignVertical",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=(0,b.default)(t,function(e){return e.width}),o=i.position.x+i.width/2,a=t.map(function(e){return(0,x.default)({},e,{position:{x:o-e.width/2}})});n.updateElementPosition(a)}},{key:"alignHorizontal",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=(0,b.default)(t,function(e){return e.height}),o=i.position.y+i.height/2,a=t.map(function(e){return(0,x.default)({},e,{position:{y:o-e.height/2}})});n.updateElementPosition(a)}},{key:"matchSize",value:function(e,t){var n=e.map(function(e){return(0,x.default)({},e,(0,a.default)({},t))}),i=this.props.actions;i.updateElementSize(n)}},{key:"matchMinWidth",value:function(){var e=this.props.selectedElementArray,t=(0,g.default)(e,function(e){return e.width});this.matchSize(e,{width:t.width})}},{key:"matchMaxWidth",value:function(){var e=this.props.selectedElementArray,t=(0,b.default)(e,function(e){return e.width});this.matchSize(e,{width:t.width})}},{key:"matchMinHeight",value:function(){var e=this.props.selectedElementArray,t=(0,g.default)(e,function(e){return e.height});this.matchSize(e,{height:t.height})}},{key:"matchMaxHeight",value:function(){var e=this.props.selectedElementArray,t=(0,b.default)(e,function(e){return e.height});this.matchSize(e,{height:t.height})}},{key:"spaceVertically",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=t.sort(function(e,t){return e.position.y-t.position.y}),o=0;i.forEach(function(e,t){var n=i[t-1];if(n){var a=e.position.y-(n.position.y+n.height);o+=a}});var a=i.length,r=o/(a-1),l=[];t.forEach(function(e,t){if(0===t||t===a-1)l.push(null);else{var n=i[t-1],o=l[t-1],s=n.position.y;o&&(s=o.position.y),l.push({id:e.id,position:{x:e.position.x,y:s+n.height+r}})}}),n.updateElementPosition(l)}},{key:"spaceHorizontally",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=t.sort(function(e,t){return e.position.x-t.position.x}),o=0;i.forEach(function(e,t){var n=i[t-1];if(n){var a=e.position.x-(n.position.x+n.width);o+=a}});var a=i.length,r=o/(a-1),l=[];t.forEach(function(e,t){if(0===t||t===a-1)l.push(null);else{var n=i[t-1],o=l[t-1],s=n.position.x;o&&(s=o.position.x),l.push({id:e.id,position:{x:s+n.width+r,y:e.position.y}})}}),n.updateElementPosition(l)}},{key:"render",value:function(){var e=this.props.selectedElementArray,t=(0,P.default)("multiple-action-panel",{isShown:e&&e.length>1});return T.default.createElement("div",{className:t},T.default.createElement("fieldset",{className:"form-group"},T.default.createElement("legend",null,"Align"),T.default.createElement("div",{className:"align-buttons"},T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignLeft},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-left"}),"Align Left"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignRight},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-right"}),"Align Right"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignTop},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-top"}),"Align Top"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignBottom},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-bottom"}),"Align Bottom"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignVertical},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-vertical"}),"Align Vertical"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.alignHorizontal},T.default.createElement("span",{className:"glyphicon glyphicon-object-align-horizontal"}),"Align Horizontal"))),e.length>2?T.default.createElement("fieldset",{className:"form-group"},T.default.createElement("legend",null,"Space"),T.default.createElement("div",{className:"align-buttons"},T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.spaceHorizontally},"Space Horizontally"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.spaceVertically},"Space Vertically"))):null,T.default.createElement("fieldset",{className:"form-group"},T.default.createElement("legend",null,"Match"),T.default.createElement("div",{className:"align-buttons"},T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.matchMinWidth},"Match Min Width"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.matchMaxWidth},"Match Max Width"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.matchMinHeight},"Match Min Height"),T.default.createElement("button",{type:"button",className:"btn btn-default btn-block btn-sm",onClick:this.matchMaxHeight},"Match Max Height"))))}}]),t}(S.Component);w.propTypes={selectedElementArray:S.PropTypes.array.isRequired,actions:S.PropTypes.shape({updateElementSize:S.PropTypes.func.isRequired,updateElementPosition:S.PropTypes.func.isRequired}).isRequired},t.default=w},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(31),m=i(h),v=n(2),g=i(v);n(113);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.state={width:0,height:0,x:0,y:0,rot:0},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedElementArray,n=e.selectedElementArray,i=this.props.isShowOriginalParams,o=e.isShowOriginalParams;if(1===n.length&&!(0,m.default)(t,n)||i!==o){var a=this.props.spreadOptions,r=n[0];o?this.setState({width:r.width/a.ratio,height:r.height/a.ratio,x:r.position.x/a.ratio,y:r.position.y/a.ratio,rot:r.rot}):this.setState({width:r.width,height:r.height,x:r.position.x,y:r.position.y,rot:r.rot})}}},{key:"handleWidthChange",value:function(e){var t=this.props.spreadOptions,n=+e.target.value;this.props.isShowOriginalParams||(n/=t.ratio);var i=n/t.oriWidth;this.editElement({width:n,pw:i})}},{key:"handleHeightChange",value:function(e){var t=this.props.spreadOptions,n=+e.target.value;this.props.isShowOriginalParams||(n/=t.ratio);var i=n/t.oriHeight;this.editElement({height:n,ph:i})}},{key:"handleRotationChange",value:function(e){var t=+e.target.value;this.editElement({rot:t})}},{key:"handleXChange",value:function(e){var t=this.props.spreadOptions,n=+e.target.value;this.props.isShowOriginalParams||(n/=t.ratio);var i=n/t.oriWidth;this.editElement({x:n,px:i})}},{key:"handleYChange",value:function(e){var t=this.props.spreadOptions,n=+e.target.value;this.props.isShowOriginalParams||(n/=t.ratio);var i=n/t.oriHeight;this.editElement({y:n,py:i})}},{key:"editElement",value:function(e){var t=this.props.selectedElementArray,n=t[0],i=this.props.actions;i.updateElement(n.id,e)}},{key:"render",value:function(){var e=this.props,t=e.selectedElementArray,n=e.actions,i=e.isShowOriginalParams,o=["视图尺寸","原始尺寸"],a=1===t.length,r={display:a?"block":"none"},l=this.state,s=l.width,u=l.height,c=l.x,d=l.y,f=l.rot;return a?g.default.createElement("div",{className:"element-info",style:r},g.default.createElement("div",{id:"box-info"},g.default.createElement("button",{type:"button",className:"btn btn-default btn-sm",onClick:n.toggleParamsMode},i?o[1]:o[0]),g.default.createElement("div",{className:"label-detail"},g.default.createElement("i",{className:"glyphicon glyphicon-resize-horizontal"})," Width"),g.default.createElement("div",{className:"label-item",id:"inputbox-width"},g.default.createElement("input",{type:"number",className:"form-control",id:"input-width",onChange:this.handleWidthChange.bind(this),value:s})),g.default.createElement("div",{className:"label-detail"},g.default.createElement("i",{className:"glyphicon glyphicon-resize-vertical"})," Height"),g.default.createElement("div",{className:"label-item",id:"inputbox-height"},g.default.createElement("input",{type:"number",className:"form-control",id:"input-height",onChange:this.handleHeightChange.bind(this),value:u})),g.default.createElement("div",{className:"label-detail"},g.default.createElement("i",{className:"glyphicon glyphicon-repeat"})," Rotation"),g.default.createElement("div",{className:"label-item",id:"inputbox-rotate"},g.default.createElement("input",{type:"number",className:"form-control",id:"input-rotate",onChange:this.handleRotationChange.bind(this),value:f})),g.default.createElement("div",{className:"label-detail"},g.default.createElement("i",{className:"glyphicon glyphicon-arrow-left"})," Left (x)"),g.default.createElement("div",{className:"label-item",id:"inputbox-ox"},g.default.createElement("input",{type:"number",className:"form-control",id:"input-ox",onChange:this.handleXChange.bind(this),value:c})),g.default.createElement("div",{className:"label-detail"},g.default.createElement("i",{className:"glyphicon glyphicon-arrow-up"})," Top (y)"),g.default.createElement("div",{className:"label-item",id:"inputbox-oy"},g.default.createElement("input",{type:"number",className:"form-control",id:"input-oy",onChange:this.handleYChange.bind(this),value:d})))):null}}]),t}(v.Component);y.propTypes={selectedElementArray:v.PropTypes.array.isRequired,spreadOptions:v.PropTypes.object.isRequired,actions:v.PropTypes.shape({updateElement:v.PropTypes.func.isRequired,toggleParamsMode:v.PropTypes.func.isRequired}),isShowOriginalParams:v.PropTypes.bool.isRequired},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(199),g=i(v);n(114);var y=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.uidPk,n=e.actions,i=n.getEnv,o=n.getProjectData,a=n.getSpreadInfomation,r=n.getStyleList,l=n.getFontList;i().then(function(){l(),o(t).then(function(){a(),r()})})}},{key:"render",value:function(){return m.default.createElement("div",{className:"row page-head"},m.default.createElement("div",{className:"col-md-3"},m.default.createElement("img",{src:g.default})),m.default.createElement("div",{className:"col-md-9"},m.default.createElement("div",{className:"head-title"},"Layout Editor")))}}]),t}(h.Component);y.propTypes={uidPk:h.PropTypes.number.isRequired,actions:h.PropTypes.shape({getEnv:h.PropTypes.func.isRequired,getProjectData:h.PropTypes.func.isRequired,getSpreadInfomation:h.PropTypes.func.isRequired,getStyleList:h.PropTypes.func.isRequired})},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(46),g=i(v);n(115);var y=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){return m.default.createElement(g.default,this.props,m.default.createElement("div",{className:"photo-element"},m.default.createElement("span",{className:"placeholder"},"photo")))}}]),t}(h.Component);y.propTypes={},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(40);n(116);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onResize=n.onResize.bind(n),n.onResizeStart=n.onResizeStart.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.isResizing=!1,n.startMousePosition={},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onResizeStart",value:function(e){this.isResizing=!0,this.props.actions.onResizeStart(e),e.stopPropagation()}},{key:"onResize",value:function(e,t,n){this.isResizing&&(this.props.actions.onResize(e,t,n),t.stopPropagation())}},{key:"onResizeStop",value:function(e){this.isResizing=!1,this.props.actions.onResizeStop(e),e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.isSelected;return!t&&n?m.default.createElement("div",{className:"resizable"},m.default.createElement(v.DraggableCore,{onStart:this.onResizeStart,onDrag:this.onResize.bind(this,"topLeft"),onStop:this.onResizeStop},m.default.createElement("div",{className:"handle top-left"})),m.default.createElement(v.DraggableCore,{onStart:this.onResizeStart,onDrag:this.onResize.bind(this,"topRight"),onStop:this.onResizeStop},m.default.createElement("div",{className:"handle top-right"})),m.default.createElement(v.DraggableCore,{onStart:this.onResizeStart,onDrag:this.onResize.bind(this,"bottomLeft"),onStop:this.onResizeStop},m.default.createElement("div",{className:"handle bottom-left"})),m.default.createElement(v.DraggableCore,{onStart:this.onResizeStart,onDrag:this.onResize.bind(this,"bottomRight"),onStop:this.onResizeStop},m.default.createElement("div",{className:"handle bottom-right"}))):null}}]),t}(h.Component);g.propTypes={actions:h.PropTypes.shape({onResize:h.PropTypes.func.isRequired,onResizeStart:h.PropTypes.func.isRequired,onResizeStop:h.PropTypes.func.isRequired}).isRequired,isDisabled:h.PropTypes.bool.isRequired,isSelected:h.PropTypes.bool.isRequired},t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(40);n(117);var g=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onRotate=n.onRotate.bind(n),n.onRotateStart=n.onRotateStart.bind(n),n.onRotateStop=n.onRotateStop.bind(n),n.isRotating=!1,n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onRotateStart",value:function(e){this.isRotating=!0,this.props.actions.onRotateStart(e),e.stopPropagation()}},{key:"onRotate",value:function(e,t){if(this.isRotating){var n=this.props.actions;n.onRotate(e,t),e.stopPropagation()}}},{key:"onRotateStop",value:function(e){this.isRotating=!1,this.props.actions.onRotateStop(e),e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.isSelected,i=e.rot,o={transform:"rotate("+-i+"deg)"};return m.default.createElement("div",{className:"rotatable"},!t&&n?m.default.createElement(v.DraggableCore,{onStart:this.onRotateStart,onDrag:this.onRotate,onStop:this.onRotateStop,disabled:t},m.default.createElement("div",{className:"rotate-circle"})):null,!t&&n?m.default.createElement("div",{className:"rotate-line"}):null,this.isRotating?m.default.createElement("span",{className:"degree-string",style:o},i,"°"):null)}}]),t}(h.Component);g.propTypes={actions:h.PropTypes.shape({onRotate:h.PropTypes.func.isRequired,onRotateStart:h.PropTypes.func.isRequired,onRotateStop:h.PropTypes.func.isRequired}).isRequired,isDisabled:h.PropTypes.bool.isRequired,isSelected:h.PropTypes.bool.isRequired,rot:h.PropTypes.number.isRequired},t.default=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(8),m=i(h),v=n(2),g=i(v);n(118);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.isSelecting=!1,n.state={selectionBox:null,selectionBoxStyle:null},n.onSelect=n.onSelect.bind(n),n.onSelectStart=n.onSelectStart.bind(n),n.onSelectStop=n.onSelectStop.bind(n),window.addEventListener("mousedown",n.onSelectStart),window.addEventListener("mousemove",n.onSelect),window.addEventListener("mouseup",n.onSelectStop),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onSelectStart",value:function(e){var t=this.props,n=t.containerOffsetTop,i=t.containerOffsetLeft;e.pageX<i||e.pageY<n||(this.isSelecting=!0,this.setState({selectionBox:{p1:{x:e.pageX-i,y:e.pageY-n}}}))}},{key:"onSelect",value:function(e){if(this.isSelecting){var t=this.state.selectionBox,n=this.props,i=n.containerOffsetTop,o=n.containerOffsetLeft,a=n.actions,r={x:e.pageX-o,y:e.pageY-i},l=(0,m.default)({},t,{p2:r}),s=t.p1,u={};u=r.x>s.x?(0,m.default)(u,{left:s.x,width:r.x-s.x}):(0,m.default)(u,{left:r.x,width:s.x-r.x}),u=r.y>s.y?(0,m.default)(u,{top:s.y,height:r.y-s.y}):(0,m.default)(u,{top:r.y,height:s.y-r.y}),a.onSelect(l),this.setState({selectionBox:l,selectionBoxStyle:u
})}}},{key:"onSelectStop",value:function(e){if(this.isSelecting){this.isSelecting=!1;var t=this.state.selectionBox,n=this.props.actions;n.onSelectStop(t,e),this.setState({selectionBox:null,selectionBoxStyle:null})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown"),window.removeEventListener("mousemove"),window.removeEventListener("mouseup")}},{key:"render",value:function(){var e=this.state.selectionBoxStyle;return g.default.createElement("div",{className:"selection",style:e})}}]),t}(v.Component);y.propTypes={actions:v.PropTypes.shape({onSelect:v.PropTypes.func.isRequired,onSelectStop:v.PropTypes.func.isRequired}).isRequired,containerOffsetTop:v.PropTypes.number.isRequired,containerOffsetLeft:v.PropTypes.number.isRequired},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(21),m=i(h),v=n(2),g=i(v),y=n(36),b=i(y),E=n(12),x=i(E),S=n(126),T=i(S),_=n(124),P=i(_),w=n(127),M=i(w),k=n(128),R=i(k),C=n(125),N=i(C),A=n(45),I=n(140),L=i(I),D=n(153),O=i(D),j=n(14),z=n(18),F=n(9),U=n(19),B=n(165),G=i(B),H=n(166);n(119);var W=4,q=120,V=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e)),i=[{value:"left",title:"Align Text Left"},{value:"center",title:"Center Text"},{value:"right",title:"Align Text Right"}],o=[{value:"top",title:"Vertical Align Text Top"},{value:"middle",title:"Middle Text"},{value:"bottom",title:"Vertical Align Text Bottom"}],r=[{value:1.2,title:"Line height 1.2"},{value:1.5,title:"Line height 1.5"},{value:2,title:"Line height 2"}];return n.state={alignOptionList:i,verticalAlignOptionList:o,lineSpacingOptionList:r,tagOptionList:[],previewTextImageSrc:null,previewTextImageBlobSrc:null,timer:null,lastRequestTime:null,isShowIllegalCharTip:!1,isShowTextNotFit:!1,hideTipTimer:null,lastAppearIllegalCharTime:null},n.onTextAreaChange=n.onTextAreaChange.bind(n),n.onFontNameChange=n.onFontNameChange.bind(n),n.onFontWeightChange=n.onFontWeightChange.bind(n),n.onFontColorChange=n.onFontColorChange.bind(n),n.onTagIdChange=n.onTagIdChange.bind(n),n.onSliderChange=n.onSliderChange.bind(n),n.onSizeInputChange=n.onSizeInputChange.bind(n),n.onSizeInputBlur=n.onSizeInputBlur.bind(n),n.onSubmit=n.onSubmit.bind(n),n.updatePreviewTextSrc=n.updatePreviewTextSrc.bind(n),n.delayUpdatePreviewTextSrc=n.delayUpdatePreviewTextSrc.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.initData(this.props.element)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.isShown,n=e.isShown;t!==n&&n&&this.initData(e.element)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.isShown!==e.isShown||this.state.fontName!==t.fontName||this.state.fontWeight!==t.fontWeight||this.state.align!==t.align||this.state.verticalAlign!==t.verticalAlign||this.state.fontSize!==t.fontSize||this.state.fontColor!==t.fontColor||this.state.inputText!==t.inputText||this.state.inputSize!==t.inputSize||this.state.lineSpacing!==t.lineSpacing||this.state.tagId!==t.tagId||this.state.previewTextImageSrc!==t.previewTextImageSrc||this.state.previewTextImageBlobSrc!==t.previewTextImageBlobSrc||this.state.isShowIllegalCharTip!==t.isShowIllegalCharTip||this.state.isShowTextNotFit!==t.isShowTextNotFit}},{key:"componentDidUpdate",value:function(e,t){var n=t.fontWeight,i=this.state.fontWeight;n!==i&&this.updatePreviewTextSrc();var o=t.fontSize,a=this.state.fontSize;o!==a&&this.delayUpdatePreviewTextSrc();var r=t.fontColor,l=this.state.fontColor;r!==l&&this.delayUpdatePreviewTextSrc();var s=t.inputText,u=this.state.inputText;s!==u&&this.delayUpdatePreviewTextSrc();var c=t.align,d=this.state.align;c!==d&&this.updatePreviewTextSrc();var f=t.verticalAlign,p=this.state.verticalAlign;f!==p&&this.updatePreviewTextSrc();var h=t.lineSpacing,m=this.state.lineSpacing;h!==m&&this.updatePreviewTextSrc();var v=t.previewTextImageSrc,g=this.state.previewTextImageSrc;v!==g&&this.getPreviewTextBlobAndTextInfo(g,this.props.element);var y=e.isShown,b=this.props.isShown;y!==b&&b&&this.refs.inputText.focus()}},{key:"initData",value:function(e){var t=this.props,n=t.fontList,i=t.baseUrl,o=t.pageHeight,a=t.tagList,r=n.filter(function(e){return!e.deprecated}),l=this.state,s=l.alignOptionList,u=l.verticalAlignOptionList,c=l.lineSpacingOptionList,d=U.DEFAULT_FONT_FAMILY_ID,f=U.DEFAULT_FONT_WEIGHT_ID,p=W,h=U.DEFAULT_FONT_COLOR,v=s[0].value,g=u[0].value,y=c[0].value,b="",E=null,x=-1,S=a.map(function(e){return{title:e.tagName,label:e.tagName,value:e.id}});if(S.unshift({title:"null",label:"null",value:-1}),e){var T=(0,A.toDecode)(e.get("fontFamily"));n.forEach(function(e){e.font.forEach(function(t){t.fontFace===T&&d===U.DEFAULT_FONT_FAMILY_ID&&(d=e.id,f=t.id)})});var _=e.get("fontSize");p=(0,H.getFontSizeInPt)(_*o),h=e.get("fontColor"),v=e.get("textAlign"),g=e.get("textVAlign"),b=e.get("text")?(0,A.toDecode)(e.get("text")):"",y=e.get("lineSpacing"),e.get("tagId")&&(x=e.get("tagId")),E=this.getPreviewTextImageSrc(b,p,h,T,v,g,e,y),this.getPreviewTextBlobAndTextInfo(E,e),this.setState({isShowTextNotFit:!1})}var P=r.find(function(e){return e.id===d}),w=P.deprecated?n:r,M=w.map(function(e){return{disabled:e.deprecated,title:e.displayName,label:e.displayName,value:e.id,fontThumbnailUrl:(0,m.default)(F.GET_FONT_THUMBNAIL)({baseUrl:i,fontName:e.name})}}),k=P.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{disabled:P.deprecated,title:t,label:t,value:e.id}});this.setState({avaiableFontList:r,fontName:d,fontWeight:f,timer:null,lastRequestTime:null,inputSize:p,previewTextImageSrc:E,fontSize:p,fontColor:h,align:v,verticalAlign:g,inputText:b,lineSpacing:y,fontOptionList:M,fontWeightOptionList:k,tagOptionList:S,tagId:x})}},{key:"onFontNameChange",value:function(e){var t=this.state.avaiableFontList,n=t.find(function(t){return t.id===e.value}),i=n.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{title:t,label:t,value:e.id}});this.setState({fontName:e.value,fontWeight:n.font[0].id,fontWeightOptionList:i})}},{key:"onFontWeightChange",value:function(e){this.setState({fontWeight:e.value})}},{key:"onSliderChange",value:function(e){this.setState({fontSize:e,inputSize:e})}},{key:"onSizeInputChange",value:function(e){var t=e.target.value.trim();this.setState({inputSize:t})}},{key:"onSizeInputBlur",value:function(e){var t=+e.target.value,n=t;t>q?n=q:t<W&&(n=W),this.setState({inputSize:n,fontSize:n})}},{key:"onFontColorChange",value:function(e){this.setState({fontColor:e.hex})}},{key:"onTagIdChange",value:function(e){e&&this.setState({tagId:e.value})}},{key:"onTextAreaChange",value:function(e){var t=this,n=/[^\u000d\u000a\u0020-\u007e]*/g,i=e.target.value,o=i.replace(n,""),a=this.props.hideTipInterval,r=this.state,l=r.hideTipTimer,s=r.lastAppearIllegalCharTime;if(/^\s*$/.test(i))return void this.setState({inputText:i});if(o!==i){if(!s||Date.now()-s<a){window.clearTimeout(l);var u=window.setTimeout(function(){t.setState({isShowIllegalCharTip:!1})},a);this.setState({hideTipTimer:u})}else this.setState({lastAppearIllegalCharTime:Date.now()});this.setState({isShowIllegalCharTip:!0})}else this.setState({isShowIllegalCharTip:!1});this.setState({inputText:o})}},{key:"getFontObj",value:function(e){var t=this.props.fontList,n=null;return t.forEach(function(t){t.font.forEach(function(t){t.id===e&&(n=t)})}),n}},{key:"onSubmit",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,i=e.fontColor,o=e.align,a=e.verticalAlign,r=e.inputText,l=e.tagId,s=e.lineSpacing,u=this.props,c=u.updateElement,d=u.closeTextEditModal,f=u.element,p=u.pageHeight,h=this.getFontObj(t),m=r?r.trim():"";if(m){var v={fontSize:(0,j.getPxByPt)(n)/p,fontColor:i,text:(0,A.toEncode)(m),textAlign:o,textVAlign:a,fontWeight:h.weight,fontFamily:(0,A.toEncode)(h.fontFace),lineSpacing:s,tagId:l};c(f.get("id"),v),this.setState({inputText:""}),d()}}},{key:"getPreviewTextImageSrc",value:function(e,t,n,i,o,a,r,l){var s=this.props,u=s.baseUrl,c=s.ratio,d=e?e.trim():"";if(d){var f=(0,j.getPxByPt)(t),p=r.get("width")/c,h=r.get("height")/c;return(0,m.default)(F.TEXT_SRC)({text:(0,A.toEncode)(d),fontSize:f,fontColor:(0,z.hexString2Number)(n),fontFamily:(0,A.toEncode)(i),width:p,height:h,originalWidth:p,originalHeight:h,originalFontSize:f,baseUrl:u,textAlign:o,verticalTextAlign:a,ratio:c,lineSpacing:l})}return""}},{key:"updatePreviewTextSrc",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,i=e.fontColor,o=e.align,a=e.verticalAlign,r=e.inputText,l=e.lineSpacing;if(!r)return void this.setState({previewTextImageSrc:null});var s=this.getFontObj(t);this.setState({previewTextImageSrc:this.getPreviewTextImageSrc(r,n,i,s.fontFace,o,a,this.props.element,l)})}},{key:"getPreviewTextBlobAndTextInfo",value:function(e,t){var n=this;if(!e)return void this.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1});var i=t.get("width"),o=t.get("height");(0,G.default)(e,i,o).then(function(e){var t=e.isShowTextNotFit,i=e.blobUrl;n.setState({previewTextImageBlobSrc:i,isShowTextNotFit:t})}).catch(function(e){n.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1})})}},{key:"delayUpdatePreviewTextSrc",value:function(){var e=this.props.requestInterval,t=this.state,n=t.lastRequestTime,i=t.timer;if(!n||Date.now()-n<e){window.clearTimeout(i);var o=window.setTimeout(this.updatePreviewTextSrc,e);this.setState({timer:o})}else this.setState({lastRequestTime:Date.now()})}},{key:"onAlignChange",value:function(e){this.setState({align:e})}},{key:"onVerticalAlignChange",value:function(e){this.setState({verticalAlign:e})}},{key:"onLineSpacingChange",value:function(e){this.setState({lineSpacing:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fontOptionList,i=t.fontWeightOptionList,o=t.alignOptionList,a=t.verticalAlignOptionList,r=t.lineSpacingOptionList,l=t.tagOptionList,s=t.tagId,u=t.fontName,c=t.fontWeight,d=t.fontSize,f=t.fontColor,p=t.inputSize,h=t.inputText,m=t.align,v=t.verticalAlign,y=t.lineSpacing,b=t.previewTextImageBlobSrc,E=t.isShowIllegalCharTip,S=t.isShowTextNotFit,_="#ffffff";f&&"#ffffff"===f.toLowerCase()&&(_="#7B7B7B");var w=this.props,k=w.isShown,C=w.closeTextEditModal,A=w.tagList,I=k;return g.default.createElement(T.default,{className:"text-edit-modal",onClosed:C,opened:k},g.default.createElement("h2",{className:"modal-title"},"Edit Text"),g.default.createElement("div",{className:"text-edit-modal-content"},g.default.createElement("div",{className:"option-container"},g.default.createElement("div",{className:"option-item"},g.default.createElement("div",{className:"select-container font-name"},g.default.createElement(M.default,{className:"font",options:n,searchable:!1,onChanged:this.onFontNameChange,value:u,optionComponent:L.default})),g.default.createElement("div",{className:"select-container font-weight"},g.default.createElement(M.default,{className:"font-weight",options:i,searchable:!1,onChanged:this.onFontWeightChange,value:c}))),g.default.createElement("div",{className:"divider"}),g.default.createElement("div",{className:"option-item"},g.default.createElement("div",{className:"size-container"},g.default.createElement("input",{type:"number",className:"size-input",value:p,min:W,max:q,onChange:this.onSizeInputChange,onBlur:this.onSizeInputBlur}),g.default.createElement("div",{className:"slider-container"},g.default.createElement(R.default,{value:d,min:W,max:q,step:1,handleSliderChange:this.onSliderChange,vertical:!0})))),g.default.createElement(N.default,{needResetColor:I,initHexString:f,onColorChange:this.onFontColorChange}),g.default.createElement("div",{className:"divider"}),g.default.createElement("div",{className:"align-container"},g.default.createElement("div",{className:"horizonal-group"},o.map(function(t,n){var i="align-"+t.value,o=(0,x.default)("icon",i,{selected:t.value===m});return g.default.createElement("button",{key:n,type:"button",className:o,title:t.title,onClick:e.onAlignChange.bind(e,t.value)})})),g.default.createElement("div",{className:"divider"}),g.default.createElement("div",{className:"vertical-group"},a.map(function(t,n){var i="align-"+t.value,o=(0,x.default)("icon",i,{selected:t.value===v});return g.default.createElement("button",{key:n,type:"button",className:o,title:t.title,onClick:e.onVerticalAlignChange.bind(e,t.value)})})),g.default.createElement("div",{className:"divider"}),g.default.createElement("div",{className:"line-spacing-group"},r.map(function(t,n){var i="line-spacing-"+String(t.value).replace(".","_"),o=(0,x.default)("icon",i,{selected:t.value===y});return g.default.createElement("button",{key:n,type:"button",className:o,title:t.title,onClick:e.onLineSpacingChange.bind(e,t.value)})})))),g.default.createElement("div",{className:"text-box"},g.default.createElement("textarea",{className:"text-box",placeholder:"Type here...",onInput:this.onTextAreaChange,value:h,ref:"inputText"}),g.default.createElement("p",{className:"illegal-char-tip"},S?g.default.createElement("span",null,"Text does not fit"):null,E?g.default.createElement("span",null,"Invalid characters removed"):null)),g.default.createElement("p",{className:"button-container"},g.default.createElement(P.default,{onClicked:this.onSubmit,disabled:!h.trim()||!h.length},"Done")),A&&A.length?g.default.createElement("div",{className:"tag-container"},g.default.createElement(M.default,{className:"tag-list",options:l,searchable:!1,onChanged:this.onTagIdChange,value:s})):null,g.default.createElement(O.default,{imageSrc:b,backgroundColor:_})))}}]),t}(v.Component);V.propTypes={baseUrl:v.PropTypes.string.isRequired,fontList:v.PropTypes.array.isRequired,isShown:v.PropTypes.bool.isRequired,closeTextEditModal:v.PropTypes.func.isRequired,updateElement:v.PropTypes.func.isRequired,element:v.PropTypes.instanceOf(b.default.Map),pageHeight:v.PropTypes.number.isRequired,ratio:v.PropTypes.number.isRequired,tagList:v.PropTypes.array.isRequired,requestInterval:v.PropTypes.number,hideTipInterval:v.PropTypes.number},V.defaultProps={requestInterval:1e3,hideTipInterval:2e3},t.default=V},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(46),g=i(v);n(120);var y=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onDblClick=n.onDblClick.bind(n),n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"onDblClick",value:function(e){var t=this.props,n=t.id,i=t.actions;i.onDblClick(n,e)}},{key:"render",value:function(){var e=this.props.imgUrl;return m.default.createElement(g.default,this.props,m.default.createElement("div",{className:"text-element",onDoubleClick:this.onDblClick},m.default.createElement("img",{className:"text-image",src:e,draggable:"false"})))}}]),t}(h.Component);y.propTypes={imgUrl:h.PropTypes.string.isRequired,actions:h.PropTypes.shape({onDblClick:h.PropTypes.func}).isRequired},t.default=y},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=i(o),r=n(5),l=i(r),s=n(4),u=i(s),c=n(7),d=i(c),f=n(6),p=i(f),h=n(2),m=i(h),v=n(12),g=i(v),y=n(197),b=i(y);n(121);var E=function(e){function t(e){(0,l.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n.state={isLoaded:!0},n}return(0,p.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.imageSrc,n=e.imageSrc;t!==n&&(this.setState({isLoaded:!1}),n||this.setState({imgWidth:0,imgHeight:0}))}},{key:"onLoad",value:function(e){this.setState({imgWidth:e.target.naturalWidth,imgHeight:e.target.naturalHeight,isLoaded:!0})}},{key:"renderPreviewBox",value:function(){var e=this.props,t=e.imageSrc,n=e.backgroundColor,i={lines:13,length:20,width:10,radius:30,scale:.12,corners:1,color:"#7b7b7b",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,top:"50%",left:"-36%",shadow:!1,hwaccel:!1,position:"absolute"},o=this.state,a=(o.previewImgPosition,o.isLoaded),r={backgroundColor:n},l=[];return t?(a||l.push(m.default.createElement("div",{className:"load-container",key:"0"},m.default.createElement("div",{className:"load-mask"}),m.default.createElement("div",{className:"load-content"},m.default.createElement(b.default,{loaded:a,options:i}),"Loading"))),l.push(m.default.createElement("img",{key:"1",src:t,alt:"",className:"preview-img",style:r,draggable:"false",onLoad:this.onLoad}))):l.push(m.default.createElement("div",{className:"no-preview",key:"2"},"No Preview available")),l}},{key:"render",value:function(){var e=this,t=this.state,n=t.imgWidth,i=t.imgHeight,o=this.props,a=o.maxImgContainerWidth,r=o.maxImgContainerHeight,l=o.initImgContainerWidth,s=o.initImgContainerHeight,u=(o.backgroundColor,(0,g.default)("img-container")),c=i||s;c%2>0&&c++;var d={width:n||l,height:c,maxHeight:r,maxWidth:a,border:n&&i?"1px dashed #7b7b7b":"none",overflow:"hidden"};return m.default.createElement("div",{className:"text-preview-box"},m.default.createElement("div",{className:u,style:d,ref:function(t){e.imgContainer=t}},this.renderPreviewBox()))}}]),t}(h.Component);E.propTypes={imageSrc:h.PropTypes.string,maxImgContainerWidth:h.PropTypes.number,maxImgContainerHeight:h.PropTypes.number,initImgContainerWidth:h.PropTypes.number,initImgContainerHeight:h.PropTypes.number},E.defaultProps={maxImgContainerWidth:720,maxImgContainerHeight:262,initImgContainerHeight:100,initImgContainerWidth:720},t.default=E},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.innerSafeZong=[{size:["4X4","6X6","7X5","8X6","5X7","6X8"],type:["HC","Inner"],safeZone:{top:15,bottom:15,left:15,right:15}},{size:["8X8","10X10","12X12","14X14","11X8","14X11","16X12","8X11","11X14","12X16"],type:["HC","Inner"],safeZone:{top:20,bottom:20,left:20,right:20}},{size:"*",type:["FT","FD"],safeZone:{top:40,bottom:40,left:40,right:40}}]},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(41),r=o(a),l=n(3),s=o(l),u=n(5),c=o(u),d=n(4),f=o(d),p=n(7),h=o(p),m=n(6),v=o(m),g=n(13),y=o(g),b=n(2),E=o(b),x=n(76),S=n(17);n(123),n(122);var T=n(132),_=i(T),P=n(134),w=i(P),M=n(133),k=i(M),R=n(135),C=i(R),N=n(146),A=o(N),I=n(137),L=o(I),D=n(139),O=o(D),j=n(143),z=o(j),F=n(151),U=o(F),B=function(e){function t(e){(0,c.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.closeTextEditModal=n.closeTextEditModal.bind(n),n}return(0,v.default)(t,e),(0,f.default)(t,[{key:"closeTextEditModal",value:function(){var e=this.props.boundTextEditModalActions;e.hideTextEditModal()}},{key:"render",value:function(){var e=this.props,t=e.baseUrls,n=e.uidPk,i=e.fontList,o=e.tagList,a=e.elements,l=e.setting,s=e.selectedElementIndex,u=e.spreadOptions,c=e.textEditModalData,d=e.boundEnvActions,f=e.boundProjectActions,p=(e.boundElementActions,e.boundFontActions),h=e.boundTextEditModalActions,m={elements:a,setting:l,bgUrl:u.bgUrl,baseUrls:t,spreadOptions:u,actions:{updateElement:f.updateElement,updateMultiElement:f.updateMultiElement,elementToFront:f.elementToFront,elementToBack:f.elementToBack,onEditText:h.showTextEditModal}},v={uidPk:n,actions:{getEnv:d.getEnv,getFontList:p.getFontList,getProjectData:f.getProjectData,getSpreadInfomation:f.getSpreadInfomation,getStyleList:f.getStyleList}},g={selectedElementIndex:s,elements:a,setting:l,actions:{saveProject:f.saveProject,copyProject:f.copyProject,updateSetting:f.updateSetting}},y={fontList:i,baseUrl:t.baseUrl,isShown:c.get("isShown"),element:c.get("element"),closeTextEditModal:this.closeTextEditModal,pageHeight:u.oriHeight,ratio:u.ratio,updateElement:f.updateElement,tagList:o};return E.default.createElement("div",{className:"app-container"},E.default.createElement(A.default,v),E.default.createElement(L.default,{setting:l}),E.default.createElement(O.default,g),(0,r.default)(u).length?E.default.createElement(z.default,m):null,i.length?E.default.createElement(U.default,y):null)}}]),t}(b.Component),G=function(e){return{uidPk:(0,y.default)(e,"project.uidPk"),baseUrls:(0,y.default)(e,"system.env.urls"),fontList:(0,y.default)(e,"system.fontList"),tagList:(0,y.default)(e,"system.tagList"),textEditModalData:(0,y.default)(e,"textEditModalData"),setting:(0,y.default)(e,"project.setting"),selectedElementIndex:(0,y.default)(e,"project.selectedElementIndex"),elements:(0,y.default)(e,"project.spread.elements.element"),spreadOptions:(0,y.default)(e,"project.spreadOptions")}},H=function(e){return{boundEnvActions:(0,S.bindActionCreators)(_,e),boundProjectActions:(0,S.bindActionCreators)(w,e),boundFontActions:(0,S.bindActionCreators)(k,e),boundTextEditModalActions:(0,S.bindActionCreators)(C,e)}};t.default=(0,x.connect)(G,H)(B)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.urls=void 0;var o=n(8),a=i(o),r=n(13),l=i(r),s=n(10),u=n(9);t.urls=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case s.API_SUCCESS:if(t.apiPattern.name===u.GET_ENV){var n=t.response,i=(0,l.default)(n,"env.baseUrl"),o=i?i.replace(/portal/i,"www"):"";return(0,a.default)({},n.env,{wwwBaseUrl:o})}default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(156);t.default=(0,i.combineReducers)({urls:o.urls})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.fontFamilies.fontFamily,n=[];return t.forEach(function(e){var t=(0,d.default)({},e,{font:(0,p.default)(e.font)?[].concat((0,l.default)(e.font)):[e.font]});n.push(t)}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),l=o(r),s=n(13),u=o(s),c=n(8),d=o(c),f=n(16),p=o(f),h=n(10),m=i(h),v=n(9),g=i(v),y=n(15),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case m.API_SUCCESS:switch(t.apiPattern.name){case g.GET_FONTS:var n=(0,u.default)(t,"response.fontConfig");return(0,y.convertObjIn)(a(n));default:return e}default:return e}};t.default=b},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),a=n(160),r=i(a),l=n(161),s=i(l),u=n(163),c=i(u);t.default=(0,o.combineReducers)({project:r.default,system:s.default,textEditModalData:c.default})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),a=i(o),r=n(58),l=i(r),s=n(57),u=i(s),c=n(37),d=i(c),f=n(16),p=i(f),h=n(8),m=i(h),v=n(75),g=i(v),y=n(14),b=n(15),E=n(10),x=n(9),S=g.default.parse(window.location.search.substr(1)),T=S.uidPk,_={uidPk:+T||-1,selectedElementIndex:0,setting:{},spread:{},spreadOptions:{}},P=function(e,t){var n=(0,m.default)({},e),i=e.spread,o=e.spreadOptions,a=o.oriWidth,r=o.oriHeight,s=[];return t.map(function(e){if(e){var t=i.elements.element.findIndex(function(t){return t.id===e.id});s=(0,m.default)({},e),e.x&&(s=(0,m.default)({},s,{px:e.x/a})),e.y&&(s=(0,m.default)({},s,{py:e.y/r})),e.width&&(s=(0,m.default)({},s,{pw:e.width/a})),e.height&&(s=(0,m.default)({},s,{ph:e.height/r}));var o=i.elements.element[t];n=(0,l.default)((0,m.default)({},n),"spread.elements.element["+t+"]",(0,m.default)({},o,s))}}),n},w=function(e){var t=[];return e.forEach(function(e){e&&("undefined"!=typeof e.id?t.push(e):t.push((0,m.default)({},e,{id:(0,y.guid)()})))}),t},M=function(e){var t={};return(0,d.default)(e,function(e,n){if("elements"===n){var i=e.element,o=(0,p.default)(i)?[].concat((0,a.default)(i)):[i];t.elements=k(o)}else t[n]=e}),t},k=function(e){var t="__text",n={},i=[];return e.forEach(function(e){var n=(0,m.default)({},e);e[t]&&(n=(0,m.default)(n,{text:e[t]})),delete n[t],delete n.toString,i.push((0,b.convertObjIn)(n))}),n.element=w(i),n},R=function(){return["setId","layoutId","size","coverDefault","sheetType","ratio","frameTotalNum","frameHorizonNum","frameVertialNum","frameSquareNum","status","styleGuid","uidPk","orientation","usePosition","isCrossPage","xmlViewData","xmlViewDataPublish","textFrameTotalNum","textFrameHorizonNum","textFrameVertialNum","pressBookSheet","isCoverDefault","bestChosen","model","shareFlag"]},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments[1];switch(t.type){case E.API_SUCCESS:switch(t.apiPattern.name){case x.GET_TEMPLATE:var n=R(),i=t.response,o=i.data,r=(0,u.default)(o,n);return r.isCoverDefault=r.coverDefault,delete r.coverDefault,(0,m.default)({},e,{__originalData__:o,setting:r});default:return e}case E.INIT_SPREAD:return(0,m.default)({},e,{spread:M(t.spread)});case E.INIT_SPREAD_SETTING:return(0,m.default)({},e,{spreadOptions:(0,b.convertObjIn)(t.options)});case E.CHANGE_SPREAD_SETTING:return(0,m.default)({},e,{spreadOptions:(0,m.default)({},e.spreadOptions,{bgUrl:t.bgUrl})});case E.INIT_ELEMENTS:var s=t.elements,c=t.bookWidth,d=t.bookHeight,f=s.map(function(e){return(0,m.default)({},e,{x:e.px*c,y:e.py*d,width:e.pw*c,height:e.ph*d})});return(0,m.default)({},e,{spread:(0,m.default)({},e.spread,{elements:(0,m.default)({},e.spread.elements,{element:f})})});case E.UPDATE_ELEMENT:var p=e.spread,h=e.spreadOptions,v=t.elementId,g=t.newAttribute,y=h.oriWidth,S=h.oriHeight,T=p.elements.element.findIndex(function(e){return e.id===v}),w=p.elements.element[T],k=(0,m.default)({},g);return g.x&&(k=(0,m.default)({},k,{px:g.x/y})),g.y&&(k=(0,m.default)({},k,{py:g.y/S})),g.width&&(k=(0,m.default)({},k,{pw:g.width/y})),g.height&&(k=(0,m.default)({},k,{ph:g.height/S})),(0,l.default)((0,m.default)({},e),"spread.elements.element["+T+"]",(0,m.default)({},w,k));case E.UPDATE_SETTING:return(0,m.default)({},e,{setting:(0,m.default)({},e.setting,t.newSetting)});case E.UPDATE_SELECT_ELEMENT_INDEX:return(0,m.default)({},e,{selectedElementIndex:t.elementId});case E.UPDATE_MULTI_ELEMENT:var C=t.newElementArray;return P(e,C);case E.UPDATE_ELEMENT_DEPTH:var N=t.newElementArray;return P(e,N);case E.DELETE_ELEMENT:var A=e.spread,I=t.elementId,L=A.elements.element.findIndex(function(e){return e.id===I}),D=A.elements.element,O=[].concat((0,a.default)(D.slice(0,L)),(0,a.default)(D.slice(L+1)));return(0,l.default)((0,m.default)({},e),"spread.elements.element",O);default:return e}};t.default=C},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),a=n(157),r=i(a),l=n(158),s=i(l),u=n(162),c=i(u);t.default=(0,o.combineReducers)({env:r.default,fontList:s.default,tagList:c.default})},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13),r=o(a),l=n(10),s=i(l),u=n(9),c=i(u),d=n(15),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case s.API_SUCCESS:switch(t.apiPattern.name){case c.GET_TAG_LIST:var n=(0,r.default)(t,"response.data");return n?(0,d.convertObjIn)(JSON.parse(n)):e;default:return e}default:return e}};t.default=f},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(36),r=o(a),l=n(10),s=i(l),u=r.default.Map({isShown:!1}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case s.SHOW_TEXT_EDIT_MODAL:var n=t.data;return n?e.merge(t.data,{isShown:!0}):r.default.Map({isShown:!0});case s.HIDE_TEXT_EDIT_MODAL:return e.merge({isShown:!1});default:return e}};t.default=c},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[(0,a.applyMiddleware)(l.default),(0,a.applyMiddleware)(d.default)],n=a.compose,i=n.apply(void 0,t)(a.createStore),o=i(u.default,e);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(17),r=n(248),l=i(r),s=n(159),u=i(s),c=n(20),d=i(c)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(41),a=i(o),r=n(42),l=i(r);n(73);var s=n(30),u=i(s),c=n(15);t.default=function(e,t,n){if(!e)return null;var i=e.replace(/\/textImage\?/,"/textinfo?"),o=fetch(i).then(function(e){return e.ok?e.text():l.default.reject(new Error(e.statusText))}).then(function(e){return(0,c.convertObjIn)(u.default.xml2js(e))}).catch(function(e){return l.default.reject(new Error(e))}),r=fetch(e).then(function(e){return e.ok?e.blob():l.default.reject(new Error(e.statusText))}).catch(function(e){return l.default.reject(new Error(e))});return l.default.all([o,r]).then(function(e){if((0,a.default)(e[0]).length){var i=e[0].textInfo,o=URL.createObjectURL(e[1]),r=i.textAreaIdeaWidth>t||i.textAreaIdeaHeight>n;return l.default.resolve({isShowTextNotFit:r,blobUrl:o})}return l.default.reject()},function(){return l.default.reject()})}},function(e,t,n){"use strict";function i(e){var t=Math.round((0,o.getPtByPx)(e));return t>r?r:t<a?a:t}Object.defineProperty(t,"__esModule",{value:!0}),t.getFontSizeInPt=i;var o=n(14),a=4,r=120},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.generateTemplate=void 0;var o=n(24),a=i(o),r=n(37),l=i(r),s=n(16),u=i(s),c=n(78),d=i(c),f=function(e,t){var n="__text",i=[];return e.element.forEach(function(e){var o={};(0,l.default)(e,function(e,i){"text"===i?o[n]=e:t.indexOf(i)===-1&&(o["_"+i]=e)}),i.push(o)}),i},p=function(e){var t=[];return e.forEach(function(e){var n={};(0,l.default)(e,function(e,t){n["_"+t]=e}),t.push(n)}),t},h=function(e,t){var n=[];return e.forEach(function(e){var t={};(0,l.default)(e,function(e,n){if("elements"===n){var i=f(e,[]);i.length&&(t.elements={element:i})}else t["_"+n]=e}),n.push(t)}),n},m=function(e,t){var n={templateView:{spread:h((0,u.default)(e)?[].concat((0,a.default)(e)):[e])}};t&&t.length&&(n.templateView.tagList={tag:p(t)});var i=new d.default({escapeMode:!1});return""+i.js2xml(n)};t.generateTemplate=m},function(e,t){"use strict";function n(e,t){var n=1200,i=n/e,o=t*i;return{ratio:i,width:n,height:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoxLimit=n},function(e,t){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");e=e.replace(/^#/,""),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t]}},function(e,t){function n(e,t){return e>t}e.exports=n},function(e,t){function n(e,t){return e<t}e.exports=n},function(e,t,n){function i(e,t,n,c,d){e!==t&&r(t,function(r,u){if(s(r))d||(d=new o),l(e,t,u,n,i,c,d);else{var f=c?c(e[u],r,u+"",e,t,d):void 0;void 0===f&&(f=r),a(e,u,f)}},u)}var o=n(211),a=n(48),r=n(74),l=n(173),s=n(25),u=n(22);e.exports=i},function(e,t,n){function i(e,t,n,i,y,b,E){var x=e[n],S=t[n],T=E.get(S);if(T)return void o(e,n,T);var _=b?b(x,S,n+"",e,t,E):void 0,P=void 0===_;if(P){var w=c(S),M=!w&&f(S),k=!w&&!M&&v(S);_=S,w||M||k?c(x)?_=x:d(x)?_=l(x):M?(P=!1,_=a(S,!0)):k?(P=!1,_=r(S,!0)):_=[]:m(S)||u(S)?(_=x,u(x)?_=g(x):(!h(x)||i&&p(x))&&(_=s(S))):P=!1}P&&(E.set(S,_),y(_,S,i,b,E),
E.delete(S)),o(e,n,_)}var o=n(48),a=n(235),r=n(236),l=n(237),s=n(238),u=n(212),c=n(16),d=n(190),f=n(206),p=n(246),h=n(25),m=n(77),v=n(213),g=n(196);e.exports=i},function(e,t,n){function i(e,t){return o(e,t,function(t,n){return a(e,n)})}var o=n(175),a=n(239);e.exports=i},function(e,t,n){function i(e,t,n){for(var i=-1,l=t.length,s={};++i<l;){var u=t[i],c=o(e,u);n(c,u)&&a(s,r(u,e),c)}return s}var o=n(218),a=n(51),r=n(64);e.exports=i},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t,n){function i(e,t,n,i){return void 0===e||o(e,a[n])&&!r.call(i,n)?t:e}var o=n(62),a=Object.prototype,r=a.hasOwnProperty;e.exports=i},function(e,t,n){var i=n(176),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=i(o);e.exports=a},function(e,t){function n(e){return"\\"+i[e]}var i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,l=a(i.length-t,0),s=Array(l);++r<l;)s[r]=i[t+r];r=-1;for(var u=Array(t+1);++r<t;)u[r]=i[r];return u[t]=n(s),o(e,this,u)}}var o=n(47),a=Math.max;e.exports=i},function(e,t){var n=/<%-([\s\S]+?)%>/g;e.exports=n},function(e,t){var n=/<%([\s\S]+?)%>/g;e.exports=n},180,function(e,t,n){var i=n(59),o=n(52),a=n(22),r=o(function(e,t,n,o){i(t,a(t),e,o)});e.exports=r},function(e,t,n){var i=n(47),o=n(50),a=n(55),r=o(function(e,t){try{return i(e,void 0,t)}catch(e){return a(e)?e:new Error(e)}});e.exports=r},function(e,t,n){function i(e){return e=a(e),e&&l.test(e)?e.replace(r,o):e}var o=n(178),a=n(65),r=/[&<>"']/g,l=RegExp(r.source);e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var s=null==n?0:r(n);return s<0&&(s=l(i+s,0)),o(e,a(t,3),s)}var o=n(233),a=n(27),r=n(241),l=Math.max;e.exports=i},function(e,t,n){function i(e,t){return null==e?e:o(e,a(t),r)}var o=n(74),a=n(220),r=n(22);e.exports=i},function(e,t,n){function i(e){return a(e)&&o(e)}var o=n(245),a=n(28);e.exports=i},function(e,t,n){function i(e){return e===!0||e===!1||a(e)&&o(e)==r}var o=n(38),a=n(28),r="[object Boolean]";e.exports=i},function(e,t,n){function i(e){return"number"==typeof e||a(e)&&o(e)==r}var o=n(38),a=n(28),r="[object Number]";e.exports=i},function(e,t,n){function i(e,t){return e&&e.length?o(e,r(t,2),a):void 0}var o=n(49),a=n(170),r=n(27);e.exports=i},function(e,t,n){function i(e,t){return e&&e.length?o(e,a(t,2),r):void 0}var o=n(49),a=n(27),r=n(171);e.exports=i},function(e,t,n){var i=n(187),o=n(182),a=n(183),r=n(54),l={escape:o,evaluate:a,interpolate:r,variable:"",imports:{_:{escape:i}}};e.exports=l},function(e,t,n){function i(e){return o(e,a(e))}var o=n(59),a=n(22);e.exports=i},function(e,t,n){var i,o,a;!function(r,l){o=[n(2),n(69),n(198),n(210),n(240)],i=l,a="function"==typeof i?i.apply(t,o):i,!(void 0!==a&&(e.exports=a))}(this,function(e,t,n,i,o){var a=o({propTypes:{className:i.string,color:i.string,component:i.any,corners:i.number,direction:i.oneOf([1,-1]),fps:i.number,hwaccell:i.bool,left:i.string,length:i.number,lines:i.number,loaded:i.bool,loadedClassName:i.string,opacity:i.number,options:i.object,parentClassName:i.string,position:i.string,radius:i.number,rotate:i.number,scale:i.number,shadow:i.bool,speed:i.number,top:i.string,trail:i.number,width:i.number,zIndex:i.number},getDefaultProps:function(){return{component:"div",loadedClassName:"loadedContent",parentClassName:"loader"}},getInitialState:function(){return{loaded:!1,options:{}}},componentDidMount:function(){this.updateState(this.props)},componentWillReceiveProps:function(e){this.updateState(e)},componentWillUnmount:function(){this.setState({loaded:!1})},updateState:function(e){e||(e={});var t=this.state.loaded,n=this.state.options;"loaded"in e&&(t=!!e.loaded);var i=Object.keys(this.constructor.propTypes);i.splice(i.indexOf("loaded"),1),i.splice(i.indexOf("options"),1);var o="options"in e?e.options:e;i.forEach(function(e){e in o&&(n[e]=o[e])}),this.setState({loaded:t,options:n},this.spin)},spin:function(){var e=!("undefined"==typeof window||!window.document||!window.document.createElement);if(e&&!this.state.loaded){var i=new n(this.state.options),o=t.findDOMNode(this.refs.loader);o.innerHTML="",i.spin(o)}},render:function(){var t,n;return this.state.loaded?(t={key:"content",className:this.props.loadedClassName},n=this.props.children):t={key:"loader",ref:"loader",className:this.props.parentClassName},e.createElement(this.props.component,t,n)}});return a})},function(e,t,n){var i,o;!function(a,r){"object"==typeof e&&e.exports?e.exports=r():(i=r,o="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==o&&(e.exports=o)))}(this,function(){"use strict";function e(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function t(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,i){var o=["opacity",t,~~(100*e),n,i].join("-"),a=.01+n/i*100,r=Math.max(1-(1-e)/t*(100-a),e),l=u.substring(0,u.indexOf("Animation")).toLowerCase(),s=l&&"-"+l+"-"||"";return f[o]||(c.insertRule("@"+s+"keyframes "+o+"{0%{opacity:"+r+"}"+a+"%{opacity:"+e+"}"+(a+.01)+"%{opacity:1}"+(a+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",c.cssRules.length),f[o]=1),o}function i(e,t){var n,i,o=e.style;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==o[t])return t;for(i=0;i<d.length;i++)if(n=d[i]+t,void 0!==o[n])return n}function o(e,t){for(var n in t)e.style[i(e,n)||n]=t[n];return e}function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function l(e){this.opts=a(e||{},l.defaults,p)}function s(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}c.addRule(".spin-vml","behavior:url(#default#VML)"),l.prototype.lines=function(e,i){function a(){return o(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function l(e,l,s){t(f,t(o(a(),{rotation:360/i.lines*e+"deg",left:~~l}),t(o(n("roundrect",{arcsize:i.corners}),{width:u,height:i.scale*i.width,left:i.scale*i.radius,top:-i.scale*i.width>>1,filter:s}),n("fill",{color:r(i.color,e),opacity:i.opacity}),n("stroke",{opacity:0}))))}var s,u=i.scale*(i.length+i.width),c=2*i.scale*u,d=-(i.width+i.length)*i.scale*2+"px",f=o(a(),{position:"absolute",top:d,left:d});if(i.shadow)for(s=1;s<=i.lines;s++)l(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=i.lines;s++)l(s);return t(e,f)},l.prototype.opacity=function(e,t,n,i){var o=e.firstChild;i=i.shadow&&i.lines||0,o&&t+i<o.childNodes.length&&(o=o.childNodes[t+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var u,c,d=["webkit","Moz","ms","O"],f={},p={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(l.defaults={},a(l.prototype,{spin:function(t){this.stop();var n=this,i=n.opts,a=n.el=e(null,{className:i.className});if(o(a,{position:i.position,width:0,zIndex:i.zIndex,left:i.left,top:i.top}),t&&t.insertBefore(a,t.firstChild||null),a.setAttribute("role","progressbar"),n.lines(a,n.opts),!u){var r,l=0,s=(i.lines-1)*(1-i.direction)/2,c=i.fps,d=c/i.speed,f=(1-i.opacity)/(d*i.trail/100),p=d/i.lines;!function e(){l++;for(var t=0;t<i.lines;t++)r=Math.max(1-(l+(i.lines-t)*p)%d*f,i.opacity),n.opacity(a,t*i.direction+s,r,i);n.timeout=n.el&&setTimeout(e,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,a){function l(t,n){return o(e(),{position:"absolute",width:a.scale*(a.length+a.width)+"px",height:a.scale*a.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*c+a.rotate)+"deg) translate("+a.scale*a.radius+"px,0)",borderRadius:(a.corners*a.scale*a.width>>1)+"px"})}for(var s,c=0,d=(a.lines-1)*(1-a.direction)/2;c<a.lines;c++)s=o(e(),{position:"absolute",top:1+~(a.scale*a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:u&&n(a.opacity,a.trail,d+c*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&t(s,o(l("#000","0 0 4px #000"),{top:"2px"})),t(i,t(s,l(r(a.color,c),"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),"undefined"!=typeof document){c=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}();var h=o(e("group"),{behavior:"url(#default#VML)"});!i(h,"transform")&&h.adj?s():u=i(h,"animation")}return l})},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAAVCAMAAACzO3oeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgTWFjaW50b3NoIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkUwMjc2NzlGRTdGRDExRTU4RDVFQjAxMUREMUYxNzgxIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkUwMjc2N0EwRTdGRDExRTU4RDVFQjAxMUREMUYxNzgxIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTAyNzY3OURFN0ZEMTFFNThENUVCMDExREQxRjE3ODEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTAyNzY3OUVFN0ZEMTFFNThENUVCMDExREQxRjE3ODEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5WdNPnAAABrVBMVEUiGBWsqKcvJiOQi4rIxcR0bmzx8fDNysrk4+MsIh8xJyV7dXTu7e0lHBkmHRo7MjDj4uL5+fkuJSL19PSxrawkGhczKify8fGppaTg3t4yKSYqIB3S0M9eV1RMQ0GfmpmBfHr6+vnq6en8/PyloaCSjYuHgoCmoqDp6Ojn5uVQSEZGPjzOy8tgWFZ4cnBFPDpqY2HV1NNcVVKYk5I4Lyzi4OB3cW9nYF5ZUlCKhYMpHxy6t7aZlJO7t7f9/f1tZmS4tbSTjow6MS9MREKNh4aHgX9lXlwrIR6tqah2cG5gWVdtZ2UlGxjBv75GPTtTTEmPiomalpUtJCGalZRIQD3AvbxiW1m+u7rs6+udmZc8MzHQzs2uq6o5MC5sZWM2LSqqpqXPzc329vbY1tb7+vrt7Ozc29pVTUtKQj9JQT6UkI58dnS0sbCEfn3FwsLGw8JNRUOcmJaUj425trX8+/uXkpFRSUdrZGLm5eRBOTbb2djV09LW1NSAenhYUE5zbGonHRt/eXd+eHaGgH+3tLONiId1b200KyhPR0XX1dXe3dx6dHP19fWVkI////8nihx1AAAAj3RSTlP/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////APFtFCkAAAHnSURBVHjaYmDEAkT6sAAlLApz0NRolhq1MzBYZTaxYDOhj11Bzp2BQcrCUQDCZ8AGmLDpZMFUxxuOooItm8/KjVklwaabn6GAHcMAGX8GJzNjCXVVc04fTx7SLEcHikYMMSgC1VGcWWxQdmiGaC+aenleP1s7CFM4UMhEhxLLlQ0Y5FEEooW0JRG8lFwGNRTpAAZuQQSPw1mahQLL9RhaUfga8SHiKAJFDOpIPBEGVxRZcS0uAajluqwwkE6k5WoM3KgC5UEcaEoMOCvgbB4mL/T0KyYLtRyROBmJszyYIU4ZRSCZIRJdjYZ0LZztwofutD4VBnbyLJdgkFVECwlOYcyY4YI7kN8bQ1aQi5ssy1tEy3rQhDrCMJU5MNRAWaYMHpjS9vrkWJ7Hp82DLibViKmuk6EYyvJlwMz2fZa8ZFieyMmviSEoyoypMIKBEcqyZkjDlC5kIN3yKjGxLkxRBiyWs8Etp5bPOWKFZPpItZxKcZ5a2ZDfR7Ll1Ent4nKiDn1kWI4vn4NLOGvClifVMUj0kWM5vhIODJgJWl7ixmDTR5bl+Mp2Ii2vZ2juI9NyQrUaQcsVGNr6yLacQH1OyHJVLJUvCZZja8kgGmSGIL4kzjacMLbWHiKXGGJp6zBK4m/DAQQYAAgNMsmn6Ws3AAAAAElFTkSuQmCC"},function(e,t,n){e.exports=n(1)(100)},function(e,t,n){e.exports=n(1)(101)},function(e,t,n){e.exports=n(1)(102)},function(e,t,n){e.exports=n(1)(110)},function(e,t,n){e.exports=n(1)(111)},function(e,t,n){e.exports=n(1)(136)},function(e,t,n){e.exports=n(1)(137)},function(e,t,n){e.exports=n(1)(143)},function(e,t,n){e.exports=n(1)(150)},function(e,t,n){e.exports=n(1)(153)},function(e,t,n){e.exports=n(1)(17)},function(e,t,n){e.exports=n(1)(190)},function(e,t,n){e.exports=n(1)(199)},function(e,t,n){e.exports=n(1)(201)},function(e,t,n){e.exports=n(1)(227)},function(e,t,n){e.exports=n(1)(235)},function(e,t,n){e.exports=n(1)(275)},function(e,t,n){e.exports=n(1)(278)},function(e,t,n){e.exports=n(1)(279)},function(e,t,n){e.exports=n(1)(281)},function(e,t,n){e.exports=n(1)(283)},function(e,t,n){e.exports=n(1)(289)},function(e,t,n){e.exports=n(1)(300)},function(e,t,n){e.exports=n(1)(353)},function(e,t,n){e.exports=n(1)(358)},function(e,t,n){e.exports=n(1)(390)},function(e,t,n){e.exports=n(1)(391)},function(e,t,n){e.exports=n(1)(393)},function(e,t,n){e.exports=n(1)(395)},function(e,t,n){e.exports=n(1)(402)},function(e,t,n){e.exports=n(1)(413)},function(e,t,n){e.exports=n(1)(53)},function(e,t,n){e.exports=n(1)(59)},function(e,t,n){e.exports=n(1)(638)},function(e,t,n){e.exports=n(1)(658)},function(e,t,n){e.exports=n(1)(660)},function(e,t,n){e.exports=n(1)(666)},function(e,t,n){e.exports=n(1)(667)},function(e,t,n){e.exports=n(1)(688)},function(e,t,n){e.exports=n(1)(719)},function(e,t,n){e.exports=n(1)(72)},function(e,t,n){e.exports=n(1)(731)},function(e,t,n){e.exports=n(1)(752)},function(e,t,n){e.exports=n(1)(807)},function(e,t,n){e.exports=n(1)(81)},function(e,t,n){e.exports=n(1)(88)},function(e,t,n){e.exports=n(1)(89)},function(e,t,n){e.exports=n(1)(92)},function(e,t,n){e.exports=n(1)(925)},function(e,t,n){e.exports=n(1)(99)}]));