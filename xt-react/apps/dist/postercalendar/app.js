!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return e[o].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),o=e[t[0]];return function(e,t,a){o.apply(this,[e,t,a].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}n(588);var a=n(3),r=o(a),i=n(35),s=o(i),u=n(100),l=o(u),d=n(65),c=n(428),p=o(c),f=n(489),g=o(f),h=["en","cn"],m=h.hasOwnProperty(navigator.language)?navigator.language:"en",v=(0,g.default)(),y=document.getElementById("app");(0,l.default)("manifest.json?"+Date.now()).then(function(e){return e.json()}).then(function(e){var t=e[m+".yml"];(0,l.default)(t).then(function(e){return e.json()}).then(function(e){s.default.render(r.default.createElement(d.Provider,{store:v},r.default.createElement(p.default,{translations:e})),y)}).catch(function(e){return console.error(e)})})},function(e,t){e.exports=vendor},function(e,t,n){e.exports=n(1)(726)},function(e,t,n){e.exports=n(1)(2)},function(e,t,n){e.exports=n(1)(56)},function(e,t,n){e.exports=n(1)(88)},function(e,t,n){e.exports={default:n(189),__esModule:!0}},function(e,t,n){e.exports=n(1)(58)},function(e,t,n){e.exports=n(1)(59)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.webClientId=1,t.clientType="H5",t.elementTypes={photo:"PhotoElement",text:"TextElement",calendar:"CalendarElement",style:"StyleElement"},t.pageTypes={top:"topPage",bottom:"bottomPage",cover:"coverPage"},t.productTypes={WC:"WC",DC:"DC",PC:"PC",LC:"LC"},t.bookShapeTypes={landscape:"landscape",square:"square",portrait:"portrait"},t.RESIZE_LIMIT=300,t.filterOptions={TOP:"top picks",MY:"my layouts",TEXT:"text",MORE_THAN_NINE:"9+",MORE_THAN_FIVE:"5+"},t.mouseWheel={width:50,height:50},t.ratioTypes={coverWorkspace:"coverWorkspace",innerWorkspace:"innerWorkspace",previewCoverWorkspace:"previewCoverWorkspace",previewInnerWorkspace:"previewInnerWorkspace",coverWorkspaceForArrangePages:"coverWorkspaceForArrangePages",innerWorkspaceForArrangePages:"innerWorkspaceForArrangePages"},t.percent={lg:.93,big:.9,normal:.75,sm:.5,xs:.4},t.smallViewWidthInArrangePages=290,t.smallViewHeightInNavPages=70,t.downloadStatus={DOWNLOADING:0,DOWNLOAD_SUCCESS:1,DOWNLOAD_FAIL:2},t.shapeType={controlElement:"ELEMENT_CONTROL",backgroundElement:"BACKGROUND_ELEMENT",backgroundRect:"BACKGROUND_RECT",cameoElement:"CAMEO_ELEMENT",cameoElementEffect:"CAMEO_ELEMENT_EFFECT",elementBorder:"ELEMENT_BORDER",iCon:"ICON"},t.dragTypes={template:"TEMPLATE"},t.defaultFrameOptions={default:{value:.25,whRatio:2}},t.elementAction={MOVE:"MOVE",ROTATE:"ROTATE",RESIZE:"RESIZE"},t.pageNumPerRow={WC:5,LC:6,DC:4,PC:1},t.pageStepMap={WC:2,LC:1,DC:1,PC:1},t.templateTypes={WC:6,LC:11,DC:5,PC:7},t.sideBarWidth=280,t.dragElementSelector={photo:".photo-element-thumbnail"},t.dragPageSelector={targetPage:".book-page-thumbnail",clonedPage:"book-page-thumbnail-cloned"},t.defaultStyle={brightness:0,effectId:0,opacity:100},t.innerPageHeightShowRatio={WC:.58,DC:1,LC:1,PC:1},t.orderType="commonProduct",t.loginPath="/sign-in.html",t.smallViewWidthInMyProjects=400,t.defaultFontSetting={fontSize:23,color:"#000000",fontFamilyId:"roboto",fontId:"roboto"},t.monthStrings=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_REQUEST="API_REQUEST",t.API_SUCCESS="API_SUCCESS",t.API_FAILURE="API_FAILURE",t.GET_SPEC_DATA="GET_SPEC_DATA",t.INIT_SPEC_DATA="INIT_SPEC_DATA",t.PARSER_QUERYSTRING="PARSER_QUERYSTRING",t.ADD_TRACKER="ADD_TRACKER",t.SHOW_NOTIFY="SHOW_NOTIFY",t.HIDE_NOTIFY="HIDE_NOTIFY",t.SHOW_CONFIRM="SHOW_CONFIRM",t.HIDE_CONFIRM="HIDE_CONFIRM",t.SHOW_ALERT_MODAL="SHOW_ALERT_MODAL",t.HIDE_ALERT_MODAL="HIDE_ALERT_MODAL",t.SHOW_UPGRADE="SHOW_UPGRADE",t.HIDE_UPGRADE="HIDE_UPGRADE",t.SHOW_LOADING="SHOW_LOADING",t.HIDE_LOADING="HIDE_LOADING",t.SHOW_PREVIEW="SHOW_PREVIEW",t.HIDE_PREVIEW="HIDE_PREVIEW",t.ADD_NOTIFICATION="ADD_NOTIFICATION",t.REMOVE_NOTIFICATION="REMOVE_NOTIFICATION",t.CLEAR_NOTIFICATION="CLEAR_NOTIFICATION",t.INIT_NOTIFICATION_SYSTEM="INIT_NOTIFICATION_SYSTEM",t.CLEAR_ORDER_INFO="CLEAR_ORDER_INFO",t.SHOW_CLONE_MODAL="SHOW_CLONE_MODAL",t.HIDE_CLONE_MODAL="HIDE_CLONE_MODAL",t.SET_COVER="SET_COVER",t.SET_PAGE_ARRAY="SET_PAGE_ARRAY",t.SET_VARIABLE_MAP="SET_VARIABLE_MAP",t.SET_PARAMETER_MAP="SET_PARAMETER_MAP",t.SET_IMAGE_ARRAY="SET_IMAGE_ARRAY",t.SET_IMAGE_USED_MAP="SET_IMAGE_USED_MAP",t.SET_OPTION_MAP="SET_OPTION_MAP",t.CLEAR_IMAGE_USED_MAP="CLEAR_IMAGE_USED_MAP",t.INIT_CALENDAR_SETTING="INIT_CALENDAR_SETTING",t.CHANGE_CALENDAR_SETTING="CHANGE_CALENDAR_SETTING",t.CREATE_ELEMENTS="CREATE_ELEMENTS",t.UPDATE_ELEMENT="UPDATE_ELEMENT",t.UPDATE_ELEMENTS="UPDATE_ELEMENTS",t.DELETE_ELEMENT="DELETE_ELEMENT",t.DELETE_ELEMENTS="DELETE_ELEMENTS",t.DELETE_ALL="DELETE_ALL",t.APPLY_TEMPLATE="APPLY_TEMPLATE",t.APPLY_TEMPLATE_TO_PAGES="APPLY_TEMPLATE_TO_PAGES",t.UPDATE_PAGE_TEMPLATE_ID="UPDATE_PAGE_TEMPLATE_ID",t.MOVE_PAGE_BEFORE="MOVE_PAGE_BEFORE",t.INIT_PROJECT_SETTING="INIT_PROJECT_SETTING",t.CHANGE_PROJECT_SETTING="CHANGE_PROJECT_SETTING",t.PROJECT_LOAD_COMPLETED="PROJECT_LOAD_COMPLETED",t.UPDATE_PROJECT_ID="UPDATE_PROJECT_ID",t.CHANGE_PROJECT_TITLE="CHANGE_PROJECT_TITLE",t.CHANGE_PROJECT_PROPERTY="CHANGE_PROJECT_PROPERTY",t.UPLOAD_COMPLETE="UPLOAD_COMPLETE",t.DELETE_PROJECT_IMAGE="DELETE_PROJECT_IMAGE",t.UPDATE_IMAGE_USED_COUNT="UPDATE_IMAGE_USED_COUNT",t.SWITCH_SHEET="SWITCH_SHEET",t.SWITCH_PAGE="SWITCH_PAGE",t.ADD_IMAGES="ADD_IMAGES",t.RETRY_IMAGE="RETRY_IMAGE",t.AUTO_ADD_PHOTO_TO_CANVAS="AUTO_ADD_PHOTO_TO_CANVAS",t.CHANGE_TAB_IN_SIDEBAR="CHANGE_TAB_IN_SIDEBAR",t.UPDATE_RATIO="UPDATE_RATIO",t.ADD_ALBUM="ADD_ALBUM",t.GET_USER_ALBUM_ID="GET_USER_ALBUM_ID",t.TOGGLE_UPLOAD="TOGGLE_UPLOAD",t.UPDATE_IMAGEID="UPDATE_IMAGEID",t.UPDATE_PERCENT="UPDATE_PERCENT",t.UPDATE_FIELDS="UPDATE_FIELDS",t.CLEAR_IMAGES="CLEAR_IMAGES",t.DELETE_IMAGE="DELETE_IMAGE",t.ERROR_TO_FIRST="ERROR_TO_FIRST",t.SHOW_CONTACT_US_MODAL="SHOW_CONTACT_US_MODAL",t.HIDE_CONTACT_US_MODAL="HIDE_CONTACT_US_MODAL",t.SET_CAPABILITIES="SET_CAPABILITIES",t.SHOW_IMAGE_EDIT_MODAL="SHOW_IMAGE_EDIT_MODAL",t.HIDE_IMAGE_EDIT_MODAL="HIDE_IMAGE_EDIT_MODAL",t.CLEAR_TEMPLATE_LIST="CLEAR_TEMPLATE_LIST",t.ADD_TEMPLATE="ADD_TEMPLATE",t.IS_IN_APPLY_TEMPLATE="IS_IN_APPLY_TEMPLATE",t.SET_TEMPLATE_LIST="SET_TEMPLATE_LIST",t.SHOW_TEXT_EDIT_MODAL="SHOW_TEXT_EDIT_MODAL",t.HIDE_TEXT_EDIT_MODAL="HIDE_TEXT_EDIT_MODAL"},function(e,t,n){var o=n(506),a=n(153),r=a(function(e,t,n){o(e,t,n)});e.exports=r},function(e,t,n){e.exports=n(1)(829)},function(e,t,n){e.exports=n(1)(26)},function(e,t,n){e.exports={default:n(191),__esModule:!0}},function(e,t,n){e.exports=n(1)(1045)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.API_BASE="/",t.materialBasePath="./materials",t.ORDER_PATH="/<%=orderType%>/addShoppingCart.html?projectGUID=<%=projectId%>",t.GET_PROJECT_DATA="<%=baseUrl%>userid/<%=userId%>/project/<%=projectId%>?autoRandomNum=<%=autoRandomNum%>",t.GET_PREVIEW_PROJECT_DATA="<%=uploadBaseUrl%>upload/Preview/GetPhotobookXmlByProjectId?projectId=<%=projectId%>",t.GET_MAIN_PROJECT_IMAGE="<%=baseUrl%>clientH5/project/imageInfo?projectId=<%=mainProjectUid%>&autoRandomNum=<%=autoRandomNum%>",t.SUBMIT_CHECK_FAIL_PROJECT="<%=baseUrl%>userid/<%=userId%>/submitCheckFailProject/<%=projectId%>?redirectParentBook=false&isParentBook=false",t.GET_FONTS="<%=baseUrl%>api/product/text/fontmap",t.GET_FONT_THUMBNAIL="<%=baseUrl%>prod-assets/static/font_thumbnail/<%=fontName%>.png",t.NEW_PROJECT="<%=baseUrl%>general/json/<%=userId%>/project/<%=projectType%>",t.SAVE_PROJECT="<%=baseUrl%>general/json/<%=userId%>/project/<%=projectId%>/<%=projectType%>",t.GET_PROJECT_TITLE="<%=baseUrl%>web-api/customerId/<%=userId%>/getProjectNameByProjectId?projectId=<%=projectId%>",t.SAVE_PROJECT_TITLE="<%=baseUrl%>web-api/customerId/<%=userId%>/updateProjectAndAlbumTitle?projectId=<%=projectId%>&projectName=<%=projectName%>",t.LOGIN="<%=baseUrl%>phone/nativeLogin.ep?username=<%=username%>&password=<%=password%>",t.ORDER="<%=baseUrl%>image-box/addShoppingCart.html?projectGUID=<%=projectId%>",t.GET_IMAGE_IDS="<%=baseUrl%>phone/getBatchImageIds.ep?imageIdCount=<%=imageIdCount%>&autoRandomNum=<%=autoRandomNum%>",t.GET_ENV="<%=baseUrl%>userid/getEnv",t.GET_SESSION_USER_INFO="<%=baseUrl%>BigPhotoBookServlet/getSessionUserInfo?webClientId=<%=webClientId%>&autoRandomNum=<%=autoRandomNum%>",t.HEART_BEAT="<%=baseUrl%>userid/<%=userId%>/heartbeat",t.TEXT_SRC="<%=baseUrl%>api/product/text/textImage?ratio=<%=ratio%>&textAutoWrap=%7B%22autoWrapType%22%3A%22noWrap%22%2C%22autowrapPosition%22%3A%5B%5D%7D&text=<%=text%>&font=<%=fontFamily%>&fontSize=<%=fontSize%>&color=<%=fontColor%>&align=<%=textAlign%>&verticalTextAlign=<%=verticalTextAlign%>&width=<%=width%>&height=<%=height%>&originalWidth=<%=originalWidth%>&originalHeight=<%=originalHeight%>&originalFontSize=<%=originalFontSize%>",t.PAINETEXT_SRC="<%=baseUrl%>api/product/text/textImage?&ratio=<%=ratio%>&color=<%=color%>&align=center&font=<%=fontFamily%>&height=<%=height%>&text=<%=text%>&width=<%=width%>",t.MY_PHOTOS="<%=baseUrl%>web-api/customer/getMyPhotosInfo",t.IMAGES_CROPPER="<%=baseUrl%>imgservice/op/crop",t.IMAGES_CROPPER_PARAMS="?encImgId=<%=encImgId%>&px=<%=px%>&py=<%=py%>&pw=<%=pw%>&ph=<%=ph%>&width=<%=width%>&height=<%=height%>&rotation=<%=rotation%>&timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>&encProjectId=<%=encProjectId%>",t.IMAGES_API="<%=baseUrl%>imgservice/op/crop",t.IMAGES_FILTER_PARAMS="?encImgId=<%=encImgId%>&px=<%=px%>&py=<%=py%>&pw=<%=pw%>&ph=<%=ph%>&width=<%=width%>&height=<%=height%>&rotation=<%=rotation%>&effectId=<%=effectId%>&opacity=<%=opacity%>&flop=<%=imgFlip%>&shape=<%=shape%>&timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>&encProjectId=<%=encProjectId%>",t.CALENDAR_IMAGE="<%=baseUrl%>artwork/dateimage/<%=dateStyle%>/<%=productType%>_<%=size%>_<%=year%>-<%=month%>_<%=imageSize%>.png",t.GET_SPEC_VERSION_DATA="<%=productBaseURL%>product/spec/product-spec?productType=4",t.GET_PROJECT_ORDERED_STATUS="<%=baseUrl%>userid/<%=userId%>/getProjectOrderedState/<%=projectId%>",t.ADD_ALBUM="<%=baseUrl%>userid/<%=userId%>/addOrUpdateAlbum?albumName=<%=albumName%>&webClientId=<%=webClientId%>&autoRandomNum=<%=autoRandomNum%>",t.GET_USER_ALBUM_ID="<%=baseUrl%>userid/<%=userId%>/getAlbumId?albumName=<%=albumName%>",t.CONTACT_US="<%=baseUrl%>userid/service/feedback",t.UPLOAD_IMAGES="<%=uploadBaseUrl%>upload/UploadServer/uploadImg",t.IMAGE_SRC="upload/UploadServer/PicRender",t.GET_ENCODE_IMAGE_IDS="<%=baseUrl%>userid/getEncImgIds",t.GET_TEMPLATE_LIST="<%=baseUrl%>template/global/list?designSize=<%=designSize%>&imageNum=0&autoRandomNum=<%=autoRandomNum%>&customerId=<%=customerId%>&webClientId=1&productType=<%=productType%>",t.APPLY_LAYOUT="<%=baseUrl%>/template/global/item/guid/viewData",t.GET_RELATION_TEMPLATE="<%=baseUrl%>template/global/getRelationTemplate.ep?templateGUID=<%=templateGUID%>&size=<%=size%>&coverType=CL&autoRandomNum=<%=autoRandomNum%>",t.GET_STYLE_LIST="<%=baseUrl%>calendarStyle/getCalendarStyleList?size=<%=size%>&autoRandomNum=<%=autoRandomNum%>&webClientId=1&type=<%=productType%>",t.TEMPLATE_SRC="<%=templateThumbnailPrefx%>TemplateThumbnail/<%=size%>/<%=guid%>.jpg?size=<%=size%>&randomMumber=20170918",t.GET_PRODUCT_PRICE="<%=baseUrl%>clientH5/product/book/price?product=<%=product%>&options=<%=options%>",t.CHECK_PROJECT_TITLE="<%=baseUrl%>frontPages/checkProjectName.ep",t.UPLOAD_COVER_IMAGE="<%=uploadBaseUrl%>upload/servlet/UploadCoverImgServlet?timestamp=<%=timestamp%>&customerId=<%=customerId%>&token=<%=token%>",t.DELETE_SERVER_PHOTOS="<%=baseUrl%>web-api/album/deleteImages"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return Math.random()*(t-e)+e}function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}function i(e,t){var n=String(e),o=n.indexOf(".");return o!==-1?n.substr(0,o+t+1):n}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(isNaN(e))return 0;var n=Math.pow(10,2),o=Math.round(e*n)/n;return parseFloat(i(o,t))}function u(e){return/\.\d+/.test(""+e)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.reduce(function(e,t){return e+t});return e.length?t/e.length:0}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=l(e),n=e.reduce(function(e,n){return e+Math.pow(n-t,2)},0);return e.length?n/e.length:0}Object.defineProperty(t,"__esModule",{value:!0}),t.parsePropertiesToInt=t.parsePropertiesToFloat=t.toInt=t.toFloat=t.guid=t.makeId=t.hexToRgb=t.decToHex=t.hexToDec=t.getPxByMM=t.getPxByPt=t.getPtByPx=t.getInchByMM=t.getPxByInch=t.getInchByPx=t.getRandomNum=void 0;var c=n(11),p=o(c);t.getRandomArbitrary=a,t.getRandomInt=r,t.toFixed=i,t.round=s,t.isDecimal=u,t.avg=l,t.dev=d;var f=n(600),g=o(f),h=t.getRandomNum=function(){return Math.round(1e13*Math.random())},m=(t.getInchByPx=function(e){var t=parseFloat(e)||0;return t/300},t.getPxByInch=function(e){var t=parseFloat(e)||0;return 300*t},t.getInchByMM=function(e){var t=parseFloat(e)||0,n=parseFloat(30*t/2.54);return parseFloat((n/300).toFixed(7))},t.getPtByPx=function(e){var t=parseFloat(e)||0;return t/300*72},t.getPxByPt=function(e){var t=parseFloat(e)||0;return 300*t/72},t.getPxByMM=function(e){var t=parseFloat(e)||0;return 30*t/2.54},t.hexToDec=function(e){return parseInt(e.replace("#",""),16)},t.decToHex=function(e){if(0===e)return"#000000";if(!e)return"#ffffff";for(var t=e.toString(16);t.length<6;)t="0"+t;return"#"+t},t.hexToRgb=function(e){return(0,g.default)(e)},t.makeId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ID",t=h();return e+"_"+t},t.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.toFloat=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseFloat(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t}),v=t.toInt=function(e){var t=0;if(e&&"string"==typeof e)try{t=parseInt(e)}catch(e){t=0}else e&&"number"==typeof e&&(t=e);return t};t.parsePropertiesToFloat=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=m(e[t])}),(0,p.default)({},e,n)},t.parsePropertiesToInt=function(e,t){if(!e||!t)return e;var n={};return t.forEach(function(t){n[t]=v(e[t])}),(0,p.default)({},e,n)}},function(e,t,n){e.exports=n(1)(418)},function(e,t,n){e.exports=n(1)(57)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertObjOut=t.convertObjIn=void 0;var a=n(587),r=o(a),i=n(101),s=o(i),u=n(46),l=o(u),d=n(156),c=o(d),p=n(68),f=o(p);t.convertObjIn=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=(0,l.default)(t)?[]:{};return(0,s.default)(t,function(t,a){n.indexOf(a)!==-1?o[a]=t:(0,f.default)(t)?o[a]=e(t,n):"true"===t||"false"===t?o[a]=Boolean("true"===t):"null"===t?o[a]=null:(0,c.default)(t)?o[a]=t:isNaN((0,r.default)(t))?o[a]=t:o[a]=(0,r.default)(t)}),o},t.convertObjOut=function e(t){var n=(0,l.default)(t)?[]:{};return(0,s.default)(t,function(t,o){(0,c.default)(t)?n[o]=t?"true":"false":(0,f.default)(t)?n[o]=e(t):n[o]=t}),n}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCropOptions=t.getCropLRByOptions=t.getCropOptionsByLR=t.covertCropSizeToLimit=void 0;var a=n(11),r=o(a),i=n(9),s=n(76),u=t.covertCropSizeToLimit=function(e,t,n){var o=e,a=t;if(o>n){var r=n/o;o=n,a=Math.round(a*r)}if(a>n){var i=n/a;a=n,o=Math.round(o*i)}return{width:o,height:a}},l=(t.getCropOptionsByLR=function(e,t,n,o,a,r){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.cropLimitedSize,l=e,d=t,c=n-e,p=o-t,f=Math.round(a/c),g=Math.round(r/p);if(s){var h=u(f,g,s);f=h.width,g=h.height}return{px:l,py:d,pw:c,ph:p,width:f,height:g}},t.getCropLRByOptions=function(e,t,n,o){var a=e,r=t,i=a+n,s=r+o;return{cropLUX:a,cropLUY:r,cropRLX:i,cropRLY:s}});t.getCropOptions=function(e,t,n,o,a){var d=void 0,c=void 0;90===Math.abs(a)?(d=t,c=e):(d=e,c=t);var p=(0,s.getDefaultCrop)(d,c,n,o),f=p.px,g=p.py,h=p.pw,m=p.ph,v=l(f,g,h,m),y=v.cropLUX,M=v.cropLUY,I=v.cropRLX,T=v.cropRLY,w=Math.round(n/h),E=Math.round(o/m);if(i.cropLimitedSize){var b=u(w,E,i.cropLimitedSize);w=b.width,E=b.height}return(0,r.default)({},{px:f,py:g,pw:h,ph:m,cropLUX:y,cropLUY:M,cropRLX:I,cropRLY:T,width:w,height:E})}},function(e,t,n){e.exports=n(1)(411)},function(e,t,n){function o(e,t,n){var o=f.imports._.templateSettings||f;n&&d(e,t,n)&&(t=void 0),e=g(e),t=a({},t,o,s);var T,w,E=a({},t.imports,o.imports,s),b=c(E),S=i(E,b),D=0,A=t.interpolate||M,N="__p += '",_=RegExp((t.escape||M).source+"|"+A.source+"|"+(A===p?y:M).source+"|"+(t.evaluate||M).source+"|$","g"),C="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(_,function(t,n,o,a,r,i){return o||(o=a),N+=e.slice(D,i).replace(I,u),n&&(T=!0,N+="' +\n__e("+n+") +\n'"),r&&(w=!0,N+="';\n"+r+";\n__p += '"),o&&(N+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),D=i+t.length,t}),N+="';\n";var P=t.variable;P||(N="with (obj) {\n"+N+"\n}\n"),N=(w?N.replace(h,""):N).replace(m,"$1").replace(v,"$1;"),N="function("+(P||"obj")+") {\n"+(P?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(T?", __e = _.escape":"")+(w?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+N+"return __p\n}";var x=r(function(){return Function(b,C+"return "+N).apply(void 0,S)});if(x.source=N,l(x))throw x;return x}var a=n(524),r=n(525),i=n(604),s=n(516),u=n(518),l=n(158),d=n(90),c=n(559),p=n(154),f=n(531),g=n(173),h=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,v=/(__e\(.*?\)|\b__t\)) \+\n'';/g,y=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M=/($^)/,I=/['\n\r\u2028\u2029\\]/g;e.exports=o},function(e,t,n){e.exports=n(1)(128)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,p.default)(e.name)(e.params),o={method:"GET",credentials:"same-origin"};return fetch(n,(0,d.default)({},o,t)).then(function(e){return e.text().then(function(t){return{text:t,response:e}})},function(e){return u.default.reject(e)}).then(function(e){var t=e.text,n=e.response;if(!n.ok)return u.default.reject(n);var o=null;try{o=JSON.parse(t)}catch(e){o=h.default.xml2js(t)}finally{return o}})}Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_API=void 0;var r=n(590),i=o(r),s=n(14),u=o(s),l=n(18),d=o(l),c=n(23),p=o(c);n(100);var f=n(10),g=n(39),h=o(g),m=t.CALL_API=(0,i.default)("Call API");t.default=function(e){return function(e){return function(t){var n=t[m];if("undefined"==typeof n)return e(t);var o=n.apiPattern,r=n.options;return e({apiPattern:o,type:f.API_REQUEST,options:r}),a(o,r).then(function(t){return e({apiPattern:o,type:f.API_SUCCESS,response:t}),t},function(t){return e({apiPattern:o,type:f.API_FAILURE,result:t}),u.default.reject(t)})}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,i.default)(e,"project.data.setting"),n=(0,i.default)(e,"project.data.pageArray"),o=(0,i.default)(e,"project.data.cover"),a=o.get("containers"),r=(0,i.default)(e,"project.data.imageArray"),s=(0,i.default)(e,"project.data.property"),l=(0,i.default)(e,"project.data.calendarSetting"),d=(0,i.default)(e,"project.data.parameterMap"),c=(0,i.default)(e,"project.data.variableMap"),p=(0,i.default)(e,"spec.data.configurableOptionArray"),f=(0,i.default)(e,"spec.data.parameterArray"),g=(0,i.default)(e,"spec.data.variableArray"),h=(0,i.default)(e,"spec.data.allOptionMap"),m=(0,i.default)(e,"system.env.urls"),v=(0,i.default)(e,"system.env.qs"),y=(0,i.default)(e,"system.global.pagination").get("pageId"),M=(0,i.default)(e,"system.global.snipping"),I=(0,i.default)(e,"system.global.ratio"),T=null,w=null,E=u.default.List(),b=u.default.Map();n&&n.size&&n.forEach(function(e){e.get("id")===y&&(T=e),e.get("elements").forEach(function(t){b=b.set(t.get("id"),e.get("id"))}),E=E.concat(e.get("elements"))}),a&&a.size&&a.forEach(function(e){e.get("id")===y&&(w=e),e.get("elements").forEach(function(t){b=b.set(t.get("id"),e.get("id"))}),E=E.concat(e.get("elements"))});var S=T||w,D=(0,i.default)(e,"system.env.userInfo").get("id"),A=(0,i.default)(e,"system.fontList");return{setting:t,calendarSetting:l,cover:o,containers:a,elementArray:E,pageArray:n,imageArray:r,property:s,parameterMap:d,variableMap:c,elementPageIdMap:b,configurableOptionArray:p,parameterArray:f,variableArray:g,allOptionMap:h,queryStringObj:v,urls:m,currentPage:S,snipping:M,ratioMap:I,userId:D,fontList:A}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=o(r);t.getDataFromState=a;var s=n(2),u=o(s)},function(e,t,n){e.exports=n(1)(990)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneDragNode=t.getTransferDataByNode=t.getTransferData=t.setTransferDragNode=t.setTransferDataByNode=t.setTransferData=void 0;var a=n(48),r=o(a),i=!!document.documentMode;!i&&!!window.StyleMedia,t.setTransferData=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";if(t){var o=(0,r.default)(t);e&&e.dataTransfer?e.dataTransfer.setData(n,o):document.querySelector("body").setAttribute("data-drag",o)}},t.setTransferDataByNode=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(e){var t=(0,r.default)(e);document.querySelector("body").setAttribute("data-drag",t)}},t.setTransferDragNode=function(e,t){t&&t.nodeType===Node.ELEMENT_NODE&&e.dataTransfer&&e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t,0,0)},t.getTransferData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=void 0;if(e&&e.dataTransfer){var o=e.dataTransfer.getData(t);try{n=o.trim()?JSON.parse(o):{}}catch(e){n=""}}else{var a=document.querySelector("body").getAttribute("data-drag");n=a?JSON.parse(a):{},document.querySelector("body").removeAttribute("data-drag")}return n},t.getTransferDataByNode=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",void 0),o=document.querySelector("body").getAttribute("data-drag");return n=o?JSON.parse(o):{},t&&document.querySelector("body").removeAttribute("data-drag"),n},t.cloneDragNode=function(e,t){if(e&&e.nodeType===Node.ELEMENT_NODE){var n=e.cloneNode(!0);return n.setAttribute("id",t),n.style.position="absolute",n.style.top="-100000px",document.body.appendChild(n),n}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={},o="",a="",r="",i="";Object.defineProperty(n,"customerId",{get:function(){return o},set:function(e){o=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"token",{get:function(){return a},set:function(e){a=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"timestamp",{get:function(){return r},set:function(e){r=e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"encProjectId",{get:function(){return i},set:function(e){i=e},enumerable:!0,configurable:!0}),t.default=n},function(e,t,n){e.exports=n(1)(49)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(205);var y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.onClicked,a=e.width,r=e.height,i=e.disabled,s=e.id,u=(0,v.default)("button",n,{disabled:i});return h.default.createElement("button",{id:s,className:u,onClick:o,style:{width:a?a+"px":"",height:r?r+"px":""},disabled:i},t)}}]),t}(g.Component);t.default=y,y.propTypes={onClicked:g.PropTypes.func,className:g.PropTypes.string,width:g.PropTypes.number,height:g.PropTypes.number,disabled:g.PropTypes.bool}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(215);var y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.stopEvent=n.stopEvent.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.onBackDropClick=n.onBackDropClick.bind(n),n.stopDragEvent=function(e){var t=e||window.event;t.stopPropagation(),t.preventDefault()},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidUpdate",value:function(e,t){var n=e.opened,o=this.props.opened;n!==o&&o&&this.modalContainer.focus()}},{key:"handleKeyDown",value:function(e){this.props.escapeClose&&27===e.keyCode&&(e.preventDefault(),this.props.onClosed()),this.stopEvent(e)}},{key:"onBackDropClick",value:function(){var e=this.props,t=e.closeByBackDropClick,n=e.onClosed;t&&n()}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,a=t.opened,r=t.onClosed,i=t.onMinimized,s=t.isHideIcon,u=t.isHideMinimize,l=void 0===u||u,d=t.styles,c=(0,v.default)("x-modal",{show:a}),p=(0,v.default)("icon-close",{hide:s}),f=(0,v.default)("icon-minimize",{hide:l}),g=(0,v.default)("content",o);return h.default.createElement("div",{ref:function(t){e.modalContainer=t},tabIndex:"-1",className:c,onClick:this.stopEvent,onMouseDown:this.stopEvent,onKeyDown:this.handleKeyDown,onKeyUp:this.stopEvent,onKeyPress:this.stopEvent},h.default.createElement("div",{className:"backdrop",onClick:this.onBackDropClick}),h.default.createElement("div",{className:g,style:d,onDragStart:this.stopDragEvent},h.default.createElement("span",{className:f,onClick:i}),h.default.createElement("span",{className:p,onClick:r}),n))}}]),t}(g.Component);t.default=y,y.defaultProps={escapeClose:!0,closeByBackDropClick:!1},y.propTypes={onClosed:g.PropTypes.func.isRequired,className:g.PropTypes.string,opened:g.PropTypes.bool.isRequired,escapeClose:g.PropTypes.bool,isHideIcon:g.PropTypes.bool,closeByBackDropClick:g.PropTypes.bool}},function(e,t){"use strict";function n(e,t,n){var o=e<<16|t<<8|n;return function(e){return"#"+new Array(7-e.length).join("0")+e}(o.toString(16).toUpperCase())}function o(e){var t=e.replace(/^#/,""),n=t.split("");return 3===t.length&&(n[5]=t[2],n[4]=t[2],n[3]=t[1],n[2]=t[1],n[1]=t[0],n[0]=t[0]),parseInt(n.join(""),16)}function a(e){var t=o(e),n=t>>16,a=t>>8&255,r=255&t;return[n,a,r]}function r(e,t){var n=o(e),a=n>>16,r=n>>8&255,i=255&n;return"rgba("+a+", "+r+", "+i+", "+t/100+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.RGBToHex=n,t.hexString2Number=o,t.hexToRGB=a,t.hexToRGBA=r;t.numberToHex=function(e){for(var t=parseInt(e).toString(16).toUpperCase();t.length<6;)t="0"+t;return"#"+t}},function(e,t){"use strict";t.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},t.bind=function(e,t){return function(){return e.apply(t,arguments)}},t.decode64=function(e){var t,n,o,a,r,i,s,u,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=e.length,c="";for(t=0;t<d;t+=4)n=l.indexOf(e[t]),o=l.indexOf(e[t+1]),a=l.indexOf(e[t+2]),r=l.indexOf(e[t+3]),i=n<<2|o>>4,s=(15&o)<<4|a>>2,u=(3&a)<<6|r,c+=64===a?String.fromCharCode(i):64===r||r===-1?String.fromCharCode(i,s):String.fromCharCode(i,s,u);return c},t.getBounds=function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect(),n=null==e.offsetWidth?t.width:e.offsetWidth;return{top:t.top,bottom:t.bottom||t.top+t.height,right:t.left+n,left:t.left,width:n,height:null==e.offsetHeight?t.height:e.offsetHeight}}return{}},t.offsetBounds=function(e){var n=e.offsetParent?t.offsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+n.top,bottom:e.offsetTop+e.offsetHeight+n.top,right:e.offsetLeft+n.left+e.offsetWidth,left:e.offsetLeft+n.left,width:e.offsetWidth,height:e.offsetHeight}},t.parseBackgrounds=function(e){var t,n,o,a,r,i,s,u=" \r\n\t",l=[],d=0,c=0,p=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&(a=t.indexOf("-",1)+1)>0&&(o=t.substr(0,a),t=t.substr(a)),l.push({prefix:o,method:t.toLowerCase(),value:r,args:s,image:null})),s=[],t=o=n=r=""};return s=[],t=o=n=r="",e.split("").forEach(function(e){if(!(0===d&&u.indexOf(e)>-1)){switch(e){case'"':i?i===e&&(i=null):i=e;break;case"(":if(i)break;if(0===d)return d=1,void(r+=e);c++;break;case")":if(i)break;if(1===d){if(0===c)return d=0,r+=e,void p();c--}break;case",":if(i)break;if(0===d)return void p();if(1===d&&0===c&&!t.match(/^url$/i))return s.push(n),n="",void(r+=e)}r+=e,0===d?t+=e:n+=e}}),p(),l}},function(e,t,n){e.exports=n(1)(22)},function(e,t,n){e.exports=n(1)(846)},function(e,t){"use strict";var n=function e(){e.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-e.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};n.options={logging:!1},e.exports=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(181),r=o(a),i=n(180),s=o(i);t.default=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,u=(0,s.default)(e);!(o=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,r.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(163),r=o(a),i=new r.default({attributePrefix:""});t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterFonts=t.createNewElementsByTemplate=t.updateElementsByTemplate=t.recomputedTextElementOptions=t.recomputedElementOptions=t.recomputedElementOptionsWithImage=void 0;var a=n(64),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=n(2),c=n(21),p=n(9),f=n(17),g=n(33),h=n(45),m=o(h),v=.4,y=function(e,t){var n=null,o=e.get("encImgId");return t.length&&o&&(n=t.find(function(e){return e.encImgId===o})),n},M=function(e,t,n,o){var a=t,r=o;if(t>v){var i=e/t,s=i/2;a=(e-s)/s,r=n/s}return{px:a,pw:r}},I=function(e){var t=0;if(e&&e.size){var n=e.min(function(e){return e.get("px")});n&&(t=n.get("px"))}return t},T=t.recomputedElementOptionsWithImage=function(e,t,n,o){var a=n.get("width"),i=n.get("height"),u=a*t.pw,l=i*t.ph,d={cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0},p=0,f=!1;o&&(p=o.get("imgRot"),f=o.get("imgFlip"));var g=(0,r.default)(t.rot)?t.rot:0;e&&(d=(0,c.getCropOptions)((0,s.default)(e,"width"),(0,s.default)(e,"height"),u,l,p));var h=d,m=h.cropLUX,v=h.cropLUY,y=h.cropRLX,M=h.cropRLY;return{x:a*t.px,y:i*t.py,dep:t.dep,px:t.px,py:t.py,pw:t.pw,ph:t.ph,cropLUX:m,cropLUY:v,cropRLX:y,cropRLY:M,rot:g,imgRot:p,imgFlip:f,width:a*t.pw,height:i*t.ph}},w=t.recomputedElementOptions=function(e,t,n,o){var a=y(t,e);return T(a,n,o,t)},E=t.recomputedTextElementOptions=function(e,t){var n=t.get("width"),o=t.get("height");return{type:p.elementTypes.text,elType:"text",x:n*e.px,y:o*e.py,dep:e.dep,rot:e.rot,px:e.px,py:e.py,pw:e.pw,ph:e.ph,width:n*e.pw,height:o*e.ph,fontColor:(0,g.numberToHex)(e.color),fontFamily:decodeURI(e.fontFamily),fontSize:e.fontSize,fontWeight:e.fontWeight,textAlign:e.textAlign,textVAlign:e.textVAlign}};t.updateElementsByTemplate=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t.sort(function(e,t){
return t.get("encImgId")>e.get("encImgId")}),i=r.filter(function(e){return e.get("type")===p.elementTypes.text}),s=r.filter(function(e){return e.get("type")===p.elementTypes.photo}),u=r.filter(function(e){return e.get("type")===p.elementTypes.calendar}),c=0,g=0,h=(o.bgColor,o.elements),y=e.get("type")===p.pageTypes.front,T=I((0,d.fromJS)(h)),b=y&&a&&T>v,S=h.filter(function(e){return e.type===p.elementTypes.text}),D=(0,d.List)([]);return h.forEach(function(t,o){switch(t.type){case p.elementTypes.photo:if(++c<=s.length){var a=s[c-1],r=t;if(b){var u=M(t.x,t.px,t.width,t.pw);r=(0,l.default)({},t,u)}var h=a.merge(w(n,a,r,e));D=D.push(h)}else{var v=t;if(b){var y=M(t.x,t.px,t.width,t.pw);v=(0,l.default)({},t,y)}var I=new m.default(w(n,(0,d.Map)({}),v,e));D=D.push((0,d.Map)((0,l.default)(I,{id:(0,f.guid)()})))}break;case p.elementTypes.text:if(++g<=i.length){var T=i[g-1],S=t;if(b){var A=M(t.x,t.px,t.width,t.pw);S=(0,l.default)({},t,A)}var N=T.merge(E(S,e));D=D.push(N)}else{var _=t;if(b){var C=M(t.x,t.px,t.width,t.pw);_=(0,l.default)({},t,C)}var P=E(_,e);D=D.push((0,d.Map)((0,l.default)(P,{id:(0,f.guid)()})))}}}),!S.length&&i.length&&i.forEach(function(e){D=D.push((0,d.Map)((0,l.default)(e,{id:(0,f.guid)()})))}),u.forEach(function(e){D=D.push((0,d.Map)((0,l.default)(e,{id:(0,f.guid)()})))}),(0,d.fromJS)(D.toJS())},t.createNewElementsByTemplate=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=[],i=(e.get("width")*o,e.get("height")*o,n.bgColor,n.elements),s=e.get("type")===p.pageTypes.front,u=I((0,d.fromJS)(i)),c=s&&a&&u>v;i=i.map(function(e){if(c){var t=M(e.x,e.px,e.width,e.pw);return(0,l.default)({},e,t)}return e});var g=i.sort(function(e,t){return e.width/e.height>t.width/t.height}),h=t.sort(function(e,t){return e.get("width")/e.get("height")>t.get("width")/t.get("height")}),y=i.find(function(e){return e.type===p.elementTypes.text});if(y){var w=E(y,e);r.push((0,d.Map)((0,l.default)({},w,{id:(0,f.guid)(),type:p.elementTypes.text})))}return g.forEach(function(t,n){if(h.size>n&&t.type===p.elementTypes.photo){var o=h.get(n).toJS(),a=new m.default(T(o,t,e));r.push((0,d.Map)((0,l.default)({},a,{id:(0,f.guid)(),type:p.elementTypes.photo,encImgId:o.encImgId,imageid:o.imageid})))}else log("照片数小于模板的元素总数.")}),r},t.filterFonts=function(e,t){return e.forEach(function(e){var n=t.find(function(t){return t.name===e.fontFamily&&!!t.deprecated});n&&(e.fontFamily=p.DEFAULT_FONT_FAMILY_ID)}),e}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setSpineMaxDep=t.getIntersection=t.findCameoElementData=t.findElementData=t.getBackgroundElementOptions=t.getRenderElementOptions=t.sortElementsByZIndex=void 0;var a=n(529),r=o(a),i=n(52),s=n(495),u=n(9),l=(t.sortElementsByZIndex=function(e){var t=l(e);return t.sort(function(e,t){var n=e.get("dep"),o=t.get("dep");return n>o?1:n<o?-1:0})},t.getRenderElementOptions=function(e){var t=e.get("computed"),n={x:t?Math.round(t.get("width")/2):0,y:t?Math.round(t.get("height")/2):0},o=t?t.get("imgUrl"):"",a=t?t.get("left")+n.x:0,r=t?t.get("top")+n.y:0,i=t?Math.floor(t.get("width")):0,s=t?Math.floor(t.get("height")):0,u=e?e.get("dep"):0,l=e.get("rot"),d=e.get("id");return{imgUrl:o,offset:n,x:a,y:r,width:i,height:s,zIndex:u,rot:l,id:d}},t.getBackgroundElementOptions=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.defaultTextColor,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:14,a=e.props.data,r=a.ratio,s=a.page,l=s?s.get("width")*r.workspace:0,d=s?s.get("height")*r.workspace:0,c=20;return{x:0,y:d/2-c,fill:n,fontFamily:"Gotham SSm A",width:l,align:"center",id:u.shapeType.backgroundElement,padding:c,text:t,fontSize:o,name:i.backgroundTextElementName}},t.findElementData=function(e,t){var n=e.state.elementArray;return n?n.find(function(e){return e.get("id")===t}):null},t.findCameoElementData=function(e){var t=e.state.elementArray;return t?t.find(function(e){return e.get("type")===u.elementTypes.cameo}):null},t.getIntersection=function(e,t){var n=t.sort(function(e,t){return t.get("dep")-e.get("dep")});return n.find(function(t){var n=t.get("computed");if(!n)return!1;var o=t.get("rot")||0;return(0,s.inPointInBox)(e,{x:n.get("left"),y:n.get("top"),width:n.get("width"),height:n.get("height"),degree:o})})},t.setSpineMaxDep=function(e){var t=[],n=null,o=null;if(e.forEach(function(e,n){t[n]=e.get("dep"),e.get("isSpineText")&&(o=e)}),o){var a=(0,r.default)(t),i=e.findIndex(function(e){return e.get("isSpineText")});return n=e.setIn([String(i),"dep"],a+1)}return e})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterCoverTemplates=t.formatTemplateInstance=t.convertResultToJson=void 0;var a=n(24),r=o(a),i=n(46),s=o(i),u=n(12),l=o(u),d=n(11),c=o(d),p=n(39),f=o(p),g=n(20),h=n(33),m=n(9),v=function(e){var t=.001,n=e.find(function(e){var n=e.width,o=e.height,a=e.pw,r=e.ph;return 0===n||0===o||a<t||r<t});return!n};t.convertResultToJson=function(e){var t=(0,l.default)(e,"data"),n=[];return t&&t.length&&t.forEach(function(e){var t=(0,c.default)({},{id:e.id,template:f.default.xml2js(e.template)});n.push(t)}),n},t.formatTemplateInstance=function(e,t,n){var o=[];return t&&t.length&&t.forEach(function(t){var a=t+"_"+n,i=e.find(function(e){return e.id===t});if(i){var u=(0,g.convertObjIn)((0,l.default)(i,"template.templateView.spread.elements.element")),d=(0,s.default)(u)?u:[u];v(d)&&o.push((0,r.default)({},a,{id:i.id,bgColor:(0,h.numberToHex)((0,l.default)(i,"template.templateView.spread.bgColor")),type:(0,l.default)(i,"template.templateView.spread.type"),elements:d}))}}),o},t.filterCoverTemplates=function(e,t){var n=!0,o=!0,a=[];return n?a=e.filter(function(e){return"hc"===e.sheetType.toLowerCase()&&"full"===e.pageType.toLowerCase()&&(0!==e.customerId||e.imageNum>0&&e.imageNum<=m.limitImageNumberInHalfPageTemplate)}):o&&(a=e.filter(function(e){return"cc"===e.sheetType.toLowerCase()&&"full"===e.pageType.toLowerCase()&&(0!==e.customerId||e.imageNum>0&&e.imageNum<=m.limitImageNumberInHalfPageTemplate)})),a}},function(e,t,n){e.exports=n(1)(419)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(549),v=o(m),y=n(548),M=o(y),I=n(103),T=(o(I),n(13)),w=o(T);n(214);var E=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.hasText,o=e.zIndex,a=(0,w.default)("x-loading",{show:t}),r={zIndex:o||2e9},i={};o&&(i.zIndex=o);var s=n?M.default:v.default;return h.default.createElement("div",{className:a,"data-html2canvas-ignore":"true",style:i},h.default.createElement("div",{className:"load-mask",style:i}),h.default.createElement("div",{className:"load-content",style:r},h.default.createElement("img",{src:s})))}}]),t}(g.Component);E.propTypes={isShown:g.PropTypes.bool.isRequired},E.defaultProps={isShown:!0},t.default=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),r=o(a),i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e);var n=t.type,o=void 0===n?"PhotoElement":n,a=t.elType,i=void 0===a?"image":a,s=t.x,u=void 0===s?0:s,l=t.y,d=void 0===l?0:l,c=t.width,p=void 0===c?0:c,f=t.height,g=void 0===f?0:f,h=t.px,m=void 0===h?0:h,v=t.py,y=void 0===v?0:v,M=t.pw,I=void 0===M?1:M,T=t.ph,w=void 0===T?1:T,E=t.dep,b=void 0===E?0:E,S=t.imageid,D=void 0===S?"":S,A=t.encImgId,N=void 0===A?"":A,_=t.rot,C=void 0===_?0:_,P=t.imgRot,x=void 0===P?0:P,O=t.imgFlip,L=void 0!==O&&O,j=t.cropLUX,k=void 0===j?0:j,z=t.cropLUY,R=void 0===z?0:z,U=t.cropRLX,B=void 0===U?0:U,Y=t.cropRLY,W=void 0===Y?0:Y,F=t.border,H=void 0===F?{color:"#000000",size:0,opacity:100}:F,G=t.lastModified,Q=void 0===G?Date.now():G;this.type=o,this.elType=i,this.x=u,this.y=d,this.width=p,this.height=g,this.px=m,this.py=y,this.pw=I,this.ph=w,this.dep=b,this.imageid=D,this.encImgId=N,this.rot=C,this.imgRot=x,this.imgFlip=L,this.cropLUX=k,this.cropLUY=R,this.cropRLX=B,this.cropRLY=W,this.border=H,this.lastModified=Q};t.default=i},function(e,t,n){e.exports=n(1)(25)},function(e,t,n){e.exports=n(1)(423)},function(e,t,n){e.exports={default:n(188),__esModule:!0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.toDecode=function(e){var t=e;try{t=decodeURIComponent(e)}catch(e){}return t},o=(t.isEncode=function(e){return"string"==typeof e&&(n(e)!==e||o(e)===e)},t.toEncode=function(e){return e?encodeURIComponent(n(e)):""})},function(e,t,n){"use strict";function o(e,t){this.node=e,this.parent=t,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function a(e){var t=e.options[e.selectedIndex||0];return t?t.text||"":""}function r(e){if(e&&"matrix"===e[1])return e[2].split(",").map(function(e){return parseFloat(e.trim())});if(e&&"matrix3d"===e[1]){var t=e[2].split(",").map(function(e){return parseFloat(e.trim())});return[t[0],t[1],t[4],t[5],t[12],t[13]]}}function i(e){return e.toString().indexOf("%")!==-1}function s(e){return e.replace("px","")}function u(e){return parseFloat(e)}var l=n(77),d=n(34),c=d.getBounds,p=d.parseBackgrounds,f=d.offsetBounds;o.prototype.cloneTo=function(e){e.visible=this.visible,e.borders=this.borders,e.bounds=this.bounds,e.clip=this.clip,e.backgroundClip=this.backgroundClip,e.computedStyles=this.computedStyles,e.styles=this.styles,e.backgroundImages=this.backgroundImages,e.opacity=this.opacity},o.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},o.prototype.assignStack=function(e){this.stack=e,e.children.push(this)},o.prototype.isElementVisible=function(e){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:!("none"===this.css("display")||"hidden"===this.css("visibility")||this.node.hasAttribute("data-html2canvas-ignore")||this.node.hasAttribute("data-html2canvas-manual-ignore")&&e&&e.isManualIgnore||"INPUT"===this.node.nodeName&&"hidden"===this.node.getAttribute("type"))},o.prototype.css=function(e){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[e]||(this.styles[e]=this.computedStyles[e])},o.prototype.prefixedCss=function(e){var t=["webkit","moz","ms","o"],n=this.css(e);return void 0===n&&t.some(function(t){return n=this.css(t+e.substr(0,1).toUpperCase()+e.substr(1)),void 0!==n},this),void 0===n?null:n},o.prototype.computedStyle=function(e){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,e)},o.prototype.cssInt=function(e){var t=parseInt(this.css(e),10);return isNaN(t)?0:t},o.prototype.color=function(e){return this.colors[e]||(this.colors[e]=new l(this.css(e)))},o.prototype.cssFloat=function(e){var t=parseFloat(this.css(e));return isNaN(t)?0:t},o.prototype.fontWeight=function(){var e=this.css("fontWeight");switch(parseInt(e,10)){case 401:e="bold";break;case 400:e="normal"}return e},o.prototype.parseClip=function(){var e=this.css("clip").match(this.CLIP);return e?{top:parseInt(e[1],10),right:parseInt(e[2],10),bottom:parseInt(e[3],10),left:parseInt(e[4],10)}:null},o.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=p(this.css("backgroundImage")))},o.prototype.cssList=function(e,t){var n=(this.css(e)||"").split(",");return n=n[t||0]||n[0]||"auto",n=n.trim().split(" "),1===n.length&&(n=[n[0],i(n[0])?"auto":n[0]]),n},o.prototype.parseBackgroundSize=function(e,t,n){var o,a,r=this.cssList("backgroundSize",n);if(i(r[0]))o=e.width*parseFloat(r[0])/100;else{if(/contain|cover/.test(r[0])){var s=e.width/e.height,u=t.width/t.height;return s<u^"contain"===r[0]?{width:e.height*u,height:e.height}:{width:e.width,height:e.width/u}}o=parseInt(r[0],10)}return a="auto"===r[0]&&"auto"===r[1]?t.height:"auto"===r[1]?o/t.width*t.height:i(r[1])?e.height*parseFloat(r[1])/100:parseInt(r[1],10),"auto"===r[0]&&(o=a/t.height*t.width),{width:o,height:a}},o.prototype.parseBackgroundPosition=function(e,t,n,o){var a,r,s=this.cssList("backgroundPosition",n);return a=i(s[0])?(e.width-(o||t).width)*(parseFloat(s[0])/100):parseInt(s[0],10),r="auto"===s[1]?a/t.width*t.height:i(s[1])?(e.height-(o||t).height)*parseFloat(s[1])/100:parseInt(s[1],10),"auto"===s[0]&&(a=r/t.height*t.width),{left:a,top:r}},o.prototype.parseBackgroundRepeat=function(e){return this.cssList("backgroundRepeat",e)[0]},o.prototype.parseTextShadows=function(){var e=this.css("textShadow"),t=[];if(e&&"none"!==e)for(var n=e.match(this.TEXT_SHADOW_PROPERTY),o=0;n&&o<n.length;o++){var a=n[o].match(this.TEXT_SHADOW_VALUES);t.push({color:new l(a[0]),offsetX:a[1]?parseFloat(a[1].replace("px","")):0,offsetY:a[2]?parseFloat(a[2].replace("px","")):0,blur:a[3]?a[3].replace("px",""):0})}return t},o.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var e=this.parseBounds(),t=this.prefixedCss("transformOrigin").split(" ").map(s).map(u);t[0]+=e.left,t[1]+=e.top,this.transformData={origin:t,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},o.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var e=this.prefixedCss("transform"),t=e?r(e.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=t?t:[1,0,0,1,0,0]}return this.transformMatrix},o.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?f(this.node):c(this.node))},o.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},o.prototype.getValue=function(){var e=this.node.value||"";return"SELECT"===this.node.tagName?e=a(this.node):"password"===this.node.type&&(e=Array(e.length+1).join("•")),0===e.length?this.node.placeholder||"":e},o.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,o.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,o.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,o.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=l.default.Map();return e.forEach(function(e,o){if(o===t&&e&&(n=n.set(String(e),1)),e&&e.size){var r=a(e,t);r.forEach(function(e,t){var o=String(t);n=(0,s.default)(n.get(t))?n.set(o,r.get(t)):n.set(o,n.get(o)+r.get(o))})}}),n}function r(e){return a(e,"encImgId")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(172),s=o(i);t.getImageUsedMap=r;var u=n(2),l=o(u)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultImageFrame={fill:"#000",stroke:"#dfdfdf",strokeWidth:4},t.defaultTextFrame={stroke:"#7b7b7b",dash:[4,4],strokeWidth:1},t.defaultCameoRectFrame={fill:"#fff",offset:{x:0,y:0}},t.backgroundTextElementName="backgroundTextElementName",t.defaultTextColor="#b7b7b7"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return[t,e]}function r(e){var t=e.get("width"),n=e.get("height"),o=e.get("image"),r=e.get("imgRot");if(o&&(t=o.get("width"),n=o.get("height"),r%90===0&&r%180)){var i=a(t,n),s=(0,l.default)(i,2);t=s[0],n=s[1]}return t/n}function i(e,t){var n=-1,o=1/0;return e.forEach(function(e,a){var r=Math.abs(e.get("aspectRatio")-t);r<o&&(o=r,n=a)}),n}function s(e,t,n){if(!c.default.Map.isMap(e)||!c.default.List.isList(t)||!c.default.List.isList(n))return null;var o=e.get("elements").filter(function(e){return e.get("encImgId")}).map(function(e){var t=n.find(function(t){return t.get("encImgId")===e.get("encImgId")}),o=e.set("image",t),a=r(o);return e.set("aspectRatio",a)}),a=t.filter(function(e){return e.get("type")===h.elementTypes.photo}).map(function(e){var t=r(e);return e.set("aspectRatio",t)}),s=e.get("width"),u=e.get("height"),l=c.default.List();return o.forEach(function(t){var o=t.get("aspectRatio"),r=i(a,o),d=a.get(r);a=a.delete(r);var p=c.default.Map({id:(0,g.guid)(),type:d.get("type"),x:d.get("px")*s,y:d.get("py")*u,width:d.get("pw")*s,height:d.get("ph")*u,dep:d.get("dep"),rot:d.get("rot"),encImgId:t.get("encImgId"),imgRot:t.get("imgRot"),imgFlip:t.get("imgFlip"),border:t.get("border"),style:t.get("style")});l=l.push((0,f.default)(p,e,n))}),l=l.concat(a.map(function(t){var o=c.default.Map({id:(0,g.guid)(),type:t.get("type"),x:t.get("px")*s,y:t.get("py")*u,width:t.get("pw")*s,height:t.get("ph")*u,dep:t.get("dep"),rot:t.get("rot"),encImgId:""});return(0,f.default)(o,e,n)})),l.concat(t.filter(function(e){return e.get("type")!==h.elementTypes.photo}))}Object.defineProperty(t,"__esModule",{value:!0});var u=n(38),l=o(u);t.mergeTemplateElements=s;var d=n(2),c=o(d),p=n(88),f=o(p),g=n(17),h=n(9)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(!e)return"";var o=[];return n&&(0,l.default)(n,function(e,t){o.push(t+"="+e)}),t?e+"/"+t+"?"+o.join("&"):e+"?"+o.join("&")}function r(){var e={initGuid:-1,webClientId:1,product:"",size:"",paper:"",paperThickness:"",title:"",numberOfMonth:"",mainProjectUid:-1},t=c.default.parse(window.location.search.substr(1));return(0,s.default)({},e,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),s=o(i),u=n(91),l=o(u);t.combine=a,t.getQueryStingObj=r;var d=n(36),c=o(d)},function(e,t,n){var o=n(503),a=n(508),r=n(63),i=n(90),s=r(function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,o(t,1),[])});e.exports=s},function(e,t,n){e.exports=n(1)(60)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onDragStarted,o=e.onDragEntered,a=e.onDragLeaved,r=e.onDragOvered,i=e.onDragEnded,s=e.isDisabled,u=void 0!==s&&s;return h.default.createElement("div",{onDragStart:n,onDragEnter:o,onDragLeave:a,onDragOver:r,onDragEnd:i,draggable:!u},t)}}]),t}(g.Component);t.default=m,m.propTypes={onDragStarted:g.PropTypes.func.isRequired,onDragEntered:g.PropTypes.func,onDragLeaved:g.PropTypes.func,onDragOvered:g.PropTypes.func,onDragEnded:g.PropTypes.func,isDisabled:g.PropTypes.bool}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getImgRatioFromProjectSize=t.convertToTwoDimenArr=t.computedItemsCountInRowByFixedWidth=t.computedItemCountdAndWidthInRow=t.setElementToHorizontalCenter=t.setElementStyles=t.getScreenSize=t.getSize=t.getLimitSize=void 0;var a=n(91),r=o(a),i=(t.getLimitSize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,o=e.height,a=n,r=o,i=Math.min(a,r);if(i<t){var s=a/r;a<r?(a=t,r=t/s):(r=t,a=t*s)}return{width:a,height:r,wR:n/a,hR:o/r}},t.getSize=function(e){var t=e||document.documentElement||document.body;return{width:t.clientWidth,height:t.clientHeight}}),s=(t.getScreenSize=function(){var e=window.screen;return{width:e.width,height:e.height}},t.setElementStyles=function(e,t){e&&t&&(0,r.default)(t,function(t,n){e.style[n]=t})});t.setElementToHorizontalCenter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e){var o=i(e),a=t||document.documentElement||document.body,r=i(a),u=n+(r.width-n-o.width)/2;s(e,{position:"absolute",left:u+"px"})}},t.computedItemCountdAndWidthInRow=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=30,i=e-(t+n-r),s=0,u=0;return i&&o&&(i<=o?(s=o,u=1):(u=Math.floor((a+i)/(o+a)),s=(i-(u-1)*a)/u)),{width:s,count:u}},t.computedItemsCountInRowByFixedWidth=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:25,r=0,i=0;if(e&&t){var s=e-a;s<=n?(r=1,i=0):(r=Math.floor((s+n)/(t+n)),i=Math.floor((s-(t*r+n*(r-1)))/2),i<o&&(r-=1,i=Math.floor((s-(t*r+n*(r-1)))/2)),i-=2)}return{count:r,margin:i}},t.convertToTwoDimenArr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return[];var n=[],o=[];return e.forEach(function(e){o.length===t&&(n.push(o),o=[]),o.push(e)}),o.length&&(n.push(o),o=[]),n},t.getImgRatioFromProjectSize=function(e){var t=[];return t=e.split("X"),t[0]/(2*t[1])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.webClientId=1,t.supportedImagesTypes=["image/jpeg","image/jpg","image/png","image/x-png","image/png"],t.leastUploadImagesCount=24,t.uploadFailTypes={timeExpired:"timeExpired",overSize:"overSize",emptyFile:"emptyFile",colorSpace:"colorSpace",invalidFileType:"invalidFileType"},t.invalidElementKeys=["dateSelected","isDisabled","isSelected","computed","elements"],t.paintedTextTypes={front:"Front",back:"Back",spine:"Spine",none:"None"},t.uploadStatus={PENDING:"PENDING",DONE:"DONE",PROGRESS:"PROGRESS",FAIL:"FAIL"}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlParam=t.getUrl=t.combine=void 0;var a=n(12),r=o(a),i=n(91),s=o(i);t.combine=function(e,t,n){if(!e||!t)return"";var o=e;o.endsWith("/")&&(o=o.slice(0,o.length-1));var a=[];return n&&(0,s.default)(n,function(e,t){a.push(t+"="+e)}),o+"/"+t+"?"+a.join("&")},t.getUrl=function(e,t){return(0,r.default)(e,t)||""},t.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""}},function(e,t){"use strict";function n(e,t){var o=null;return e.children&&!o&&e.children.forEach(function(e){e.attrs.id===t?o=e:o||(o=n(e,t))}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.findKonvaObjectById=n},function(e,t){"use strict";function n(e){var t=e.imageDetail,n=e.width,o=e.height,a=e.cropRLX,r=e.cropLUX,i=e.cropRLY,s=e.cropLUY,u=t.get("width")*Math.abs(a-r),l=n/u,d=t.get("height")*Math.abs(i-s),c=o/d;return Math.round(100*Math.max(l,c))}function o(e,t){var n=e.x,o=e.y,a=e.width,r=e.height,i=e.scale,s={x:0,y:0},u=i.x-1,l=i.y-1,d=a*u,c=r*l,p=a+d,f=r+c,g=n-d/2,h=o-c/2;if(t){var m=[{x:n,y:o},{x:n+a,y:o},{x:n+a,y:o+r},{x:n,y:o+r}],v=[{x:g,y:h},{x:g+p,y:h},{x:g+p,y:h+f},{x:g,y:h+f}];s.x=m[t].x-v[t].x,s.y=m[t].y-v[t].y}return{x:g+s.x,y:h+s.y,width:p,height:f}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScale=n,t.getScaledRect=o},function(e,t,n){function o(e,t){return i(r(e,t,a),e+"")}var a=n(94),r=n(520),i=n(523);e.exports=o},function(e,t,n){function o(e){return"number"==typeof e||r(e)&&a(e)==i}var a=n(102),r=n(70),i="[object Number]";e.exports=o},function(e,t,n){e.exports=n(1)(1008)},function(e,t,n){e.exports=n(1)(347)},function(e,t,n){e.exports=n(1)(42)},function(e,t,n){e.exports=n(1)(52)},function(e,t,n){e.exports=n(1)(68)},function(e,t,n){e.exports=n(1)(85)},function(e,t,n){e.exports=n(1)(89)},function(e,t,n){e.exports={default:n(190),__esModule:!0}},function(e,t,n){"use strict";function o(e){var t,n;this.promise=new e(function(e,o){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=o}),this.resolve=a(t),this.reject=a(n)}var a=n(98);e.exports.f=function(e){return new o(e)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(3),v=o(m),y=n(35),M=n(31),I=o(M),T=n(284),w=o(T),E=n(13),b=o(E);n(208);var S=function(e){function t(e){return(0,l.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.resetOpenState;e.isAutoOpen&&(this.onClickInput(),t())}},{key:"onClickInput",value:function(){var e=this.props.uploadFileClicked,t=(0,y.findDOMNode)(this.refs.fileInput);e&&e(),t.click()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,o=e.multiple,a=e.accept,r=void 0===a?"image/jpeg,image/x-png,image/png":a,i=e.inputId,s=e.id,u=(0,b.default)("upload-button",t);return v.default.createElement(I.default,{className:u,onClicked:this.onClickInput.bind(this),id:s},v.default.createElement(w.default,{type:"file",ref:"fileInput",id:i,accept:r,onChange:this.handleSelectFile.bind(this),multiple:o}),v.default.createElement("span",null,n))}},{key:"handleSelectFile",value:function(e){var t=this.props.onSelectFile;if(e.target.value){var n=this.props,o=n.boundUploadedImagesActions,a=n.toggleModal,i=n.useNewUpload,s=void 0!==i&&i;!s&&a("upload",!0);var u=[].concat((0,r.default)(e.target.files));t&&t(u),o.addImages(u)}var l=(0,y.findDOMNode)(this.refs.fileInput);l.value=""}}]),t}(m.Component);S.propTypes={className:m.PropTypes.string,children:m.PropTypes.string,multiple:m.PropTypes.string,accept:m.PropTypes.string,id:m.PropTypes.string},t.default=S},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,o=(t.isFirefox="undefined"!=typeof InstallTrigger,t.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,t.isIE=!!document.documentMode),a=(t.isEdge=!o&&!!window.StyleMedia,t.isChrome=!!window.chrome&&!!window.chrome.webstore);t.isBlink=(a||n)&&!!window.CSS,t.isMac="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getDefaultCrop=function(e,t,n,o){if(e&&t&&n&&o){var a=e/t,r=n/o,i=void 0,s=void 0,u=void 0,l=void 0;if(a>r){var d=t,c=d*r,p=(e-c)/2;i=p/e,s=0,u=c/e,l=1}else{var f=e,g=f/r,h=(t-g)/2;i=0,s=h/t,u=1,l=g/t}return{px:i,py:s,pw:u,ph:l}}return{px:0,py:0,pw:1,ph:1}};t.getRotatedAngle=function(e,t){var n=e,o=t;return void 0!==n&&null!=n?(o=parseFloat(o)||90,n+=o,n=n>180?n-=360:n,n=n<-90?n+=360:n):0},t.getDefaultCropLRXY=function(e,t,o,a){var r=n(e,t,o,a),i=r.px,s=r.py,u=r.pw,l=r.ph;return{cropLUX:i,cropLUY:s,cropRLX:i+u,cropRLY:s+l}}},function(e,t){"use strict";function n(e){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(e)||this.namedColor(e)||this.rgb(e)||this.rgba(e)||this.hex6(e)||this.hex3(e)}n.prototype.darken=function(e){var t=1-e;return new n([Math.round(this.r*t),Math.round(this.g*t),Math.round(this.b*t),this.a])},n.prototype.isTransparent=function(){return 0===this.a},n.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},n.prototype.fromArray=function(e){return Array.isArray(e)&&(this.r=Math.min(e[0],255),this.g=Math.min(e[1],255),this.b=Math.min(e[2],255),e.length>3&&(this.a=e[3])),Array.isArray(e)};var o=/^#([a-f0-9]{3})$/i;n.prototype.hex3=function(e){var t=null;return null!==(t=e.match(o))&&(this.r=parseInt(t[1][0]+t[1][0],16),this.g=parseInt(t[1][1]+t[1][1],16),this.b=parseInt(t[1][2]+t[1][2],16)),null!==t};var a=/^#([a-f0-9]{6})$/i;n.prototype.hex6=function(e){var t=null;return null!==(t=e.match(a))&&(this.r=parseInt(t[1].substring(0,2),16),this.g=parseInt(t[1].substring(2,4),16),this.b=parseInt(t[1].substring(4,6),16)),null!==t};var r=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;n.prototype.rgb=function(e){var t=null;return null!==(t=e.match(r))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3])),null!==t};var i=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;n.prototype.rgba=function(e){var t=null;return null!==(t=e.match(i))&&(this.r=Number(t[1]),this.g=Number(t[2]),this.b=Number(t[3]),this.a=Number(t[4])),null!==t},n.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},n.prototype.namedColor=function(e){e=e.toLowerCase();var t=s[e];if(t)this.r=t[0],this.g=t[1],this.b=t[2];else if("transparent"===e)return this.r=this.g=this.b=this.a=0,!0;return!!t},n.prototype.isColor=!0;var s={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],
wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o="withCredentials"in new XMLHttpRequest;if(!t)return p.default.reject("No proxy configured");var a=s(o),r=u(t,e,a);return o?f(r):i(n,r,a).then(function(e){return v(e.content)})}function r(e,t,n){var o="crossOrigin"in new Image,a=s(o),r=u(t,e,a);return o?p.default.resolve(r):i(n,r,a).then(function(e){return"data:"+e.type+";base64,"+e.content})}function i(e,t,n){return new p.default(function(o,a){var r=e.createElement("script"),i=function(){delete window.html2canvas.proxy[n],e.body.removeChild(r)};window.html2canvas.proxy[n]=function(e){i(),o(e)},r.src=t,r.onerror=function(e){i(),a(e)},e.body.appendChild(r)})}function s(e){return e?"":"html2canvas_"+Date.now()+"_"+ ++y+"_"+Math.round(1e5*Math.random())}function u(e,t,n){return e+"?url="+encodeURIComponent(t)+(n.length?"&callback=html2canvas.proxy."+n:"")}function l(e){return function(t){var n,o=new DOMParser;try{n=o.parseFromString(t,"text/html")}catch(e){h("DOMParser not supported, falling back to createHTMLDocument"),n=document.implementation.createHTMLDocument("");try{n.open(),n.write(t),n.close()}catch(e){h("createHTMLDocument write not supported, falling back to document.body.innerHTML"),n.body.innerHTML=t}}var a=n.querySelector("base");if(!a||!a.href.host){var r=n.createElement("base");r.href=e,n.head.insertBefore(r,n.head.firstChild)}return n}}function d(e,t,n,o,r,i){return new a(e,t,window.document).then(l(e)).then(function(e){return m(e,n,o,r,i,0,0)})}var c=n(14),p=o(c),f=n(118),g=n(34),h=n(37),m=n(113),v=g.decode64,y=0;t.Proxy=a,t.ProxyURL=r,t.loadUrlDocument=d},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o=4,a=120,r=P(e.get("fontSize"),(0,N.getPxByPt)(o)/n,(0,N.getPxByPt)(a)/n);return e.merge({x:e.get("px")*t,y:e.get("py")*n,width:e.get("pw")*t,height:e.get("ph")*n,fontSize:r})}function i(e,t,n,o){var a=e.get("pw")*n,r=e.get("ph")*o,i=e.get("px")*n,s=e.get("py")*o,u=t.find(function(t){return t.get("encImgId")===e.get("encImgId")}),l={width:a,height:r,x:i,y:s};if(u){var d=(0,b.getCropOptions)(u.get("width"),u.get("height"),a,r,e.get("imgRot")),c=d.cropLUX,p=d.cropLUY,f=d.cropRLX,g=d.cropRLY;l=(0,m.default)({},l,{cropLUX:c,cropLUY:p,cropRLX:f,cropRLY:g})}return e.merge(l)}function s(e,t,n){var o=I.default.List(),a=e.get("elements"),s=e.get("width"),u=e.get("height");return a.forEach(function(e){var a=null;switch(e.get("type")){case E.elementTypes.text:a=r(e,s,u);break;case E.elementTypes.photo:a=i(e,t,s,u);break;case E.elementTypes.calendar:a=e.merge({x:n.get("x"),y:n.get("y"),width:n.get("width"),height:n.get("height"),px:n.get("x")/s,py:n.get("y")/u,pw:n.get("width")/s,ph:n.get("height")/u});break;default:a=e.merge({x:e.get("px")*s,y:e.get("py")*u,width:e.get("pw")*s,height:e.get("ph")*u})}o=o.push(a)}),o}function u(e,t,n,o){var a=t.first(),r=n.get("calendarArea"),i=e.map(function(e){return e.merge({width:a.get("width"),height:a.get("height"),bleed:a.get("bleed")})}).slice(0);return i.forEach(function(e,t){i=i.setIn([String(t),"elements"],s(e,o,r))}),i}function l(e,t,n,o){var a=e,r=t.get("calendarArea"),i=e.get("containers").first(),u=n.get("containers").map(function(e){return e.merge({width:i.get("width"),height:i.get("height"),bleed:i.get("bleed")})});return u.forEach(function(e,t){u=u.setIn([String(t),"elements"],s(e,o,r))}),a.set("containers",u)}function d(e){if(!(0,y.default)(e)){var t=e.baseSize,n=(0,m.default)({},e);return n.baseSize={height:Math.round((0,N.getPxByInch)(t.heightInInch)),width:Math.round((0,N.getPxByInch)(t.widthInInch))},n}return null}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.configurableOptionArray,a=e.parameterArray,r=e.variableArray,i=e.property,s=e.calendarSetting,u=e.allOptionMap,l=e.setting,c=!n&&i.get("projectId")===-1,p=l.toJS(),f=null;f=c?A.default.getDefaultProjectSetting(p,o):A.default.getNewProjectSetting(p,t,o);var g=A.default.getParameters(f,a),h=d(g),m=f.product,v=(0,_.generatePageArray)(m,h,f.numberOfMonth,s),y=A.default.getVariables(f,r),M=(0,_.generateCover)(m,h,s),I=A.default.getAvailableOptionMap(f,o,u,[]);return{pageArray:v,variableMap:y,cover:M,setting:f,parameterMap:h,availableOptionMap:I}}function p(e){return"dateStyle"in e?{type:w.CHANGE_PROJECT_SETTING,setting:e}:function(t,n){if(!(0,y.default)(e)){var o=(0,S.getDataFromState)(n()),a=I.default.fromJS(c(o,e,!0));if(t({type:w.CHANGE_PROJECT_SETTING,setting:a.get("setting")}),t({type:w.SET_VARIABLE_MAP,variableMap:a.get("variableMap")}),t({type:w.SET_PARAMETER_MAP,parameterMap:a.get("parameterMap")}),t({type:w.SET_IMAGE_USED_MAP,imageUsedMap:(0,C.getImageUsedMap)((0,S.getDataFromState)(n()).elementArray)}),e.size||e.orientation){var r=o.cover,i=o.pageArray,s=o.imageArray,d=u(i,a.get("pageArray"),a.get("parameterMap"),s),p=l(a.get("cover"),a.get("parameterMap"),r,s);t({type:w.SET_COVER,cover:p}),t({type:w.SET_PAGE_ARRAY,pageArray:d})}return g.default.resolve(a.get("setting"))}return g.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var f=n(14),g=a(f),h=n(11),m=a(h),v=n(179),y=a(v);t.computeNewData=c,t.changeProjectSetting=p;var M=n(2),I=a(M),T=n(10),w=o(T),E=n(9),b=n(21),S=n(26),D=n(120),A=a(D),N=n(17),_=n(87),C=n(51),P=function(e,t,n){return Math.max(Math.min(e,n),t)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(27),v=n(550),y=o(v),M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n.onMouseDown=n.onMouseDown.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"onMouseDown",value:function(){var e=this.props.tryToDownload;e()}},{key:"componentWillMount",value:function(){var e=this,t=new window.Image;t.src=y.default,t.onload=function(){e.setState({imageObj:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,o=t.height,a=(t.x,t.y,o/6>30?o/6:30),r=.8*a,i=a,s=this.state.imageObj,u=12,l={ref:function(t){return e.imageNode=t},onMouseDown:this.onMouseDown,width:n,height:o,x:0,y:0},d=!1;(n<=80||o<=80)&&(d=!0);var c={x:0,y:(o-u)/2+i/2,width:n,fill:"#7B7B7B",fontFamily:"Gotham SSm A",align:"center",text:"Photo load failed. \n Click to retry",fontSize:u},p={image:s,x:(n-r)/2,y:d?(o-i)/2:(o-i)/2-i/2,width:r,height:i},f={width:n,height:o,x:0,y:0,fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};return h.default.createElement(m.Group,l,h.default.createElement(m.Rect,f),h.default.createElement(m.Image,p),d?null:h.default.createElement(m.Text,c))}}]),t}(g.Component);t.default=M},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(551),v=o(m),y=n(27),M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=new window.Image;t.onload=function(){e.state&&e.setState({imageObj:t})},t.src=v.default}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,o=e.x,a=e.y,r=this.state.imageObj,i=46,s=67;t<s&&(s=t,i=t*i/67);var u={image:r,x:(t-s)/2,y:(n-i)/2,width:s,height:i},l={x:o||0,y:a||0,width:t,height:n,fill:"#F6F6F6",opacity:.9};return h.default.createElement(y.Group,null,h.default.createElement(y.Rect,l),h.default.createElement(y.Image,u))}}]),t}(g.Component);t.default=M},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(19),i=a(r),s=n(6),u=a(s),l=n(4),d=a(l),c=n(5),p=a(c),f=n(8),g=a(f),h=n(7),m=a(h),v=n(11),y=a(v),M=n(13),I=a(M),T=n(3),w=a(T),E=n(9),b=n(378),S=a(b),D=n(375),A=o(D);n(236);var N=function(e){function t(e){(0,d.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return n.onMouseUp=function(e){return A.onMouseUp(n,e)},n.onMouseEnter=function(e){return A.onMouseEnter(n,e)},n.onMouseOut=function(e){return A.onMouseOut(n,e)},n.onMouseOver=function(e){return A.onMouseOver(n,e)},n.onMouseLeave=function(e){return A.onMouseLeave(n,e)},n}return(0,m.default)(t,e),(0,p.default)(t,[{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.actions,a=t.children,r=n.className,s=n.style,u=n.handlerStyle,l=n.setCursorDefault,d=(0,I.default)("element",r),c=n.element,p=n.product,f=c.get("id"),g=(o.removeImage,{style:(0,y.default)({},u,{cursor:c.get("encImgId")||c.get("type")===E.elementTypes.text?"pointer":"auto"}),element:c,product:p});l?g.style.cursor="default":null;var h=(0,y.default)({},o,{handleMouseUp:this.onMouseUp,handleMouseEnter:this.onMouseEnter,handleMouseOut:this.onMouseOut,handleMouseLeave:this.onMouseLeave,handleMouseOver:this.onMouseOver}),m={},v=c.get("text");return(c.get("type")===E.elementTypes.text&&!v||c.get("type")===E.elementTypes.photo&&!c.get("encImgId")||c.get("type")===E.elementTypes.paintedText&&!v)&&(m["data-html2canvas-ignore"]=!0),w.default.createElement("div",(0,i.default)({},m,{className:d,style:s,"data-guid":f,ref:function(t){e.element=t},onMouseUp:this.stopEvent}),w.default.createElement("div",{className:"selected-border","data-html2canvas-ignore":"true"}),a,w.default.createElement(S.default,{data:g,actions:h}))}}]),t}(T.Component);t.default=N,N.propTypes={}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mapAppDispatchToProps=void 0;var r=n(22),i=n(334),s=a(i),u=n(335),l=a(u),d=n(339),c=a(d),p=n(342),f=a(p),g=n(341),h=a(g),m=n(345),v=a(m),y=n(338),M=a(y),I=n(349),T=a(I),w=n(333),E=a(w),b=n(337),S=a(b),D=n(330),A=a(D),N=n(340),_=a(N),C=n(347),P=a(C),x=n(346),O=a(x),L=n(332),j=a(L),k=n(329),z=a(k),R=n(344),U=a(R),B=n(331),Y=a(B),W=n(343),F=a(W),H=n(336),G=a(H),Q=n(348),X=a(Q),Z=n(323),J=o(Z),V=n(328),q=a(V);t.mapAppDispatchToProps=function(e){return{boundEnvActions:(0,r.bindActionCreators)(s,e),boundQueryStringActions:(0,r.bindActionCreators)(l,e),boundProjectActions:(0,r.bindActionCreators)(J.default,e),boundTrackerActions:(0,r.bindActionCreators)(c,e),boundNotificationActions:(0,r.bindActionCreators)(f,e),boundSpecActions:(0,r.bindActionCreators)(q,e),boundImagesActions:(0,r.bindActionCreators)(h,e),boundSidebarActions:(0,r.bindActionCreators)(v,e),boundUploadImagesActions:(0,r.bindActionCreators)(T,e),boundContactUsActions:(0,r.bindActionCreators)(E,e),boundRatioActions:(0,r.bindActionCreators)(M,e),boundPaginationActions:(0,r.bindActionCreators)(S,e),boundCapabilitiesActions:(0,r.bindActionCreators)(A,e),boundImageEditModalActions:(0,r.bindActionCreators)(_,e),boundTemplateActions:(0,r.bindActionCreators)(P,e),boundConfirmModalActions:(0,r.bindActionCreators)(j,e),boundStyleActions:(0,r.bindActionCreators)(O,e),boundAlertModalActions:(0,r.bindActionCreators)(z,e),boundPriceActions:(0,r.bindActionCreators)(U,e),boundCloneModalActions:(0,r.bindActionCreators)(Y,e),boundFontActions:(0,r.bindActionCreators)(G,e),boundTextEditModalActions:(0,r.bindActionCreators)(X,e),boundPreviewModalActions:(0,r.bindActionCreators)(F,e)}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=void 0;var a=n(11),r=o(a),i=n(12),s=o(i),u=(n(2),n(564)),l=n(89),d=function(e){return(0,s.default)(e,"system.env")},c=function(e){return(0,s.default)(e,"system.capabilities")},p=function(e){return(0,s.default)(e,"system.modals.confirmModal")},f=function(e){return(0,s.default)(e,"system.global.pagination")},g=function(e){return(0,s.default)(e,"system.global.ratio")},h=function(e){return(0,s.default)(e,"system.template")},m=function(e){return(0,s.default)(e,"system.styles")},v=function(e){return(0,s.default)(e,"project.data")},y=function(e){return(0,s.default)(e,"system.sidebar")},M=function(e){return(0,s.default)(e,"system.modals.upload")},I=function(e){return(0,s.default)(e,"system.images.uploading")},T=function(e){return(0,s.default)(e,"system.fontList")},w=function(e){return(0,s.default)(e,"system.images.autoAddPhotoToCanvas")},E=function(e){return(0,s.default)(e,"system.modals.contactUsModal")},b=function(e){return(0,s.default)(e,"system.modals.imageEditModal")},S=function(e){return(0,s.default)(e,"system.modals.alertModal")},D=function(e){return(0,s.default)(e,"system.modals.cloneModal")},A=function(e){return(0,s.default)(e,"system.modals.previewModal")},N=function(e){return(0,s.default)(e,"system.modals.textEditModal")},_=function(e){return(0,s.default)(e,"system.price.price")},C=function(e){return(0,s.default)(e,"spec.data")},P=function(e){return(0,s.default)(e,"project.data.imageArray").toJS()},x=(0,u.createSelector)(d,function(e){return e}),O=(0,u.createSelector)(x,function(e){return(0,s.default)(e,"urls").toJS()}),L=(0,u.createSelector)(p,function(e){return e}),j=(0,u.createSelector)(c,function(e){return e}),k=(0,u.createSelector)(j,x,function(e,t){return"designer"===t.qs.get("source")?e.get("designerPages"):e.get("editPages")}),z=(0,u.createSelector)(v,function(e){return e}),R=(0,u.createSelector)(C,function(e){return e}),U=(0,u.createSelector)(z,function(e){return e.imageArray}),B=(0,u.createSelector)(z,function(e){return e.pageArray}),Y=(0,u.createSelector)(z,function(e){return e.imageUsedMap}),W=(0,u.createSelector)(z,function(e){return e.variableMap}),F=(0,u.createSelector)(z,function(e){return e.parameterMap}),H=(0,u.createSelector)(h,function(e){return e}),G=(0,u.createSelector)(m,function(e){return e}),Q=(0,u.createSelector)(T,function(e){return e}),X=(0,u.createSelector)(M,function(e){return e}),Z=(0,u.createSelector)(w,function(e){return e}),J=(0,u.createSelector)(I,function(e){return e}),V=(0,u.createSelector)(E,function(e){return e}),q=(0,u.createSelector)(b,function(e){return e}),K=(0,u.createSelector)(S,function(e){return e}),$=(0,u.createSelector)(D,function(e){return e}),ee=(0,u.createSelector)(A,function(e){return e}),te=(0,u.createSelector)(N,function(e){return e}),ne=(0,u.createSelector)(_,function(e){return e}),oe=(0,u.createSelector)(z,function(e){return e.cover}),ae=(0,u.createSelector)(P,function(e){return e}),re=(0,u.createSelector)(z,function(e){return{spec:e.setting.toJS(),calendarSetting:e.calendarSetting.toJS()}}),ie=(0,u.createSelector)(f,B,re,function(e,t,n){return(0,l.getRenderPagination)(e,t,n)}),se=(0,u.createSelector)(g,ie,function(e,t){var n=t.sheetIndex,o=(0,r.default)({},e.toJS(),{workspace:0===n?e.get("coverWorkspace"):e.get("innerWorkspace")});return o}),ue=(0,u.createSelector)(z,se,F,W,function(e,t,n,o){var a=(0,l.getRenderSize)(e,t,n,o);return a}),le=(0,u.createSelector)(z,ue,se,F,W,function(e,t,n,o,a){var r=(0,l.computedSizeForSpecialView)(e,t,n,o,a);return r}),de=(0,u.createSelector)(B,oe,U,re,ie,function(e,t,n,o,a){return(0,l.getRenderPaginationSpread)(e,t,n,o,a)}),ce=(0,u.createSelector)(se,ie,function(e,t){var n=t.sheetIndex;return(0,r.default)({},e,{workspace:0===n?e.previewCoverWorkspace:e.previewInnerWorkspace,coverWorkspace:e.previewCoverWorkspace,innerWorkspace:e.previewInnerWorkspace})}),pe=(0,u.createSelector)(v,ce,F,W,function(e,t,n,o){return(0,l.getRenderSize)(e,t,n,o,!0)}),fe=(0,u.createSelector)(y,function(e){return e}),ge=(0,u.createSelector)(B,oe,U,re,function(e,t,n,o){return(0,l.getRenderAllSpreads)(e,t,n,o)});t.mapStateToProps=function(e){return{autoAddPhotoToCanvas:Z(e),uploadingImages:J(e),project:z(e),upload:X(e),settings:re(e),imageUsedMap:Y(e),variables:W(e),parameters:F(e),spec:R(e),env:x(e),urls:O(e),size:ue(e),ratios:se(e),pagination:ie(e),paginationSpread:de(e),confirmModal:L(e),sidebar:fe(e),uploadedImages:ae(e),contactUsModal:V(e),imageEditModal:q(e),capability:k(e),capabilities:j(e),allImages:U(e),previewRatios:ce(e),previewSize:pe(e),arrangePagesSize:le(e),allSheets:ge(e),template:H(e),styles:G(e),alertModal:K(e),cloneModal:$(e),previewModal:ee(e),fontList:Q(e),textEditModal:te(e),price:ne(e)}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(72),r=o(a),i=n(14),s=o(i);n(100);var u=n(39),l=o(u),d=n(20);t.default=function(e,t,n){if(!e)return null;var o=e.replace(/\/textImage\?/,"/textinfo?"),a=fetch(o).then(function(e){return e.ok?e.text():s.default.reject(new Error(e.statusText))}).then(function(e){return(0,d.convertObjIn)(l.default.xml2js(e))}).catch(function(e){return s.default.reject(new Error(e))}),i=fetch(e).then(function(e){return e.ok?e.blob():s.default.reject(new Error(e.statusText))}).catch(function(e){return s.default.reject(new Error(e))});return s.default.all([a,i]).then(function(e){if((0,r.default)(e[0]).length){var o=e[0].textInfo,a=URL.createObjectURL(e[1]),i=o.textAreaIdeaWidth>t||o.textAreaIdeaHeight>n;return s.default.resolve({isShowTextNotFit:i,blobUrl:a})}return s.default.reject()},function(){return s.default.reject()})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImgWithBase64=t.loadImg=void 0;var a=n(14),r=o(a),i=n(11),s=o(i),u=t.loadImg=function(e){var t=new r.default(function(t,n){if(e){var o=new Image;o.onload=function(){t({msg:"done",url:e,img:o})},o.onerror=function(t){n({msg:t.message,url:e,img:null})},o.src=e}else n({msg:"url is not empty",url:e,img:null})});return t};t.loadImgWithBase64=function(e,t,n){u(e).then(function(e){var n=document.createElement("CANVAS"),o=n.getContext("2d");n.height=e.img.height,n.width=e.img.width,o.drawImage(e.img,0,0);var a=n.toDataURL();t&&t((0,s.default)({},e,{img:a}))},function(e){n&&n(e)})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=e.baseSize,a=e.pageBleed,r=e.calendarArea,i=n.month,s=n.year,u=n.isPosterCalendar,l=(0,N.getInnerPageSize)(o,a),d=[];return(t===A.pageTypes.bottom||u)&&d.push({id:(0,b.guid)(),type:A.elementTypes.calendar,x:(0,T.default)(r,"x"),y:(0,T.default)(r,"y"),width:(0,T.default)(r,"width"),height:(0,T.default)(r,"height"),px:(0,T.default)(r,"x")/(0,T.default)(l,"width"),py:(0,T.default)(r,"y")/(0,T.default)(l,"height"),pw:(0,T.default)(r,"width")/(0,T.default)(l,"width"),ph:(0,T.default)(r,"height")/(0,T.default)(l,"height"),rot:0,dep:999,month:i,year:s}),(0,f.default)({id:(0,b.guid)()},l,{type:t,month:i,year:s,styleId:"",styleItemId:"",bleed:(0,f.default)({},a),elements:d,template:{},backend:{isPrint:!0,slice:!1}})}function r(e,t,n){if(!t)return{};var o=t.baseSize,r=t.pageBleed,i=(0,N.getInnerPageSize)(o,r),s=[],u=e===A.productTypes.PC,l={isPosterCalendar:u,month:u?1:0,year:Number(n.get("startYear"))};if(e!==A.productTypes.LC){var d=a(t,A.pageTypes.cover,l);s.push(d)}return(0,f.default)({id:(0,b.guid)()},i,{bleed:(0,f.default)({},r),containers:s})}function i(e,t,n,o){if(!t||e===A.productTypes.PC)return[];for(var r=Number(o.get("startYear")),i=Number(o.get("startMonth")),s=[],u=0;u<n;u+=1){var l={month:i+u>12?i+u-12:i+u,year:i+u>12?r+1:r};if(e===A.productTypes.WC){var d=a(t,A.pageTypes.top,l);s.push(d)}var c=a(t,A.pageTypes.bottom,l);(0,E.default)(c,{month:i+u>12?i+u-12:i+u,year:i+u>12?r+1:r}),s.push(c)}return s}function s(e){var t=e,n=["x","y","width","height","px","py","pw","ph","cropLUX","cropLUY","cropRLX","cropRLY","dep","rot","imgRot","fontSize"],o=["text","fontWeight","fontFamily","fontColor","textAlign","textVAlign"],a=["imgFlip"];t.forEach(function(e,r){n.indexOf(r)===-1||(0,M.default)(e)&&!isNaN(e)||(t=t.set(r,0)),o.indexOf(r)===-1||(0,v.default)(e)||(t=t.set(r,"")),a.indexOf(r)===-1||(0,h.default)(e)||(t=t.set(r,!1))});var r=t.get("fontFamily"),i=t.get("text");return r&&(t=t.set("fontFamily",(0,D.toEncode)(r))),i&&(t=t.set("text",(0,D.toEncode)(i))),t}function u(e){var t=e;return e.forEach(function(e,n){e.get("elements").forEach(function(e,o){t=t.setIn([String(n),"elements",String(o)],s(e))})}),t}function l(e){var t=e.get("containers");return t&&t.forEach(function(e,n){var o=e;o.get("elements").forEach(function(e,o){t=t.setIn([String(n),"elements",String(o)],s(e))})}),t.first()}function d(e,t,n,o){var a=e.property,r=e.setting,i=e.imageArray,s=e.calendarSetting,d=u(e.pageArray),c=l(e.cover),p=r.get("product");p!==A.productTypes.LC&&(d=d.unshift(c));var f=a.get("projectId"),g=new Date,h=new Date(a.get("createdDate"));isNaN(h.getTime())&&(h=new Date);var m={project:{version:n,clientId:"web-h5",createAuthor:"web-h5|1.1|1",userId:t.get("id"),title:o,artisan:t.get("firstName"),createdDate:(0,S.formatDateTime)(h),updatedDate:(0,S.formatDateTime)(g),calendarSetting:s.toJS(),summary:{},spec:r.toJS(),pages:d.toJS(),images:i.toJS()}};return f!==-1&&(m.project.guid=f),m}function c(e){var t=e.project,n=t.version,o=t.clientId,a=t.createAuthor,r=t.userId,i=t.artisan,s=t.spec,u={project:(0,f.default)({version:n,clientId:o,createAuthor:a,userId:r,artisan:i},s)};return u}Object.defineProperty(t,"__esModule",{value:!0}),t.generateSku=t.generateProject=t.generatePageArray=t.generatePage=t.generateCover=void 0;var p=n(19),f=o(p),g=n(156),h=o(g),m=n(572),v=o(m),y=n(64),M=o(y),I=n(12),T=o(I),w=n(11),E=o(w),b=n(17),S=n(292),D=n(49),A=n(9),N=n(89);t.generateCover=r,t.generatePage=a,t.generatePageArray=i,t.generateProject=d,t.generateSku=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={},o={},a=t.get("width"),r=t.get("height"),i=e.get("x"),s=e.get("y"),u=e.get("width"),l=e.get("height"),d=e.get("px"),c=e.get("py"),p=e.get("pw"),g=e.get("ph");return!(0,f.default)(d)&&(0,f.default)(i)?n.px=i/a:(0,f.default)(d)&&(o.x=d*a),!(0,f.default)(c)&&(0,f.default)(s)?n.py=s/r:(0,f.default)(c)&&(o.y=c*r),!(0,f.default)(p)&&(0,f.default)(u)?n.pw=u/a:(0,f.default)(p)&&(o.width=p*a),!(0,f.default)(g)&&(0,f.default)(l)?n.ph=l/r:(0,f.default)(g)&&(o.height=g*r),e.merge(n,o,{lastModified:Date.now()})}function r(e,t){var n={},o=e.get("fontSize");return o&&o>1&&(n.fontSize=e.get("fontSize")/t.get("height")),a(e,t).merge(n)}function i(e){var t={},n={color:"#000000",size:0,opacity:100},o={effectId:0,opacity:100},a=["border","imgFlip","imgRot","style"];return a.forEach(function(a){switch(a){case"border":(0,c.default)(e.get(a))&&(t.border=n);break;case"imgFlip":(0,c.default)(e.get(a))&&(t.imgFlip=!1);break;case"imgRot":(0,c.default)(e.get(a))&&(t.imgRot=0);break;case"style":(0,c.default)(e.get(a))&&(t.style=o)}}),t}function s(e,t,n){var o={},r=e.get("encImgId"),s=e.get("width"),u=e.get("height"),l=e.get("id"),d=t.get("elements").find(function(t){return t.get("id")===e.get("id")});if(r||l&&(s||u)&&d&&d.get("encImgId")){var c=n.find(function(e){return e.get("encImgId")===(r||d.get("encImgId"))}),p=0,f=0,h=0;"undefined"!=typeof s?p=s:d&&(p=d.get("width")||0),"undefined"!=typeof u?f=u:d&&(f=d.get("height")||0),"undefined"!=typeof e.get("imgRot")?h=e.get("imgRot"):d&&(h=d.get("imgRot")||0);var m=d?d.get("width")/d.get("height"):1,v=p/f,y=d?d.get("encImgId"):null;if(c&&(!d||c.get("encImgId")!==y||Math.abs(m-v)>5e-4||h!==d.get("imgRot"))){var M=(0,g.getCropOptions)(c.get("width"),c.get("height"),p,f,h),I=M.cropLUX,T=M.cropLUY,w=M.cropRLX,E=M.cropRLY;o.cropLUX=I,o.cropLUY=T,o.cropRLX=w,o.cropRLY=E}}return a(e,t).merge(o).merge(i(e.merge(d)))}function u(e){var t=e,n=["x","y","width","height","px","py","pw","ph","cropLUX","cropLUY","cropRLX","cropRLY"];e.forEach(function(e,o){n.indexOf(o)===-1||(0,f.default)(e)||(t=t.remove(o))});var o=t.get("fontFamily"),a=t.get("text");return o&&(t=t.set("fontFamily",(0,m.toEncode)(o))),a&&(t=t.set("text",(0,m.toEncode)(a))),t}function l(e,t,n){var o=u(e);switch(o.get("type")){case h.elementTypes.text:o=o.merge(r(o,t));break;case h.elementTypes.photo:o=o.merge(s(o,t,n));break;default:o=o.merge(a(o,t))}return o}Object.defineProperty(t,"__esModule",{value:!0});var d=n(172),c=o(d),p=n(64),f=o(p);t.default=l;var g=n(21),h=n(9),m=n(49)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderAllSpreads=t.computedSizeForSpecialView=t.getRenderSize=t.getBgParams=t.getRenderPaginationSpread=t.getInnerPageSize=t.getRenderPagination=t.convertCoverSummaryPages=void 0;var a=n(19),r=o(a),i=n(11),s=o(i),u=n(12),l=o(u),d=n(2),c=o(d),p=n(9),f=t.convertCoverSummaryPages=function(e,t,n){var o=c.default.List(),a=c.default.Map(),r=e.get("bgImageUrl"),i=e.get("bleed"),s=e.get("height"),u=e.get("width"),l=e.get("id"),d=e.get("containers"),f=!0,g=void 0;d&&(g=d.find(function(e){return e.get("type")===p.pageTypes.cover})),a=a.merge({bgImageUrl:r,bleed:i,height:s,width:u,id:l,month:g&&g.get("month")||0,year:g&&g.get("year")||0});var h={isPageDraggable:!1,isPageDropable:!1};return e&&g&&(o=o.push(g.merge(h,{bgColor:f?e.get("bgColor"):"transparent",offset:{top:0,left:0},enabled:!0,isActive:g.get("id")===n.pageId}))),{summary:a,pages:o}},g=function(e,t,n,o,a,r,i,s){var u=c.default.List([]),l=e.get(t),d=e.get(n),f=!0,g=!1;return u=u.push(l.merge({width:l.get("width"),height:l.get("height"),offset:{top:0,left:0},enabled:f,isActive:l.get("id")===s.pageId,isPageDraggable:!1,isPageDropable:!1})),l.get("type")===p.pageTypes.top&&(u=u.push(d.merge({width:d.get("width"),height:d.get("height"),offset:{top:0,left:0},enabled:g,isActive:d.get("id")===s.pageId,isPageDraggable:!1,isPageDropable:!1}))),u},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i={container:{width:0,height:0},sheet:{width:0,height:0}},s=t?t.getIn(["pageBleed","left"]):0,u=t?t.getIn(["pageBleed","right"]):0,d=t?t.getIn(["pageBleed","top"]):0,c=t?t.getIn(["pageBleed","bottom"]):0;return i.container.width=Math.floor((e.get("width")+(s+u))*n),i.container.height=Math.floor((e.get("height")+(d+c))*n),i.container.left=-Math.floor(s*n),i.container.top=-Math.floor(d*n),i.sheet.width=Math.floor(e.get("width")*n),i.sheet.height=Math.floor(e.get("height")*n),a?r?(i.sheet.top=Math.floor((0,l.default)(o,"allPageCoverBgParams.top")*n),i.sheet.left=Math.floor((0,l.default)(o,"allPageCoverBgParams.left")*n)):(i.sheet.top=Math.floor((0,l.default)(o,"coverBgParams.top")*n),i.sheet.left=Math.floor((0,l.default)(o,"coverBgParams.left")*n)):r?(i.sheet.topPageTop=Math.floor((0,l.default)(o,"allPageInnerBgParams.topPageTop")*n),i.sheet.topPageLeft=Math.floor((0,l.default)(o,"allPageInnerBgParams.topPageLeft")*n),i.sheet.bottomPageTop=Math.floor((0,l.default)(o,"allPageInnerBgParams.bottomPageTop")*n),i.sheet.bottomPageLeft=Math.floor((0,l.default)(o,"allPageInnerBgParams.bottomPageLeft")*n)):(i.sheet.topPageTop=Math.floor((0,l.default)(o,"innerBgParams.topPageTop")*n),i.sheet.topPageLeft=Math.floor((0,l.default)(o,"innerBgParams.topPageLeft")*n),i.sheet.bottomPageTop=Math.floor((0,l.default)(o,"innerBgParams.bottomPageTop")*n),i.sheet.bottomPageLeft=Math.floor((0,l.default)(o,"innerBgParams.bottomPageLeft")*n)),i},m=(t.getRenderPagination=function(e,t,n){var o=0,a=0,r=(0,l.default)(n,"spec.product"),i=p.pageStepMap[r];return t&&t.size&&(o=t.size/i),(0,s.default)({},e.toJS(),{total:o,current:a,pageStep:i})},t.getInnerPageSize=function(e,t){var n=t.left+t.right,o=t.top+t.bottom;return{width:e.width+n,height:e.height+o}},t.getRenderPaginationSpread=function(e,t,n,o,a){var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=(0,l.default)(o,"spec.product"),s=(0,l.default)(o,"spec.cover"),u=p.pageStepMap[i],d=c.default.Map({isCover:!0,pageId:"",sheetIndex:a.sheetIndex}),h=c.default.List(),m=c.default.List(),v=c.default.Map(),y=e.size,M=r?0:a.sheetIndex;if(0===M){if(t){var I=f(t,o,a);d=d.merge(I.summary),m=m.merge(I.pages),m.forEach(function(e){return h=h.push(e.get("id"))})}}else if(2===u){if(y>2*(M-1)+1){d=d.set("isCover",!1);var T=2*(M-1),w=2*(M-1)+1;m=g(e,T,w,i,s,a.total,M,a),d=d.set("month",m.getIn(["0","month"])),d=d.set("year",m.getIn(["0","year"])),h=h.push(e.getIn([T.toString(),"id"])),h=h.push(e.getIn([w.toString(),"id"]))}}else if(1===u&&y>=M){d=d.set("isCover",!1);var E=e.get(M-1);d=d.set("month",E.get("month")),d=d.set("year",E.get("year")),m=m.push(E.merge({offset:{top:0,left:0},enabled:!0,isActive:E.get("id")===a.pageId,isPageDraggable:!1,isPageDropable:!1})),h=h.push(e.getIn([(M-1).toString(),"id"]))}m.size>a.pageIndex&&(d=d.set("pageId",m.getIn([String(a.pageIndex),"id"]))),n&&n.size&&n.forEach(function(e){v=v.set(String(e.get("encImgId")),e)});var b=c.default.List(),S=c.default.Map({summary:d,pages:m,images:v,pageNumber:b,pageIds:h,id:h.get(0)});return S}),v=t.getBgParams=function(e,t){if(!e.get("width"))return{width:0,height:0,bgX:0,bgY:0};var n=t.get("coverForeground"),o=t.get("innerForeground"),a=t.get("allPageCoverForeground"),r=t.get("allPageInnerForeground"),i=e.get("width"),s=e.get("height"),u=n.get("width")-n.get("left")-n.get("right"),l=n.get("height")-n.get("top")-n.get("bottom"),d=u/i,c=l/s,p={width:n.get("width")/d,height:n.get("height")/c,left:n.get("left")/d,top:n.get("top")/c},f=o.get("width")-o.get("bottomPageLeft")-o.get("bottomPageRight"),g=o.get("height")-o.get("bottomPageTop")-o.get("bottomPageBottom"),h=f/i,m=g/s,v={width:o.get("width")/h,height:o.get("height")/m,topPageLeft:o.get("topPageLeft")/h,topPageTop:o.get("topPageTop")/m,bottomPageLeft:o.get("bottomPageLeft")/h,bottomPageTop:o.get("bottomPageTop")/m},y=a.get("width")-a.get("left")-a.get("right"),M=a.get("height")-a.get("top")-a.get("bottom"),I=y/i,T=M/s,w={width:a.get("width")/I,height:a.get("height")/T,left:a.get("left")/I,top:a.get("top")/T},E=r.get("width")-r.get("bottomPageLeft")-r.get("bottomPageRight"),b=r.get("height")-r.get("bottomPageTop")-r.get("bottomPageBottom"),S=E/i,D=b/s,A={width:r.get("width")/S,height:r.get("height")/D,topPageLeft:r.get("topPageLeft")/S,topPageTop:r.get("topPageTop")/D,bottomPageLeft:r.get("bottomPageLeft")/S,bottomPageTop:r.get("bottomPageTop")/D};return{coverBgParams:p,innerBgParams:v,allPageCoverBgParams:w,allPageInnerBgParams:A}};t.getRenderSize=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=n.get("baseSize");if(!i||!o.size)return{};var s=v(i,o),u=e.setting.get("product"),l=a?1:p.innerPageHeightShowRatio[u],d=s.coverBgParams,c=s.innerBgParams,f=t.coverWorkspace?{width:Math.ceil(d.width*t.coverWorkspace),height:Math.ceil(d.height*t.coverWorkspace)}:d,g=t.innerWorkspace?{width:Math.ceil(c.width*t.innerWorkspace),height:Math.ceil(c.height*t.innerWorkspace)}:c,m=t.innerWorkspace?{width:Math.ceil(c.width*t.innerWorkspace),height:Math.ceil(c.height*l*t.innerWorkspace)}:c,y=h(i,n,t.coverWorkspace,s,!0),M=h(i,n,t.innerWorkspace,s),I=(0,r.default)({renderCoverSize:f,renderInnerSize:g,renderInnerContainerSize:m,baseWidth:i.get("width"),baseHeight:i.get("height")},s,{renderCoverSheetSize:y.container,renderCoverSheetSizeWithoutBleed:y.sheet,renderInnerSheetSize:M.container,renderInnerSheetSizeWithoutBleed:M.sheet});return I},t.computedSizeForSpecialView=function(e,t,n,o,a){var i=o.get("baseSize");if(!i||!a.size)return{};var s=v(i,a),u=e.setting.get("product"),l=p.innerPageHeightShowRatio[u],d=s.allPageInnerBgParams,c=s.allPageCoverBgParams,f=n.coverWorkspaceForArrangePages?{
width:Math.ceil(c.width*n.coverWorkspaceForArrangePages),height:Math.ceil(c.height*n.coverWorkspaceForArrangePages)}:c,g=n.innerWorkspaceForArrangePages?{width:Math.ceil(d.width*n.innerWorkspaceForArrangePages),height:Math.ceil(d.height*n.innerWorkspaceForArrangePages)}:d,m=n.innerWorkspaceForArrangePages?{width:Math.ceil(d.width*n.innerWorkspaceForArrangePages),height:Math.ceil(d.height*l*n.innerWorkspaceForArrangePages)}:d,y=h(i,o,n.coverWorkspaceForArrangePages,s,!0,!0),M=h(i,o,n.innerWorkspaceForArrangePages,s,!1,!0),I=(0,r.default)({renderCoverSize:f,renderInnerSize:g,renderInnerContainerSize:m,baseWidth:i.get("width"),baseHeight:i.get("height")},s,{renderCoverSheetSize:y.container,renderCoverSheetSizeWithoutBleed:y.sheet,renderInnerSheetSize:M.container,renderInnerSheetSizeWithoutBleed:M.sheet});return I},t.getRenderAllSpreads=function(e,t,n,o){for(var a=(0,l.default)(o,"spec.product"),r=p.pageStepMap[a],i=e.size/r+1,s=c.default.List([]),u=0;u<i;u++){var d=m(e,t,n,o,{sheetIndex:u,pageStep:r,total:e.size/r});s=s.push(d)}return s}},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function o(e,t){return null==e?e:a(e,r(t),i)}var a=n(176),r=n(585),i=n(66);e.exports=o},function(e,t,n){function o(e,t,n){return null==e?e:a(e,t,n)}var a=n(152);e.exports=o},function(e,t,n){e.exports=n(1)(110)},function(e,t,n){e.exports=n(1)(121)},function(e,t,n){e.exports=n(1)(167)},function(e,t,n){e.exports=n(1)(217)},function(e,t,n){e.exports=n(1)(266)},function(e,t,n){e.exports=n(1)(436)},function(e,t,n){e.exports=n(1)(468)},function(e,t,n){e.exports=n(1)(727)},function(e,t,n){e.exports=n(1)(828)},function(e,t,n){e.exports=n(1)(83)},function(e,t,n){e.exports=n(1)(995)},function(e,t,n){var o=n(69),a=n(30),r=n(566);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),o(o.S+o.F*r(function(){n(1)}),"Object",i)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var o=n(71),a=n(164),r=n(73);e.exports=function(e,t){if(o(e),a(t)&&t.constructor===e)return t;var n=r.f(e),i=n.resolve;return i(t),n.promise}},function(e,t,n){var o=n(71),a=n(98),r=n(67)("species");e.exports=function(e,t){var n,i=o(e).constructor;return void 0===i||void 0==(n=o(i)[r])?t:a(n)}},function(e,t,n){var o,a,r,i=n(95),s=n(194),u=n(591),l=n(578),d=n(56),c=d.process,p=d.setImmediate,f=d.clearImmediate,g=d.MessageChannel,h=d.Dispatch,m=0,v={},y="onreadystatechange",M=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},I=function(e){M.call(e.data)};p&&f||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},o(m),m},f=function(e){delete v[e]},"process"==n(167)(c)?o=function(e){c.nextTick(i(M,e,1))}:h&&h.now?o=function(e){h.now(i(M,e,1))}:g?(a=new g,r=a.port2,a.port1.onmessage=I,o=i(r.postMessage,r,1)):d.addEventListener&&"function"==typeof postMessage&&!d.importScripts?(o=function(e){d.postMessage(e+"","*")},d.addEventListener("message",I,!1)):o=y in l("script")?function(e){u.appendChild(l("script"))[y]=function(){u.removeChild(this),M.call(e)}}:function(e){setTimeout(i(M,e,1),0)}),e.exports={set:p,clear:f}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m),y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"onDrapOvered",value:function(e){var t=this.props.onDragOvered;e.preventDefault(),t&&t()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onDroped,o=e.onDragEntered,a=e.onDragLeaved,r=e.onDragEnded,i=e.data,s=void 0===i?{}:i,u=s.dropActiveClassName,l=s.isShowDropActive,d=void 0!==l&&l,c=(0,v.default)("drop-active",u);return h.default.createElement("div",{className:"on-drop",onDrop:n,onDragOver:this.onDrapOvered.bind(this),onDragEnter:o,onDragEnd:r,onDragLeave:a},d?h.default.createElement("div",{className:c}):null,t)}}]),t}(g.Component);t.default=y,y.propTypes={onDroped:g.PropTypes.func.isRequired,onDragEntered:g.PropTypes.func,onDragLeaved:g.PropTypes.func,onDragEnded:g.PropTypes.func}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(560),v=o(m);n(224);var y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChanged,n=e.optionComponent,o=e.options,a=e.searchable,r=e.placeholder,i=e.arrowRenderer,s=e.value,u=e.valueComponent,l=e.matchPos;return h.default.createElement(v.default,{arrowRenderer:i,onChange:t,optionComponent:n,options:o,placeholder:r,value:s,searchable:a,valueComponent:u,matchPos:l})}}]),t}(g.Component);t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(219);var y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.hasText,t=(0,v.default)("icon",{"has-text":e});return this.props.isShown?h.default.createElement("div",{className:"text-loading"},h.default.createElement("i",{className:t})):null}}]),t}(g.Component);y.propTypes={isShown:g.PropTypes.bool.isRequired},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBox=t.resizeImage=t.replaceColor=t.fillEmptyDataWithColor=t.setSize=t.wrapBorder=t.canvasToBase64=t.imageDataHRevert=t.imageDataVRevert=t.getClient=t.createImageData=t.fillImageData=t.toObjectUrl=t.getBase64ByImageData=t.getImageDataByBase64=t.getImageData=t.clear=t.drawCircular=t.drawRect=t.getBeveling=t.drawDashedLine=t.drawLine=t.drawTextInCenter=t.drawText=t.drawCanvas=t.drawImage=void 0;var a=n(14),r=o(a),i=(t.drawImage=function(e,t,n,o,a,r,i,s,u,l,d){var c=document.getElementById(e),p=c.getContext("2d"),f=new Image;f.onload=function(){c.width=c.width,r&&i?s?p.drawImage(f,s,u,l,d,n,o,r,i):p.drawImage(f,n,o,r,i):p.drawImage(f,n,o),a&&a(e)},f.src=t},t.drawCanvas=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments[4],r=arguments[5],i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments[8],l=arguments[9],d=document.getElementById(e),c=d.getContext("2d"),p=document.getElementById(t);if(p){var f=(p.getContext("2d"),u||p.width),g=l||p.height,h=a||p.width,m=r||p.height;u>0&&l>0&&c.drawImage(p,i,s,f,g,n,o,h,m)}},t.drawText=function(e,t,n,o,a,r,i){var s=document.getElementById(e),u=s.getContext("2d");u.textBaseline="top";var l=u.fillStyle;u.fillStyle=a,u.font=r+"px "+i,u.fillText(t,n,o),u.fillStyle=l},t.drawTextInCenter=function(e,t,n,o,a){var r=document.getElementById(e),i=r.getContext("2d");i.textBaseline="top";var s=i.fillStyle;i.fillStyle=n,i.font=o+"px "+a;var u=i.measureText(t).width,l=(r.width-u)/2,d=(r.height-o)/2;i.fillText(t,l,d),i.fillStyle=s},t.drawLine=function(e,t,n,o,a,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=document.getElementById(e),u=s.getContext("2d"),l=u.strokeStyle;u.strokeStyle=t;var d=u.lineWidth;u.beginPath(),u.lineWidth=i,u.moveTo(n,o),u.lineTo(a,r),u.closePath(),u.stroke(),u.strokeStyle=l,u.lineWidth=d},t.drawDashedLine=function(e,t,n,o,a,r,s,u){var l=document.getElementById(e),d=l.getContext("2d"),c=d.strokeStyle;d.strokeStyle=t;var p=d.lineWidth;s?d.lineWidth=s:d.lineWidth=1;var f=u||5;d.beginPath();for(var g=i(a-n,r-o),h=Math.floor(g/f),m=void 0,v=void 0,y=void 0,M=void 0,I=0;I<h;I++)m=n+(a-n)/h*I,v=o+(r-o)/h*I,y=n+(a-n)/h*(I+1),M=o+(r-o)/h*(I+1),d[I%2===0?"moveTo":"lineTo"](n+(a-n)/h*I,o+(r-o)/h*I);h%2!==0&&d.lineTo(y,M),d.closePath(),d.stroke(),d.strokeStyle=c,d.lineWidth=p},t.getBeveling=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))});t.drawRect=function(e,t,n,o,a,r,i,s){var u=document.getElementById(e),l=u.getContext("2d");if(l.globalCompositeOperation="source-over",i){var d=l.lineWidth;s?l.lineWidth=s:l.lineWidth=1;var c=l.strokeStyle;l.strokeStyle=t,l.beginPath(),l.moveTo(n,o),l.strokeRect(n,o,a,r),l.closePath(),l.stroke(),l.strokeStyle=c,l.lineWidth=d}else{var p=l.fillStyle;l.fillStyle=t,l.beginPath(),l.moveTo(n,o),l.globalCompositeOperation="source-over",l.fillRect(n,o,a,r),l.closePath(),l.fillStyle=p}},t.drawCircular=function(e,t,n,o,a,r,i){var s=document.getElementById(e),u=s.getContext("2d");if(r){var l=u.lineWidth;i?u.lineWidth=i:u.lineWidth=1;var d=u.strokeStyle;u.strokeStyle=t,u.moveTo(n,o),u.beginPath(),u.arc(n,o,a,0,2*Math.PI),u.closePath(),u.stroke(),u.strokeStyle=d,u.lineWidth=l}else{var c=u.fillStyle;u.fillStyle=t,u.moveTo(n,o),u.beginPath(),u.arc(n,o,a,0,2*Math.PI),u.closePath(),u.fill(),u.fillStyle=c}},t.clear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments[3],a=arguments[4],r=document.getElementById(e);if(r){var i=r.getContext("2d"),s=o||r.width,u=a||r.height;i.clearRect(t,n,s,u)}},t.getImageData=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=document.getElementById(e),i=r.getContext("2d"),s=t||r.width,u=n||r.height;return i.getImageData(o,a,s,u)},t.getImageDataByBase64=function(e){return new r.default(function(t,n){var o=new Image,a=document.createElement("canvas"),r=a.getContext("2d");o.src=e,o.onload=function(){a.width=o.width,a.height=o.height,r.drawImage(o,0,0);var e=r.getImageData(0,0,o.width,o.height);t(e)},o.onerror=function(){n()}})},t.getBase64ByImageData=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t.toDataURL()},t.toObjectUrl=function(e){var t=new r.default(function(t,n){if(e)if(e.toBlob)e.toBlob(function(e){t(URL.createObjectURL(e))});else if(e.msToBlob){var o=e.msToBlob();t(URL.createObjectURL(o))}else{var a=e.toDataURL();t(a)}else n()});return t},t.fillImageData=function(e,t,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=document.getElementById(e),s=i.getContext("2d"),u=n||i.width,l=o||i.height;s.putImageData(t,a,r,0,0,u,l)},t.createImageData=function(e,t,n){var o=document.getElementById(e),a=o.getContext("2d"),r=t||o.width,i=n||o.height;return a.createImageData(r,i)},t.getClient=function(e){var t=document.getElementById(e);return{width:t.width,height:t.height,context:t.getContext("2d")}},t.imageDataVRevert=function(e,t){for(var n=t,o=0,a=e.height;o<a;o++)for(var r=0,i=e.width;r<i;r++)n.data[o*i*4+4*r+0]=e.data[(a-o)*i*4+4*r+0],n.data[o*i*4+4*r+1]=e.data[(a-o)*i*4+4*r+1],n.data[o*i*4+4*r+2]=e.data[(a-o)*i*4+4*r+2],n.data[o*i*4+4*r+3]=e.data[(a-o)*i*4+4*r+3];return n},t.imageDataHRevert=function(e,t){for(var n=document.createElement("canvas"),o=n.getContext("2d"),a=o.createImageData(e.width,e.height),r=0,i=e.height;r<i;r++)for(var s=0,u=e.width;s<u;s++)a.data[r*u*4+4*s+0]=e.data[r*u*4+4*(u-s)+0],a.data[r*u*4+4*s+1]=e.data[r*u*4+4*(u-s)+1],a.data[r*u*4+4*s+2]=e.data[r*u*4+4*(u-s)+2],a.data[r*u*4+4*s+3]=e.data[r*u*4+4*(u-s)+3];return a},t.canvasToBase64=function(e){var t=document.getElementById(e);return t.toDataURL("image/jpeg")},t.wrapBorder=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,o=document.getElementById(e),a=document.createElement("canvas"),r=a.getContext("2d"),i=o.width,s=o.height,u={top:[1,0,-n,n,0,s/2],right:[-n,n,0,1,i/2,-i/2]};return i>s?(a.width=i+s/2,a.height=s):(a.width=i,a.height=s+i/2),CanvasRenderingContext2D.prototype.transform.apply(r,u[t]),i>s?r.drawImage(o,s/2,0):r.drawImage(o,0,i/2),r.getImageData(0,0,a.width,a.height)},t.setSize=function(e,t){var n=document.getElementById(e);t.width&&(n.width=t.width),t.height&&(n.height=t.height)},t.fillEmptyDataWithColor=function(e,t,n,o){for(var a=e,r=0;r<e.width*e.height;r++)0===a.data[4*r+3]&&(a.data[4*r]=t.r,a.data[4*r+1]=t.g,a.data[4*r+2]=t.b,a.data[4*r+3]=255);return a},t.replaceColor=function(e,t,n,o,a,r,i){var s=~~(t||0),u=~~(n||0),l=t+a||e.width,d=n+r||e.height,c=e;if(s<0||u<0||l>e.width||d>e.height)throw new Error("error params!");for(var p=u;p<d;p++)for(var f=s;f<l;f++){var g=p*c.width+f,h=c.data[4*g],m=c.data[4*g+1],v=c.data[4*g+2];h===o.r&&m===o.g&&v===o.b&&(i?(c.data[4*g]=i.r,c.data[4*g+1]=i.g,c.data[4*g+2]=i.b,c.data[4*g+3]=255):c.data[4*g+3]=0)}return c},t.resizeImage=function(e,t,n){var o=document.getElementById(e),a=(o.getContext("2d"),document.createElement("canvas")),r=a.getContext("2d"),i=t||o.width,s=n||o.height;if(i!==o.width||s!==o.height){var u=void 0;i>s?(u=o.width/i,s=o.height/u):i===s&&o.width>o.height?(u=o.width/i,s=o.height/u):(u=o.height/s,i=o.width/u)}return a.width=i,a.height=s,r.drawImage(o,0,0,i,s),a.toDataURL("image/jpeg")},t.drawBox=function(e,t,n,o,a,r,i,s,u,l){var d=document.getElementById(e),c=d.getContext("2d");c.moveTo(0,0),c.lineTo(t,0),c.lineTo(t,n),c.lineTo(t-u,n-u),c.lineTo(t-u,u),c.lineTo(u,u),c.lineTo(u,n-u),c.lineTo(t-u,n-u),c.lineTo(t,n),c.lineTo(0,n),c.lineTo(u,n-u),c.lineTo(0,n),c.lineTo(0,0),c.fillStyle=o,c.fill()}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){!e.defaultView||t===e.defaultView.pageXOffset&&n===e.defaultView.pageYOffset||e.defaultView.scrollTo(t,n)}function r(e,t){try{t&&(t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e.getContext("2d").getImageData(0,0,e.width,e.height),0,0))}catch(t){d("Unable to copy canvas content from",e,t)}}function i(e,t){if(!e)return e;for(var n=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),o=e.firstChild;o;)t!==!0&&1===o.nodeType&&"SCRIPT"===o.nodeName||n.appendChild(i(o,t)),o=o.nextSibling;return 1===e.nodeType&&(n._scrollTop=e.scrollTop,n._scrollLeft=e.scrollLeft,"CANVAS"===e.nodeName?r(e,n):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(n.value=e.value)),n}function s(e){if(1===e.nodeType){e.scrollTop=e._scrollTop,e.scrollLeft=e._scrollLeft;for(var t=e.firstChild;t;)s(t),t=t.nextSibling}}var u=n(14),l=o(u),d=n(37);e.exports=function(e,t,n,o,r,u,d){var c=i(e.documentElement,r.javascriptEnabled),p=t.createElement("iframe");return p.className="html2canvas-container",p.style.visibility="hidden",p.style.position="fixed",p.style.left="-10000px",p.style.top="0px",p.style.border="0",p.width=n,p.height=o,p.scrolling="no",t.body.appendChild(p),new l.default(function(t){var n=p.contentWindow.document;p.contentWindow.onload=p.onload=function(){var e=setInterval(function(){n.body.childNodes.length>0&&(s(n.documentElement),clearInterval(e),"view"===r.type&&(p.contentWindow.scrollTo(u,d),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||p.contentWindow.scrollY===d&&p.contentWindow.scrollX===u||(n.documentElement.style.top=-d+"px",n.documentElement.style.left=-u+"px",n.documentElement.style.position="absolute")),t(p))},50)},n.open(),n.write("<!DOCTYPE html><html></html>"),a(e,u,d),n.replaceChild(n.adoptNode(c),n.documentElement),n.close()})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,a){return T(e,e,n,o,t,e.defaultView.pageXOffset,e.defaultView.pageYOffset).then(function(i){M("Document cloned");var s=b+a,u="["+s+"='"+a+"']",l=e.querySelector(u);l&&l.removeAttribute(s);var d=i.contentWindow,c=d.document.querySelector(u),p="function"==typeof t.onclone?f.default.resolve(t.onclone(d.document)):f.default.resolve(!0);return p.then(function(){return r(c,i,t,n,o)})})}function r(e,t,n,o,a){var r=t.contentWindow,d=new g(r.document),c=new m(n,d),p=E(e),f="view"===n.type?o:u(r.document),h="view"===n.type?a:l(r.document),y=new n.renderer(f,h,c,n,document),I=new v(e,y,d,c,n);return I.ready.then(function(){M("Finished rendering");var o;return o="view"===n.type?s(y.canvas,{width:y.canvas.width,height:y.canvas.height,top:0,left:0,x:0,y:0}):e===r.document.body||e===r.document.documentElement||null!=n.canvas?y.canvas:s(y.canvas,{width:null!=n.width?n.width:p.width,height:null!=n.height?n.height:p.height,top:p.top,left:p.left,x:0,y:0}),i(t,n),o})}function i(e,t){t.removeContainer&&(e.parentNode.removeChild(e),M("Cleaned up container"))}function s(e,t){var n=document.createElement("canvas"),o=Math.min(e.width-1,Math.max(0,t.left)),a=Math.min(e.width,Math.max(1,t.left+t.width)),r=Math.min(e.height-1,Math.max(0,t.top)),i=Math.min(e.height,Math.max(1,t.top+t.height));n.width=t.width,n.height=t.height;var s=a-o,u=i-r;return M("Cropping canvas at:","left:",t.left,"top:",t.top,"width:",s,"height:",u),M("Resulting crop with width",t.width,"and height",t.height,"with x",o,"and y",r),n.getContext("2d").drawImage(e,o,r,s,u,t.x,t.y,s,u),n}function u(e){return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function l(e){return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function d(e){var t=document.createElement("a");return t.href=e,t.href=t.href,t}function c(e,t){var n=S++;if(t=t||{},t.logging&&(M.options.logging=!0,M.options.start=Date.now()),t.async="undefined"==typeof t.async||t.async,t.allowTaint="undefined"!=typeof t.allowTaint&&t.allowTaint,t.removeContainer="undefined"==typeof t.removeContainer||t.removeContainer,t.javascriptEnabled="undefined"!=typeof t.javascriptEnabled&&t.javascriptEnabled,t.imageTimeout="undefined"==typeof t.imageTimeout?1e4:t.imageTimeout,t.renderer="function"==typeof t.renderer?t.renderer:h,t.strict=!!t.strict,t.isManualIgnore="undefined"!=typeof t.isManualIgnore,"string"==typeof e){if("string"!=typeof t.proxy)return f.default.reject("Proxy must be used when rendering url");var o=null!=t.width?t.width:window.innerWidth,i=null!=t.height?t.height:window.innerHeight;return w(d(e),t.proxy,document,o,i,t).then(function(e){return r(e.contentWindow.document.documentElement,e,t,o,i)})}var s=(void 0===e?[document.documentElement]:e.length?e:[e])[0];return s.setAttribute(b+n,n),a(s.ownerDocument,t,s.ownerDocument.defaultView.innerWidth,s.ownerDocument.defaultView.innerHeight,n).then(function(e){return"function"==typeof t.onrendered&&(M("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),t.onrendered(e)),e})}Object.defineProperty(t,"__esModule",{value:!0});var p=n(14),f=o(p);t.html2canvas=c;var g=n(311),h=n(309),m=n(304),v=n(305),y=n(50),M=n(37),I=n(34),T=n(113),w=n(78).loadUrlDocument,E=I.getBounds,b="data-html2canvas-node",S=0;c.CanvasRenderer=h,c.NodeContainer=y,c.log=M,c.utils=I},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){this.src=e.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=i.default.resolve(!0)}var r=n(14),i=o(r);a.TYPES={LINEAR:1,RADIAL:2},a.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){s.apply(this,arguments),this.type=s.TYPES.LINEAR;var t=a.REGEXP_DIRECTION.test(e.args[0])||!s.REGEXP_COLORSTOP.test(e.args[0]);t?e.args[0].split(/\s+/).reverse().forEach(function(e,t){switch(e){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var n=this.y0,o=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=o,this.y1=n;break;case"center":break;default:var a=.01*parseFloat(e,10);if(isNaN(a))break;0===t?(this.y0=a,this.y1=1-this.y0):(this.x0=a,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=e.args.slice(t?1:0).map(function(e){var t=e.match(s.REGEXP_COLORSTOP),n=+t[2],o=0===n?"%":t[3];return{color:new u(t[1]),stop:"%"===o?n/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(e,t){null===e.stop&&this.colorStops.slice(t).some(function(n,o){return null!==n.stop&&(e.stop=(n.stop-this.colorStops[t-1].stop)/(o+1)+this.colorStops[t-1].stop,!0)},this)},this)}var r=n(43),i=o(r),s=n(115),u=n(77);a.prototype=(0,i.default)(s.prototype),a.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){this.src=e,this.image=null;var t=this;this.promise=this.hasFabric().then(function(){return t.isInline(e)?i.default.resolve(t.inlineFormatting(e)):s(e)}).then(function(e){return new i.default(function(n){window.html2canvas.svg.fabric.loadSVGFromString(e,t.createCanvas.call(t,n))})})}var r=n(14),i=o(r),s=n(118),u=n(34).decode64;a.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?i.default.resolve():i.default.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},a.prototype.inlineFormatting=function(e){return/^data:image\/svg\+xml;base64,/.test(e)?this.decode64(this.removeContentType(e)):this.removeContentType(e)},a.prototype.removeContentType=function(e){return e.replace(/^data:image\/svg\+xml(;base64)?,/,"")},a.prototype.isInline=function(e){return/^data:image\/svg\+xml/i.test(e)},a.prototype.createCanvas=function(e){var t=this;return function(n,o){var a=new window.html2canvas.svg.fabric.StaticCanvas("c");t.image=a.lowerCanvasEl,a.setWidth(o.width).setHeight(o.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(n,o)).renderAll(),e(a.lowerCanvasEl)}},a.prototype.decode64=function(e){return"function"==typeof window.atob?window.atob(e):u(e)},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return new i.default(function(t,n){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200===o.status?t(o.responseText):n(new Error(o.statusText))},o.onerror=function(){n(new Error("Network Error"))},o.send()})}var r=n(14),i=o(r);e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertRotateImg=t.fetchImage=t.loadImg=t.combineImgCopperUrl=void 0;var a=n(14),r=o(a),i=n(11),s=o(i),u=n(23),l=o(u),d=(n(76),n(291)),c=o(d),p=n(112),f=(t.combineImgCopperUrl=function(e,t,n,o){var a="",r={px:t.cropLUX,py:t.cropLUY,pw:t.cropRLX-t.cropLUX,ph:t.cropRLY-t.cropLUY};return a=(0,l.default)(e)((0,s.default)({},r,{rotation:t.imgRot,encImgId:encodeURIComponent(t.encImgId),width:Math.floor(n),height:Math.floor(o)}))},t.loadImg=function(e){var t=new c.default(function(t,n){if(e){var o=new Image;o.onload=function(){t({msg:"done",url:e,img:o})},o.onerror=function(t){n({msg:t.message,url:e,img:o})},o.src=e}else n({msg:"url is not empty",url:e,img:img})});return t},function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(!window.ActiveXObject)throw new Error("xhr not support");for(var e=["MSXML2.XMLHttp","Microsoft.XMLHTTP"],t=0,n=e.length;t<n;t++)try{return new ActiveXObject(version[t])}catch(e){}}),g=t.fetchImage=function(e){return new r.default(function(t,n){if(RegExp(location.host+"|base64,").test(e)){var o=new window.Image;o.onload=function(){t(o)},o.onerror=function(){n()},o.src=e}else{var a=f();a.open("GET",e,!0),a.responseType="blob",a.onload=function(){var e=new window.Image;e.onload=function(){t(e)},e.onerror=function(){n()},e.src=window.URL.createObjectURL(a.response)},a.onerror=function(){n()},a.send()}})};t.convertRotateImg=function(e,t){return new r.default(function(n,o){g(e).then(function(e){var a=e.width,r=e.height,i=document.createElement("canvas"),s=i.getContext("2d"),u=(t+360)%360/90;switch(u){case 1:i.width=r,i.height=a,s.rotate(90*Math.PI/180),s.drawImage(e,0,-r);break;case 2:i.width=a,i.height=r,s.rotate(180*Math.PI/180),s.drawImage(e,-a,-r);break;case 3:i.width=r,i.height=a,s.rotate(270*Math.PI/180),s.drawImage(e,-a,0);break;case 0:case 4:default:i.width=a,i.height=r,s.rotate(0),s.drawImage(e,0,0)}(0,p.toObjectUrl)(i).then(n,o)},o)})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=!0;return(0,S.default)(t.key,function(t,o){if(t.indexOf(e[o])===-1&&t.indexOf("*")===-1)return n=!1,!1}),n}function r(e,t,n){var o=e.defaultValue,a=(0,A.default)(o,"0")||(0,A.default)(e,"value.0");if(n){var r=n.find(function(e){return e.id===t});if(r){var i=n.filter(function(e){return e.id!==r.id&&e.name&&e.name===r.name}),s=i.map(function(e){return e.id}),u=(0,M.default)(s,e.value);if(u.length)return u[0]}}return e.value.indexOf(t)===-1?a:null}function i(e,t,n){if((0,E.default)(e))return{};if(!(0,T.default)(t)||!t.length)return e;var o=(0,_.default)({},e),i=t.map(function(e){return(0,v.default)({},e,{count:0})});i.forEach(function(e){e.keyPattern.forEach(function(e){var t=i.find(function(t){return t.id===e});t&&(t.count+=1)})});var s=i.sort(function(e,t){return t.count-e.count});return s.forEach(function(e){e.entry.forEach(function(t){var i=a(o,t);if(i){var s=o[e.id],u=null;n&&(u=n[e.id]);var l=r(t,s,u);l&&(o[e.id]=l)}})}),o}function s(e,t){if((0,E.default)(e)||!t)return{};var n={},o=t.sort(function(e,t){return e.keyPattern.length-t.keyPattern.length});return o.forEach(function(t){t.entry.forEach(function(o){var r=a(e,o);if(r){var i={};(0,S.default)(o,function(e,t){"key"!==t&&((0,T.default)(e)&&1===e.length?i[t]=e[0]:i[t]=e)});var s=(0,C.convertObjIn)(i),u=(0,h.default)(s);u.length>1?n[t.id]=s:n[t.id]=s[u[0]]}})}),n}function u(e,t){return s(e,t)}function l(e,t,n){var o=(0,_.default)({},e),a=t.filter(function(e){return 1===e.keyPattern.length});a.forEach(function(t){t.entry.forEach(function(n){n.value.forEach(function(a){if(a===e[t.id]){var r=t.keyPattern[0];o[r]||(o[r]=n.key[r][0])}})})});var r=i(o,t,n);return(0,_.default)({},o,r)}function d(e,t){var n={};return t.forEach(function(t){t.entry.forEach(function(o){var r=a(e,o);r&&(n[t.id]=o.value)})}),n}function c(e,t,n,o){var r={},i=d(e,o);return t.forEach(function(t){t.entry.forEach(function(o){var s=a(e,o);if(s){var u=t.id,l=n[u],d=i[u]||[],c=[];o.value.forEach(function(t){var n=l.find(function(e){return e.id===t});n=(0,_.default)({},n,{disabled:d.indexOf(t)!==-1}),d.indexOf(t)!==-1?e[u]===t&&c.push(n):c.push(n)}),r[t.id]=c}})}),r}function p(e,t,n){return t.forEach(function(o){if(o.keyPattern.indexOf(e.id)!==-1){var a=n.find(function(e){return e.id===o.id});a||n.push(o),p(o,t,n)}}),n}function f(e,t,n,o){var a=(0,h.default)(t),r=[];n.forEach(function(e){(0,S.default)(a,function(t){if(e.keyPattern.indexOf(t)!==-1){var n=r.find(function(t){return t.id===e.id});n||r.push(e)}})});var s=r.concat([]);r.forEach(function(e){p(e,n,s)});var u=(0,_.default)({},e,t),l=i(u,s,o);return(0,_.default)({},u,l)}Object.defineProperty(t,"__esModule",{value:!0});var g=n(72),h=o(g),m=n(19),v=o(m),y=n(527),M=o(y),I=n(46),T=o(I),w=n(179),E=o(w),b=n(101),S=o(b),D=n(12),A=o(D),N=n(11),_=o(N),C=n(20);t.default={isEntryMatched:a,getParameters:s,getVariables:u,getProjectSetting:i,getDefaultProjectSetting:l,getNewProjectSetting:f,getAvailableOptionMap:c,getDisableOptionMap:d}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.transform=function(e,t){var n=e.x,o=e.y,a=e.width,r=e.height,i=Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/2,s=Math.round(180*Math.atan(r/a)/Math.PI),u=180-t-s,l=s-t,d={x:n+a/2+i*Math.cos(u*Math.PI/180),y:o+r/2-i*Math.sin(u*Math.PI/180)},c={x:n+a/2+i*Math.cos(l*Math.PI/180),y:o+r/2-i*Math.sin(l*Math.PI/180)},p={x:n+a/2-i*Math.cos(u*Math.PI/180),y:o+r/2+i*Math.sin(u*Math.PI/180)},f={x:n+a/2-i*Math.cos(l*Math.PI/180),y:o+r/2+i*Math.sin(l*Math.PI/180)},g=Math.min(d.x,c.x,p.x,f.x),h=Math.max(d.x,c.x,p.x,f.x),m=Math.min(d.y,c.y,p.y,f.y),v=Math.max(d.y,c.y,p.y,f.y);return{point:{topLeft:d,topRight:c,bottomLeft:f,bottomRight:p},width:h-g,height:v-m,left:g,right:h,top:m,bottom:v}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.get("width"),o=e.get("height"),a=e.get("id");return new s.default(function(e,r){(0,p.default)(t,n,o).then(function(t){var n=t.isShowTextNotFit,o=t.blobUrl,i=new window.Image;i.onload=function(){e({elementId:a,imageObj:i,isShowTextNotFit:n,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},i.onerror=function(){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},i.src=o},function(){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})}).catch(function(e){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})})})}function r(e,t){var n=e.get("id");return new s.default(function(e,o){var a=new window.Image;a.onload=function(){e({elementId:n,imageObj:a,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},a.onerror=function(){o({elementId:n,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},a.src=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.toDownload=void 0;var i=n(14),s=o(i),u=n(2),l=o(u),d=n(9),c=n(85),p=o(c);t.toDownload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.props.data.page;if(o.get("type")!==d.pageTypes.spine){var i=e.state.downloadData,s=i,u=[];t&&t.size&&t.forEach(function(e){var t=e.get("id");if(!e.get("isSpineText")){var o=e.getIn(["computed","imgUrl"]),i=s.get(t)||l.default.Map();if(o&&(i.get("downloadUrl")!==o||i.get("downloadStatus")!==d.downloadStatus.DOWNLOAD_SUCCESS))switch(s=s.set(t,i.merge({downloadStatus:d.downloadStatus.DOWNLOADING,downloadUrl:o})),e.get("type")){case d.elementTypes.photo:var c=n?o+"&randomNumber="+Math.random():o;u.push(r(e,c));break;case d.elementTypes.calendar:u.push(r(e,o));break;case d.elementTypes.text:if(e.get("isSpineText"))return;u.push(a(e,o))}}});var c=function(t){var n=e.state.downloadData,o=t.elementId;delete t.elementId;var a=n.get(o)||l.default.Map();e.setState({downloadData:n.set(o,a.merge(t))})};u.forEach(function(e){e.then(c,c)}),e.setState({downloadData:s})}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t,dateSelected:Date.now()})})}function r(e,t,n){var o=e.state.elementArray,r=t.get("id"),i=o.find(function(e){return e.get("isSelected")&&e.get("isSpineText")}),s=o;!n.ctrlKey&&!n.metaKey||i?t.get("isSelected")||(s=a(o,r),e.clicksObj.clickElementId=r):s=o.map(function(e){if(e.get("isSpineText"))return e;if(r===e.get("id")){var t=!e.get("isSelected"),n={isSelected:t};return t&&(n.dateSelected=Date.now()),e.merge(n)}return e}),e.setState({elementArray:s})}function i(e){if(!e||e.indexOf("?")===-1)return"";var t=e.split("?"),n=t[0],o=d.default.parse(t[1]);return o.px=0,o.py=0,o.pw=1,o.ph=1,n+"?"+d.default.stringify(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=t.onExchangeDragEnd=t.onExchangeDragMove=t.onExchangeDragStart=t.onExchangeClick=t.onDrop=t.handleDragEnd=t.handleDragLeave=t.handleDragEnter=t.handleDragOver=t.onMouseMove=t.onMouseOut=t.onMouseOver=t.onMouseLeave=t.onMouseEnter=t.onMouseUp=void 0;var s=n(11),u=o(s);t.selectElements=r;var l=n(36),d=o(l),c=(n(21),
n(9)),p=n(28),f=n(61),g=(t.onMouseUp=function(e,t,n){e.setState({tooltip:{isShown:!1}})},t.onMouseEnter=function(e,t,n){var o=e.props,a=o.t,r=o.data,i=r.capability,s=e.state.elementArray,u=s.filter(function(e){return e.get("isSelected")}),l=u.filter(function(e){return e.get("id")===t.get("id")}).size,d=[c.elementTypes.text,c.elementTypes.paintedText];if(!t.get("text")&&!l&&d.indexOf(t.get("type"))!==-1){var p=(0,f.findKonvaObjectById)(e.unselectElements,t.get("id")),g=p.getParent(),h=g.getClientRect(),m=r.summary,v=r.size,y=m.get("isCover"),M=0;M=y?v.renderCoverSheetSizeWithoutBleed.height+(v.renderCoverSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2:v.renderInnerSheetSizeWithoutBleed.height+(v.renderInnerSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2,e.setState({tooltip:{isShown:!0,content:a("DOUBLE_CLICK_TO_EDIT_TEXT"),elementRect:h,containerHeight:M}})}if(c.elementTypes.photo===t.get("type")&&i.get("canShowSnackBar")&&t.get("encImgId")){var I=r.page,T=r.ratio,w=(r.project,r.summary),E=t.get("computed"),b=t.get("templateId"),S=(E.get("isLeft"),46),D=I.get("bleed"),A=D.map(function(e){return Math.floor(e*T.workspace)}),N=Math.round(I.get("height")*T.workspace),_=N-S-A.get("bottom"),C=E.get("top")+E.get("height")-S,P=E.get("left"),x=(w.get("isCover"),E.get("width"));e.setState({snackBar:{isShown:!0,left:P,top:C>_?_:C,width:x,templateId:b},currentPointPhotoElementId:t.get("id")}),e.clearHideSnackBarTimer()}},t.onMouseLeave=function(e,t,n){e.setState({tooltip:{isShown:!1}}),c.elementTypes.photo===t.get("type")&&e.delayHideSnackBar()},t.onMouseOver=function(e,t,n){var o=e.props.data.capability;t&&o.get("canSelectElement")&&(t.getStage().content.style.cursor="pointer")},t.onMouseOut=function(e,t,n){t&&(t.getStage().content.style.cursor="default");var o=e.props.data.capability;o.get("canShowOriginalPhotoLayer")&&e.setState({originalPhotoLayer:{isShown:!1}})},t.onMouseMove=function(e,t,n){var o=e.props.data.capability;if(o.get("canShowOriginalPhotoLayer")){var a=30,r=n.evt,s=r.pageX+a,u=r.pageY+a;s+500>window.innerWidth&&(s=r.pageX-500-a),e.setState({originalPhotoLayer:{isShown:!0,x:s,y:u,imageUrl:i(t.getIn(["computed","imgUrl"]))}})}},t.handleDragOver=function(e,t){g(t)},t.handleDragEnter=function(e,t){e.setState({isDragOver:!0})},t.handleDragLeave=function(e,t){e.setState({isDragOver:!1})},t.handleDragEnd=function(e,t){e.setState({isDragOver:!1})},t.onDrop=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=e.state.downloadedImages,s=a.page,l=(a.ratio,a.paginationSpread,a.pagination),d=(a.parameters,r.boundProjectActions),f=r.boundPaginationActions,h=a.elements,m=h.maxBy(function(e){return e.get("dep")}),v=((m?m.get("dep"):0)+1,n||window.event),y=(0,p.getTransferData)(v);if(y){if(s&&l.pageId!==s.get("id")&&s.get("type")!==c.pageTypes.spine){var M=1===l.pageIndex?0:1;f.switchPage(M,s.get("id"))}if(y.length){var I=y[0],T=t.get("id"),w={id:T,encImgId:I.encImgId,imageid:I.imageid,imgRot:0,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1};d.updateElement(w)}var E=(0,u.default)({},i);E[t.get("id")]=null,e.setState({isDragOver:!1,downloadedImages:E}),g(n)}},t.onExchangeClick=function(e){e.setState({showVisualExchange:!0})},t.onExchangeDragStart=function(e,t,n,o,a){var r=a.evt||window.event;(0,p.setTransferDataByNode)({pageId:t,elementId:n}),e.setState({isExchangeImage:!0,exchangeImageThumbnail:o}),__app.isExchangeImage=!0,g(r)},t.onExchangeDragMove=function(e,t){var n=t.evt||window.event,o=n.pageX,a=n.pageY,r={x:o,y:a};e.setState({exchangeThumbnailRect:r})},t.onExchangeDragEnd=function(e,t){var n=t.evt||window.event;e.setState({isExchangeImage:!1,isDragOver:!1}),(0,p.getTransferDataByNode)(n),delete __app.isExchangeImage},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=t.get("encImgId");if(o){var a=e.props,r=a.data,i=a.actions,s=i.boundProjectActions,u=r.paginationSpread,l=u.get("images"),d=l.get(o),c=d.get("width")/d.get("height"),p={id:t.get("id")};p=t.get("width")>t.get("height")?(0,h.default)({},p,{height:t.get("width")/c}):(0,h.default)({},p,{width:t.get("height")*c}),s.updateElement(p)}}function r(e,t){var n=t.minBy(function(e){return e.get("x")}),o=n.get("x"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){e.get("x")!==o&&(i=i.push(M.default.Map({id:e.get("id"),x:o})))}),i.size&&r.updateElements(i)}function i(e,t){var n=t.maxBy(function(e){return e.get("width")}),o=e.props.actions,a=o.boundProjectActions,r=M.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("x")+n.get("width")/2,o=t-e.get("width")/2;if(e.get("x")!==o){var a=M.default.Map({id:e.get("id"),x:o});r=r.push(a)}}}),r.size&&a.updateElements(r)}function s(e,t){var n=t.maxBy(function(e){return e.get("x")+e.get("width")}),o=n.get("x")+n.get("width"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){var t=o-e.get("width");e.get("x")!==t&&(i=i.push(M.default.Map({id:e.get("id"),x:t})))}),i.size&&r.updateElements(i)}function u(e,t){var n=t.minBy(function(e){return e.get("y")}),o=n.get("y"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){e.get("y")!==o&&(i=i.push(M.default.Map({id:e.get("id"),y:o})))}),i.size&&r.updateElements(i)}function l(e,t){var n=t.maxBy(function(e){return e.get("height")}),o=e.props.actions,a=o.boundProjectActions,r=M.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("y")+n.get("height")/2,o=t-e.get("height")/2;if(e.get("y")!==o){var a=M.default.Map({id:e.get("id"),y:o});r=r.push(a)}}}),r.size&&a.updateElements(r)}function d(e,t){var n=t.maxBy(function(e){return e.get("y")+e.get("height")}),o=n.get("y")+n.get("height"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){var t=o-e.get("height");e.get("y")!==t&&(i=i.push(M.default.Map({id:e.get("id"),y:t})))}),i.size&&r.updateElements(i)}function c(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("x")-t.get("x")}),o=0;n.forEach(function(e,t){var a=t-1;if(a>=0){var r=n.get(t-1),i=e.get("x")-(r.get("x")+r.get("width"));o+=i}});var a=n.size,r=o/(a-1),i=e.props.actions,s=i.boundProjectActions,u=M.default.List();n.forEach(function(e,t){if(0===t||t===a-1)u=u.push(null);else{var o=n.get(t-1),i=u.get(t-1),s=o.get("x");i&&(s=i.get("x"));var l=s+o.get("width")+r;if(e.get("x").toFixed(12)!==l.toFixed(12)){var d=M.default.Map({id:e.get("id"),x:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function p(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("y")-t.get("y")}),o=0;n.forEach(function(e,t){var a=t-1;if(a>=0){var r=n.get(t-1),i=e.get("y")-(r.get("y")+r.get("height"));o+=i}});var a=n.size,r=o/(a-1),i=e.props.actions,s=i.boundProjectActions,u=M.default.List();n.forEach(function(e,t){if(0===t||t===a-1)u=u.push(null);else{var o=n.get(t-1),i=u.get(t-1),s=o.get("y");i&&(s=i.get("y"));var l=s+o.get("height")+r;if(e.get("y").toFixed(12)!==l.toFixed(12)){var d=M.default.Map({id:e.get("id"),y:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function f(e,t){var n=e.props,o=(n.data,n.actions);o.boundProjectActions.deleteElements(t.map(function(e){return e.get("id")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.onMatchFirstSelectWidthAndHeight=t.onMatchShortestHeight=t.onMatchTallestHeight=t.onMatchNarrowestWidth=t.onMatchWidestWidth=t.toggleModal=t.onEditText=t.onSendBackward=t.onBringForward=t.onSendToback=t.onBringToFront=t.onUploadImage=t.onRemoveImage=t.onFilter=t.onExpandToRightPage=t.onExpandToLeftPage=t.onExpandToFullSheet=t.onFlipImage=t.onRotateImage=t.onEditImage=void 0;var g=n(18),h=o(g),m=n(11),v=o(m);t.onFitFrameToImage=a,t.onAlignLeft=r,t.onAlignCenter=i,t.onAlignRight=s,t.onAlignTop=u,t.onAlignMiddle=l,t.onAlignBottom=d,t.onSpaceHorizontal=c,t.onSpaceVertical=p,t.onClearAll=f;var y=n(2),M=o(y),I=n(35),T=n(21),w=n(9),E=n(146),b=n(29),S=o(b),D=function(e,t,n,o,a,r){var i=e.props,s=i.data,u=i.actions,l=u.boundProjectActions;s.images;l.updateElement({id:t.get("id"),x:n,y:o,rot:0,width:a,height:r})},A=(t.onEditImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundImageEditModalActions,s=r.boundProjectActions,u=a.images,l=(a.elements,a.ratio),d=(t.get("width"),t.get("height"),t.toJS()),c=d.computed,p=d.encImgId,f=d.imgRot,g=d.imageid,h=d.cropLUX,m=d.cropLUY,y=d.cropRLX,M=d.cropRLY,I=c.width,T=c.height,w=u.get(p),E=w.toJS(),b=E.width,D=E.height,A=E.name;i.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:p,imageId:p?0:g,rotation:f,imageWidth:b,imageHeight:D,imageName:A,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:h,cropLUY:m,cropRLX:y,cropRLY:M},securityString:S.default,onDoneClick:function(e,n,o){s.updateElement((0,v.default)({},n,{imgRot:o,id:t.get("id")}))}})},t.onRotateImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i={0:90,90:180,180:-90,"-90":0},s=r.boundProjectActions,u=(a.page,a.ratio,a.images),l=t.toJS(),d=l.imgRot,c=l.encImgId,p=u.get(c),f=t.getIn(["computed","width"]),g=t.getIn(["computed","height"]),h=p.toJS(),m=h.width,v=h.height,y=i[d],M=(0,T.getCropOptions)(m,v,f,g,y),I=(0,T.getCropLRByOptions)(M.px,M.py,M.pw,M.ph);s.updateElement({id:t.get("id"),imgRot:y,cropLUX:I.cropLUX,cropLUY:I.cropLUY,cropRLX:I.cropRLX,cropRLY:I.cropRLY})},t.onFlipImage=function(e,t,n){var o=e.props.actions,a=o.boundProjectActions,r=t.get("imgFlip");a.updateElement({id:t.get("id"),imgFlip:!r})},t.onExpandToFullSheet=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width"),i=a.get("height");D(e,t,0,0,r,i)},t.onExpandToLeftPage=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width")/2,i=a.get("height");D(e,t,0,0,r,i)},t.onExpandToRightPage=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width")/2,i=a.get("height");D(e,t,a.get("width")/2,0,r,i)},t.onFilter=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.images,s=(a.page,a.ratio),u=(t.get("computed"),r.boundPropertyModalActions),l=i.get(t.get("encImgId")).toJS(),d=l.name.split(".")[0];u.showPropertyModal({isShown:!0,imgWidth:l.width,imgHeight:l.height,element:t.toJS(),ratio:s.workspace,filename:d,onPropertyModalClosed:function(){e.elementControlsNode.needRedrawElementControlsRect()}})},t.onRemoveImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.page,s=r.boundProjectActions;t.get("type")===w.elementTypes.photo?t.get("encImgId")?s.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0}):s.deleteElement(t.get("id"),i.get("id")).then(function(){}):s.deleteElement(t.get("id"),i.get("id"))},t.onUploadImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions;(0,I.findDOMNode)(e.fileUpload).click();var i=r.boundImagesActions,s=a.page,u=t.get("pw")*s.get("width"),l=t.get("ph")*s.get("height"),d=t.get("id"),c=t.get("imgRot");i.autoAddPhotoToCanvas({status:!0,elementId:d,elementWidth:u,elementHeight:l,imgRot:c})},t.onBringToFront=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundProjectActions,s=a.elements,u=s.maxBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")+1})},t.onSendToback=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundProjectActions,s=a.elements,u=s.minBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")-1})},t.onBringForward=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")>t.get("dep")}),l=A(u,t),d=l.minBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")<d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.maxBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")>t.get("dep")})),f=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var g=1;u.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")-g,g++):n-=p.size,f.push({id:e.get("id"),dep:n})})}s.updateElements(f)}},t.onSendBackward=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")<t.get("dep")}),l=A(u,t),d=l.maxBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")>d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.minBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")<t.get("dep")})),f=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var g=1;c.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")+g,g++):n+=p.size,f.push({id:e.get("id"),dep:n})})}s.updateElements(f)}},t.onEditText=function(e,t,n){var o=e.props,a=o.actions,r=(o.data,a.boundTextEditModalActions);r.showTextEditModal({element:t})},function(e,t){var n=(0,y.List)([]),o={x:t.get("x"),y:t.get("y"),width:t.get("width"),height:t.get("height")};return e.forEach(function(e){var a={x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height")},r=(0,E.collision)(o,a);e.get("id")!==t.get("id")&&r&&(n=n.push(e))}),n});t.toggleModal=function(e,t,n){var o=e.props.actions,a=o.boundUploadImagesActions;a.toggleUpload(n)},t.onMatchWidestWidth=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.maxBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==a.get("width")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),width:a.get("width")})});i.size&&o.updateElements(i)},t.onMatchNarrowestWidth=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.minBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==a.get("width")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),width:a.get("width")})});i.size&&o.updateElements(i)},t.onMatchTallestHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.maxBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==a.get("height")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),height:a.get("height")})});i.size&&o.updateElements(i)},t.onMatchShortestHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.minBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==a.get("height")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),height:a.get("height")})});i.size&&o.updateElements(i)},t.onMatchFirstSelectWidthAndHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.sort(function(e,t){return e.get("dateSelected")-t.get("dateSelected")}),r=a.first(),i=t.filter(function(e){return e.get("width")!==r.get("width")||e.get("height")!==r.get("height")}),s=i.map(function(e){return M.default.Map({id:e.get("id"),width:r.get("width"),height:r.get("height")})});s.size&&o.updateElements(s)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=u.default.List(),a=t||e.props,r=a.data,i=e.state.elementArray,s=r.page.get("elements"),l=r.settings;return s.forEach(function(t){var r=e.computedElementOptions(a,t,n,l),s=i.find(function(e){return e.get("id")===t.get("id")}),u={isDisabled:!1,isSelected:!1};s&&(u.isDisabled=s.get("isDisabled"),u.isSelected=s.get("isSelected")),o=o.push(t.merge({computed:r},u))}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.changeCurrentElement=t.onPageDroped=t.onPageDragLeave=t.onPageDragMove=t.onPageDragOver=t.componentWillReceiveProps=t.componentWillMount=t.activePage=t.switchPage=t.getOffset=t.stopEvent=void 0;var r=n(18),i=o(r),s=n(2),u=o(s),l=n(9),d=n(45),c=o(d),p=n(21),f=n(28),g=n(122),h=t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()},m=t.getOffset=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,o=0;if(e){var a=e.get("width"),r=l.defaultFrameOptions.default.value;e.get("type")!==l.pageTypes.page&&e.get("type")!==l.pageTypes.back&&e.get("type")!==l.pageTypes.front||(r=l.defaultFrameOptions.ps.value),n=a*r,o=n/t,t<1&&(o=n,n=o*t)}return{width:n,height:o}},y=function(e,t,n,o,a,r){var s=e.props,u=s.data,d=(s.actions,u.ratio),f=u.elements,g=u.paginationSpread,h=u.pagination,y=u.parameters,M=u.settings,I=n.width,T=n.height,w=n.width/n.height,E=v(t,w),b=E.width,S=E.height,D=80,A=b*d.workspace,N=S*d.workspace,_=t.get("width")*d.workspace,C=t.get("height")*d.workspace,P=m(document.querySelector(".spreads-list .inner-sheet")?document.querySelector(".spreads-list .inner-sheet"):document.querySelector(".spreads-list .cover-sheet")),x=a-P.left,O=r-P.top,L=o*D,j=o*D,k=g.getIn(["pages",0]),z=y.get("pageBleed"),R=(k.get("width")-z.get("left")-z.get("right"))*d.workspace;h.pageIndex>=1&&(x-=R),x<=0&&(x=0),O<=0&&(O=0),x>=_-A&&(x=_-A,L-=2*D),O>=C-N&&(O=C-N,j-=2*D);var U=x/d.workspace+L,B=O/d.workspace+j,Y={x:U,y:B},W=(0,p.getCropOptions)(I,T,b*d.workspace,S*d.workspace,0),F=(W.cropLUX,W.cropLUY,W.cropRLX,W.cropRLY,f.maxBy(function(e){return e.get("dep")})),H=(F?F.get("dep"):0)+1+o,G=void 0;if(n.type===l.elementTypes.photo){var Q=M.calendarSetting,X=Q.border;G=new c.default({type:l.elementTypes.photo,x:Y.x,y:Y.y,width:b,height:S,encImgId:n.encImgId,imageid:n.imageid,dep:H,border:X,px:null,py:null,pw:null,ph:null})}else n.type===l.elementTypes.sticker&&(G={type:l.elementTypes.decoration,x:Y.x,y:Y.y,width:b,height:S,decorationid:n.guid,decorationtype:l.elementTypes.sticker,rot:0,dep:H});return(0,i.default)({},G)},M=function(e,t,n,o){var a=e.props.data,r=a.pagination,i=a.paginationSpread,s=r.pageId,u=i.get("pages"),l=u.find(function(e){return e.get("id")===s}),d=[];return t.map(function(t,a){d.push(y(e,l,t,a,n,o))}),d},I=function(e,t,n,o,a){var r=e.props,i=r.data,s=r.actions,u=(i.settings,i.pagination),l=i.paginationSpread,d=s.boundProjectActions,c=u.pageId,p=l.get("pages"),f=p.find(function(e){return e.get("id")===c}),g=y(e,f,t,0,o,a);return d.createElement(g)},T=t.switchPage=function(e,t,n){var o=e.props,a=o.actions,r=o.data,i=a.boundPaginationActions,s=r.page,u=r.index,l=r.pagination;i&&s&&s.get("enabled")&&l.pageId!==s.get("id")&&i.switchPage(u,s.get("id")).then(function(){n&&n()})};t.activePage=function(e){var t=e.props,n=t.actions,o=t.data,a=o.page;n.activePage(a.get("id"))},t.componentWillMount=function(e){var t=e.props.data,n=(t.page,t.ratio);t.paginationSpread,t.size;e.setState({elementArray:a(e,e.props,n.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data,o=t.data,r=n.paginationSpread,i=o.paginationSpread,s=n.page,l=o.page,d=s.get("elements"),c=l.get("elements"),p=n.ratio.workspace,f=o.ratio.workspace,h=n.pagination.pageId,m=o.pagination.pageId,v=n.activePageId,y=o.activePageId;if(!u.default.is(d,c)||p!==f||!u.default.is(r,i)){var M=a(e,t,f);e.setState({elementArray:M}),(0,g.toDownload)(e,M)}if(h!==m||v!==y){var I=a(e,t,f);e.setState({elementArray:I.map(function(e){return e.set("isSelected",!1)})},function(){(0,g.toDownload)(e)})}},t.onPageDragOver=function(e,t){e.setState({isDragOver:!0}),h(t)},t.onPageDragMove=function(e,t){e.setState({isDragOver:!0}),h(t)},t.onPageDragLeave=function(e,t){e.setState({isDragOver:!1}),h(t)},t.onPageDroped=function(e,t){var n=t||window.event,o=e.props,a=o.data,r=(o.actions,a.ratio,a.paginationSpread,a.pagination),i=(a.parameters,a.page),s=(a.elements,n.pageX),u=n.pageY,d=void 0;if(d=(0,f.getTransferData)(n)){1===r.pageIndex?0:1;if(d.length)if(i&&r.pageId!==i.get("id"))i.get("type")!==l.pageTypes.spine&&T(e,t,function(){var t=M(e,d,s,u);e.doAutoLayout(t)});else{var c=M(e,d,s,u);e.doAutoLayout(c)}else if(d.type===l.elementTypes.sticker)i&&r.pageId!==i.get("id")?i.get("type")!==l.pageTypes.spine&&T(e,t,function(){I(e,d,0,s,u)}):I(e,d,0,s,u);else if(d.type===l.dragTypes.template)if(i&&r.pageId!==i.get("id"))i.get("type")!==l.pageTypes.spine&&T(e,t,function(){var t=d,n=t.guid;e.applyTemplate(n)});else{var p=d,g=p.guid;e.applyTemplate(g)}e.setState({isDragOver:!1}),h(n)}},t.changeCurrentElement=function(e,t){e.setState({currentPointPhotoElementId:t})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.get("width"),o=e.get("height"),a=e.get("id");return new s.default(function(e,r){(0,p.default)(t,n,o).then(function(t){var n=t.isShowTextNotFit,o=t.blobUrl,i=new window.Image;i.onload=function(){e({elementId:a,imageObj:i,isShowTextNotFit:n,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},i.onerror=function(){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},i.src=o},function(){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})}).catch(function(e){r({elementId:a,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})})})}function r(e,t){var n=e.get("id");return new s.default(function(e,o){var a=new window.Image;a.onload=function(){e({elementId:n,imageObj:a,downloadStatus:d.downloadStatus.DOWNLOAD_SUCCESS})},a.onerror=function(){o({elementId:n,downloadStatus:d.downloadStatus.DOWNLOAD_FAIL})},a.src=t})}Object.defineProperty(t,"__esModule",{value:!0}),t.toDownload=void 0;var i=n(14),s=o(i),u=n(2),l=o(u),d=n(9),c=n(85),p=o(c);t.toDownload=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.props.data.page;if(o.get("type")!==d.pageTypes.spine){var i=e.state.downloadData,s=i,u=[];t&&t.size&&t.forEach(function(e){var t=e.get("id"),o=e.getIn(["computed","imgUrl"]),i=s.get(t)||l.default.Map();if(o&&(i.get("downloadUrl")!==o||i.get("downloadStatus")!==d.downloadStatus.DOWNLOAD_SUCCESS))switch(s=s.set(t,i.merge({downloadStatus:d.downloadStatus.DOWNLOADING,downloadUrl:o})),e.get("type")){case d.elementTypes.photo:var c=n?o+"&randomNumber="+Math.random():o;u.push(r(e,c));break;case d.elementTypes.calendar:u.push(r(e,o));break;case d.elementTypes.text:u.push(a(e,o))}});var c=function(t){var n=e.state.downloadData,o=t.elementId;delete t.elementId;var a=n.get(o)||l.default.Map();e.setState({downloadData:n.set(o,a.merge(t))})};u.forEach(function(e){e.then(c,c)}),e.setState({downloadData:s})}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t,dateSelected:Date.now()})})}function r(e,t,n){if(t.get("type")===c.elementTypes.calendar)return null;var o=e.state.elementArray,r=t.get("id"),i=o.find(function(e){return e.get("isSelected")&&e.get("isSpineText")}),s=o;!n.ctrlKey&&!n.metaKey||i?t.get("isSelected")||(s=a(o,r),e.clicksObj.clickElementId=r):s=o.map(function(e){if(e.get("isSpineText"))return e;if(r===e.get("id")){var t=!e.get("isSelected"),n={isSelected:t};return t&&(n.dateSelected=Date.now()),e.merge(n)}return e}),e.setState({elementArray:s})}function i(e){if(!e||e.indexOf("?")===-1)return"";var t=e.split("?"),n=t[0],o=d.default.parse(t[1]);return o.px=0,o.py=0,o.pw=1,o.ph=1,n+"?"+d.default.stringify(o)}Object.defineProperty(t,"__esModule",{value:!0}),t.stopEvent=t.onExchangeDragEnd=t.onExchangeDragMove=t.onExchangeDragStart=t.onExchangeClick=t.onDrop=t.handleDragEnd=t.handleDragLeave=t.handleDragEnter=t.handleDragOver=t.onMouseMove=t.onMouseOut=t.onMouseOver=t.onMouseLeave=t.onMouseEnter=t.onMouseUp=void 0;var s=n(11),u=o(s);t.selectElements=r;var l=n(36),d=o(l),c=(n(21),n(9)),p=n(28),f=n(61),g=(t.onMouseUp=function(e,t,n){e.setState({tooltip:{isShown:!1}})},t.onMouseEnter=function(e,t,n){var o=e.props,a=o.t,r=o.data,i=r.capability,s=e.state.elementArray,u=s.filter(function(e){return e.get("isSelected")}),l=u.filter(function(e){return e.get("id")===t.get("id")}).size,d=[c.elementTypes.text,c.elementTypes.paintedText];if(!t.get("text")&&!l&&d.indexOf(t.get("type"))!==-1){var p=(0,f.findKonvaObjectById)(e.unselectElements,t.get("id")),g=p.getParent(),h=g.getClientRect(),m=r.summary,v=r.size,y=m.get("isCover"),M=0;M=y?v.renderCoverSheetSizeWithoutBleed.height+(v.renderCoverSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2:v.renderInnerSheetSizeWithoutBleed.height+(v.renderInnerSheetSize.height-v.renderInnerSheetSizeWithoutBleed.height)/2,e.setState({tooltip:{isShown:!0,content:a("DOUBLE_CLICK_TO_EDIT_TEXT"),elementRect:h,containerHeight:M}})}if(c.elementTypes.photo===t.get("type")&&i.get("canShowSnackBar")&&t.get("encImgId")){var I=r.page,T=r.ratio,w=(r.project,r.summary),E=t.get("computed"),b=t.get("templateId"),S=(E.get("isLeft"),46),D=I.get("bleed"),A=D.map(function(e){return Math.floor(e*T.workspace)}),N=Math.round(I.get("height")*T.workspace),_=N-S-A.get("bottom"),C=E.get("top")+E.get("height")-S,P=E.get("left"),x=(w.get("isCover"),E.get("width"));e.setState({snackBar:{isShown:!0,left:P,top:C>_?_:C,width:x,templateId:b},currentPointPhotoElementId:t.get("id")}),e.clearHideSnackBarTimer()}},t.onMouseLeave=function(e,t,n){e.setState({tooltip:{isShown:!1}}),c.elementTypes.photo===t.get("type")&&e.delayHideSnackBar()},t.onMouseOver=function(e,t,n,o){var a=e.props.data.capability;t&&a.get("canSelectElement")&&(n.get("encImgId")||n.get("type")===c.elementTypes.text)&&(t.getStage().content.style.cursor="pointer")},t.onMouseOut=function(e,t,n){t&&(t.getStage().content.style.cursor="default");var o=e.props.data.capability;o.get("canShowOriginalPhotoLayer")&&e.setState({originalPhotoLayer:{isShown:!1}})},t.onMouseMove=function(e,t,n){var o=e.props.data.capability;if(o.get("canShowOriginalPhotoLayer")){var a=30,r=n.evt,s=r.pageX+a,u=r.pageY+a;s+500>window.innerWidth&&(s=r.pageX-500-a),e.setState({originalPhotoLayer:{isShown:!0,x:s,y:u,imageUrl:i(t.getIn(["computed","imgUrl"]))}})}},t.handleDragOver=function(e,t){g(t)},t.handleDragEnter=function(e,t){e.setState({isDragOver:!0})},t.handleDragLeave=function(e,t){e.setState({isDragOver:!1})},t.handleDragEnd=function(e,t){e.setState({isDragOver:!1})},t.onDrop=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=e.state.downloadedImages,s=a.page,l=(a.ratio,a.paginationSpread,a.pagination),d=(a.parameters,r.boundProjectActions),f=r.boundPaginationActions,h=a.elements,m=h.maxBy(function(e){return e.get("dep")}),v=((m?m.get("dep"):0)+1,n||window.event),y=(0,p.getTransferData)(v);if(y){if(s&&l.pageId!==s.get("id")&&s.get("type")!==c.pageTypes.spine){var M=1===l.pageIndex?0:1;f.switchPage(M,s.get("id"))}if(y.length){var I=y[0],T=t.get("id"),w=parseInt(I.orientation)||0,E={id:T,encImgId:I.encImgId,imageid:I.imageid,imgRot:w,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1};d.updateElement(E)}var b=(0,u.default)({},i);b[t.get("id")]=null,e.setState({isDragOver:!1,downloadedImages:b}),g(n)}},t.onExchangeClick=function(e){e.setState({showVisualExchange:!0})},t.onExchangeDragStart=function(e,t,n,o,a){var r=a.evt||window.event;(0,p.setTransferDataByNode)({pageId:t,elementId:n}),e.setState({isExchangeImage:!0,exchangeImageThumbnail:o}),__app.isExchangeImage=!0,g(r)},t.onExchangeDragMove=function(e,t){var n=t.evt||window.event,o=n.pageX,a=n.pageY,r={x:o,y:a};e.setState({exchangeThumbnailRect:r})},t.onExchangeDragEnd=function(e,t){var n=t.evt||window.event;e.setState({isExchangeImage:!1,isDragOver:!1}),(0,p.getTransferDataByNode)(n),delete __app.isExchangeImage},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=t.get("encImgId");if(o){var a=e.props,r=a.data,i=a.actions,s=i.boundProjectActions,u=r.paginationSpread,l=u.get("images"),d=l.get(o),c=d.get("width")/d.get("height"),p={id:t.get("id")};p=t.get("width")>t.get("height")?(0,h.default)({},p,{height:t.get("width")/c}):(0,h.default)({},p,{width:t.get("height")*c}),s.updateElement(p)}}function r(e,t){var n=t.minBy(function(e){return e.get("x")}),o=n.get("x"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){e.get("x")!==o&&(i=i.push(M.default.Map({id:e.get("id"),x:o})))}),i.size&&r.updateElements(i)}function i(e,t){var n=t.maxBy(function(e){return e.get("width")}),o=e.props.actions,a=o.boundProjectActions,r=M.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("x")+n.get("width")/2,o=t-e.get("width")/2;if(e.get("x")!==o){var a=M.default.Map({id:e.get("id"),x:o});r=r.push(a)}}}),r.size&&a.updateElements(r)}function s(e,t){var n=t.maxBy(function(e){return e.get("x")+e.get("width")}),o=n.get("x")+n.get("width"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){var t=o-e.get("width");e.get("x")!==t&&(i=i.push(M.default.Map({id:e.get("id"),x:t})))}),i.size&&r.updateElements(i)}function u(e,t){var n=t.minBy(function(e){return e.get("y")}),o=n.get("y"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){e.get("y")!==o&&(i=i.push(M.default.Map({id:e.get("id"),y:o})))}),i.size&&r.updateElements(i)}function l(e,t){var n=t.maxBy(function(e){return e.get("height")}),o=e.props.actions,a=o.boundProjectActions,r=M.default.List();t.forEach(function(e){if(e.get("id")!==n.get("id")){var t=n.get("y")+n.get("height")/2,o=t-e.get("height")/2;if(e.get("y")!==o){var a=M.default.Map({id:e.get("id"),y:o});r=r.push(a)}}}),r.size&&a.updateElements(r)}function d(e,t){var n=t.maxBy(function(e){return e.get("y")+e.get("height")}),o=n.get("y")+n.get("height"),a=e.props.actions,r=a.boundProjectActions,i=M.default.List();t.forEach(function(e){var t=o-e.get("height");e.get("y")!==t&&(i=i.push(M.default.Map({id:e.get("id"),y:t})))}),i.size&&r.updateElements(i)}function c(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("x")-t.get("x")}),o=0;n.forEach(function(e,t){var a=t-1;if(a>=0){var r=n.get(t-1),i=e.get("x")-(r.get("x")+r.get("width"));o+=i}});var a=n.size,r=o/(a-1),i=e.props.actions,s=i.boundProjectActions,u=M.default.List();n.forEach(function(e,t){if(0===t||t===a-1)u=u.push(null);else{var o=n.get(t-1),i=u.get(t-1),s=o.get("x");i&&(s=i.get("x"));var l=s+o.get("width")+r;if(e.get("x").toFixed(12)!==l.toFixed(12)){var d=M.default.Map({id:e.get("id"),x:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function p(e,t){if(!(t.size<3)){var n=t.sort(function(e,t){return e.get("y")-t.get("y")}),o=0;n.forEach(function(e,t){var a=t-1;if(a>=0){var r=n.get(t-1),i=e.get("y")-(r.get("y")+r.get("height"));o+=i}});var a=n.size,r=o/(a-1),i=e.props.actions,s=i.boundProjectActions,u=M.default.List();n.forEach(function(e,t){if(0===t||t===a-1)u=u.push(null);else{var o=n.get(t-1),i=u.get(t-1),s=o.get("y");i&&(s=i.get("y"));var l=s+o.get("height")+r;if(e.get("y").toFixed(12)!==l.toFixed(12)){var d=M.default.Map({id:e.get("id"),y:l});u=u.push(d)}else u=u.push(null)}});var l=u.filter(function(e){return e});l.size&&s.updateElements(l)}}function f(e,t){var n=e.props,o=(n.data,n.actions);o.boundProjectActions.deleteElements(t.map(function(e){return e.get("id")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.onMatchFirstSelectWidthAndHeight=t.onMatchShortestHeight=t.onMatchTallestHeight=t.onMatchNarrowestWidth=t.onMatchWidestWidth=t.toggleModal=t.onEditText=t.onSendBackward=t.onBringForward=t.onSendToback=t.onBringToFront=t.onUploadImage=t.onRemoveImage=t.onFilter=t.onExpandToRightPage=t.onExpandToLeftPage=t.onExpandToFullSheet=t.onFlipImage=t.onRotateImage=t.onEditImage=void 0;var g=n(18),h=o(g),m=n(11),v=o(m);t.onFitFrameToImage=a,t.onAlignLeft=r,t.onAlignCenter=i,t.onAlignRight=s,t.onAlignTop=u,t.onAlignMiddle=l,t.onAlignBottom=d,t.onSpaceHorizontal=c,t.onSpaceVertical=p,t.onClearAll=f;
var y=n(2),M=o(y),I=n(35),T=n(21),w=n(9),E=n(146),b=n(29),S=o(b),D=function(e,t,n,o,a,r){var i=e.props,s=i.data,u=i.actions,l=u.boundProjectActions;s.images;l.updateElement({id:t.get("id"),x:n,y:o,rot:0,width:a,height:r})},A=(t.onEditImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundImageEditModalActions,s=r.boundProjectActions,u=a.images,l=(a.elements,a.ratio),d=(t.get("width"),t.get("height"),t.toJS()),c=d.computed,p=d.encImgId,f=d.imgRot,g=d.imageid,h=d.cropLUX,m=d.cropLUY,y=d.cropRLX,M=d.cropRLY,I=c.width,T=c.height,w=u.get(p),E=w.toJS(),b=E.width,D=E.height,A=E.name;i.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:p,imageId:p?0:g,rotation:f,imageWidth:b,imageHeight:D,imageName:A,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:h,cropLUY:m,cropRLX:y,cropRLY:M},securityString:S.default,onDoneClick:function(e,n,o){s.updateElement((0,v.default)({},n,{imgRot:o,id:t.get("id")}))}})},t.onRotateImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i={0:90,90:180,180:-90,"-90":0},s=r.boundProjectActions,u=(a.page,a.ratio,a.images),l=t.toJS(),d=l.imgRot,c=l.encImgId,p=u.get(c),f=t.getIn(["computed","width"]),g=t.getIn(["computed","height"]),h=p.toJS(),m=h.width,v=h.height,y=i[d],M=(0,T.getCropOptions)(m,v,f,g,y),I=(0,T.getCropLRByOptions)(M.px,M.py,M.pw,M.ph);s.updateElement({id:t.get("id"),imgRot:y,cropLUX:I.cropLUX,cropLUY:I.cropLUY,cropRLX:I.cropRLX,cropRLY:I.cropRLY})},t.onFlipImage=function(e,t,n){var o=e.props.actions,a=o.boundProjectActions,r=t.get("imgFlip");a.updateElement({id:t.get("id"),imgFlip:!r})},t.onExpandToFullSheet=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width"),i=a.get("height");D(e,t,0,0,r,i)},t.onExpandToLeftPage=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width")/2,i=a.get("height");D(e,t,0,0,r,i)},t.onExpandToRightPage=function(e,t,n){var o=e.props.data,a=o.page,r=a.get("width")/2,i=a.get("height");D(e,t,a.get("width")/2,0,r,i)},t.onFilter=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.images,s=(a.page,a.ratio),u=(t.get("computed"),r.boundPropertyModalActions),l=i.get(t.get("encImgId")).toJS(),d=l.name.split(".")[0];u.showPropertyModal({isShown:!0,imgWidth:l.width,imgHeight:l.height,element:t.toJS(),ratio:s.workspace,filename:d,onPropertyModalClosed:function(){e.elementControlsNode.needRedrawElementControlsRect()}})},t.onRemoveImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.page,s=r.boundProjectActions,u=r.boundTrackerActions;t.get("type")===w.elementTypes.photo?t.get("encImgId")?(u.addTracker("ClickDeleteImage,SinglePage"),s.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0})):s.deleteElement(t.get("id"),i.get("id")).then(function(){}):s.deleteElement(t.get("id"),i.get("id"))},t.onUploadImage=function(e,t,n){var o=e.props,a=o.data,r=o.actions;(0,I.findDOMNode)(e.fileUpload).click();var i=r.boundImagesActions,s=a.page,u=t.get("pw")*s.get("width"),l=t.get("ph")*s.get("height"),d=t.get("id"),c=t.get("imgRot");i.autoAddPhotoToCanvas({status:!0,elementId:d,elementWidth:u,elementHeight:l,imgRot:c})},t.onBringToFront=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundProjectActions,s=a.elements,u=s.maxBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")+1})},t.onSendToback=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=r.boundProjectActions,s=a.elements,u=s.minBy(function(e){return e.get("dep")});t.get("type")===w.elementTypes.cameo||u&&u.get("type")===w.elementTypes.cameo||u&&i.updateElement({id:t.get("id"),dep:u.get("dep")-1})},t.onBringForward=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")>t.get("dep")}),l=A(u,t),d=l.minBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")<d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.maxBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")>t.get("dep")})),f=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var g=1;u.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")-g,g++):n-=p.size,f.push({id:e.get("id"),dep:n})})}s.updateElements(f)}},t.onSendBackward=function(e,t,n){var o=e.props,a=o.data,r=o.actions,i=a.elements,s=r.boundProjectActions,u=i.filter(function(e){return e.get("dep")<t.get("dep")}),l=A(u,t),d=l.maxBy(function(e){return e.get("dep")});if(!(t.get("type")===w.elementTypes.cameo||d&&d.get("type")===w.elementTypes.cameo)&&d){var c=i.filter(function(e){return e.get("dep")>d.get("dep")&&e.get("id")!==t.get("id")}),p=(c.minBy(function(e){return e.get("dep")}),c.filter(function(e){return e.get("dep")<t.get("dep")})),f=[{id:t.get("id"),dep:d.get("dep")},{id:d.get("id"),dep:t.get("dep")}];if(p&&p.size){var g=1;c.forEach(function(e){var n=e.get("dep");n<t.get("dep")?(n=t.get("dep")+g,g++):n+=p.size,f.push({id:e.get("id"),dep:n})})}s.updateElements(f)}},t.onEditText=function(e,t,n){var o=e.props,a=o.actions,r=o.data,i=a.boundTextEditModalActions,s=a.boundPaintedTextModalActions;r.page.get("type")===w.pageTypes.spine||t.get("isSpineText")?s.showPaintedTextModal({element:t}):i.showTextEditModal({element:t})},function(e,t){var n=(0,y.List)([]),o={x:t.get("x"),y:t.get("y"),width:t.get("width"),height:t.get("height")};return e.forEach(function(e){var a={x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height")},r=(0,E.collision)(o,a);e.get("id")!==t.get("id")&&r&&(n=n.push(e))}),n});t.toggleModal=function(e,t,n){var o=e.props.actions,a=o.boundUploadImagesActions;a.toggleUpload(n)},t.onMatchWidestWidth=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.maxBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==a.get("width")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),width:a.get("width")})});i.size&&o.updateElements(i)},t.onMatchNarrowestWidth=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.minBy(function(e){return e.get("width")}),r=t.filter(function(e){return e.get("width")!==a.get("width")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),width:a.get("width")})});i.size&&o.updateElements(i)},t.onMatchTallestHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.maxBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==a.get("height")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),height:a.get("height")})});i.size&&o.updateElements(i)},t.onMatchShortestHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.minBy(function(e){return e.get("height")}),r=t.filter(function(e){return e.get("height")!==a.get("height")}),i=r.map(function(e){return M.default.Map({id:e.get("id"),height:a.get("height")})});i.size&&o.updateElements(i)},t.onMatchFirstSelectWidthAndHeight=function(e,t){var n=e.props.actions,o=n.boundProjectActions,a=t.sort(function(e,t){return e.get("dateSelected")-t.get("dateSelected")}),r=a.first(),i=t.filter(function(e){return e.get("width")!==r.get("width")||e.get("height")!==r.get("height")}),s=i.map(function(e){return M.default.Map({id:e.get("id"),width:r.get("width"),height:r.get("height")})});s.size&&o.updateElements(s)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=l.default.List(),a=t||e.props,r=a.data,i=e.state.elementArray,s=r.page.get("elements"),u=r.settings;return s.forEach(function(t){var r=e.computedElementOptions(a,t,n,u),s=i.find(function(e){return e.get("id")===t.get("id")}),l={isDisabled:!1,isSelected:!1};s&&(l.isDisabled=s.get("isDisabled"),l.isSelected=s.get("isSelected")),o=o.push(t.merge({computed:r},l))}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.changeCurrentElement=t.onPageDroped=t.onPageDragLeave=t.onPageDragMove=t.onPageDragOver=t.componentWillReceiveProps=t.componentWillMount=t.activePage=t.switchPage=t.getOffset=t.stopEvent=void 0;var r=n(18),i=(o(r),n(12)),s=o(i),u=n(2),l=o(u),d=(n(9),n(45)),c=(o(d),n(21),n(28),n(126)),p=t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()};t.getOffset=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:n,left:t}},t.switchPage=function(e,t,n){var o=e.props,a=o.actions,r=o.data,i=a.boundPaginationActions,s=r.page,u=r.index,l=r.pagination;i&&s&&s.get("enabled")&&l.pageId!==s.get("id")&&i.switchPage(u,s.get("id")).then(function(){n&&n()})},t.activePage=function(e){var t=e.props,n=t.actions,o=t.data,a=o.page;n.activePage(a.get("id"))},t.componentWillMount=function(e){var t=e.props.data,n=(t.page,t.ratio);t.paginationSpread,t.size;e.setState({elementArray:a(e,e.props,n.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data,o=t.data,r=n.paginationSpread,i=o.paginationSpread,u=n.page,d=o.page,p=u.get("elements"),f=d.get("elements"),g=n.ratio.workspace,h=o.ratio.workspace,m=n.pagination.pageId,v=o.pagination.pageId,y=n.activePageId,M=o.activePageId;if(!l.default.is(p,f)||g!==h||!l.default.is(r,i)){var I=a(e,t,h);e.setState({elementArray:I}),(0,c.toDownload)(e,I)}var T=(0,s.default)(e.props.data,"settings.spec.orientation"),w=(0,s.default)(t.data,"settings.spec.orientation");if(T!==w&&e.updateOffset(),m!==v||y!==M){var E=a(e,t,h);e.setState({elementArray:E.map(function(e){return e.set("isSelected",!1)})},function(){(0,c.toDownload)(e)})}},t.onPageDragOver=function(e,t){e.setState({isDragOver:!0}),p(t)},t.onPageDragMove=function(e,t){e.setState({isDragOver:!0}),p(t)},t.onPageDragLeave=function(e,t){e.setState({isDragOver:!1}),p(t)},t.onPageDroped=function(e,t){return null},t.changeCurrentElement=function(e,t){e.setState({currentPointPhotoElementId:t})}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(18),u=a(s),l=n(6),d=a(l),c=n(4),p=a(c),f=n(5),g=a(f),h=n(8),m=a(h),v=n(7),y=a(v),M=n(11),I=a(M),T=n(2),w=a(T),E=n(13),b=a(E),S=n(3),D=a(S),A=n(15),N=n(27),_=n(121),C=n(120),P=(a(C),n(9)),x=n(52),O=o(x),L=n(357),j=o(L),k=n(129),z=o(k),R=n(358),U=o(R),B=n(128),Y=o(B),W=n(356),F=o(W),H=n(41),G=o(H),Q=n(355),X=o(Q),Z=n(127),J=o(Z),V=n(126),q=n(359),K=(a(q),n(132)),$=a(K),ee=n(134),te=a(ee),ne=n(131),oe=a(ne),ae=n(410),re=a(ae),ie=n(74),se=a(ie),ue=n(61);n(226);var le=function(e){function t(e){(0,p.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));n.computedElementOptions=function(e,t,o,a){return j.computedElementOptions(n,e,t,o,a)},n.doAutoLayout=function(e){return F.doAutoLayout(n,e)},n.applyTemplate=function(e){return F.applyTemplate(n,e)},n.getRenderHtml=n.getRenderHtml.bind(n),n.toDownload=function(e,t){return(0,V.toDownload)(n,e,t)},n.addEventsToLayerOfElements=function(){return X.addEventsToLayerOfElements(n)},n.createNewPhotoFrame=function(){return X.createNewPhotoFrame(n)},n.setEndPosition=function(e){return X.setEndPosition(n,e)},n.onMouseUp=function(e,t){return J.onMouseUp(n,e,t)},n.onMouseEnter=function(e,t){return J.onMouseEnter(n,e,t)},n.onMouseLeave=function(e,t){return J.onMouseLeave(n,e,t)},n.onMouseOver=function(e,t,o){return J.onMouseOver(n,e,t,o)},n.onMouseOut=function(e,t,o){return J.onMouseOut(n,e,t,o)},n.onMouseMove=function(e,t){return J.onMouseMove(n,e,t)},n.onClick=function(e,t){return J.onClick(n,e,t)};return n.stopEvent=function(e){return z.stopEvent(e)},n.changeCurrentElement=function(e){return z.changeCurrentElement(n,e)},n.switchPage=function(e){return z.switchPage(n,e)},n.state={elementArray:w.default.List(),downloadData:w.default.Map(),tooltip:{isShown:!1,content:"",elementRect:{},containerHeight:0},snackBar:{isShown:!1,left:0,bottom:0,width:0,templateId:0},containerRect:null,isDragOver:!1,hoverBoxStyle:{},controlRectRot:0,isExchangeImage:!1,exchangeImageThumbnail:null,exchangeThumbnailRect:{},draggingCreatePhotoFrame:{startPosition:{x:0,y:0},endPosition:{x:0,y:0}},originalPhotoLayer:{isShown:!1,x:0,y:0,imageUrl:""},hideSnackBarTimer:null,currentPointPhotoElementId:-1},n.onElementArrayChange=n.onElementArrayChange.bind(n),n.updateElement=n.updateElement.bind(n),n.clearHideSnackBarTimer=n.clearHideSnackBarTimer.bind(n),n.delayHideSnackBar=n.delayHideSnackBar.bind(n),n.updateOffset=n.updateOffset.bind(n),n.delayUpdateOffset=n.delayUpdateOffset.bind(n),n.submitElementArray=n.submitElementArray.bind(n),n.syncControlDegree=n.syncControlDegree.bind(n),n.checkTextElementOverflowPage=n.checkTextElementOverflowPage.bind(n),n.clearSelected=n.clearSelected.bind(n),n.actionbarActions={onEditImage:function(e){return Y.onEditImage(n,e)},onRemoveImage:function(e){return Y.onRemoveImage(n,e)}},window.addEventListener("mousedown",n.clearSelected),window.addEventListener("mousemove",n.setEndPosition),window.addEventListener("mouseup",n.createNewPhotoFrame),window.addEventListener("resize",n.delayUpdateOffset),n.clicksObj={num:0,clickElementId:null},n}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){z.componentWillMount(this)}},{key:"componentDidMount",value:function(){this.toDownload(this.state.elementArray),this.addEventsToLayerOfElements(),this.delayUpdateOffset()}},{key:"componentWillReceiveProps",value:function(e){z.componentWillReceiveProps(this,e)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.clearSelected),window.removeEventListener("mousemove",this.setEndPosition),window.removeEventListener("mouseup",this.createNewPhotoFrame),window.removeEventListener("resize",this.delayUpdateOffset)}},{key:"updateOffset",value:function(){var e=this.props.data,t=(e.page,e.ratio,e.paginationSpread,e.size,e.parameters,{});this.stage&&(t=this.stage.getStage().getContainer().getBoundingClientRect()),this.elementControlsNode&&this.elementControlsNode.needRedrawElementControlsRect(),this.setState({containerRect:t})}},{key:"delayUpdateOffset",value:function(){var e=this;clearTimeout(this.updateOffsetTimer),this.updateOffsetTimer=setTimeout(function(){e.updateOffset()},500)}},{key:"clearSelected",value:function(){var e=this.state.elementArray,t=e.map(function(e){return e.set("isSelected",!1)});w.default.is(e,t)||this.setState({elementArray:t})}},{key:"onKeyDown",value:function(e){var t=e||window.event;if(t.ctrlKey)switch(t.keyCode){case 90:case 89:U.unSelectElements(this)}}},{key:"syncControlDegree",value:function(e){this.setState({controlRectRot:e})}},{key:"checkTextElementOverflowPage",value:function(e){var t=this.props.data,n=t.page,o=t.size,a=t.summary,r=t.ratio,i=!1;if(this.unselectElements){var s=(0,ue.findKonvaObjectById)(this.unselectElements,e.get("id"));if(s){var u=a.get("isCover"),l=u?o.renderCoverSheetSizeWithoutBleed:o.renderInnerSheetSizeWithoutBleed,d=n.get("bleed"),c=Math.floor(d.get("left")*r.workspace),p=Math.floor(d.get("top")*r.workspace),f=s.getParent(),g=f.getClientRect(),h=Math.floor(g.x),m=Math.floor(g.y),v=Math.floor(g.width),y=Math.floor(g.height);(h<c||m<p||h>l.width-v+c||m>l.height-y+p)&&(i=!0)}}return i}},{key:"getRenderHtml",value:function(e){var t=this,n=this.props,o=n.data,a=(n.t,o.isPreview),r=o.page,i=r.get("id"),s=[],u=this.state.downloadData,l=G.sortElementsByZIndex(e),d={onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove};return l&&l.size&&l.forEach(function(e){var n=e.get("id"),o=u.get(n)||w.default.Map(),r=t.checkTextElementOverflowPage(e),l={key:n,element:e,isPreview:a,actions:d,imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),isShowTextNotFit:o.get("isShowTextNotFit"),isShowTextOverflow:r,tryToDownload:function(){return t.toDownload(w.default.List([e]))}};switch(e.get("type")){case P.elementTypes.photo:var c=!0,p={key:n,element:e,isPreview:a,pageId:i,imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),actions:(0,I.default)({},d,{onElementArrayChange:t.onElementArrayChange,updateElement:t.updateElement,changeCurrentElement:t.changeCurrentElement}),tryToDownload:function(){return t.toDownload(w.default.List([e]),c)}};s.push(D.default.createElement($.default,p));break;case P.elementTypes.text:if(a&&!e.get("text"))return;s.push(D.default.createElement(te.default,l));break;case P.elementTypes.calendar:var f={key:n,element:e,isPreview:a,actions:{},imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),tryToDownload:function(){return t.toDownload(w.default.List([e]))}};s.push(D.default.createElement(oe.default,f))}}),s}},{key:"submitElementArray",value:function(e,t){var n=this.props,o=n.data,a=n.actions,r=o.ratio,i=o.page,s=o.paginationSpread,u=a.boundProjectActions,l=s.get("summary"),d=l.get("isSupportPaintedText"),c=l.get("isCover"),p=(i.get("width")*r.workspace,i.get("height")*r.workspace,i.get("bleed")),f=(p.get("left")*r.workspace,p.get("right")*r.workspace,p.get("top")*r.workspace,p.get("bottom")*r.workspace,this.elementControlsNode.state),g=f.x,h=f.y,m=f.width,v=f.height,y=f.degree,M=(0,_.transform)({x:g,y:h,width:m,height:v},y),I=(M.left,M.top,M.left+M.width,M.top+M.height,w.default.List()),T=!1;e.forEach(function(e){var n=e.get("computed"),o=n.get("width")/r.workspace,a=n.get("height")/r.workspace,i=n.get("left")/r.workspace,s=n.get("top")/r.workspace,u=w.default.Map({id:e.get("id")});switch(t){case"move":u=u.merge({x:i,y:s});break;case"resize":e.get("type")===P.elementTypes.paintedText&&c&&d||(u=u.merge({x:i,y:s,width:o,height:a}));break;case"rotate":e.get("type")===P.elementTypes.paintedText&&c&&d||(u=u.merge({rot:Math.round(e.get("rot")),x:i,y:s}));break;case"editImage":u=u.merge({encImgId:e.get("encImgId")})}u&&(I=I.push(u))}),I.size&&(u.updateElements(I),T&&this.elementControlsNode.needRedrawElementControlsRect())}},{key:"onElementArrayChange",value:function(e,t){var n=this.state.elementArray;this.setState({elementArray:n.map(function(t){var n=t.get("id"),o=e.find(function(e){return e.get("id")===n});return o?o:t})},function(){t&&t()})}},{key:"updateElement",value:function(e){var t=this.props.actions,n=t.boundProjectActions;delete e.computed,n.updateElement(e)}},{key:"clearHideSnackBarTimer",value:function(){var e=this.state.hideSnackBarTimer;window.clearTimeout(e)}},{key:"delayHideSnackBar",value:function(){var e=this,t=window.setTimeout(function(){e.state&&e.setState({snackBar:(0,u.default)({},e.state.snackBar,{isShown:!1})})},30);this.setState({hideSnackBarTimer:t})}},{key:"renderBackgroundTextElement",value:function(){var e=this,t=this.props,n=t.data,o=t.t,a=n.isPreview,r=n.page,i=(n.summary,r.get("enabled"));if(!a){var s=i?o("ENABLED_BACKGROUND_TIP"):"",u=O.defaultTextColor;if(s){var l=G.getBackgroundElementOptions(this,s,u);return l.ref=function(t){e.backgroundTextNode=t},D.default.createElement(N.Text,l)}}return null}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.actions,a=(t.t,this.state),r=a.isDragOver,s=(a.hoverBoxStyle,a.controlRectRot,a.downloadData),u=(a.isExchangeImage,a.exchangeThumbnailRect,n.page),l=n.ratio,d=n.summary,c=(n.settings,n.specData,n.isPreview,n.isBookCoverInnerWarp,n.innerEffectValue,o.boundImagesActions),p=u.get("enabled"),f=u.get("id"),g=d.get("isCover"),h=(u.get("isActive"),(0,b.default)("book-page",{enabled:p,disabled:!p,cover:g,inner:!g})),m={width:Math.round(u.get("width")*l.workspace),height:Math.round(u.get("height")*l.workspace)},v=this.state,y=v.elementArray,M=v.containerRect,I=(v.tooltip,v.snackBar),T=v.draggingCreatePhotoFrame,E=(v.originalPhotoLayer,v.currentPointPhotoElementId),S=w.default.List(),A=w.default.List();y.forEach(function(e){e.get("isSelected")?S=S.push(e):A=A.push(e)});var _=y.find(function(e){return e.get("id")===E}),C=y,x=!1;this.elementControlsNode&&this.elementControlsNode.isRotating&&(C=A,x=!0);var O=null,L=null,j=-1;1===S.size&&(L=S.get(0),j=L.get("id")),S.size&&S.getIn([0,"encImgId"])&&(O=s.getIn([j,"imageObj"]));var k=s.get(j)||w.default.Map(),z=((0,b.default)("box",{hover:r&&u.get("type")!==P.pageTypes.spine}),Boolean(S.size),L&&this.checkTextElementOverflowPage(L)),R={ref:function(t){return e.stage=t},width:m.width,height:m.height,className:h,onMouseDown:this.switchPage};({selectedElementArray:S,containerRect:M,ratio:l,submitElementArray:this.submitElementArray,onElementArrayChange:this.onElementArrayChange,minContainerWidth:Math.floor(360*l.workspace),selectedElements:this.selectedElements,showGuideLineIfNear:this.showGuideLineIfNear,hideAllGuideLines:this.hideAllGuideLines,snapToGuideLine:this.snapToGuideLine,syncControlDegree:this.syncControlDegree,actionbarActions:this.actionbarActions,restrictResize:this.restrictResize,checkSpineEdge:this.checkSpineEdge,onExchangeDragStart:function(t){e.onExchangeDragStart(f,j,O,t)},onExchangeDragMove:this.onExchangeDragMove,onExchangeDragEnd:this.onExchangeDragEnd,ref:function(t){return e.elementControlsNode=t},isShowTextNotFit:k.get("isShowTextNotFit"),isShowTextOverflow:z,downloadStatus:k.get("downloadStatus"),toDownload:this.toDownload,clicksObj:this.clicksObj});o.activePage&&(R.onMouseUp=this.activePage);var U=_&&_.get("encImgId"),B=(0,i.default)({},I,{isShowEdit:U,isShowDelete:U,actions:{onMouseEnter:this.clearHideSnackBarTimer,onMouseLeave:this.delayHideSnackBar,onEditImage:function(){e.actionbarActions.onEditImage(_)},onSwitchLayout:this.actionbarActions.onSwitchLayout,onDelete:function(){e.actionbarActions.onRemoveImage(_)}},element:_}),Y=T.startPosition,W=T.endPosition,F={fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};return Y&&W&&(F.x=Y.x,F.y=Y.y,F.width=W.x-Y.x,F.height=W.y-Y.y),D.default.createElement("div",{className:"stage-container"},D.default.createElement(N.Stage,R,D.default.createElement(N.Layer,{ref:function(t){return e.layerNodeOfElements=t}},D.default.createElement(N.Group,{ref:function(t){return e.unselectElements=t}},this.getRenderHtml(C)),D.default.createElement(N.Group,{ref:function(t){return e.selectedElements=t},visible:x},this.getRenderHtml(S)),y.size?null:this.renderBackgroundTextElement())),p?D.default.createElement(se.default,{className:"hide",boundUploadedImagesActions:c,toggleModal:this.toggleModal,ref:function(t){return e.fileUpload=t}}):null,_?D.default.createElement(re.default,B):null)}}]),t}(S.Component);le.propTypes={},le.defaultProps={},t.default=(0,A.translate)("BookPage")(le)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(6),u=a(s),l=n(4),d=a(l),c=n(5),p=a(c),f=n(8),g=a(f),h=n(7),m=a(h),v=n(2),y=a(v),M=n(3),I=a(M),T=n(27),w=n(9),E=n(41),b=o(E),S=n(81),D=a(S),A=n(80),N=a(A),_=function(e){function t(e){return(0,d.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,o=e.element;return!y.default.is(n,o)||this.props.imageObj!==e.imageObj||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,o=(t.isPreview,t.imageObj),a=(t.actions,t.tryToDownload),r=t.isScreenshot,s=b.getRenderElementOptions(n),u=s.imgUrl,l=s.offset,d=s.x,c=s.y,p=s.width,f=s.height,g=s.zIndex,h=Boolean(u),m=n.get("id"),v={x:d,y:c,width:p,height:f,offset:l,zIndex:g,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element"},y={x:0,y:0,width:p,height:f},M={width:p,height:f},E={width:p,height:f,tryToDownload:a},S=(0,i.default)({},y,{image:o,id:m});return I.default.createElement(T.Group,v,h&&this.props.downloadStatus!==w.downloadStatus.DOWNLOADING?I.default.createElement(T.Image,S):null,this.props.downloadStatus!==w.downloadStatus.DOWNLOADING||r?null:I.default.createElement(D.default,M),this.props.downloadStatus!==w.downloadStatus.DOWNLOAD_FAIL||r?null:I.default.createElement(N.default,E))}}]),t}(M.Component);_.propTypes={element:M.PropTypes.instanceOf(y.default.Map),imageObj:M.PropTypes.object,isShowTextNotFit:M.PropTypes.bool,isShowTextOverflow:M.PropTypes.bool,downloadStatus:M.PropTypes.number},t.default=_},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(6),u=a(s),l=n(4),d=a(l),c=n(5),p=a(c),f=n(8),g=a(f),h=n(7),m=a(h),v=n(3),y=a(v),M=n(2),I=a(M),T=n(15),w=n(27),E=n(133),b=a(E),S=n(9),D=n(41),A=o(D),N=n(81),_=a(N),C=n(80),P=a(C),x=function(e){function t(e){return(0,d.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,o=e.element;return!I.default.is(n,o)||this.props.imageObj!==e.imageObj||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,o=t.imageObj,a=t.isPreview,r=(t.t,t.actions),s=t.tryToDownload,u=t.isBookCoverInnerWarp,l=t.isScreenshot,d=A.getRenderElementOptions(n),c=d.imgUrl,p=d.offset,f=d.x,g=d.y,h=d.width,m=d.height,v=d.zIndex,M=Boolean(c),I=n.get("isSelected"),T=n.get("id"),E=n.getIn(["computed","border"]),D=E?E.get("size"):0,N={x:f,y:g,width:h,height:m,offset:p,zIndex:v,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element",onMouseEnter:function(e){r.onMouseEnter(n,e)},onMouseDown:function(t){e.isSelecting=!0},onMouseUp:function(t){e.isSelecting&&(e.isSelecting=!1,r.onMouseUp(n,t))},onMouseOver:function(t){r.onMouseOver(e.elementGroupNode,n,t)},onMouseOut:function(t){r.onMouseOut(e.elementGroupNode,t)},onMouseMove:function(e){r.onMouseMove(n,e)},onMouseLeave:function(e){r.onMouseLeave(n,e)}},C={x:0,y:0,width:h,height:m},x=(0,i.default)({},C,{image:o,id:T}),O=((0,i.default)({},C,{stroke:"#4CC1FC",strokeWidth:0}),{x:D/2,y:D/2,width:h-D,height:m-D,id:S.shapeType.elementBorder});D&&(O.stroke=E.get("color"),O.strokeWidth=D);var L=(0,i.default)({},C,{fill:"#f6f6f6",stroke:I?"#4CC1FC":"#dfdfdf",strokeWidth:1,id:T}),j={width:h-D,height:m-D},k={width:h-D,height:m-D,tryToDownload:s},z=n.getIn(["computed","scale"]),R=z>S.RESIZE_LIMIT;return y.default.createElement(w.Group,N,M&&this.props.downloadStatus!==S.downloadStatus.DOWNLOADING?y.default.createElement(w.Image,x):null,M?y.default.createElement(w.Rect,O):null,M||a?null:y.default.createElement(w.Rect,L),!M||a||!R||u||l?null:y.default.createElement(b.default,{parentWidth:h}),this.props.downloadStatus!==S.downloadStatus.DOWNLOADING||l?null:y.default.createElement(_.default,j),this.props.downloadStatus!==S.downloadStatus.DOWNLOAD_FAIL||l?null:y.default.createElement(P.default,k))}}]),t}(v.Component);x.propTypes={element:v.PropTypes.instanceOf(I.default.Map).isRequired,isPreview:v.PropTypes.bool,imageObj:v.PropTypes.object,downloadStatus:v.PropTypes.number},t.default=(0,T.translate)("PhotoElement")(x)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(136),v=o(m),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props.parentWidth,t="Photo has low resolution and may look poor in print",n=[];n.push(t);var o={parentWidth:e,title:n.join("\n")};return h.default.createElement(v.default,o)}}]),t}(g.Component);t.default=y},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(6),u=a(s),l=n(4),d=a(l),c=n(5),p=a(c),f=n(8),g=a(f),h=n(7),m=a(h),v=n(3),y=a(v),M=n(2),I=a(M),T=n(27),w=n(135),E=a(w),b=n(9),S=n(41),D=o(S),A=n(81),N=a(A),_=n(80),C=a(_),P=function(e){function t(){return(0,d.default)(this,t),(0,g.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,p.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.element,o=e.element;return!I.default.is(n,o)||this.props.imageObj!==e.imageObj||this.props.isShowTextNotFit!==e.isShowTextNotFit||this.props.isShowTextOverflow!==e.isShowTextOverflow||this.props.downloadStatus!==e.downloadStatus}},{key:"render",value:function(){var e=this,t=this.props,n=t.element,o=t.isPreview,a=t.imageObj,r=t.isShowTextNotFit,s=t.isShowTextOverflow,u=t.actions,l=t.tryToDownload,d=t.isScreenshot,c=D.getRenderElementOptions(n),p=c.imgUrl,f=c.offset,g=c.x,h=c.y,m=c.width,v=c.height,M=c.zIndex,I=Boolean(p),w=n.get("isSelected"),S=n.get("id"),A={x:g,y:h,width:m,height:v,offset:f,zIndex:M,ref:function(t){return e.elementGroupNode=t},rotation:n.get("rot"),draggable:!1,name:"element",onMouseDown:function(t){e.isSelecting=!0},onMouseUp:function(t){e.isSelecting&&(e.isSelecting=!1,u.onMouseUp(n,t))},onMouseEnter:function(e){u.onMouseEnter(n,e)},onMouseLeave:function(e){u.onMouseLeave(n,e)},onMouseOver:function(t){u.onMouseOver(e.elementGroupNode,n,t)},onMouseOut:function(t){u.onMouseOut(e.elementGroupNode,t)},onMouseMove:function(e){u.onMouseMove(n,e)}},_={x:0,y:0,width:m,height:v},P={width:m,height:v},x={width:m,height:v,tryToDownload:l},O=(0,i.default)({},_,{image:a,id:S}),L=(0,i.default)({},_,{stroke:"#4CC1FC",strokeWidth:1}),j=(0,i.default)({},_,{dash:[4,4],strokeWidth:1,id:S}),k=(0,i.default)({},_,{strokeWidth:1,stroke:"#fff"});w?j.stroke="#4CC1FC":j.stroke="#000";var z={parentHeight:v,isShowTextNotFit:r,isShowTextOverflow:s};return y.default.createElement(T.Group,A,w&&I?y.default.createElement(T.Rect,L):null,I?y.default.createElement(T.Image,O):null,I||o?null:y.default.createElement(T.Rect,k),I||o?null:y.default.createElement(T.Rect,j),!I||o||!r&&!s||d?null:y.default.createElement(E.default,z),this.props.downloadStatus!==b.downloadStatus.DOWNLOADING||d?null:y.default.createElement(N.default,P),this.props.downloadStatus!==b.downloadStatus.DOWNLOAD_FAIL||d?null:y.default.createElement(C.default,x))}}]),t}(v.Component);P.propTypes={element:v.PropTypes.instanceOf(I.default.Map),isPreview:v.PropTypes.bool,imageObj:v.PropTypes.object,isShowTextNotFit:v.PropTypes.bool,isShowTextOverflow:v.PropTypes.bool,downloadStatus:v.PropTypes.number},t.default=P},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(136),v=o(m),y=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShowTextNotFit,n=e.isShowTextOverflow,o=e.parentHeight,a="Text does not fit",r="Text is too close to edge and may not print well",i=[];t&&i.push(a),n&&i.push(r);var s={parentHeight:o,title:i.join("\n")};return h.default.createElement(v.default,s)}}]),t}(g.Component);t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{
default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(27),v=n(552),y=o(v),M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={imageObj:null},n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=new window.Image;t.onload=function(){e.setState({imageObj:t})},t.src=y.default}},{key:"onMouseEnter",value:function(){var e=this.props.title;this.imageNode.getStage().content.title=e}},{key:"onMouseLeave",value:function(){this.imageNode.getStage().content.title=""}},{key:"render",value:function(){var e=this,t=this.props,n=t.parentWidth,o=t.parentHeight,a=this.state.imageObj,r={ref:function(t){return e.imageNode=t},image:a,width:18,height:18,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave};return n&&(r.x=n-12-18,r.y=20),o&&(r.x=8,r.y=o-8-18),h.default.createElement(m.Image,r)}}]),t}(g.Component);M.propTypes={parentHeight:g.PropTypes.number,parentWidth:g.PropTypes.number,title:g.PropTypes.string.isRequired},t.default=M},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(11),y=a(v),M=n(13),I=a(M),T=n(15),w=n(3),E=a(w);n(229);var b=n(9),S=n(130),D=a(S),A=n(138),N=a(A),_=n(140),C=(a(_),n(364)),P=o(C),x=n(363),O=o(x),L=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.getPageElements=function(e,t){return P.getPageElements(n,e,t)},n.computedCoverSheet=function(e,t,n,o,a,r,i,s){return P.computedCoverSheet(e,t,n,o,a,r,i,s)},n.startExchangeImage=function(){return O.startExchangeImage(n)},n.stopExchangeImage=function(){return O.stopExchangeImage(n)},n.activePage=n.activePage.bind(n),n.switchSheet=n.switchSheet.bind(n),n.state={isExchangeImage:!1,activePageId:null},n.stopDragEvent=function(e){var t=e||window.event;t.stopPropagation(),t.preventDefault()},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"activePage",value:function(e){this.setState({activePageId:e})}},{key:"componentDidUpdate",value:function(){var e=this.props.data,t=e.pagination,n=e.paginationSpread,o=e.shouldSwitchSheet,a=void 0!==o&&o,r=n.get("summary"),i=r.get("sheetIndex");t.sheetIndex===i&&a&&(this.componentRef.scrollIntoViewIfNeeded?this.componentRef.scrollIntoViewIfNeeded():this.componentRef.scrollIntoView())}},{key:"switchSheet",value:function(){var e=this.props.data,t=e.onNavPagesSwitchSheet,n=e.shouldSwitchSheet,o=void 0!==n&&n;o&&t(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,o=t.data,a=n.boundTemplateActions,r=n.boundPaginationActions,i=n.boundProjectActions,s=n.boundImageEditModalActions,u=n.boundImagesActions,l=n.boundUploadImagesActions,d=n.boundTextEditModalActions,c=(n.boundPropertyModalActions,n.boundTrackerActions),p=(n.boundNotificationActions,n.switchSheet),f=n.setMouseHoverDomNode,g=o.thumbnail,h=o.urls,v=o.size,M=o.ratios,T=o.styles,w=(o.pageNumberStyle,o.variables),S=o.template,A=o.pagination,_=o.paginationSpread,C=o.settings,P=o.parameters,x=(o.specData,o.isShowSimplePageNumber,o.shouldSwitchSheet,o.allImages),O=o.userId,L=o.project,j=o.isPreview,k=o.capability,z=o.userInfo,R=o.allPageSheetIndex,U=this.state,B=(U.isExchangeImage,U.activePageId,_.get("summary")),Y=_.get("pages"),W=(_.get("elements"),_.get("images")),F=(0,I.default)("book-cover item"),H=(0,m.default)(C,"spec.product"),G=(0,m.default)(C,"spec.size"),Q=(0,m.default)(C,"spec.orientation"),X=g?"thumbnail_cover":"cover",Z="Landscape"===Q?G.split("X")[1]+"X"+G.split("X")[0]:G,J="./assets/"+H+"/"+Z+"/"+X+".png?randow=20171013",V=(0,y.default)({},{},{width:(0,m.default)(v,"renderCoverSize.width")+"px",height:(0,m.default)(v,"renderCoverSize.height")+"px",cursor:"default",marginBottom:H===b.productTypes.DC?"46px":H===b.productTypes.PC?0:"40px"},T),q=(0,y.default)({},{},{width:(0,m.default)(v,"renderCoverSize.width")+"px",height:(0,m.default)(v,"renderCoverSize.height")+"px",cursor:"default"},T),K={width:(0,m.default)(v,"renderCoverSize.width")+"px",height:(0,m.default)(v,"renderCoverSize.height")+"px",userSelect:"none"},$={width:(0,m.default)(v,"renderCoverSize.width")+"px",height:(0,m.default)(v,"renderCoverSize.height")+"px"},ee={boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundTrackerActions:c,boundTemplateActions:a,switchSheet:p,setMouseHoverDomNode:f},te={workspace:g?M.coverWorkspaceForArrangePages:M.coverWorkspace},ne=[];Y&&Y.size&&Y.forEach(function(e,t){var n={isPreview:j,urls:h,summary:B,page:e,images:W,elements:e.get("elements"),pagination:A,ratio:te,index:t,settings:C,template:S,paginationSpread:_,parameters:P,size:(0,y.default)(v),variables:w,allImages:x,userId:O,project:L,capability:k,allPageSheetIndex:R,userInfo:z},o={width:(0,m.default)(v,"renderCoverSheetSizeWithoutBleed.width")+"px",height:(0,m.default)(v,"renderCoverSheetSizeWithoutBleed.height")+"px",top:(0,m.default)(v,"renderCoverSheetSizeWithoutBleed.top")+"px",left:(0,m.default)(v,"renderCoverSheetSizeWithoutBleed.left")+"px"},a={width:(0,m.default)(v,"renderCoverSheetSize.width")+"px",height:(0,m.default)(v,"renderCoverSheetSize.height")+"px",top:(0,m.default)(v,"renderCoverSheetSize.top")+"px",left:(0,m.default)(v,"renderCoverSheetSize.left")+"px",userSelect:"none",background:"white"},r=(0,I.default)("cover-sheet",{"overflow-h":!1});g?ne.push(E.default.createElement("div",{key:e.get("id"),className:r,style:o},E.default.createElement("div",{className:"cover-sheet-with-bleed",style:a},E.default.createElement(N.default,{actions:ee,data:n})))):ne.push(E.default.createElement("div",{key:e.get("id"),className:r,style:o},E.default.createElement("div",{className:"cover-sheet-with-bleed",style:a},E.default.createElement(D.default,{actions:ee,data:n}))))});({pageNumberData:{month:B&&B.get("month"),year:B&&B.get("year"),sheetIndex:B&&B.get("sheetIndex")}});return E.default.createElement("div",{key:"cover",className:F,style:V,draggable:"false",onDragStart:this.stopDragEvent,onClick:this.switchSheet,ref:function(t){e.componentRef=t}},E.default.createElement("div",{className:"cover-overflow-container",style:q},E.default.createElement("div",{className:"cover-effect",style:K,draggable:"false",onDragStart:this.stopDragEvent},E.default.createElement("img",{className:"effect-img",src:J,style:$,draggable:"false",onDragStart:this.stopDragEvent})),ne))}}]),t}(w.Component);L.propTypes={},L.defaultProps={},t.default=(0,T.translate)("BookCover")(L)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(35),y=a(v),M=n(15),I=n(2),T=a(I),w=n(13),E=a(w),b=n(9);n(230);var S=n(396),D=a(S),A=n(413),N=a(A),_=n(370),C=a(_),P=n(57),x=a(P),O=n(109),L=a(O),j=n(28),k=n(365),z=o(k),R=n(366),U=o(R),B=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));n.computedElementOptions=function(e,t){return z.computedElementOptions(n,e,t)},n.getRenderHtml=n.getRenderHtml.bind(n),n.elementRadians={};var o=n.props.actions,a=o.setMouseHoverDomNode;o.actionbarActions;return n.state={elementArray:T.default.List(),photoActions:{handleMouseOver:function(e,t){var n=e.element;n.get("type")===b.elementTypes.photo&&a(t.target)},handleMouseLeave:function(e){var t=e.element;t.get("type")===b.elementTypes.photo&&a(null)},handleClick:function(e,t){var o=e.element;U.onEditImage(n,o)},removeImage:function(e){U.onRemoveImage(n,e)}},textActions:{handleDblClick:function(e,t){var o=e.element;U.onEditText(n,o)}},hoverElementId:null},n.onDragEnd=n.onDragEnd.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){U.componentWillMount(this)}},{key:"componentWillReceiveProps",value:function(e){U.componentWillReceiveProps(this,e)}},{key:"onDragStart",value:function(e,t,n){if(!window.__isDragPage){var o=y.default.findDOMNode(this.refs[t]),a=(0,j.cloneDragNode)(o,b.dragElementSelector.photo);(0,j.setTransferDragNode)(n,a),(0,j.setTransferData)(n,{pageId:e,elementId:t}),n.stopPropagation(),window.__dragElementId=t}}},{key:"onDragEnd",value:function(e){var t=document.getElementById(b.dragElementSelector.photo);t&&t.parentNode.removeChild(t),delete window.__dragElementId,this.setState({hoverElementId:null})}},{key:"onDragOver",value:function(e,t){if(!window.__isDragPage){window.__dragElementId;this.setState({hoverElementId:e}),t.stopPropagation()}}},{key:"onDragLeave",value:function(e){e===this.state.hoverElementId&&this.setState({hoverElementId:null})}},{key:"onDrop",value:function(e,t,n){var o=this.props.actions,a=o.boundProjectActions,r=n||window.event,i=(0,j.getTransferData)(r);if(this.setState({hoverElementId:null}),r.preventDefault(),i&&i.elementId&&t!==i.elementId)r.stopPropagation(),a.swapPhotoElement(i.pageId,i.elementId,e,t);else if(i instanceof Array&&i.length){var s=i[0],u={id:t,encImgId:s.encImgId,imageid:s.imageid,imgRot:0,style:{effectId:0,opacity:100},imgFlip:!1};a.updateElement(u)}}},{key:"renderElement",value:function(e,t){var n=this.props,o=(n.actions,n.data),a=o.summary,r=o.page,i=o.ratio,s=o.paginationSpread,u=o.settings,l=(o.parameters,o.size,o.specData,o.materials,o.isRenderText),d=void 0===l||l,c=o.ignoreEmpty,p=void 0!==c&&c,f=r.get("id"),g=e.get("id"),h=this.state.hoverElementId,v=h&&h===g;switch(e.get("type")){case b.elementTypes.photo:if(!e.get("encImgId")&&p)return null;var y=this.state.photoActions,M={summary:a,element:e,ratio:i,page:r,paginationSpread:s,isHover:v,product:u.spec.product};return m.default.createElement(x.default,{key:e.get("id"),onDragStarted:this.onDragStart.bind(this,f,g),onDragEnded:this.onDragEnd,onDragOvered:this.onDragOver.bind(this,g),onDragLeaved:this.onDragLeave.bind(this,g)},m.default.createElement(L.default,{onDroped:this.onDrop.bind(this,f,g)},m.default.createElement(D.default,{key:t,actions:y,data:M,ref:e.get("id")})));case b.elementTypes.text:if(!e.get("text")&&p||!d)return null;var I=this.state.textActions,T={element:e,ratio:i,page:r};return m.default.createElement(N.default,{key:t,actions:I,data:T});case b.elementTypes.calendar:if(!e.get("encImgId")&&p)return null;var w={},E={summary:a,element:e,ratio:i,page:r,paginationSpread:s,isHover:v};return m.default.createElement(C.default,{key:t,actions:w,data:E,ref:e.get("id")});default:return null}}},{key:"getRenderHtml",value:function(){var e=this,t=this.state,n=t.elementArray,o=(t.actionBarData,this.props.data),a=o.summary,r=(o.page,o.ratio,[]);return n.size&&n.forEach(function(t,n){t.get("type")===b.elementTypes.cameo&&"none"===a.get("cameo")||r.push(e.renderElement(t,n))}),r}},{key:"render",value:function(){var e=this.props,t=e.data,n=(e.actions,t.page),o=t.ratio,a=t.summary,r=(t.paginationSpread,t.size,n.get("enabled"),a.get("isCover"),n.get("offset"),{position:"absolute",top:0,left:0,width:Math.round(n.get("width")*o.workspace)+"px",height:Math.round(n.get("height")*o.workspace)+"px"}),i=(0,E.default)("book-page-thumbnail");return m.default.createElement("div",{ref:"bookPage",className:i,style:r},this.getRenderHtml())}}]),t}(h.Component);B.propTypes={},B.defaultProps={},t.default=(0,M.translate)("BookPage")(B)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(11),y=a(v),M=n(3),I=a(M),T=n(15),w=n(13),E=a(w),b=n(57),S=a(b),D=n(109),A=a(D);n(231);var N=n(130),_=a(N),C=n(138),P=a(C),x=n(140),O=a(x),L=n(9),j=n(368),k=o(j),z=n(367),R=o(z),U=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.computedInnerSheet=function(e,t,n,o,a){return k.computedInnerSheet(e,t,n,o,a)},n.onDragPageStarted=function(e,t,o){return k.onDragPageStarted(n,e,t,o)},n.onDragPageEnd=function(e){return k.onDragPageEnd(n,e)},n.onDragPageTitleStarted=function(e,t,o){return k.onDragPageTitleStarted(n,e,t,o)},n.onDragPageTitleEnd=function(e,t,o){return k.onDragPageTitleEnd(n,e,t,o)},n.onDropPage=function(e,t){return k.onDropPage(n,e,t)},n.onDragLeaved=function(e,t){return k.onDragLeaved(n,e,t)},n.onDragOvered=function(e,t){return k.onDragOvered(n,e,t)},n.startExchangeImage=function(){return R.startExchangeImage(n)},n.stopExchangeImage=function(){return R.stopExchangeImage(n)},n.state={dropPageId:null,dragPageId:null,isExchangeImage:!1},n.switchSheet=n.switchSheet.bind(n),n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.data,t=e.pagination,n=e.paginationSpread,o=e.shouldSwitchSheet,a=void 0!==o&&o,r=n.get("summary"),i=r.get("sheetIndex");t.sheetIndex===i&&a&&(this.componentRef.scrollIntoViewIfNeeded?this.componentRef.scrollIntoViewIfNeeded():this.componentRef.scrollIntoView())}},{key:"switchSheet",value:function(){var e=this.props.data,t=e.onNavPagesSwitchSheet,n=e.shouldSwitchSheet;n&&t(this)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.actions,a=o.boundTemplateActions,r=o.boundPaginationActions,i=o.boundProjectActions,s=o.boundImageEditModalActions,u=o.boundImagesActions,l=o.boundUploadImagesActions,d=o.boundTextEditModalActions,c=o.boundPropertyModalActions,p=o.boundTrackerActions,f=o.boundNotificationActions,g=o.setMouseHoverDomNode,h=n.urls,v=n.size,M=n.settings,T=n.ratios,w=n.variables,b=n.styles,D=n.template,N=n.pagination,C=n.paginationSpread,x=n.index,j=n.thumbnail,z=n.isPreview,R=n.parameters,U=n.specData,B=(n.isShowSimplePageNumber,n.shouldSwitchSheet,n.isNavpages),Y=void 0!==B&&B,W=n.capability,F=n.allPageSheetIndex,H=n.userInfo,G=this.state.isExchangeImage,Q=C.get("summary"),X=C.get("pages"),Z=C.get("images"),J=Q.get("sheetIndex"),V=(0,E.default)("book-sheet item"),q=(0,m.default)(M,"spec.product"),K=(0,m.default)(M,"spec.size"),$=j?"thumbnail_inner":"inner",ee="./assets/"+q+"/"+K+"/"+$+".png?randow=20171013",te={workspace:j?T.innerWorkspaceForArrangePages:T.innerWorkspace},ne=(0,y.default)({},{width:(0,m.default)(v,"renderInnerSize.width")+"px",height:(0,m.default)(v,"renderInnerSize.height")+"px",cursor:Y?"pointer":"default",marginBottom:q===L.productTypes.DC?"46px":"40px"},b),oe=(0,y.default)({},{width:(0,m.default)(v,"renderInnerSize.width")+"px",height:(0,m.default)(v,"renderInnerSize.height")+"px",cursor:Y?"pointer":"default"},b),ae={width:(0,m.default)(v,"renderInnerSize.width")+"px",height:(0,m.default)(v,"renderInnerSize.height")+"px",pointerEvents:"none",overflow:"hidden"},re={boundTemplateActions:a,boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundPropertyModalActions:c,boundTrackerActions:p,boundNotificationActions:f,startExchangeImage:this.startExchangeImage,stopExchangeImage:this.stopExchangeImage,setMouseHoverDomNode:g},ie=!1,se=N.pageId,ue=[];X.size&&X.forEach(function(t,n){ie=Q.get("isCover");var o=t.get("isPageDraggable"),a=t.get("isPageDropable"),i={urls:h,size:v,summary:Q,page:t,elements:t.get("elements"),template:D,pagination:N,ratio:te,paginationSpread:C,index:n,images:Z,settings:M,isPreview:z,parameters:R,variables:w,specData:U,isExchangeImage:G,capability:W,allPageSheetIndex:F,userInfo:H},s=k.getRefName(J,n);if(ie)j?ue.push(I.default.createElement(P.default,{key:t.get("id"),actions:re,data:i})):ue.push(I.default.createElement(_.default,{key:t.get("id"),actions:re,data:i}));else{var u=e.computedInnerSheet(T.innerWorkspace,v,X,n);i=(0,y.default)({},i,{size:u});var l={width:u.renderInnerSheetSizeWithoutBleed.width+"px",height:u.renderInnerSheetSizeWithoutBleed.height+"px",top:u.renderInnerSheetSizeWithoutBleed.top+"px",left:u.renderInnerSheetSizeWithoutBleed.left+"px"},d={width:u.renderInnerSheetSize.width+"px",height:u.renderInnerSheetSize.height+"px",top:u.renderInnerSheetSize.top+"px",left:u.renderInnerSheetSize.left+"px",background:"white"},c=({width:l.width,height:l.height,top:0,left:0},{height:ae.height,top:0,left:0===n?u.renderInnerSheetSizeWithoutBleed.left-0+"px":u.renderInnerSheetSizeWithoutBleed.left+"px"});({style:c,isShown:e.state.dropPageId===t.get("id")});if(j){var p=I.default.createElement(P.default,{ref:s,actions:re,data:i}),f={isShowDropActive:e.state.isShowDropActive};ue.push(I.default.createElement("div",{key:t.get("id")},I.default.createElement("div",{key:t.get("id"),className:"inner-sheet",style:l},I.default.createElement("div",{className:"inner-sheet-with-bleed",style:d},o?I.default.createElement(S.default,{onDragStarted:e.onDragPageStarted.bind(e,t,s),onDragEnded:e.onDragPageEnd.bind(e)},a?I.default.createElement(A.default,{onDroped:e.onDropPage.bind(e,t),onDragOvered:e.onDragOvered.bind(e,t),onDragLeaved:e.onDragLeaved.bind(e,t),data:f},p):p):a?I.default.createElement(A.default,{onDroped:e.onDropPage.bind(e,t),onDragOvered:e.onDragOvered.bind(e,t),onDragLeaved:e.onDragLeaved.bind(e,t),data:f},p):p))))}else ue.push(I.default.createElement("div",{key:t.get("id"),className:"inner-sheet",style:l},I.default.createElement("div",{className:"inner-sheet-with-bleed",style:d},t.get("id")===se||z?null:I.default.createElement("div",{className:"change-page-helper",onClick:function(){return r.switchPage(n,t.get("id"))}}),I.default.createElement(_.default,{actions:re,data:i}))))}});var le={pageNumberData:{month:Q&&Q.get("month"),year:Q&&Q.get("year"),sheetIndex:Q&&Q.get("sheetIndex")}};return I.default.createElement("div",{key:x,className:V,style:ne,onClick:this.switchSheet,ref:function(t){e.componentRef=t}},j&&q!==L.productTypes.LC?I.default.createElement(O.default,{data:le}):null,I.default.createElement("div",{className:"inner-overflow-container",style:oe},I.default.createElement("div",{className:"inner-effect",style:ae,draggable:"false"},I.default.createElement("img",{alt:"",className:"effect-img",src:ee,draggable:"false"})),ie?null:ue),j||q===L.productTypes.WC&&!z||q===L.productTypes.LC?null:I.default.createElement("div",{className:"inner-sign"},"Inner"))}}]),t}(M.Component);U.propTypes={},U.defaultProps={},t.default=(0,T.translate)("BookSheet")(U)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(2),v=(o(m),n(15)),y=n(13),M=o(y);n(249);var I=n(9),T=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.getPageNumberMessage=n.getPageNumberMessage.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getPageNumberMessage",value:function(){var e=this.props.data,t=e.pageNumberData,n=t.month,o=t.year;return 0===n?"Cover":I.monthStrings[n-1]+" "+o}},{key:"render",value:function(){var e=this.props.data,t=(e.pageNumberData,e.className),n=(0,M.default)("page-number",t),o=this.getPageNumberMessage();return h.default.createElement("div",{className:n},h.default.createElement("span",null,o))}}]),t}(g.Component);T.defaultProps={actions:{switchPage:function(){}},data:{pageNumberData:{month:0,year:2017,sheetIndex:0}}},t.default=(0,v.translate)("PageNumber")(T)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(3),y=a(v),M=n(15),I=n(13),T=(a(I),n(612)),w=a(T),E=n(406),b=o(E),S=n(405),D=a(S);n(257);var A=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.getAllStyles=function(e){return b.getAllStyles(e)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,o=n.urls,a=n.size,r=n.ratios,i=n.variables,s=n.pagination,u=n.paginationSpread,l=n.settings,d=n.project,c=n.parameters,p=n.isPreview,f=n.specData,g=n.template,h=n.userId,v=n.allImages,M=n.capability,I=n.userInfo,T=t.boundPaginationActions,E=t.boundProjectActions,b=t.boundImageEditModalActions,S=t.boundImagesActions,A=t.boundUploadImagesActions,N=t.boundTextEditModalActions,_=t.boundTrackerActions,C=s.sheetIndex,P=s.prevSheetIndex,x={boundPaginationActions:T,boundProjectActions:E,boundImageEditModalActions:b,boundImagesActions:S,boundUploadImagesActions:A,boundTextEditModalActions:N,boundTrackerActions:_},O={urls:o,size:a,ratios:r,variables:i,template:g,pagination:s,paginationSpread:u,settings:l,project:d,parameters:c,isPreview:p,specData:f,userId:h,allImages:v,capability:M,userInfo:I},L={width:0===s.sheetIndex?(0,m.default)(a,"renderCoverSize.width")+"px":(0,m.default)(a,"renderInnerSize.width")+"px",height:0===s.sheetIndex?(0,m.default)(a,"renderCoverSize.height")+20+"px":(0,m.default)(a,"renderInnerSize.height")+20+"px"},j={width:"100%",height:"100%"},k=P>C?"to-right":"to-left";return y.default.createElement("div",{className:"spreads-list",style:L},y.default.createElement("div",{className:"pages-list",style:j},y.default.createElement(w.default,{transitionName:k,transitionEnterTimeout:250,transitionLeaveTimeout:250},y.default.createElement(D.default,{key:C,actions:x,data:O}))))}}]),t}(v.Component);A.propTypes={},A.defaultProps={},t.default=(0,M.translate)("SheetsList")(A)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(13),y=a(v);n(259);var M=n(409),I=o(M),T=function(e){function t(e,n){(0,u.default)(this,t);var o=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n)),a=o.props.data,r=a.total,s=a.current,l=void 0===s?0:s;return o.timer=null,o.state={total:r,current:l},o.goPrevious=function(e){var t=e||window.event;t.preventDefault(),I.goPrevious(o)},o.goNext=function(e){var t=e||window.event;t.preventDefault(),I.goNext(o)},o}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data,n=t.total,o=t.current;n!==e.data.total&&this.setState({total:e.data.total}),o!==e.data.current&&this.setState({current:e.data.current})}},{key:"render",value:function(){var e=this.props.data,t=e.className,n=e.style,o=e.iconCaleStyle,a=e.minSheetIndex,r=(0,y.default)("x-simple-pagination",t),i=a||0,s=this.state.total,u=this.state.current,l=u===i,d=u===s;return m.default.createElement("div",{className:r,style:n},l?null:m.default.createElement("label",null,m.default.createElement("input",{disabled:l}),m.default.createElement("span",{className:"previous-icon icon",onClick:this.goPrevious,style:o})),d?null:m.default.createElement("label",null,m.default.createElement("input",{disabled:d}),m.default.createElement("span",{className:"next-icon icon",onClick:this.goNext,style:o})))}}]),t}(h.Component);T.propTypes={actions:h.PropTypes.shape({onPage:h.PropTypes.func}),data:h.PropTypes.shape({total:h.PropTypes.number.isRequired,current:h.PropTypes.number})},T.defaultProps={data:{total:1,current:0}},t.default=T},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PENDING="PENDING",t.DONE="DONE",t.PROGRESS="PROGRESS",t.FAIL="FAIL"},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.default.List();switch(t.type){case u.CREATE_ELEMENT:return e.push(t.element);case u.CREATE_ELEMENTS:return e.concat(t.elements);case u.UPDATE_ELEMENT:case u.UPDATE_ELEMENTS:var o=e;return n.forEach(function(e){var t=o.findIndex(function(t){return t.get("id")===e.get("id")});if(t!==-1){var n=o.get(t);o=o.set(String(t),n.merge(e))}}),o;case u.DELETE_ELEMENTS:var a=t.elementIds;return e.filter(function(e){return a.indexOf(e.get("id"))===-1});case u.DELETE_ALL:var r=t.willDeleteElementIds;return e.filter(function(e){return r.indexOf(e.get("id"))===-1});default:return e}}},function(e,t,n){"use strict";function o(e,t,n,o){var a=e/t,r=n/o,i=Math.abs(n-e)/e,s=Math.abs(o-t)/t;return Math.abs(a-r)<=.03&&i<=.05&&s<=.05}Object.defineProperty(t,"__esModule",{value:!0}),t.autoLayoutByImages=t.autoLayoutByElements=void 0;var a=n(9),r=n(17),i=function(e){var t=0,n=0,o=0,r=0;return e.forEach(function(e){e.get("type")===a.elementTypes.photo&&(e.get("width")>e.get("height")?n++:e.get("width")===e.get("height")?r++:o++)}),t=n+o+r,{numberOfElements:t,numberOfHElements:n,numberOfVElements:o,numberOfSElements:r}},s=function(e){var t=0,n=0,o=0;return e.forEach(function(e){e.get("type")===a.elementTypes.text&&e.get("text")&&(e.get("width")>e.get("height")?n++:o++)}),t=n+o,{numberOfTexts:t,numberOfHTexts:n,numberOfVTexts:o}},u=function(e){var t=0,n=0,o=0,a=0;return e.forEach(function(e){e.get("width")>e.get("height")?n++:e.get("width")===e.get("height")?a++:o++}),t=n+o+a,{numberOfImages:t,numberOfHImages:n,numberOfVImages:o,numberOfSImages:a}},l=function(e,t,n,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=void 0,d=o+a+i,c=s+u,p=n.filter(function(e){return e.imageNum===d&&e.horizontalNum===o&&e.verticalNum===a&&e.squareNum===i&&e.textFrameNum===c}),f=e?"AutoFill":"AutoLayout";if(p.length)l=p[(0,r.getRandomInt)(0,p.length-1)];else{t.addTracker("MatchLayoutFailed,"+f+","+o+","+a+","+c);var g=n.filter(function(e){return e.imageNum===d&&e.textFrameNum===c});if(g.length){var h=g.filter(function(e){return e.isCoverDefault});l=h.length?h[(0,r.getRandomInt)(0,h.length-1)]:g[(0,r.getRandomInt)(0,g.length-1)]}else t.addTracker("MatchLayoutFailed,"+f+","+d+","+c)}return l};t.autoLayoutByElements=function(e,t,n,a,r,u){var d=i(t),c=s(t),p=!1;if(1===n.size){var f=n.first(),g=a.get(f.get("encImgId")),h=o(e.get("width"),e.get("height"),g.get("width"),g.get("height"));if(h){var m=r.find(function(e){return 1===e.imageNum&&e.isFullCover});if(m)return m}}var v=l(p,u,r,d.numberOfHElements,d.numberOfVElements,d.numberOfSElements,c.numberOfHTexts,c.numberOfVTexts);return v},t.autoLayoutByImages=function(e,t,n){var o=u(e),a=!0,r=l(a,n,t,o.numberOfHImages,o.numberOfVImages,o.numberOfSImages);return r}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.collision=function(e,t){return!(e.x+e.width<t.x||e.y+e.height<t.y||e.x>t.x+t.width||e.y>t.y+t.height)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedWorkSpaceRatio=t.getAvailableSize=void 0;var a=n(11),r=o(a),i=n(58),s=t.getAvailableSize=function(e,t,n,o){var a={width:0,height:0};if(!(e&&e.width&&e.height&&t&&t.width&&t.height))return a;var i=(0,r.default)({},{top:0,left:0,right:0,bottom:0},n),s=o||1,u=(e.width-(i.left+i.right))*s,l=e.height-(i.top+i.bottom);return a.width=l*t.width/t.height,a.height=u*t.height/t.width,a.width>u?a.width=u:a.height=l,a};t.computedWorkSpaceRatio=function(e,t,n){var o=1,a=(0,i.getSize)(),r=s(a,e,t);return r&&r.width&&r.height&&(o=r.width/e.width),o}},function(e,t,n){"use strict";function o(e){var t=0,n=0,o=0;e.forEach(function(e){var a=e.image,r=e.width,i=e.height;if(a){r=a.width,i=a.height;var s=Math.abs(e.imgRot);if(s%90===0&&s%180){var u=[r,i];i=u[0],r=u[1]}}r>i?t+=1:i>r?n+=1:o+=1});var a=t+n+o;return{countTotal:a,countLandscape:t,countPortrait:n,countSquare:o}}function a(e,t,n){var a=o(n),r=a.countTotal,i=a.countLandscape,u=a.countPortrait,l=a.countSquare,d=t.filter(function(t){return t.imageNum===r&&t.horizontalNum===i&&t.verticalNum===u&&t.squareNum===l&&t.textFrameNum===e}),c=d;if(!d.length){var p=t.filter(function(t){return t.imageNum===r&&t.textFrameNum===e});if(c=p,p.length){var f=p.filter(function(e){return e.isCoverDefault});c=f.length?f:p}}return c.length?c[(0,s.getRandomInt)(0,c.length-1)].guid:null}function r(e,t,n,o){var a=e/t,r=n/o,i=Math.abs(n-e)/e,s=Math.abs(o-t)/t;return Math.abs(a-r)<=.03&&i<=.05&&s<=.05}function i(e,t,n,o,i){var s=i.filter(function(e){return e.image});if(1===s.length){var u=s[0].image,l=r(e,t,u.width,u.height);if(!l){var d=o.filter(function(e){return!e.isFullCover});return a(n,d,i)}var c=o.find(function(e){return 1===e.imageNum&&e.isFullCover});if(c)return c.guid}return a(n,o,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.getTemplateId=i;var s=n(17)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedTextElementOptions=void 0;var a=n(23),r=o(a),i=n(33),s=n(16),u=n(49);t.computedTextElementOptions=function(e,t,n,o,a,l,d){var c=(arguments.length>7&&void 0!==arguments[7]&&arguments[7],t.get("text")),p=t.get("fontSize"),f=p*a.get("height"),g=t.get("fontColor")?t.get("fontColor"):"#ffffff";return e.imgUrl=c?(0,r.default)(s.TEXT_SRC)({text:(0,u.toEncode)(c),fontSize:f,fontColor:(0,i.hexString2Number)(g),fontFamily:t.get("fontFamily"),width:t.get("width"),height:t.get("height"),originalWidth:t.get("width"),originalHeight:t.get("height"),originalFontSize:f,baseUrl:o.baseUrl,textAlign:t.get("textAlign"),verticalTextAlign:t.get("textVAlign"),ratio:n}):null,e.minHeight=Math.round(l*n),e.minWidth=Math.round(d*n),e}},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){function o(e,t,n){(void 0===n||r(e[t],n))&&(void 0!==n||t in e)||a(e,t,n)}var a=n(170),r=n(169);e.exports=o},function(e,t,n){function o(e,t,n,o){if(!s(e))return e;t=r(t,e);for(var l=-1,d=t.length,c=d-1,p=e;null!=p&&++l<d;){var f=u(t[l]),g=n;if(l!=c){var h=p[f];g=o?o(h,f,p):void 0,void 0===g&&(g=s(h)?h:i(t[l+1])?[]:{})}a(p,f,g),p=p[f]}return e}var a=n(581),r=n(171),i=n(586),s=n(68),u=n(570);e.exports=o},function(e,t,n){function o(e){return a(function(t,n){var o=-1,a=n.length,i=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,s&&r(n[0],n[1],s)&&(i=a<3?void 0:i,a=1),t=Object(t);++o<a;){var u=n[o];u&&e(t,u,o,i)}return t})}var a=n(63),r=n(90);e.exports=o},function(e,t){var n=/<%=([\s\S]+?)%>/g;e.exports=n},function(e,t,n){function o(e){return r(e)&&a(e)}var a=n(615),r=n(70);e.exports=o},function(e,t,n){function o(e){return e===!0||e===!1||r(e)&&a(e)==i}var a=n(102),r=n(70),i="[object Boolean]";e.exports=o},function(e,t,n){function o(e,t){return a(e,t)}var a=n(584);e.exports=o},function(e,t,n){
function o(e){if(!r(e))return!1;var t=a(e);return t==u||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}var a=n(102),r=n(70),i=n(161),s="[object DOMException]",u="[object Error]";e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s,u,l,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=n(3),f=o(p),g=n(580),h=o(g),m=n(35),v=o(m),y=n(13),M=o(y),I=n(538),T=o(I),w=n(540),E=o(w),b=n(535),S=o(b),D=n(537),A=o(D),N=n(536),_=o(N),C=n(539),P=o(C),x=n(543),O=o(x),L=n(544),j=o(L),k=n(542),z=n(545),R=o(z),U=n(541),B=o(U),Y=(0,T.default)(s=(0,E.default)(s=(0,S.default)(s=(0,A.default)(s=(0,_.default)(s=(0,P.default)((l=u=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={place:"top",type:"dark",effect:"float",show:!1,border:!1,placeholder:"",offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:(0,k.parseAria)(e),isEmptyTip:!1,disable:!1},n.bind(["showTooltip","updateTooltip","hideTooltip","globalRebuild","globalShow","globalHide","onWindowResize"]),n.mount=!0,n.delayShowLoop=null,n.delayHideLoop=null,n.intervalUpdateContent=null,n}return i(t,e),c(t,[{key:"bind",value:function(e){var t=this;e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.insecure,n=e.resizeHide;t&&this.setStyleHeader(),this.bindListener(),this.bindWindowEvents(n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.ariaProps,n=(0,k.parseAria)(e),o=Object.keys(n).some(function(e){return n[e]!==t[e]});o&&this.setState({ariaProps:n})}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(),this.unbindWindowEvents()}},{key:"getTargetArray",value:function(e){var t=void 0;if(e){var n=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t=document.querySelectorAll('[data-tip][data-for="'+n+'"]')}else t=document.querySelectorAll("[data-tip]:not([data-for])");return(0,R.default)(t)}},{key:"bindListener",value:function(){var e=this,t=this.props,n=t.id,o=t.globalEventOff,a=this.getTargetArray(n);a.forEach(function(t){var n=e.isCapture(t),o=e.getEffect(t);return null===t.getAttribute("currentItem")&&t.setAttribute("currentItem","false"),e.unbindBasicListener(t),e.isCustomEvent(t)?void e.customBindListener(t):(t.addEventListener("mouseenter",e.showTooltip,n),"float"===o&&t.addEventListener("mousemove",e.updateTooltip,n),void t.addEventListener("mouseleave",e.hideTooltip,n))}),o&&(window.removeEventListener(o,this.hideTooltip),window.addEventListener(o,this.hideTooltip,!1)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var e=this,t=this.props,n=t.id,o=t.globalEventOff,a=this.getTargetArray(n);a.forEach(function(t){e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)}),o&&window.removeEventListener(o,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"showTooltip",value:function(e,t){var n=this;if(t){var o=this.getTargetArray(this.props.id),a=o.some(function(t){return t===e.currentTarget});if(!a||this.state.show)return}var r=this.props,i=r.children,s=r.multiline,u=r.getContent,l=e.currentTarget.getAttribute("data-tip"),d=e.currentTarget.getAttribute("data-multiline")||s||!1,c=void 0;u&&(c=Array.isArray(u)?u[0]&&u[0]():u());var p=(0,j.default)(l,i,c,d),f="string"==typeof p&&""===p||null===p,g=e instanceof window.FocusEvent||t,h=!0;e.currentTarget.getAttribute("data-scroll-hide")?h="true"===e.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(h=this.props.scrollHide),this.clearTimer(),this.setState({placeholder:p,isEmptyTip:f,place:e.currentTarget.getAttribute("data-place")||this.props.place||"top",type:e.currentTarget.getAttribute("data-type")||this.props.type||"dark",effect:g&&"solid"||this.getEffect(e.currentTarget),offset:e.currentTarget.getAttribute("data-offset")||this.props.offset||{},html:e.currentTarget.getAttribute("data-html")?"true"===e.currentTarget.getAttribute("data-html"):this.props.html||!1,delayShow:e.currentTarget.getAttribute("data-delay-show")||this.props.delayShow||0,delayHide:e.currentTarget.getAttribute("data-delay-hide")||this.props.delayHide||0,border:e.currentTarget.getAttribute("data-border")?"true"===e.currentTarget.getAttribute("data-border"):this.props.border||!1,extraClass:e.currentTarget.getAttribute("data-class")||this.props.class||this.props.className||"",disable:e.currentTarget.getAttribute("data-tip-disable")?"true"===e.currentTarget.getAttribute("data-tip-disable"):this.props.disable||!1},function(){h&&n.addScrollListener(e),n.updateTooltip(e),u&&Array.isArray(u)&&(n.intervalUpdateContent=setInterval(function(){if(n.mount){var e=n.props.getContent,t=(0,j.default)(l,e[0](),d),o="string"==typeof t&&""===t;n.setState({placeholder:t,isEmptyTip:o})}},u[1]))})}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,o=n.delayShow,a=n.show,r=n.isEmptyTip,i=n.disable,s=this.props.afterShow,u=this.state.placeholder,l=a?0:parseInt(o,10),d=e.currentTarget;if(!r&&!i){var c=function(){(Array.isArray(u)&&u.length>0||u)&&!function(){var n=!t.state.show;t.setState({currentEvent:e,currentTarget:d,show:!0},function(){t.updatePosition(),n&&s&&s()})}()};clearTimeout(this.delayShowLoop),o?this.delayShowLoop=setTimeout(c,l):c()}}},{key:"hideTooltip",value:function(e,t){var n=this,o=this.state,a=o.delayHide,r=o.isEmptyTip,i=o.disable,s=this.props.afterHide;if(this.mount&&!r&&!i){if(t){var u=this.getTargetArray(this.props.id),l=u.some(function(t){return t===e.currentTarget});if(!l||!this.state.show)return}var d=function(){var e=n.state.show;n.setState({show:!1},function(){n.removeScrollListener(),e&&s&&s()})};this.clearTimer(),a?this.delayHideLoop=setTimeout(d,parseInt(a,10)):d()}}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e.currentTarget);window.addEventListener("scroll",this.hideTooltip,t)}},{key:"removeScrollListener",value:function(){window.removeEventListener("scroll",this.hideTooltip)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,o=t.currentTarget,a=t.place,r=t.effect,i=t.offset,s=v.default.findDOMNode(this),u=(0,O.default)(n,o,s,a,r,i);return u.isNewState?this.setState(u.newState,function(){e.updatePosition()}):(s.style.left=u.position.left+"px",void(s.style.top=u.position.top+"px"))}},{key:"setStyleHeader",value:function(){if(!document.getElementsByTagName("head")[0].querySelector('style[id="react-tooltip"]')){var e=document.createElement("style");e.id="react-tooltip",e.innerHTML=B.default,document.getElementsByTagName("head")[0].appendChild(e)}}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearInterval(this.intervalUpdateContent)}},{key:"render",value:function(){var e=this.state,n=e.placeholder,o=e.extraClass,a=e.html,r=e.ariaProps,i=e.disable,s=e.isEmptyTip,u=(0,M.default)("__react_component_tooltip",{show:this.state.show&&!i&&!s},{border:this.state.border},{"place-top":"top"===this.state.place},{"place-bottom":"bottom"===this.state.place},{"place-left":"left"===this.state.place},{"place-right":"right"===this.state.place},{"type-dark":"dark"===this.state.type},{"type-success":"success"===this.state.type},{"type-warning":"warning"===this.state.type},{"type-error":"error"===this.state.type},{"type-info":"info"===this.state.type},{"type-light":"light"===this.state.type}),l=this.props.wrapper;return t.supportedWrappers.indexOf(l)<0&&(l=t.defaultProps.wrapper),a?f.default.createElement(l,d({className:u+" "+o},r,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:n}})):f.default.createElement(l,d({className:u+" "+o},r,{"data-id":"tooltip"}),n)}}]),t}(p.Component),u.propTypes={children:h.default.any,place:h.default.string,type:h.default.string,effect:h.default.string,offset:h.default.object,multiline:h.default.bool,border:h.default.bool,insecure:h.default.bool,class:h.default.string,className:h.default.string,id:h.default.string,html:h.default.bool,delayHide:h.default.number,delayShow:h.default.number,event:h.default.string,eventOff:h.default.string,watchWindow:h.default.bool,isCapture:h.default.bool,globalEventOff:h.default.string,getContent:h.default.any,afterShow:h.default.func,afterHide:h.default.func,disable:h.default.bool,scrollHide:h.default.bool,resizeHide:h.default.bool,wrapper:h.default.string},u.defaultProps={insecure:!0,resizeHide:!0,wrapper:"div"},u.supportedWrappers=["div","span"],s=l))||s)||s)||s)||s)||s)||s;e.exports=Y},function(e,t,n){e.exports=n(1)(100)},function(e,t,n){e.exports=n(1)(1023)},function(e,t,n){e.exports=n(1)(1090)},function(e,t,n){e.exports=n(1)(112)},function(e,t,n){e.exports=n(1)(122)},function(e,t,n){e.exports=n(1)(152)},function(e,t,n){e.exports=n(1)(166)},function(e,t,n){e.exports=n(1)(177)},function(e,t,n){e.exports=n(1)(223)},function(e,t,n){e.exports=n(1)(325)},function(e,t,n){e.exports=n(1)(333)},function(e,t,n){e.exports=n(1)(346)},function(e,t,n){e.exports=n(1)(350)},function(e,t,n){e.exports=n(1)(439)},function(e,t,n){e.exports=n(1)(457)},function(e,t,n){e.exports=n(1)(750)},function(e,t,n){e.exports=n(1)(759)},function(e,t,n){e.exports=n(1)(768)},function(e,t,n){e.exports=n(1)(832)},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(14),r=o(a);t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){function o(a,i){try{var s=t[a](i),u=s.value}catch(e){return void n(e)}return s.done?void e(u):r.default.resolve(u).then(function(e){o("next",e)},function(e){o("throw",e)})}return o("next")})}}},function(e,t,n){var o=function(){return this}()||Function("return this")(),a=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,r=a&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n(184),a)o.regeneratorRuntime=r;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";function n(e,t,n,o){var r=t&&t.prototype instanceof a?t:a,i=Object.create(r.prototype),s=new f(o||[]);return i._invoke=l(e,n,s),i}function o(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function r(){}function i(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,a,r,i){var s=o(e[n],e,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):Promise.resolve(l).then(function(e){u.value=e,r(u)},i)}i(s.arg)}function n(e,n){function o(){return new Promise(function(o,a){t(e,n,o,a)})}return a=a?a.then(o,o):o()}var a;this._invoke=n}function l(e,t,n){var a=S;return function(r,i){if(a===A)throw new Error("Generator is already running");if(a===N){if("throw"===r)throw i;return h()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var u=d(s,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===S)throw a=N,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=A;var l=o(e,t,n);if("normal"===l.type){if(a=n.done?N:D,l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=N,n.method="throw",n.arg=l.arg)}}}function d(e,t){var n=e.iterator[t.method];if(n===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,d(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var a=o(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,_;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,_):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function g(e){if(e){var t=e[I];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=m,t.done=!0,t};return o.next=o}}return{next:h}}function h(){return{value:m,done:!0}}var m,v=Object.prototype,y=v.hasOwnProperty,M="function"==typeof Symbol?Symbol:{},I=M.iterator||"@@iterator",T=M.asyncIterator||"@@asyncIterator",w=M.toStringTag||"@@toStringTag",E="object"==typeof e,b=t.regeneratorRuntime;if(b)return void(E&&(e.exports=b));b=t.regeneratorRuntime=E?e.exports:{},b.wrap=n;var S="suspendedStart",D="suspendedYield",A="executing",N="completed",_={},C={};C[I]=function(){return this};var P=Object.getPrototypeOf,x=P&&P(P(g([])));x&&x!==v&&y.call(x,I)&&(C=x);var O=i.prototype=a.prototype=Object.create(C);r.prototype=O.constructor=i,i.constructor=r,i[w]=r.displayName="GeneratorFunction",b.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===r||"GeneratorFunction"===(t.displayName||t.name))},b.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(O),e},b.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[T]=function(){return this},b.AsyncIterator=u,b.async=function(e,t,o,a){var r=new u(n(e,t,o,a));return b.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},s(O),O[w]="Generator",O[I]=function(){return this},O.toString=function(){return"[object Generator]"},b.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},b.values=g,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,o){return r.type="throw",r.arg=e,n.next=t,o&&(n.method="next",n.arg=m),!!o}if(this.done)throw e;for(var n=this,o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],r=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var i=y.call(a,"catchLoc"),s=y.call(a,"finallyLoc");if(i&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&y.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=e,r.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(r)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var a=o.arg;p(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=m),_}}}(function(){return this}()||Function("return this")())},function(e,t,n){e.exports=n(183)},function(e,t,n){n(99),n(97),e.exports=n(198)},function(e,t,n){n(99),n(97),e.exports=n(199)},function(e,t,n){var o=n(30),a=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},function(e,t,n){n(200),e.exports=n(30).Object.getPrototypeOf},function(e,t,n){n(201),e.exports=n(30).Object.keys},function(e,t,n){n(596),n(97),n(99),n(202),n(203),n(204),e.exports=n(30).Promise},function(e,t){e.exports=function(e,t,n,o){if(!(e instanceof t)||void 0!==o&&o in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var o=n(95),a=n(593),r=n(592),i=n(71),s=n(579),u=n(175),l={},d={},t=e.exports=function(e,t,n,c,p){var f,g,h,m,v=p?function(){return e}:u(e),y=o(n,c,t?2:1),M=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(r(v)){for(f=s(e.length);f>M;M++)if(m=t?y(i(g=e[M])[0],g[1]):y(e[M]),m===l||m===d)return m}else for(h=v.call(e);!(g=h.next()).done;)if(m=a(h,y,g.value,t),m===l||m===d)return m};t.BREAK=l,t.RETURN=d},function(e,t){e.exports=function(e,t,n){var o=void 0===n;switch(t.length){case 0:return o?e():e.call(n);case 1:return o?e(t[0]):e.call(n,t[0]);case 2:return o?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return o?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return o?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var o=n(56),a=n(108).set,r=o.MutationObserver||o.WebKitMutationObserver,i=o.process,s=o.Promise,u="process"==n(167)(i);e.exports=function(){var e,t,n,l=function(){var o,a;for(u&&(o=i.domain)&&o.exit();e;){a=e.fn,e=e.next;try{a()}catch(o){throw e?n():t=void 0,o}}t=void 0,o&&o.enter()};if(u)n=function(){i.nextTick(l)};else if(r){var d=!0,c=document.createTextNode("");new r(l).observe(c,{characterData:!0}),n=function(){c.data=d=!d}}else if(s&&s.resolve){var p=s.resolve();n=function(){p.then(l)}}else n=function(){a.call(o,l)};return function(o){var a={fn:o,next:void 0};t&&(t.next=a),e||(e=a,n()),t=a}}},function(e,t,n){var o=n(613);e.exports=function(e,t,n){for(var a in t)n&&e[a]?e[a]=t[a]:o(e,a,t[a]);return e}},function(e,t,n){"use strict";var o=n(56),a=n(30),r=n(597),i=n(598),s=n(67)("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:o[e];i&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var o=n(71),a=n(175);e.exports=n(30).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return o(t.call(e))}},function(e,t,n){var o=n(174),a=n(67)("iterator"),r=n(567);e.exports=n(30).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||r.hasOwnProperty(o(t))}},function(e,t,n){var o=n(168),a=n(595);n(104)("getPrototypeOf",function(){return function(e){return a(o(e))}})},function(e,t,n){var o=n(168),a=n(569);n(104)("keys",function(){return function(e){return a(o(e))}})},function(e,t,n){"use strict";var o,a,r,i,s=n(573),u=n(56),l=n(95),d=n(174),c=n(69),p=n(164),f=n(98),g=n(192),h=n(193),m=n(107),v=n(108).set,y=n(195)(),M=n(73),I=n(105),T=n(106),w="Promise",E=u.TypeError,b=u.process,S=u[w],D="process"==d(b),A=function(){},N=a=M.f,_=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(67)("species")]=function(e){e(A,A)};return(D||"function"==typeof PromiseRejectionEvent)&&e.then(A)instanceof t}catch(e){}}(),C=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var o=e._v,a=1==e._s,r=0,i=function(t){var n,r,i=a?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{i?(a||(2==e._h&&L(e),e._h=1),i===!0?n=o:(l&&l.enter(),n=i(o),l&&l.exit()),n===t.promise?u(E("Promise-chain cycle")):(r=C(n))?r.call(n,s,u):s(n)):u(o)}catch(e){u(e)}};n.length>r;)i(n[r++]);e._c=[],e._n=!1,t&&!e._h&&x(e)})}},x=function(e){v.call(u,function(){var t,n,o,a=e._v,r=O(e);if(r&&(t=I(function(){D?b.emit("unhandledRejection",a,e):(n=u.onunhandledrejection)?n({promise:e,reason:a}):(o=u.console)&&o.error&&o.error("Unhandled promise rejection",a)}),e._h=D||O(e)?2:1),e._a=void 0,r&&t.e)throw t.v})},O=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,o=0;n.length>o;)if(t=n[o++],t.fail||!O(t.promise))return!1;return!0},L=function(e){v.call(u,function(){var t;D?b.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},k=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=C(e))?y(function(){var o={_w:n,_d:!1};try{t.call(e,l(k,o,1),l(j,o,1))}catch(e){j.call(o,e)}}):(n._v=e,n._s=1,P(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};_||(S=function(e){g(this,S,w,"_h"),f(e),o.call(this);try{e(l(k,this,1),l(j,this,1))}catch(e){j.call(this,e)}},o=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},o.prototype=n(196)(S.prototype,{then:function(e,t){var n=N(m(this,S));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=D?b.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new o;this.promise=e,this.resolve=l(k,e,1),this.reject=l(j,e,1)},M.f=N=function(e){return e===S||e===i?new r(e):a(e)}),c(c.G+c.W+c.F*!_,{Promise:S}),n(574)(S,w),n(197)(w),i=n(30)[w],c(c.S+c.F*!_,w,{reject:function(e){var t=N(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(s||!_),w,{resolve:function(e){return T(s&&this===i?S:this,e)}}),c(c.S+c.F*!(_&&n(594)(function(e){S.all(e).catch(A)})),w,{all:function(e){var t=this,n=N(t),o=n.resolve,a=n.reject,r=I(function(){var n=[],r=0,i=1;h(e,!1,function(e){var s=r++,u=!1;n.push(void 0),i++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--i||o(n))},a)}),--i||o(n)});return r.e&&a(r.v),n.promise},race:function(e){var t=this,n=N(t),o=n.reject,a=I(function(){h(e,!1,function(e){t.resolve(e).then(n.resolve,o)})});return a.e&&o(a.v),n.promise}})},function(e,t,n){"use strict";var o=n(69),a=n(30),r=n(56),i=n(107),s=n(106);o(o.P+o.R,"Promise",{finally:function(e){var t=i(this,a.Promise||r.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var o=n(69),a=n(73),r=n(105);o(o.S,"Promise",{try:function(e){var t=a.f(this),n=r(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t){},205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,205,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(38),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(11),v=o(m),y=n(3),M=o(y),I=n(614),T=n(13),w=o(T),E=n(33);n(206);var b=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e)),o=n.props.initHexString,a={r:"255",g:"255",b:"255"},i=a;if(o){var u=(0,E.hexToRGB)(o),d=(0,r.default)(u,3),c=d[0],p=d[1],g=d[2];i=(0,v.default)({},a,{r:c,g:p,b:g})}return n.state={displayColorPicker:!1,color:i},n.handleClick=n.handleClick.bind(n),n.handleChange=n.handleChange.bind(n),n.handleClose=n.handleClose.bind(n),n.handleChangeComplete=n.handleChangeComplete.bind(n),n.externalCloseHandle=n.externalCloseHandle.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.needResetColor,n=e.needResetColor;if(t!==n&&n){var o=(0,E.hexToRGB)(e.initHexString),a=(0,r.default)(o,3),i=a[0],s=a[1],u=a[2];this.setState({color:{r:i,g:s,b:u}})}}},{key:"externalCloseHandle",value:function(e){"CANVAS"===e.target.nodeName&&this.setState({displayColorPicker:!1})}},{key:"componentDidMount",value:function(){window.addEventListener("click",this.externalCloseHandle)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.externalCloseHandle)}},{key:"handleClick",value:function(){var e=this;this.setState({displayColorPicker:!this.state.displayColorPicker},function(){e.state.displayColorPicker&&e.popover.focus()})}},{key:"handleChange",value:function(e){var t=this.props.onColorChange;this.setState({color:e.rgb}),t&&t(e)}},{key:"handleChangeComplete",value:function(e){var t=this.props.onColorChangeComplete;t&&t(e)}},{key:"handleClose",value:function(e){var t=this,n=e.currentTarget;setTimeout(function(){n.contains(document.activeElement)||t.setState({displayColorPicker:!1})},0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.displayColorPicker,o=t.color,a=this.props.disabled,r={background:"rgb("+o.r+", "+o.g+", "+o.b+")"},i=(0,w.default)("color-picker",{disabled:a}),s=["#E5F1E1","#F6D8DA","#7CE0D3","#FF9999","#ADC1E4","#E2DAC8","#93B55A","#FFCE43","#CC000E","#71000A","#155B4D","#4D8BF5","#121639","#000000","#E3E3E3","#FFFFFF"];return M.default.createElement("div",{className:i},M.default.createElement("div",{className:"swatch",onClick:this.handleClick},M.default.createElement("div",{className:"color",style:r})),n?M.default.createElement("div",{className:"popover",tabIndex:"-1",ref:function(t){e.popover=t},onBlur:this.handleClose},M.default.createElement(I.SketchPicker,{color:o,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete,presetColors:s,disableAlpha:!0})):null)}}]),t}(y.Component);b.propTypes={onColorChange:y.PropTypes.func.isRequired,initHexString:y.PropTypes.string,needResetColor:y.PropTypes.bool,onColorChangeComplete:y.PropTypes.func,disabled:y.PropTypes.bool},b.defaultProps={disabled:!1},t.default=b},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(207);var y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.onClicked,a=e.title,r=e.isShow,i=void 0!==r&&r,s=e.isBlack,u=void 0!==s&&s,l=(0,v.default)("x-delete-icon",t,{show:i,black:u}),d=n;return h.default.createElement("div",{className:l,style:d,onClick:o,title:a})}}]),t}(g.Component);y.defaultProps={isShow:!1,isBlack:!1,title:"Delete",onClicked:function(){}},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g);n(209);var m=n(547),v=o(m),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleLogoClick=n.handleLogoClick.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleLogoClick",value:function(){var e=this.props,t=(e.isProjectEdited,e.boundSystemActions),n=e.onSaveProject,o=e.baseUrls,a=function(){window.onbeforeunload=null,window.location.href=o.baseUrl};t.showConfirm({confirmMessage:h.default.createElement("div",{className:"text-center"},"This will take you to home page.",h.default.createElement("br",null),"Please select an option before continuing."),onOkClick:function(){n(a)},onCancelClick:a,okButtonText:"Save",cancelButtonText:"Don't Save"})}},{key:"stopPropagation",value:function(e){var t=e||window.event;t.stopPropagation()}},{key:"render",value:function(){var e=this.props.children;return h.default.createElement("div",{className:"mod-header",onClick:this.stopPropagation.bind(this)},h.default.createElement("div",{className:"logo",onClick:this.handleLogoClick},h.default.createElement("img",{src:v.default,alt:"logo"})),h.default.createElement("div",{className:"header-area"},e))}}]),t}(g.Component);y.propTypes={boundSystemActions:g.PropTypes.object.isRequired,isProjectEdited:g.PropTypes.bool.isRequired,onSaveProject:g.PropTypes.func.isRequired,baseUrls:g.PropTypes.object.isRequired},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.userId,n=e.userId;if(t!==n&&n!==-1){var o=e.interval,a=e.keepAlive,r=e.userId;setInterval(function(){a(r)},o)}}},{key:"render",value:function(){return null}}]),t}(g.Component);h.propTypes={keepAlive:g.PropTypes.func.isRequired,userId:g.PropTypes.number,interval:g.PropTypes.number},h.defaultProps={interval:24e4},t.default=h},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g);n(210);var m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.outCrop,n=e.imageCornerRatios,o=t.x,a=t.y,r=t.width,i=t.height,s={top:a+"%",left:o+"%",width:r+"%",height:i+"%"},u={height:n.top+"%"},l={width:n.right+"%"},d={height:n.bottom+"%"},c={width:n.left+"%"};return h.default.createElement("div",{className:"image-corner-area",style:s},h.default.createElement("div",{className:"image-corner top",style:u}),h.default.createElement("div",{className:"image-corner right",style:l}),h.default.createElement("div",{className:"image-corner bottom",style:d}),h.default.createElement("div",{className:"image-corner left",style:c}))}}]),t}(g.Component);m.propTypes={},m.defaultProps={},t.default=m},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e
}}var a,r,i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(3),v=o(m),y=n(565),M=o(y);n(211);var I=(r=a=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.onDocMouseTouchMove=n.onDocMouseTouchMove.bind(n),n.onDocMouseTouchEnd=n.onDocMouseTouchEnd.bind(n),n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n.onComponentMouseTouchDown=n.onComponentMouseTouchDown.bind(n),n.onComponentKeyDown=n.onComponentKeyDown.bind(n),n.onCropMouseTouchDown=n.onCropMouseTouchDown.bind(n),n.state={crop:n.nextCropState(e.crop),polygonId:n.getRandomInt(1,9e5),imageWidth:0,imageHeight:0},n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){if(document.addEventListener("mousemove",this.onDocMouseTouchMove),document.addEventListener("touchmove",this.onDocMouseTouchMove),document.addEventListener("mouseup",this.onDocMouseTouchEnd),document.addEventListener("touchend",this.onDocMouseTouchEnd),document.addEventListener("touchcancel",this.onDocMouseTouchEnd),this.imageRef.complete||this.imageRef.readyState)if(0===this.imageRef.naturalWidth){var e=this.imageRef.src,t="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";this.imageRef.src=t,this.imageRef.src=e}else this.onImageLoad(this.imageRef)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.crop){var n=this.nextCropState(e.crop),o=this.state.crop.aspect&&n.aspect!==this.state.crop.aspect;n.aspect&&(n=this.ensureAspectDimensions(n,this.imageRef)),this.cropInvalid=this.isCropInvalid(n),this.setState({crop:n},function(){o&&t.props.onAspectRatioChange&&t.props.onAspectRatioChange(n,t.getPixelCrop(n))})}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.onDocMouseTouchMove),document.removeEventListener("touchmove",this.onDocMouseTouchMove),document.removeEventListener("mouseup",this.onDocMouseTouchEnd),document.removeEventListener("touchend",this.onDocMouseTouchEnd),document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}},{key:"onDocMouseTouchMove",value:function(e){if(!this.props.disabled&&this.mouseDownOnCrop){e.preventDefault();var t=this.state.crop,n=this.evData,o=this.getClientPos(e);n.isResize&&t.aspect&&n.cropOffset&&(o.y=this.straightenYPath(o.x));var a=o.x-n.clientStartX;n.xDiffPc=a/n.imageWidth*100;var r=o.y-n.clientStartY;n.yDiffPc=r/n.imageHeight*100,n.isResize?this.resizeCrop():this.dragCrop(),this.cropInvalid=!1,this.props.onChange&&this.props.onChange(t,this.getPixelCrop(t)),this.setState({crop:t})}}},{key:"onCropMouseTouchDown",value:function(e){if(!this.props.disabled){e.preventDefault();var t=this.state.crop,n=this.getClientPos(e);this.componentRef.focus();var o=e.target.dataset.ord,a="nw"===o||"w"===o||"sw"===o,r="nw"===o||"n"===o||"ne"===o,i=void 0;t.aspect&&(i=this.getElementOffset(this.cropSelectRef)),this.evData={imageWidth:this.imageRef.width,imageHeight:this.imageRef.height,clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:a?t.x+t.width:t.x,cropStartY:r?t.y+t.height:t.y,xInversed:a,yInversed:r,xCrossOver:a,yCrossOver:r,startXCrossOver:a,startYCrossOver:r,isResize:e.target!==this.cropSelectRef,ord:o,cropOffset:i},this.mouseDownOnCrop=!0}}},{key:"onComponentMouseTouchDown",value:function(e){if((e.target===this.imageCopyRef||e.target===this.cropWrapperRef)&&!this.props.disabled){e.preventDefault();var t=this.props.keepSelection===!0?{}:this.state.crop,n=this.getClientPos(e);this.componentRef.focus();var o=this.getElementOffset(this.imageRef),a=(n.x-o.left)/this.imageRef.width*100,r=(n.y-o.top)/this.imageRef.height*100;t.x=a,t.y=r,t.width=0,t.height=0,this.evData={imageWidth:this.imageRef.width,imageHeight:this.imageRef.height,clientStartX:n.x,clientStartY:n.y,cropStartWidth:t.width,cropStartHeight:t.height,cropStartX:t.x,cropStartY:t.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw"},this.mouseDownOnCrop=!0,this.setState({newCropIsBeingDrawn:!0})}}},{key:"onComponentKeyDown",value:function(e){var n=this;if(!this.props.disabled){var o=e.which,a=this.state.crop,r=!1;a.width&&a.height&&(o===t.arrowKey.left?(a.x-=t.nudgeStep,r=!0):o===t.arrowKey.right?(a.x+=t.nudgeStep,r=!0):o===t.arrowKey.up?(a.y-=t.nudgeStep,r=!0):o===t.arrowKey.down&&(a.y+=t.nudgeStep,r=!0),r&&(e.preventDefault(),a.x=this.clamp(a.x,0,100-a.width),a.y=this.clamp(a.y,0,100-a.height),this.setState({crop:a},function(){n.props.onChange&&n.props.onChange(a,n.getPixelCrop(a)),n.props.onComplete&&n.props.onComplete(a,n.getPixelCrop(a))})))}}},{key:"onDocMouseTouchEnd",value:function(){if(!this.props.disabled&&this.mouseDownOnCrop){var e=this.state.crop;this.cropInvalid=this.isCropInvalid(e),this.mouseDownOnCrop=!1,this.props.onComplete&&this.props.onComplete(e,this.getPixelCrop(e)),this.setState({newCropIsBeingDrawn:!1})}}},{key:"getPixelCrop",value:function(e){return{x:Math.round(this.imageRef.naturalWidth*(e.x/100)),y:Math.round(this.imageRef.naturalHeight*(e.y/100)),width:Math.round(this.imageRef.naturalWidth*(e.width/100)),height:Math.round(this.imageRef.naturalHeight*(e.height/100))}}},{key:"getPolygonValues",value:function(e){var t=this.state.crop,n=[t.x,t.y],o=[t.x+t.width,t.y],a=[t.x,t.y+t.height],r=[t.x+t.width,t.y+t.height];return e?(n=this.arrayDividedBy100(n),o=this.arrayDividedBy100(o),a=this.arrayDividedBy100(a),r=this.arrayDividedBy100(r)):(n=this.arrayToPercent(n),o=this.arrayToPercent(o),a=this.arrayToPercent(a),r=this.arrayToPercent(r)),{top:{left:n,right:o},bottom:{left:a,right:r}}}},{key:"getCropStyle",value:function(){return{top:this.state.crop.y+"%",left:this.state.crop.x+"%",width:this.state.crop.width+"%",height:this.state.crop.height+"%"}}},{key:"getEllipseValues",value:function(e){var t=this.state.crop,n=t.width/2,o=t.height/2,a=t.x+n,r=t.y+o;return e?(n/=100,o/=100,a/=100,r/=100):(n+="%",o+="%",a+="%",r+="%"),{cx:a,cy:r,rx:n,ry:o}}},{key:"getPolygonClipPath",value:function(){var e=this.getPolygonValues(),t=e.top,n=e.bottom;return"polygon("+t.left+", "+t.right+", "+n.right+", "+n.left+")"}},{key:"getEllipseClipPath",value:function(){var e=this.getEllipseValues(),t=e.rx,n=e.ry,o=e.cx,a=e.cy;return"ellipse("+t+" "+n+" at "+o+" "+a+")"}},{key:"getElementOffset",value:function(e){var t=e.getBoundingClientRect(),n=document.documentElement,o=t.top+window.pageYOffset-n.clientTop,a=t.left+window.pageXOffset-n.clientLeft;return{top:o,left:a}}},{key:"getClientPos",value:function(e){var t=void 0,n=void 0;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.pageX,n=e.pageY),{x:t,y:n}}},{key:"getNewSize",value:function(){var e=this.state.crop,t=this.evData,n=t.imageWidth/t.imageHeight,o=t.cropStartWidth+t.xDiffPc;t.xCrossOver&&(o=Math.abs(o));var a=this.props.maxWidth;this.state.newCropIsBeingDrawn||(a=["nw","w","sw"].indexOf(t.inversedXOrd||t.ord)>-1?t.cropStartX:100-t.cropStartX,a=this.clamp(a,100,this.props.maxWidth)),o=this.clamp(o,this.props.minWidth||0,a);var r=void 0;r=e.aspect?o/e.aspect*n:t.cropStartHeight+t.yDiffPc,t.yCrossOver&&(r=Math.min(Math.abs(r),t.cropStartY));var i=this.props.maxHeight;return this.state.newCropIsBeingDrawn||(i=["nw","n","ne"].indexOf(t.inversedYOrd||t.ord)>-1?t.cropStartY:100-t.cropStartY,i=this.clamp(i,100,this.props.maxHeight)),r=this.clamp(r,this.props.minHeight||0,i),e.aspect&&(o=this.clamp(r*e.aspect/n,0,100)),{width:o,height:r}}},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"getPolygonId",value:function(){return"ReactCropClipPolygon-"+this.state.polygonId}},{key:"dragCrop",value:function(){var e=this.state.crop,t=this.evData;e.x=this.clamp(t.cropStartX+t.xDiffPc,0,100-e.width),e.y=this.clamp(t.cropStartY+t.yDiffPc,0,100-e.height)}},{key:"resizeCrop",value:function(){var e=this.state.crop,n=this.evData,o=n.ord;n.xInversed&&(n.xDiffPc-=2*n.cropStartWidth),n.yInversed&&(n.yDiffPc-=2*n.cropStartHeight);var a=this.getNewSize(),r=n.cropStartX,i=n.cropStartY;n.xCrossOver&&(r=e.x+(e.width-a.width)),n.yCrossOver&&(i=n.lastYCrossover===!1?e.y-a.height:e.y+(e.height-a.height)),e.aspect||t.xyOrds.indexOf(o)>-1?(e.x=this.clamp(r,0,100-a.width),e.y=this.clamp(i,0,100-a.height),e.width=a.width,e.height=a.height):t.xOrds.indexOf(o)>-1?(e.x=this.clamp(r,0,100-a.width),e.width=a.width):t.yOrds.indexOf(o)>-1&&(e.y=this.clamp(i,0,100-a.height),e.height=a.height),n.lastYCrossover=n.yCrossOver,this.crossOverCheck()}},{key:"straightenYPath",value:function(e){var t=this.evData,n=t.ord,o=t.cropOffset,a=t.cropStartWidth/100*t.imageWidth,r=t.cropStartHeight/100*t.imageHeight,i=void 0,s=void 0;return"nw"===n||"se"===n?(i=r/a,s=o.top-o.left*i):(i=-r/a,s=o.top+(r-o.left*i)),i*e+s}},{key:"onImageLoad",value:function(e){var t=this.state.crop;e&&this.setState({imageWidth:e.naturalWidth,imageHeight:e.naturalHeight}),t.aspect&&(t=this.ensureAspectDimensions(t,e),this.cropInvalid=this.isCropInvalid(t),this.setState({crop:t})),this.props.onImageLoaded&&this.props.onImageLoaded(t,e,this.getPixelCrop(t))}},{key:"onImageError",value:function(){this.props.onImageError&&this.props.onImageError()}},{key:"arrayDividedBy100",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.map(function(e){return e/100}).join(t)}},{key:"arrayToPercent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.map(function(e){return e+"%"}).join(t)}},{key:"createCropSelection",value:function(){var e=this,t=this.getCropStyle(),n=this.state.crop.aspect,o=this.props.ellipse;return v.default.createElement("div",{ref:function(t){e.cropSelectRef=t},style:t,className:"ReactCrop--crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown},v.default.createElement("div",{className:"ReactCrop--drag-bar ord-n","data-ord":"n"}),v.default.createElement("div",{className:"ReactCrop--drag-bar ord-e","data-ord":"e"}),v.default.createElement("div",{className:"ReactCrop--drag-bar ord-s","data-ord":"s"}),v.default.createElement("div",{className:"ReactCrop--drag-bar ord-w","data-ord":"w"}),o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-nw","data-ord":"nw"}),n&&!o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-n","data-ord":"n"}),o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-ne","data-ord":"ne"}),n&&!o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-e","data-ord":"e"}),o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-se","data-ord":"se"}),n&&!o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-s","data-ord":"s"}),o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-sw","data-ord":"sw"}),n&&!o?null:v.default.createElement("div",{className:"ReactCrop--drag-handle ord-w","data-ord":"w"}))}},{key:"isCropInvalid",value:function(e){return!e.width||!e.height}},{key:"nextCropState",value:function(e){var n=(0,M.default)({},t.defaultCrop,e);return this.cropInvalid=this.isCropInvalid(n),n}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"crossOverCheck",value:function(){var e=this.evData;(!e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc>=0||e.xCrossOver&&-Math.abs(e.cropStartWidth)-e.xDiffPc<=0)&&(e.xCrossOver=!e.xCrossOver),(!e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc>=0||e.yCrossOver&&-Math.abs(e.cropStartHeight)-e.yDiffPc<=0)&&(e.yCrossOver=!e.yCrossOver);var t=e.xCrossOver!==e.startXCrossOver,n=e.yCrossOver!==e.startYCrossOver;e.inversedXOrd=!!t&&this.inverseOrd(e.ord),e.inversedYOrd=!!n&&this.inverseOrd(e.ord)}},{key:"inverseOrd",value:function e(t){var e=void 0;return"n"===t?e="s":"ne"===t?e="sw":"e"===t?e="w":"se"===t?e="nw":"s"===t?e="n":"sw"===t?e="ne":"w"===t?e="e":"nw"===t&&(e="se"),e}},{key:"ensureAspectDimensions",value:function(e,t){var n=t.naturalWidth,o=t.naturalHeight,a=n/o,r=(0,M.default)({},e);return r.width?r.height=r.width/r.aspect*a:r.height&&(r.width=r.height*r.aspect/a),r.y+r.height>100&&(r.height=100-r.y,r.width=r.height*r.aspect/a),r.x+r.width>100&&(r.width=100-r.x,r.height=r.width/r.aspect*a),r}},{key:"renderSvg",value:function(){var e=void 0;if(this.props.ellipse)e=v.default.createElement("ellipse",this.getEllipseValues(!0));else{var t=this.getPolygonValues(!0),n=t.top,o=t.bottom;e=v.default.createElement("polygon",{points:n.left+", "+n.right+", "+o.right+", "+o.left})}return v.default.createElement("svg",{width:this.state.imageWidth,height:this.state.imageHeight,style:{position:"absolute"}},v.default.createElement("defs",null,v.default.createElement("clipPath",{id:this.getPolygonId(),clipPathUnits:"objectBoundingBox"},e)))}},{key:"render",value:function(){var e=this,t=void 0,n=void 0,o=0===this.props.src.indexOf("data:");this.cropInvalid||(t=this.createCropSelection(),n={WebkitClipPath:this.props.ellipse?this.getEllipseClipPath():this.getPolygonClipPath(),clipPath:'url("#'+this.getPolygonId()+'")'});var a={width:this.state.imageWidth+"px",height:this.state.imageHeight+"px"},r={width:this.state.imageWidth+"px",height:this.state.imageHeight+"px"},i=["ReactCrop"];return this.state.newCropIsBeingDrawn&&i.push("ReactCrop-new-crop"),this.state.crop.aspect&&i.push("ReactCrop-fixed-aspect"),this.props.ellipse&&i.push("ReactCrop-ellipse"),this.props.disabled&&i.push("ReactCrop--disabled"),v.default.createElement("div",{ref:function(t){e.componentRef=t},className:i.join(" "),onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"1",onKeyDown:this.onComponentKeyDown,style:r},this.renderSvg(),v.default.createElement("img",{ref:function(t){e.imageRef=t},crossOrigin:o?void 0:this.props.crossorigin,className:"ReactCrop--image",src:this.props.src,onLoad:function(t){return e.onImageLoad(t.target)},onError:function(){return e.onImageError()},alt:""}),v.default.createElement("div",{className:"ReactCrop--crop-wrapper",style:a,ref:function(t){e.cropWrapperRef=t}},v.default.createElement("svg",{width:this.state.imageWidth,height:this.state.imageHeight},v.default.createElement("image",{width:this.state.imageWidth,height:this.state.imageHeight,xlinkHref:this.props.src,style:n})),t),this.props.children)}}]),t}(m.Component),a.propTypes={src:m.PropTypes.string.isRequired,crop:m.PropTypes.object,minWidth:m.PropTypes.number,minHeight:m.PropTypes.number,maxWidth:m.PropTypes.number,maxHeight:m.PropTypes.number,keepSelection:m.PropTypes.bool,onChange:m.PropTypes.func,onComplete:m.PropTypes.func,onImageLoaded:m.PropTypes.func,onImageError:m.PropTypes.func,onAspectRatioChange:m.PropTypes.func,disabled:m.PropTypes.bool,ellipse:m.PropTypes.bool,crossorigin:m.PropTypes.string,children:v.default.PropTypes.oneOfType([v.default.PropTypes.arrayOf(v.default.PropTypes.node),v.default.PropTypes.node])},a.defaultProps={disabled:!1,maxWidth:100,maxHeight:100,crossorigin:"anonymous"},a.xOrds=["e","w"],a.yOrds=["n","s"],a.xyOrds=["nw","ne","se","sw"],a.arrowKey={left:37,up:38,right:39,down:40},a.nudgeStep=.2,a.defaultCrop={x:0,y:0,width:0,height:0,aspect:!1},r);e.exports=I},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(528),v=o(m),y=n(23),M=o(y),I=n(11),T=o(I),w=n(3),E=o(w),b=n(13),S=o(b),D=n(282),A=o(D),N=n(76),_=n(20),C=n(32),P=o(C),x=n(31),O=o(x),L=n(44),j=o(L),k=n(281),z=o(k);n(212);var R=function(e,t,n,o){return(0,v.default)({x:e,y:t,width:n-e,height:o-t},function(e){return 100*e})},U=function(e,t,n,o){return(0,v.default)({cropLUX:e,cropLUY:t,cropRLX:n+e,cropRLY:o+t},function(e){return e/100})},B=function(e,t,n,o){var a=(0,N.getDefaultCrop)(e,t,n,o);return{x:100*a.px,y:100*a.py,width:100*a.pw,height:100*a.ph}},Y=function(e,t,n,o){return B(t,e,n,o)},W=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.state={imgSrc:"",rotate:0,outCrop:null,initCrop:{},needInitCropOnRotate:!1,isShowCropComponent:!1,isLoaded:!1,isLoadError:!1},n.onCropChange=n.onCropChange.bind(n),n.onImageLoaded=n.onImageLoaded.bind(n),n.onSubmit=n.onSubmit.bind(n),n.onCancelClick=n.onCancelClick.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=(this.props.encImgId,this.props.imageId,this.props.rotation,e.imageEditApiTemplate),n=e.defaultImageEditParams,o=e.encImgId,a=e.imageId,i=e.rotation,s=e.crop,u=(e.imageWidth,e.imageHeight,e.elementWidth),l=e.elementHeight,d=e.imgFlip,c=void 0!==d&&d,p=e.securityString,f=void 0===p?{timestamp:"",token:"",customerId:-1}:p,g=(0,M.default)(t)((0,T.default)({},n,(0,r.default)({encImgId:o,imageId:a,rotation:i,imgFlip:c},f)));g!==this.state.imgSrc&&this.setState({isShowCropComponent:!1}),this.setState({imgSrc:g,needInitCropOnRotate:!1,rotate:i});var h=(this.props.crop,{aspect:u/l});s&&(h=(0,T.default)({},h,R(s.cropLUX,s.cropLUY,s.cropRLX,s.cropRLY))),this.setState({initCrop:h,outCrop:h}),e.isShown||this.props.isShown===e.isShown||this.setState({imgSrc:""})}},{key:"onCropChange",value:function(e,t){this.setState({outCrop:e})}},{key:"onImageLoaded",value:function(e,t,n){var o=this.state.needInitCropOnRotate;if(o){var a=this.props,r=a.imageWidth,i=a.imageHeight,s=a.elementWidth,u=a.elementHeight,l=this.state.rotate,d=90===Math.abs(l),c={};c=d?Y(r,i,s,u):B(r,i,s,u);var p=(0,_.convertObjIn)((0,T.default)({},c,{aspect:s/u}));this.setState({outCrop:p,initCrop:p})}else this.setState({outCrop:e});this.setState({isShowCropComponent:!0,isLoaded:!0})}},{key:"onSubmit",value:function(){var e=this.props,t=e.encImgId,n=e.onDoneClick,o=this.state,a=o.outCrop,r=o.rotate,i=U(a.x,a.y,a.width,a.height);n(t,i,r),this.onCancelClick()}},{key:"onCancelClick",value:function e(){var e=this.props.onCancelClick;this.setState({isLoaded:!1,isLoadError:!1}),e&&e()}},{key:"onImageError",value:function(){this.setState({isLoadError:!0,isShowCropComponent:!0})}},{key:"rotate",value:function e(t){var n=this.props,o=n.imageEditApiTemplate,a=n.defaultImageEditParams,i=n.encImgId,s=n.imageId,u=n.imgFlip,l=void 0!==u&&u,d=n.securityString,c=void 0===d?{timestamp:"",token:"",customerId:-1}:d,p=n.onRotateClick,e=this.state.rotate,f=0;f=t>0?180===e?-90:e+t:e===-90?180:e+t;var g=(0,M.default)(o)((0,T.default)({},a,(0,r.default)({imageId:s,encImgId:encodeURIComponent(i),rotation:f,imgFlip:l},c)));this.setState({imgSrc:g,rotate:f,needInitCropOnRotate:!0,isShowCropComponent:!1,isLoaded:!1,isLoadError:!1}),"function"==typeof p&&p()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.imageName,o=e.imageCornerRatios,a=this.state,r=a.imgSrc,i=a.initCrop,s=a.isShowCropComponent,u=a.outCrop,l=(0,S.default)("left-button",{disable:!this.state.isLoaded}),d=(0,S.default)("right-button",{disable:!this.state.isLoaded});return E.default.createElement(P.default,{className:"image-edit-modal",opened:t,onClosed:this.onCancelClick},E.default.createElement("h3",{className:"modal-title"},"Set Image"),E.default.createElement("div",{className:"image-name"},n),E.default.createElement("div",{className:"cropper-area"},E.default.createElement(j.default,{isShown:!s}),t?E.default.createElement(A.default,{src:r,crop:i,onChange:this.onCropChange,onImageLoaded:this.onImageLoaded,onImageError:this.onImageError,minWidth:10,minHeight:10,keepSelection:!0},o?E.default.createElement(z.default,{outCrop:u,imageCornerRatios:o}):null):null),E.default.createElement("div",{className:"rotate-controls"},E.default.createElement("div",{className:"left-control"},E.default.createElement("button",{className:l,onClick:this.rotate.bind(this,-90)}),E.default.createElement("p",{className:"description"},"-90°")),E.default.createElement("div",{className:"right-control"},E.default.createElement("button",{className:d,onClick:this.rotate.bind(this,90)}),E.default.createElement("p",{className:"description"},"+90°"))),E.default.createElement("p",{className:"modal-foot"},E.default.createElement(O.default,{onClicked:this.onSubmit,disabled:!this.state.isLoaded},"Done")))}}]),t}(w.Component);W.propTypes={isShown:w.PropTypes.bool.isRequired,imageName:w.PropTypes.string.isRequired,imageEditApiTemplate:w.PropTypes.string.isRequired,encImgId:w.PropTypes.string.isRequired,onDoneClick:w.PropTypes.func.isRequired,imageWidth:w.PropTypes.number.isRequired,imageHeight:w.PropTypes.number.isRequired,elementWidth:w.PropTypes.number.isRequired,elementHeight:w.PropTypes.number.isRequired,rotation:w.PropTypes.number.isRequired,crop:w.PropTypes.shape({cropLUX:w.PropTypes.number,cropLUY:w.PropTypes.number,cropRLX:w.PropTypes.number,cropRLY:w.PropTypes.number}).isRequired,onCancelClick:w.PropTypes.func.isRequired,onRotateClick:w.PropTypes.func},W.defaultProps={defaultImageEditParams:{px:0,py:0,pw:1,ph:1,width:480,height:310,rotation:0},rotation:0},t.default=W},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(75);n(213);var v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=(e.id,this.props),o=m.isIE||m.isEdge?"onInput":"onChange",a=new Array;a[o]=t;for(var r in n)a[r]=n[r];return h.default.createElement("input",a)}}]),t}(g.Component);t.default=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){var n=e.state,o=n.total,a=n.current,r=e.props.actions,i=r.onPage;if(t>=0&&t<=o&&(e.setState({current:t}),i&&"function"==typeof i)){var s=t>a?"ClickNextPage":"ClickPreviousPage",u=s+","+t;i({total:o,current:t,TrackerParam:u})}},300)};t.goFirst=function(e){n(e,0)},t.goPrevious=function(e){var t=e.state.current;n(e,t-1)},t.goNext=function(e){var t=e.state.current;n(e,t+1)},t.goLast=function(e){var t=e.state.total;n(e,t)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(13),y=a(v),M=n(15);n(216);var I=n(285),T=o(I),w=function(e){function t(e,n){(0,u.default)(this,t);var o=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n)),a=o.props.data,r=a.total,s=a.current,l=void 0===s?0:s,d=a.pageStep,c=void 0===d?2:d;return o.timer=null,o.state={total:r,current:l,pageStep:c},o.goFirst=function(e){var t=e||window.event;t.preventDefault(),T.goFirst(o)},o.goPrevious=function(e){var t=e||window.event;t.preventDefault(),T.goPrevious(o)},o.goNext=function(e){var t=e||window.event;t.preventDefault(),T.goNext(o)},o.goLast=function(e){var t=e||window.event;t.preventDefault(),T.goLast(o)},o}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data,n=t.total,o=t.current,a=t.pageStep;n!==e.data.total&&this.setState({total:e.data.total}),o!==e.data.current&&this.setState({current:e.data.current}),a!==e.data.pageStep&&this.setState({pageStep:e.data.pageStep})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.t,o=t.className,a=t.style,r=t.isPressBook,i=(0,y.default)("x-pagination",o),s=this.state.total,u=this.state.current,l=this.state.pageStep,d=[];d=r?1===u?[1]:u===s?[(u-1)*l]:[(u-1)*l,(u-1)*l+1]:[u*l-1,u*l];var c=n("COVER"),p="";return u>0&&(c=n("SHEET")+" "+u+" "+n("OF")+" "+s,p=1===d.length?n("PAGE")+" "+d[0]:n("PAGE")+" "+d[0]+" & "+d[1]),m.default.createElement("ul",{className:i,style:a},m.default.createElement("li",{className:"item first",onClick:this.goFirst},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:0===u}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item previous",onClick:this.goPrevious},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:0===u}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item tip"},m.default.createElement("label",null,c),m.default.createElement("label",null,p)),m.default.createElement("li",{className:"item next",onClick:this.goNext},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:u===s}),m.default.createElement("a",null))),m.default.createElement("li",{className:"item last",onClick:this.goLast},m.default.createElement("label",null,m.default.createElement("input",{type:"checkbox",disabled:u===s}),m.default.createElement("a",null))))}}]),t}(h.Component);w.propTypes={actions:h.PropTypes.shape({onPage:h.PropTypes.func}),data:h.PropTypes.shape({total:h.PropTypes.number.isRequired,current:h.PropTypes.number,pageStep:h.PropTypes.number,isPressBook:h.PropTypes.bool})},w.defaultProps={data:{total:1,current:0,pageStep:2,isPressBook:!1}},t.default=(0,M.translate)("XPagination")(w)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g);n(217);var m=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,o=e.percent;return h.default.createElement("span",{className:"progress-c",style:{width:t?t+"px":"",height:n?n+"px":""}},h.default.createElement("span",{className:"progress",style:{width:o+"%"}}))}}]),t}(g.Component);t.default=m,m.propTypes={width:g.PropTypes.number,height:g.PropTypes.number}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(611),v=o(m);n(218);var y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={defaultValue:0,defaultStep:1,defaultMin:0,defaultMax:100,defaultVertical:!1},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"percentFormatter",value:function(e){return e+" in."}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.min,o=e.vertical,a=e.step,r=e.max,i=e.tipFormatter,s=e.handleSliderChange,u=e.handleAfterChange,l=e.handleBeforeChange;return h.default.createElement(v.default,{value:t,defaultValue:this.state.defaultValue,min:n?n:this.state.defaultMin,max:r?r:this.state.defaultMax,step:a?a:this.state.defaultStep,tipFormatter:i?i:this.percentFormatter.bind(this),vertical:o?o:this.state.defaultVertical,onChange:s,onAfterChange:u,onBeforeChange:l})}}]),t}(g.Component);y.propTypes={value:g.PropTypes.number,min:g.PropTypes.number,max:g.PropTypes.number,step:g.PropTypes.number,tipFormatter:g.PropTypes.func,vertical:g.PropTypes.bool,handleSliderChange:g.PropTypes.func},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(220);var y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,o=e.count,a=(0,v.default)("x-usage-count",t),r=n;return h.default.createElement("div",{className:a,style:r},h.default.createElement("div",{className:"text"},o))}}]),t}(g.Component);y.defaultProps={count:0},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=o(a),i=function(e,t){var n={method:"get",async:!0},o=(0,r.default)({},n,e),a=t||s();return a.upload.onprogress=function(e){o.progress&&o.progress(e)},a.onload=function(){o.success&&o.success(this.responseText,{status:this.status,statusText:this.statusText})},a.onerror=function(e){o.error&&o.error(e,{status:this.status,statusText:this.statusText})},a.onreadystatechange=function(){o.readyStateChange&&o.readyStateChange(this.readyState,this.status)},a.open(o.method,o.url,o.async),o.setHead&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"post"===o.method.toLowerCase()?a.send(o.data):a.send(null),a},s=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(!window.ActiveXObject)throw new Error("xhr not support");for(var e=["MSXML2.XMLHttp","Microsoft.XMLHTTP"],t=0,n=e.length;t<n;t++)try{return new ActiveXObject(version[t])}catch(e){}};t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(14),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=function(){function e(t){(0,s.default)(this,e),this._promise=new r.default(t),this._canceled=!1}return(0,l.default)(e,null,[{key:"all",value:function(e){return r.default.all(e)}},{key:"race",value:function(e){return r.default.race(e)}},{key:"reject",value:function(e){return r.default.reject(e)}},{key:"resolve",value:function(e){return r.default.resolve(e)}}]),(0,l.default)(e,[{key:"then",value:function(t,n){var o=this,a=new e(function(e,r){o._promise.then(function(n){o._canceled&&a.cancel(),e(t&&!o._canceled?t(n):n)},function(t){o._canceled&&a.cancel(),n&&!o._canceled?e(n(t)):r(t)})});return a}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"cancel",value:function(){return this._canceled=!0,this}}]),e}();t.default=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.formatDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=new Date(e),o=n.getFullYear(),a=String(n.getMonth()+1),r=String(n.getDate());return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[o,a,r].join(t)},o=t.formatTime=function(e){var t=new Date(e),n=String(t.getHours()),o=String(t.getMinutes()),a=String(t.getSeconds());return n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),[n,o,a].join(":")};t.formatDateTime=function(e){return e?n(e)+" "+o(e):""}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Element=void 0;var a=n(4),r=o(a);t.Element=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e);var n=t.type,o=void 0===n?"PhotoElement":n,a=t.elType,i=void 0===a?"image":a,s=t.x,u=void 0===s?0:s,l=t.y,d=void 0===l?0:l,c=t.width,p=void 0===c?0:c,f=t.height,g=void 0===f?0:f,h=t.px,m=void 0===h?0:h,v=t.py,y=void 0===v?0:v,M=t.pw,I=void 0===M?1:M,T=t.ph,w=void 0===T?1:T,E=t.dep,b=void 0===E?0:E,S=t.imageid,D=void 0===S?"":S,A=t.encImgId,N=void 0===A?"":A,_=t.rot,C=void 0===_?0:_,P=t.imgRot,x=void 0===P?0:P,O=t.imgFlip,L=void 0!==O&&O,j=t.cropLUX,k=void 0===j?0:j,z=t.cropLUY,R=void 0===z?0:z,U=t.cropRLX,B=void 0===U?1:U,Y=t.cropRLY,W=void 0===Y?1:Y;this.type=o,this.elType=i,this.x=u,this.y=d,this.width=p,this.height=g,this.px=m,this.py=y,this.pw=I,this.ph=w,this.dep=b,this.imageid=D,this.encImgId=N,this.rot=C,this.imgRot=x,this.imgFlip=L,this.cropLUX=k,this.cropLUY=R,this.cropRLX=B,this.cropRLY=W}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.codesOfSaveProject={success:200,unexpected:-100,emptySkuOrProject:-101,emptyTitle:-102,aprodProjectSku:-104,existedTitle:-103,notFoundSku:-105,notFoundProject:-106,
notOwnerOfProject:-107,projectInOrder:-108,checkFailedOfSubmit:-109,invalidOfType:-110,sessionTimeout:-111}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.addEventListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;e&&e.addEventListener&&e.addEventListener(t,o)},t.removeEventListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;e&&e.removeEventListener&&e.removeEventListener(t,o)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getDegree=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;switch(parseInt(e)){case 6:t=90;break;case 8:t=-90;break;case 3:t=180}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(){var e=window.console.log,t=(window.console.table||e,function(){}),n=function(){};window.log=window.log||t,window.console.log=t,window.table=window.table||n,window.console.table=n,window.loop=function(){}}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getUserOS=function(){var e="",t="",n=navigator.appVersion,o=navigator.userAgent,a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in a){var i=a[r];if(i.r.test(o)){e=i.s;break}}switch(/Windows/.test(e)&&(t=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS X":t=/Mac OS X (10[\.\_\d]+)/.exec(o)[1];break;case"Android":t=/Android ([\.\_\d]+)/.exec(o)[1];break;case"iOS":t=/OS (\d+)_(\d+)_?(\d+)?/.exec(n),t=t[1]+"."+t[2]+"."+(0|t[3])}return e+" "+t}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(this.src=e,s("DummyImageContainer for",e),!this.promise||!this.image){s("Initiating DummyImageContainer"),a.prototype.image=new Image;var t=this.image;a.prototype.promise=new i.default(function(e,n){t.onload=e,t.onerror=n,t.src=u(),t.complete===!0&&e(t)})}}var r=n(14),i=o(r),s=n(37),u=n(34).smallImage;e.exports=a},function(e,t,n){"use strict";function o(e,t){var n,o,r=document.createElement("div"),i=document.createElement("img"),s=document.createElement("span"),u="Hidden Text";r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin=0,r.style.padding=0,document.body.appendChild(r),i.src=a(),i.width=1,i.height=1,i.style.margin=0,i.style.padding=0,i.style.verticalAlign="baseline",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin=0,s.style.padding=0,s.appendChild(document.createTextNode(u)),r.appendChild(s),r.appendChild(i),n=i.offsetTop-s.offsetTop+1,r.removeChild(s),r.appendChild(document.createTextNode(u)),r.style.lineHeight="normal",i.style.verticalAlign="super",o=i.offsetTop-r.offsetTop+1,document.body.removeChild(r),this.baseline=n,this.lineWidth=1,this.middle=o}var a=n(34).smallImage;e.exports=o},function(e,t,n){"use strict";function o(){this.data={}}var a=n(300);o.prototype.getMetrics=function(e,t){return void 0===this.data[e+"-"+t]&&(this.data[e+"-"+t]=new a(e,t)),this.data[e+"-"+t]},e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,o){this.image=null,this.src=e;var a=this,r=u(e);this.promise=(t?new i.default(function(t){"about:blank"===e.contentWindow.document.URL||null==e.contentWindow.document.documentElement?e.contentWindow.onload=e.onload=function(){t(e)}:t(e)}):this.proxyLoad(o.proxy,r,o)).then(function(e){var t=n(114);return t(e.contentWindow.document.documentElement,{type:"view",width:e.width,height:e.height,proxy:o.proxy,javascriptEnabled:o.javascriptEnabled,removeContainer:o.removeContainer,allowTaint:o.allowTaint,imageTimeout:o.imageTimeout/2})}).then(function(e){return a.image=e})}var r=n(14),i=o(r),s=n(34),u=s.getBounds,l=n(78).loadUrlDocument;a.prototype.proxyLoad=function(e,t,n){var o=this.src;return l(o.src,e,o.ownerDocument,t.width,t.height,n)},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.src=e,this.image=new Image;var n=this;this.tainted=null,this.promise=new i.default(function(o,a){n.image.onload=o,n.image.onerror=a,t&&(n.image.crossOrigin="anonymous"),n.image.src=e,n.image.complete===!0&&o(n.image)})}var r=n(14),i=o(r);e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.link=null,this.options=e,this.support=t,this.origin=this.getOrigin(window.location.href)}var r=n(14),i=o(r),s=n(37),u=n(303),l=n(299),d=n(306),c=n(302),p=n(117),f=n(312),g=n(116),h=n(314),m=n(34).bind;a.prototype.findImages=function(e){var t=[];return e.reduce(function(e,t){switch(t.node.nodeName){case"IMG":return e.concat([{args:[t.node.src],method:"url"}]);case"svg":case"IFRAME":return e.concat([{args:[t.node],method:t.node.nodeName}])}return e},[]).forEach(this.addImage(t,this.loadImage),this),t},a.prototype.findBackgroundImage=function(e,t){return t.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(e,this.loadImage),this),e},a.prototype.addImage=function(e,t){return function(n){n.args.forEach(function(o){this.imageExists(e,o)||(e.splice(0,0,t.call(this,n)),s("Added image #"+e.length,"string"==typeof o?o.substring(0,100):o))},this)}},a.prototype.hasImageBackground=function(e){return"none"!==e.method},a.prototype.loadImage=function(e){if("url"===e.method){var t=e.args[0];return!this.isSVG(t)||this.support.svg||this.options.allowTaint?t.match(/data:image\/.*;base64,/i)?new u(t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(t)||this.options.allowTaint===!0||this.isSVG(t)?new u(t,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new u(t,!0):this.options.proxy?new d(t,this.options.proxy):new l(t):new p(t)}return"linear-gradient"===e.method?new g(e):"gradient"===e.method?new h(e):"svg"===e.method?new f(e.args[0],this.support.svg):"IFRAME"===e.method?new c(e.args[0],this.isSameOrigin(e.args[0].src),this.options):new l(e)},a.prototype.isSVG=function(e){return"svg"===e.substring(e.length-3).toLowerCase()||p.prototype.isInline(e)},a.prototype.imageExists=function(e,t){return e.some(function(e){return e.src===t})},a.prototype.isSameOrigin=function(e){return this.getOrigin(e)===this.origin},a.prototype.getOrigin=function(e){var t=this.link||(this.link=document.createElement("a"));return t.href=e,t.href=t.href,t.protocol+t.hostname+t.port},a.prototype.getPromise=function(e){return this.timeout(e,this.options.imageTimeout).catch(function(){var t=new l(e.src);return t.promise.then(function(t){e.image=t})})},a.prototype.get=function(e){var t=null;return this.images.some(function(n){return(t=n).src===e})?t:null},a.prototype.fetch=function(e){return this.images=e.reduce(m(this.findBackgroundImage,this),this.findImages(e)),this.images.forEach(function(e,t){e.promise.then(function(){s("Succesfully loaded image #"+(t+1),e)},function(n){s("Failed loading image #"+(t+1),e,n)})}),this.ready=i.default.all(this.images.map(this.getPromise,this)),s("Finished searching images"),this},a.prototype.timeout=function(e,t){var n,o=i.default.race([e.promise,new i.default(function(o,a){n=setTimeout(function(){s("Timed out loading image",e),a(e)},t)})]).then(function(e){return clearTimeout(n),e});return o.catch(function(){clearTimeout(n)}),o},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,a){F("Starting NodeParser"),this.renderer=t,this.options=a,this.range=null,this.support=n,this.renderQueue=[],this.stack=new V(!0,1,e.ownerDocument,null);var r=new G(e,null);if(a.background&&t.rectangle(0,0,t.width,t.height,new J(a.background)),e===e.ownerDocument.documentElement){var i=new G(r.color("backgroundColor").isTransparent()?e.ownerDocument.body:e.ownerDocument.documentElement,null);t.rectangle(0,0,t.width,t.height,i.color("backgroundColor"))}r.visibile=r.isElementVisible(a),this.createPseudoHideStyles(e.ownerDocument),this.disableAnimations(e.ownerDocument),this.nodes=k([r].concat(this.getChildren(r,a)).filter(function(e){return e.visible=e.isElementVisible(a)}).map(this.getPseudoElements,this)),this.fontMetrics=new Z,F("Fetched nodes, total:",this.nodes.length),F("Calculate overflow clips"),this.calculateOverflowClips(),F("Start fetching images"),this.images=o.fetch(this.nodes.filter(N)),this.ready=this.images.ready.then(K(function(){return F("Images loaded, starting parsing"),F("Creating stacking contexts"),this.createStackingContexts(),F("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),F("Render queue created with "+this.renderQueue.length+" items"),new W.default(K(function(e){a.async?"function"==typeof a.async?a.async.call(this,this.renderQueue,e):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,e)):e():(this.renderQueue.forEach(this.paint,this),e())},this))},this))}function r(e){return e.parent&&e.parent.clip.length}function i(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})}function s(){}function u(e,t,n,o){return e.map(function(a,r){if(a.width>0){var i=t.left,s=t.top,u=t.width,l=t.height-e[2].width;switch(r){case 0:l=e[0].width,a.args=p({c1:[i,s],c2:[i+u,s],c3:[i+u-e[1].width,s+l],c4:[i+e[3].width,s+l]},o[0],o[1],n.topLeftOuter,n.topLeftInner,n.topRightOuter,n.topRightInner);break;case 1:i=t.left+t.width-e[1].width,u=e[1].width,a.args=p({c1:[i+u,s],c2:[i+u,s+l+e[2].width],c3:[i,s+l],c4:[i,s+e[0].width]},o[1],o[2],n.topRightOuter,n.topRightInner,n.bottomRightOuter,n.bottomRightInner);break;case 2:s=s+t.height-e[2].width,l=e[2].width,a.args=p({c1:[i+u,s+l],c2:[i,s+l],c3:[i+e[3].width,s],c4:[i+u-e[3].width,s]},o[2],o[3],n.bottomRightOuter,n.bottomRightInner,n.bottomLeftOuter,n.bottomLeftInner);break;case 3:u=e[3].width,a.args=p({c1:[i,s+l+e[2].width],c2:[i,s],c3:[i+u,s+e[0].width],c4:[i+u,s+l]},o[3],o[0],n.bottomLeftOuter,n.bottomLeftInner,n.topLeftOuter,n.topLeftInner)}}return a})}function l(e,t,n,o){var a=4*((Math.sqrt(2)-1)/3),r=n*a,i=o*a,s=e+n,u=t+o;return{topLeft:c({x:e,y:u},{x:e,y:u-i},{x:s-r,y:t},{x:s,y:t}),topRight:c({x:e,y:t},{x:e+r,y:t},{x:s,y:u-i},{x:s,y:u}),bottomRight:c({x:s,y:t},{x:s,y:t+i},{x:e+r,y:u},{x:e,y:u}),bottomLeft:c({x:s,y:u},{x:s-r,y:u},{x:e,y:t+i},{x:e,y:t})}}function d(e,t,n){var o=e.left,a=e.top,r=e.width,i=e.height,s=t[0][0]<r/2?t[0][0]:r/2,u=t[0][1]<i/2?t[0][1]:i/2,d=t[1][0]<r/2?t[1][0]:r/2,c=t[1][1]<i/2?t[1][1]:i/2,p=t[2][0]<r/2?t[2][0]:r/2,f=t[2][1]<i/2?t[2][1]:i/2,g=t[3][0]<r/2?t[3][0]:r/2,h=t[3][1]<i/2?t[3][1]:i/2,m=r-d,v=i-f,y=r-p,M=i-h;return{topLeftOuter:l(o,a,s,u).topLeft.subdivide(.5),topLeftInner:l(o+n[3].width,a+n[0].width,Math.max(0,s-n[3].width),Math.max(0,u-n[0].width)).topLeft.subdivide(.5),topRightOuter:l(o+m,a,d,c).topRight.subdivide(.5),topRightInner:l(o+Math.min(m,r+n[3].width),a+n[0].width,m>r+n[3].width?0:d-n[3].width,c-n[0].width).topRight.subdivide(.5),bottomRightOuter:l(o+y,a+v,p,f).bottomRight.subdivide(.5),bottomRightInner:l(o+Math.min(y,r-n[3].width),a+Math.min(v,i+n[0].width),Math.max(0,p-n[1].width),f-n[2].width).bottomRight.subdivide(.5),bottomLeftOuter:l(o,a+M,g,h).bottomLeft.subdivide(.5),bottomLeftInner:l(o+n[3].width,a+M,Math.max(0,g-n[3].width),h-n[2].width).bottomLeft.subdivide(.5)}}function c(e,t,n,o){var a=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:o,subdivide:function(r){var i=a(e,t,r),s=a(t,n,r),u=a(n,o,r),l=a(i,s,r),d=a(s,u,r),p=a(l,d,r);return[c(e,i,l,p),c(p,d,u,o)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,o.x,o.y])},curveToReversed:function(o){o.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function p(e,t,n,o,a,r,i){var s=[];return t[0]>0||t[1]>0?(s.push(["line",o[1].start.x,o[1].start.y]),o[1].curveTo(s)):s.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(s.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(s),s.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(s)):(s.push(["line",e.c2[0],e.c2[1]]),s.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(s.push(["line",a[1].end.x,a[1].end.y]),a[1].curveToReversed(s)):s.push(["line",e.c4[0],e.c4[1]]),s}function f(e,t,n,o,a,r,i){t[0]>0||t[1]>0?(e.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(e),o[1].curveTo(e)):e.push(["line",r,i]),(n[0]>0||n[1]>0)&&e.push(["line",a[0].start.x,a[0].start.y])}function g(e){return e.cssInt("zIndex")<0}function h(e){return e.cssInt("zIndex")>0}function m(e){return 0===e.cssInt("zIndex")}function v(e){return["inline","inline-block","inline-table"].indexOf(e.css("display"))!==-1}function y(e){return e instanceof V}function M(e){return e.node.data.trim().length>0}function I(e){return/^(normal|none|0px)$/.test(e.parent.css("letterSpacing"))}function T(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){var n=e.css("border"+t+"Radius"),o=n.split(" ");return o.length<=1&&(o[1]=o[0]),o.map(O)})}function w(e){return e.nodeType===Node.TEXT_NODE||e.nodeType===Node.ELEMENT_NODE}function E(e){var t=e.css("position"),n=["absolute","relative","fixed"].indexOf(t)!==-1?e.css("zIndex"):"auto";return"auto"!==n}function b(e){return"static"!==e.css("position")}function S(e){return"none"!==e.css("float")}function D(e){return["inline-block","inline-table"].indexOf(e.css("display"))!==-1}function A(e){var t=this;return function(){return!e.apply(t,arguments)}}function N(e){return e.node.nodeType===Node.ELEMENT_NODE}function _(e){return e.isPseudoElement===!0}function C(e){return e.node.nodeType===Node.TEXT_NODE}function P(e){return function(t,n){return t.cssInt("zIndex")+e.indexOf(t)/e.length-(n.cssInt("zIndex")+e.indexOf(n)/e.length)}}function x(e){return e.getOpacity()<1}function O(e){return parseInt(e,10)}function L(e){return e.width}function j(e){return e.node.nodeType!==Node.ELEMENT_NODE||["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(e.node.nodeName)===-1}function k(e){return[].concat.apply([],e)}function z(e){var t=e.substr(0,1);return t===e.substr(e.length-1)&&t.match(/'|"/)?e.substr(1,e.length-2):e}function R(e){for(var t,n=[],o=0,a=!1;e.length;)U(e[o])===a?(t=e.splice(0,o),t.length&&n.push(H.ucs2.encode(t)),a=!a,o=0):o++,o>=e.length&&(t=e.splice(0,o),t.length&&n.push(H.ucs2.encode(t)));return n}function U(e){return[32,13,10,9,45].indexOf(e)!==-1}function B(e){return/[^\u0000-\u00ff]/.test(e)}var Y=n(14),W=o(Y),F=n(37),H=n(533),G=n(50),Q=n(313),X=n(307),Z=n(301),J=n(77),V=n(310),q=n(34),K=q.bind,$=q.getBounds,ee=q.parseBackgrounds,te=q.offsetBounds;a.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(e){if(N(e)){_(e)&&e.appendToDOM(),e.borders=this.parseBorders(e);var t="hidden"===e.css("overflow")?[e.borders.clip]:[],n=e.parseClip();n&&["absolute","fixed"].indexOf(e.css("position"))!==-1&&t.push([["rect",e.bounds.left+n.left,e.bounds.top+n.top,n.right-n.left,n.bottom-n.top]]),e.clip=r(e)?e.parent.clip.concat(t):t,e.backgroundClip="hidden"!==e.css("overflow")?e.clip.concat([e.borders.clip]):e.clip,_(e)&&e.cleanDOM()}else C(e)&&(e.clip=r(e)?e.parent.clip:[]);_(e)||(e.bounds=null)},this)},a.prototype.asyncRenderer=function(e,t,n){n=n||Date.now(),this.paint(e[this.renderIndex++]),e.length===this.renderIndex?t():n+20>Date.now()?this.asyncRenderer(e,t,n):setTimeout(K(function(){this.asyncRenderer(e,t)},this),0)},a.prototype.createPseudoHideStyles=function(e){this.createStyles(e,"."+X.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+X.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},a.prototype.disableAnimations=function(e){this.createStyles(e,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},a.prototype.createStyles=function(e,t){var n=e.createElement("style");n.innerHTML=t,e.body.appendChild(n)},a.prototype.getPseudoElements=function(e){var t=[[e]];if(e.node.nodeType===Node.ELEMENT_NODE){var n=this.getPseudoElement(e,":before"),o=this.getPseudoElement(e,":after");n&&t.push(n),o&&t.push(o)}return k(t)},a.prototype.getPseudoElement=function(e,t){var n=e.computedStyle(t);if(!n||!n.content||"none"===n.content||"-moz-alt-content"===n.content||"none"===n.display)return null;for(var o=z(n.content),a="url"===o.substr(0,3),r=document.createElement(a?"img":"html2canvaspseudoelement"),s=new X(r,e,t),u=n.length-1;u>=0;u--){var l=i(n.item(u));r.style[l]=n[l]}if(r.className=X.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+X.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,a)return r.src=ee(o)[0].args[0],[s];var d=document.createTextNode(o);return r.appendChild(d),[s,new Q(d,s)]},a.prototype.getChildren=function(e,t){return k([].filter.call(e.node.childNodes,w).map(function(n){var o=[n.nodeType===Node.TEXT_NODE?new Q(n,e):new G(n,e)].filter(j);return n.nodeType===Node.ELEMENT_NODE&&o.length&&"TEXTAREA"!==n.tagName?o[0].isElementVisible(t)?o.concat(this.getChildren(o[0])):[]:o},this))},a.prototype.newStackingContext=function(e,t){var n=new V(t,e.getOpacity(),e.node,e.parent);e.cloneTo(n);var o=t?n.getParentStack(this):n.parent.stack;o.contexts.push(n),e.stack=n},a.prototype.createStackingContexts=function(){this.nodes.forEach(function(e){N(e)&&(this.isRootElement(e)||x(e)||E(e)||this.isBodyWithTransparentRoot(e)||e.hasTransform())?this.newStackingContext(e,!0):N(e)&&(b(e)&&m(e)||D(e)||S(e))?this.newStackingContext(e,!1):e.assignStack(e.parent.stack)},this)},a.prototype.isBodyWithTransparentRoot=function(e){return"BODY"===e.node.nodeName&&e.parent.color("backgroundColor").isTransparent()},a.prototype.isRootElement=function(e){return null===e.parent},a.prototype.sortStackingContexts=function(e){e.contexts.sort(P(e.contexts.slice(0))),e.contexts.forEach(this.sortStackingContexts,this)},a.prototype.parseTextBounds=function(e){return function(t,n,o){if("none"!==e.parent.css("textDecoration").substr(0,4)||0!==t.trim().length){if(this.support.rangeBounds&&!e.parent.hasTransform()){var a=o.slice(0,n).join("").length;return this.getRangeBounds(e.node,a,t.length)}if(e.node&&"string"==typeof e.node.data){var r=e.node.splitText(t.length),i=this.getWrapperBounds(e.node,e.parent.hasTransform());return e.node=r,i}}else this.support.rangeBounds&&!e.parent.hasTransform()||(e.node=e.node.splitText(t.length));return{}}},a.prototype.getWrapperBounds=function(e,t){var n=e.ownerDocument.createElement("html2canvaswrapper"),o=e.parentNode,a=e.cloneNode(!0);n.appendChild(e.cloneNode(!0)),o.replaceChild(n,e);var r=t?te(n):$(n);return o.replaceChild(a,n),r},a.prototype.getRangeBounds=function(e,t,n){var o=this.range||(this.range=e.ownerDocument.createRange());return o.setStart(e,t),o.setEnd(e,t+n),o.getBoundingClientRect()},a.prototype.parse=function(e){var t=e.contexts.filter(g),n=e.children.filter(N),o=n.filter(A(S)),a=o.filter(A(b)).filter(A(v)),r=n.filter(A(b)).filter(S),i=o.filter(A(b)).filter(v),u=e.contexts.concat(o.filter(b)).filter(m),l=e.children.filter(C).filter(M),d=e.contexts.filter(h);t.concat(a).concat(r).concat(i).concat(u).concat(l).concat(d).forEach(function(e){this.renderQueue.push(e),y(e)&&(this.parse(e),this.renderQueue.push(new s))},this)},a.prototype.paint=function(e){try{e instanceof s?this.renderer.ctx.restore():C(e)?(_(e.parent)&&e.parent.appendToDOM(),this.paintText(e),_(e.parent)&&e.parent.cleanDOM()):this.paintNode(e)}catch(e){if(F(e),this.options.strict)throw e}},a.prototype.paintNode=function(e){y(e)&&(this.renderer.setOpacity(e.opacity),this.renderer.ctx.save(),e.hasTransform()&&this.renderer.setTransform(e.parseTransform())),"INPUT"===e.node.nodeName&&"checkbox"===e.node.type?this.paintCheckbox(e):"INPUT"===e.node.nodeName&&"radio"===e.node.type?this.paintRadio(e):this.paintElement(e)},a.prototype.paintElement=function(e){var t=e.parseBounds();this.renderer.clip(e.backgroundClip,function(){this.renderer.renderBackground(e,t,e.borders.borders.map(L))},this),this.renderer.clip(e.clip,function(){this.renderer.renderBorders(e.borders.borders)},this),this.renderer.clip(e.backgroundClip,function(){switch(e.node.nodeName){case"svg":case"IFRAME":var n=this.images.get(e.node);n?this.renderer.renderImage(e,t,e.borders,n):F("Error loading <"+e.node.nodeName+">",e.node);break;case"IMG":var o=this.images.get(e.node.src);o?this.renderer.renderImage(e,t,e.borders,o):F("Error loading <img>",e.node.src);break;case"CANVAS":this.renderer.renderImage(e,t,e.borders,{image:e.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(e)}},this)},a.prototype.paintCheckbox=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height),o={width:n-1,height:n-1,top:t.top,left:t.left},a=[3,3],r=[a,a,a,a],i=[1,1,1,1].map(function(e){return{color:new J("#A5A5A5"),width:e}}),s=d(o,r,i);this.renderer.clip(e.backgroundClip,function(){this.renderer.rectangle(o.left+1,o.top+1,o.width-2,o.height-2,new J("#DEDEDE")),this.renderer.renderBorders(u(i,o,s,r)),e.node.checked&&(this.renderer.font(new J("#424242"),"normal","normal","bold",n-3+"px","arial"),this.renderer.text("✔",o.left+n/6,o.top+n-1))},this)},a.prototype.paintRadio=function(e){var t=e.parseBounds(),n=Math.min(t.width,t.height)-2;this.renderer.clip(e.backgroundClip,function(){this.renderer.circleStroke(t.left+1,t.top+1,n,new J("#DEDEDE"),1,new J("#A5A5A5")),e.node.checked&&this.renderer.circle(Math.ceil(t.left+n/4)+1,Math.ceil(t.top+n/4)+1,Math.floor(n/2),new J("#424242"))},this)},a.prototype.paintFormValue=function(e){var t=e.getValue();if(t.length>0){var n=e.node.ownerDocument,o=n.createElement("html2canvaswrapper"),a=["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"];a.forEach(function(t){try{o.style[t]=e.css(t)}catch(e){F("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var r=e.parseBounds();o.style.position="fixed",o.style.left=r.left+"px",o.style.top=r.top+"px",o.textContent=t,n.body.appendChild(o),this.paintText(new Q(o.firstChild,e)),n.body.removeChild(o)}},a.prototype.paintText=function(e){e.applyTextTransform();var t=H.ucs2.decode(e.node.data),n=this.options.letterRendering&&!I(e)||B(e.node.data)?t.map(function(e){return H.ucs2.encode([e])}):R(t),o=e.parent.fontWeight(),a=e.parent.css("fontSize"),r=e.parent.css("fontFamily"),i=e.parent.parseTextShadows();this.renderer.font(e.parent.color("color"),e.parent.css("fontStyle"),e.parent.css("fontVariant"),o,a,r),i.length?this.renderer.fontShadow(i[0].color,i[0].offsetX,i[0].offsetY,i[0].blur):this.renderer.clearShadow(),this.renderer.clip(e.parent.clip,function(){n.map(this.parseTextBounds(e),this).forEach(function(t,o){t&&(this.renderer.text(n[o],t.left,t.bottom),this.renderTextDecoration(e.parent,t,this.fontMetrics.getMetrics(r,a)))},this)},this)},a.prototype.renderTextDecoration=function(e,t,n){switch(e.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(t.left,Math.round(t.top+n.baseline+n.lineWidth),t.width,1,e.color("color"));break;case"overline":this.renderer.rectangle(t.left,Math.round(t.top),t.width,1,e.color("color"));break;case"line-through":this.renderer.rectangle(t.left,Math.ceil(t.top+n.middle+n.lineWidth),t.width,1,e.color("color"))}};var ne={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};a.prototype.parseBorders=function(e){var t=e.parseBounds(),n=T(e),o=["Top","Right","Bottom","Left"].map(function(t,n){var o=e.css("border"+t+"Style"),a=e.color("border"+t+"Color");"inset"===o&&a.isBlack()&&(a=new J([255,255,255,a.a]));var r=ne[o]?ne[o][n]:null;return{width:e.cssInt("border"+t+"Width"),color:r?a[r[0]](r[1]):a,args:null}}),a=d(t,n,o);return{clip:this.parseBackgroundClip(e,a,o,n,t),borders:u(o,t,a,n)}},a.prototype.parseBackgroundClip=function(e,t,n,o,a){var r=e.css("backgroundClip"),i=[];switch(r){case"content-box":case"padding-box":f(i,o[0],o[1],t.topLeftInner,t.topRightInner,a.left+n[3].width,a.top+n[0].width),f(i,o[1],o[2],t.topRightInner,t.bottomRightInner,a.left+a.width-n[1].width,a.top+n[0].width),f(i,o[2],o[3],t.bottomRightInner,t.bottomLeftInner,a.left+a.width-n[1].width,a.top+a.height-n[2].width),f(i,o[3],o[0],t.bottomLeftInner,t.topLeftInner,a.left+n[3].width,a.top+a.height-n[2].width);break;default:f(i,o[0],o[1],t.topLeftOuter,t.topRightOuter,a.left,a.top),f(i,o[1],o[2],t.topRightOuter,t.bottomRightOuter,a.left+a.width,a.top),f(i,o[2],o[3],t.bottomRightOuter,t.bottomLeftOuter,a.left+a.width,a.top+a.height),f(i,o[3],o[0],t.bottomLeftOuter,t.topLeftOuter,a.left,a.top+a.height)}return i},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=document.createElement("a");n.href=e,e=n.href,this.src=e,this.image=new Image;var o=this;this.promise=new i.default(function(n,a){o.image.crossOrigin="Anonymous",o.image.onload=n,o.image.onerror=a,new s(e,t,document).then(function(e){o.image.src=e}).catch(a)})}var r=n(14),i=o(r),s=n(78).ProxyURL;e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){s.call(this,e,t),this.isPseudoElement=!0,this.before=":before"===n}var r=n(43),i=o(r),s=n(50);a.prototype.cloneTo=function(e){a.prototype.cloneTo.call(this,e),e.isPseudoElement=!0,e.before=this.before},a.prototype=(0,i.default)(s.prototype),a.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},a.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},a.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",a.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",e.exports=a},function(e,t,n){"use strict";function o(e,t,n,o,a){this.width=e,this.height=t,this.images=n,this.options=o,this.document=a}var a=n(37);o.prototype.renderImage=function(e,t,n,o){var a=e.cssInt("paddingLeft"),r=e.cssInt("paddingTop"),i=e.cssInt("paddingRight"),s=e.cssInt("paddingBottom"),u=n.borders,l=t.width-(u[1].width+u[3].width+a+i),d=t.height-(u[0].width+u[2].width+r+s);this.drawImage(o,0,0,o.image.width||l,o.image.height||d,t.left+a+u[3].width,t.top+r+u[0].width,l,d)},o.prototype.renderBackground=function(e,t,n){t.height>0&&t.width>0&&(this.renderBackgroundColor(e,t),this.renderBackgroundImage(e,t,n))},o.prototype.renderBackgroundColor=function(e,t){var n=e.color("backgroundColor");n.isTransparent()||this.rectangle(t.left,t.top,t.width,t.height,n)},o.prototype.renderBorders=function(e){e.forEach(this.renderBorder,this)},o.prototype.renderBorder=function(e){e.color.isTransparent()||null===e.args||this.drawShape(e.args,e.color)},o.prototype.renderBackgroundImage=function(e,t,n){var o=e.parseBackgroundImages();o.reverse().forEach(function(o,r,i){switch(o.method){case"url":var s=this.images.get(o.args[0]);s?this.renderBackgroundRepeating(e,t,s,i.length-(r+1),n):a("Error loading background-image",o.args[0]);break;case"linear-gradient":case"gradient":var u=this.images.get(o.value);u?this.renderBackgroundGradient(u,t,n):a("Error loading background-image",o.args[0]);break;case"none":break;default:a("Unknown background-image type",o.args[0])}},this)},o.prototype.renderBackgroundRepeating=function(e,t,n,o,a){var r=e.parseBackgroundSize(t,n.image,o),i=e.parseBackgroundPosition(t,n.image,o,r),s=e.parseBackgroundRepeat(o);switch(s){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(n,i,r,t,t.left+a[3],t.top+i.top+a[0],99999,r.height,a);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(n,i,r,t,t.left+i.left+a[3],t.top+a[0],r.width,99999,a);break;case"no-repeat":this.backgroundRepeatShape(n,i,r,t,t.left+i.left+a[3],t.top+i.top+a[0],r.width,r.height,a);break;default:this.renderBackgroundRepeat(n,i,r,{top:t.top,left:t.left},a[3],a[0])}},e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){d.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=e,this.canvas.height=t),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},p("Initialized CanvasRenderer with size",e,"x",t)}function r(e){return e.length>0}var i=n(93),s=o(i),u=n(43),l=o(u),d=n(308),c=n(116),p=n(37);a.prototype=(0,l.default)(d.prototype),a.prototype.setFillStyle=function(e){return this.ctx.fillStyle="object"===("undefined"==typeof e?"undefined":(0,s.default)(e))&&e.isColor?e.toString():e,this.ctx},a.prototype.rectangle=function(e,t,n,o,a){this.setFillStyle(a).fillRect(e,t,n,o)},a.prototype.circle=function(e,t,n,o){this.setFillStyle(o),this.ctx.beginPath(),this.ctx.arc(e+n/2,t+n/2,n/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},a.prototype.circleStroke=function(e,t,n,o,a,r){this.circle(e,t,n,o),this.ctx.strokeStyle=r.toString(),this.ctx.stroke()},a.prototype.drawShape=function(e,t){this.shape(e),this.setFillStyle(t).fill()},a.prototype.taints=function(e){if(null===e.tainted){this.taintCtx.drawImage(e.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),e.tainted=!1}catch(t){this.taintCtx=document.createElement("canvas").getContext("2d"),e.tainted=!0}}return e.tainted},a.prototype.drawImage=function(e,t,n,o,a,r,i,s,u){this.taints(e)&&!this.options.allowTaint||this.ctx.drawImage(e.image,t,n,o,a,r,i,s,u)},a.prototype.clip=function(e,t,n){this.ctx.save(),e.filter(r).forEach(function(e){this.shape(e).clip()},this),t.call(n),this.ctx.restore()},a.prototype.shape=function(e){return this.ctx.beginPath(),e.forEach(function(e,t){"rect"===e[0]?this.ctx.rect.apply(this.ctx,e.slice(1)):this.ctx[0===t?"moveTo":e[0]+"To"].apply(this.ctx,e.slice(1))},this),this.ctx.closePath(),this.ctx},a.prototype.font=function(e,t,n,o,a,r){this.setFillStyle(e).font=[t,n,o,a,r].join(" ").split(",")[0]},a.prototype.fontShadow=function(e,t,n,o){this.setVariable("shadowColor",e.toString()).setVariable("shadowOffsetY",t).setVariable("shadowOffsetX",n).setVariable("shadowBlur",o)},a.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},a.prototype.setOpacity=function(e){this.ctx.globalAlpha=e},a.prototype.setTransform=function(e){this.ctx.translate(e.origin[0],e.origin[1]),this.ctx.transform.apply(this.ctx,e.matrix),this.ctx.translate(-e.origin[0],-e.origin[1])},a.prototype.setVariable=function(e,t){return this.variables[e]!==t&&(this.variables[e]=this.ctx[e]=t),
this},a.prototype.text=function(e,t,n){this.ctx.fillText(e,t,n)},a.prototype.backgroundRepeatShape=function(e,t,n,o,a,r,i,s,u){var l=[["line",Math.round(a),Math.round(r)],["line",Math.round(a+i),Math.round(r)],["line",Math.round(a+i),Math.round(s+r)],["line",Math.round(a),Math.round(s+r)]];this.clip([l],function(){this.renderBackgroundRepeat(e,t,n,o,u[3],u[0])},this)},a.prototype.renderBackgroundRepeat=function(e,t,n,o,a,r){var i=Math.round(o.left+t.left+a),s=Math.round(o.top+t.top+r);this.setFillStyle(this.ctx.createPattern(this.resizeImage(e,n),"repeat")),this.ctx.translate(i,s),this.ctx.fill(),this.ctx.translate(-i,-s)},a.prototype.renderBackgroundGradient=function(e,t){if(e instanceof c){var n=this.ctx.createLinearGradient(t.left+t.width*e.x0,t.top+t.height*e.y0,t.left+t.width*e.x1,t.top+t.height*e.y1);e.colorStops.forEach(function(e){n.addColorStop(e.stop,e.color.toString())}),this.rectangle(t.left,t.top,t.width,t.height,n)}},a.prototype.resizeImage=function(e,t){var n=e.image;if(n.width===t.width&&n.height===t.height)return n;var o,a=document.createElement("canvas");return a.width=t.width,a.height=t.height,o=a.getContext("2d"),o.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height),a},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o){s.call(this,n,o),this.ownStacking=e,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*t}var r=n(43),i=o(r),s=n(50);a.prototype=(0,i.default)(s.prototype),a.prototype.getParentStack=function(e){var t=this.parent?this.parent.stack:null;return t?t.ownStacking?t:t.getParentStack(e):e.stack},e.exports=a},function(e,t){"use strict";function n(e){this.rangeBounds=this.testRangeBounds(e),this.cors=this.testCORS(),this.svg=this.testSVG()}n.prototype.testRangeBounds=function(e){var t,n,o,a,r=!1;return e.createRange&&(t=e.createRange(),t.getBoundingClientRect&&(n=e.createElement("boundtest"),n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n),o=t.getBoundingClientRect(),a=o.height,123===a&&(r=!0),e.body.removeChild(n))),r},n.prototype.testCORS=function(){return"undefined"!=typeof(new Image).crossOrigin},n.prototype.testSVG=function(){var e=new Image,t=document.createElement("canvas"),n=t.getContext("2d");e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),t.toDataURL()}catch(e){return!1}return!0},e.exports=n},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.src=e,this.image=null;var n=this;this.promise=t?new u.default(function(t,o){n.image=new Image,n.image.onload=t,n.image.onerror=o,n.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(e),n.image.complete===!0&&t(n.image)}):this.hasFabric().then(function(){return new u.default(function(t){window.html2canvas.svg.fabric.parseSVGDocument(e,n.createCanvas.call(n,t))})})}var r=n(43),i=o(r),s=n(14),u=o(s),l=n(117);a.prototype=(0,i.default)(l.prototype),e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){u.call(this,e,t)}function r(e,t,n){if(e.length>0)return t+n.toUpperCase()}var i=n(43),s=o(i),u=n(50);a.prototype=(0,s.default)(u.prototype),a.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},a.prototype.transform=function(e){var t=this.node.data;switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,r);case"uppercase":return t.toUpperCase();default:return t}},e.exports=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){s.apply(this,arguments),this.type="linear"===e.args[0]?s.TYPES.LINEAR:s.TYPES.RADIAL}var r=n(43),i=o(r),s=n(115);a.prototype=(0,i.default)(s.prototype),e.exports=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e){this.max=e||a.thread,this.linkHead=null,this.linkNode=null,this.pool=[]}var n=null,o=function(){},a={thread:5,try:2},r={setAttr:function(){var e=new Image;return e.dataset?function(e,t,n){return e.dataset[t]=n,n}:function(e,t,n){return e.setAttribute("data-"+t,n),n}}(),getAttr:function(){var e=new Image;return e.dataset?function(e,t){return e.dataset[t]}:function(e,t){return e.getAttribute("data-"+t)}}()};t.prototype.initPool=function(){var e,t,n,o;for(o=this,e=0;e<this.max;e++)n={},t=new Image,r.setAttr(t,"id",e),t.onload=function(){o.notice(o.getNode(this),"success",this.src),o.executeLink(this)},t.onerror=function(e){var t=o.getNode(this);t.try<a.try?(t.try=t.try+1,o.appendNode(o.createNode(t.src,t.options,t.notice,t.group,t.try))):o.notice(t,"error",this.src),o.executeLink(this)},n.img=t,n.free=!0,this.pool.push(n)},t.prototype.notice=function(e,t,n){e.notice(t,n)},t.prototype.executeLink=function(e){this.linkHead?(this.setSrc(e,this.linkHead),this.shiftNode()):this.status(e,!0)},t.prototype.getFree=function(){var e,t;for(t=0,e=this.pool.length;t<e;t++)if(this.pool[t].free)return this.pool[t];return null},t.prototype.setSrc=function(e,t){this.status(e,!1),this.setNode(e,t),e.src=t.src},t.prototype.status=function(e,t){var n=r.getAttr(e,"id");this.pool[n].free=t,t&&(this.pool[n].node=null)},t.prototype.setNode=function(e,t){var n=r.getAttr(e,"id");return this.pool[n].node=t,this.pool[n].node===t},t.prototype.getNode=function(e){var t=r.getAttr(e,"id");return this.pool[t].node},t.prototype.load=function(e,t){var n=[],a=null,r=0,i=0,s=function(){return t.once?function(e,t){var n=this.group,o=this.options;n[e].push(t),n.success.length+n.error.length===n.count&&setTimeout(function(){o.success.call(null,n.success,n.error,n.count)},1)}:function(e,t){var n=this.options;setTimeout(function(){n[e].call(null,t)},1)}}(),u={count:0,success:[],error:[]},l=null;for(t=t||{},t.success=t.success||o,t.error=t.error||o,n=n.concat(e),u.count=n.length,i=0,r=n.length;i<r;i++)l=this.createNode(n[i],t,s,u),a=this.getFree(),a?this.setSrc(a.img,l):this.appendNode(l)},t.prototype.info=function(){var e={},t=0,n=0,o=null;for(e.thread={},e.thread.count=this.pool.length,e.thread.free=0,e.task={},e.task.count=0,n=0,t=this.pool.length;n<t;n++)this.pool[n].free&&(e.thread.free=e.thread.free+1);if(o=this.linkHead)for(e.task.count=e.task.count+1;o.next;)e.task.count=e.task.count+1,o=o.next;return e},t.prototype.createNode=function(e,t,n,o,a){var r={};return r.src=e,r.options=t,r.notice=n,r.group=o,r.try=a||0,r},t.prototype.appendNode=function(e){this.linkHead?(this.linkNode.next=e,this.linkNode=e):(this.linkHead=e,this.linkNode=e)},t.prototype.shiftNode=function(){this.linkHead&&(this.linkHead=this.linkHead.next||null)},e.initImagePool=function(e){return n||(n=new t(e),n.initPool()),{load:function(){n.load.apply(n,arguments)},info:function(){return n.info.call(n)}}}}(window)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},o=function(e){return e.wheelDelta?-e.wheelDelta/120:e.detail/3};t.addMouseWheelEvent=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.addEventListener("mousewheel",function(e){a&&n(e),t(o(e))},!1),e.addEventListener("DOMMouseScroll",function(e){a&&n(e),t(o(e))},!1)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),r=o(a),i=n(101),s=o(i),u=n(11),l=o(u),d=n(12),c=o(d),p=function(e){var t={},n=(0,c.default)(e,"global.options.optionGroup");return n&&n.forEach&&n.forEach(function(e){var n=e.option.length?[].concat((0,r.default)(e.option)):[e.option];t[e.id]=n}),t},f=function(e){var t={};return(0,s.default)(e,function(e,n){"key"!==n&&(t[n]=e.split(","))}),t},g=function(e){var t=[],n=e;return"undefined"==typeof e?t:(e.length||(n=[e]),n.forEach(function(e){var n=e.keyPattern.split("-"),o=(0,l.default)({},e,{keyPattern:n,entry:null}),a=[];a=Array.isArray(e.entry)?e.entry:[e.entry],a.forEach(function(e){var t=e.key.split("-"),a={};n.forEach(function(e,o){var r=t[o];r=r.startsWith("[")&&r.endsWith("]")?r.substring(1,r.length-1).split(","):r.indexOf(",")!==-1&&1===n.length?r.split(","):[r],a[e]=r});var r=(0,l.default)(e,f(e),{key:a});o.entry||(o.entry=[]),o.entry.push(r)}),t.push(o)}),t)},h=function(e){var t=(0,c.default)(e,"configurableOptionMap.optionMap");return g(t)},m=function(e){var t=(0,c.default)(e,"parameters.parameter");return g(t)},v=function(e){var t=(0,c.default)(e,"variables.variable");return g(t)},y=function(e){var t=(0,c.default)(e,"disableOptionMap.optionMap");return g(t)};t.default={prepareOptionGroup:p,prepareConfigurableOptionMap:h,prepareDisableOptionMap:y,prepareParameters:m,prepareVariables:v}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getCookieDate=function(e){var t=null,n=document.cookie.split(";");if(n)for(var o=0;o<n.length;o++){var a=n[o].split("=");if(a.length>1&&e==a[0]){t=unescape(a[1]);break}}return t},o=t.get=function(e,t,n){var o=new XMLHttpRequest;o.onload=function(e){t&&"function"==typeof t&&t(e||window.event)},o.onerror=function(e){n&&"function"==typeof n&&n(e||window.event)},o.open("GET",e),o.send()};t.goTracker=function(e,t,a,r,i){var s=""+window.location.hostname,t=t||n(" JSESSIONID")||n("JSESSIONID"),u=a||n(" AS_UID")||n("AS_UID");e=t+","+u+","+(new Date).getTime()+","+e;var l="https://venus.zno.com/b.htm?"+e;"www.zno.com"!=s&&(l="https://log.zno.com.t/b.htm?"+e),o(l,r,i)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,n){if("startMonth"in e){t({type:c.CHANGE_CALENDAR_SETTING,calendarSetting:l.default.fromJS(e)});var o=(0,s.default)(n(),"project.data.pageArray"),a=e.startMonth,r=e.startYear,i=(0,s.default)(n(),"project.data.setting"),u=i.get("product"),d=p.pageStepMap[u];o=o.map(function(e,t){var n=Math.floor(t/d),o=a-0+n,i=o>12?o-12:o,s=o>12?r-0+1:r;e=e.set("month",i),e=e.set("year",s);var u=e.get("elements");return u&&u.size&&(u=u.map(function(e){return e.get("type")===p.elementTypes.calendar?(e=e.set("month",i),e=e.set("year",s)):e})),e.set("elements",u)}),t({type:c.SET_PAGE_ARRAY,pageArray:o})}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),s=a(i);t.changeCalendarSetting=r;var u=n(2),l=a(u),d=n(10),c=o(d),p=(n(26),n(9))},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,n){var o=(0,w.getDataFromState)(n()),a=o.urls,r=o.property,i=o.setting,s=(o.snipping,(0,p.default)(n(),"system.env.userInfo").toJS()),l=s.timestamp,c=s.authToken,f=s.id,h=a.get("uploadBaseUrl"),m=r.get("projectId"),v=i.get("product");return!e||"string"==typeof e&&e.substring(0,50).length<50?d.default.resolve():t((0,u.default)({},T.CALL_API,{apiPattern:{name:y.UPLOAD_COVER_IMAGE,params:{uploadBaseUrl:h,timestamp:l,token:c,customerId:f}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:g.default.stringify({projectid:m,encodeimage:e,projectType:v})}}))}}function i(e){return function(t,n){var o=(0,p.default)(n(),"project.data.cover"),a=o.get("containers"),r=a.get("0");r=r.setIn(["template","tplGuid"],e.id);var i=r.get("elements"),s=(0,b.updateElementsByTemplate)(r,m.default.List(),m.default.List(),e);return s=i.concat(s),s&&s.size&&(s=s.map(function(e){return e.get("type")===I.elementTypes.photo&&e.get("border")?e.delete("border"):e})),r=r.set("elements",s),a=a.set("0",r),o=o.set("containers",a),t({type:M.CHANGE_PROJECT_PROPERTY,data:{isCoverDefaultTemplateUsed:!0}}),t({type:M.SET_COVER,cover:o})}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=a(s),l=n(14),d=a(l),c=n(12),p=a(c);t.uploadCoverImage=r,t.applyDefaultTemplateToCover=i;var f=n(36),g=a(f),h=n(2),m=a(h),v=n(16),y=o(v),M=n(10),I=n(9),T=n(25),w=n(26),E=n(29),b=(a(E),n(40))},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return function(n,o){var a=(0,I.getDataFromState)(o()),r=a.currentPage,i=a.imageArray,s=a.pageArray,u=a.containers,l=m.default.fromJS(e),d=m.default.List(),c=s.find(function(e){return e.get("id")===t})||u.find(function(e){return e.get("id")===t})||r;l.forEach(function(e){d=d.push((0,E.default)(e,c,i).merge({id:(0,M.guid)()}))});var p=c.get("id");return n({type:y.CREATE_ELEMENTS,pageId:p,elements:d}),n({type:y.UPDATE_PAGE_TEMPLATE_ID,pageId:p,templateId:""}),g.default.resolve()}}function i(e,t){return r([e],t)}function s(e){return function(t,n){var o=(0,I.getDataFromState)(n()),a=o.elementPageIdMap,r=a.get(e[0]);return t({type:y.DELETE_ELEMENTS,pageId:r,elementIds:e}),t({type:y.UPDATE_PAGE_TEMPLATE_ID,pageId:r,templateId:""}),t({type:y.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(n()).elementArray)}),g.default.resolve()}}function u(e){return s([e])}function l(e,t,n){var o=t.find(function(e){return e.get("type")===b.elementTypes.cameo});if(o){var a=e.find(function(e){return e.get("elements").find(function(e){return e.get("id")===o.get("id")})});a&&n({type:y.UPDATE_ELEMENTS,updateObjectArray:m.default.fromJS([{elements:[{id:o.get("id"),encImgId:""}],pageId:a.get("id")}])})}}function d(){return function(e,t){var n=(0,I.getDataFromState)(t()),o=n.setting,a=n.elementArray,r=n.containers,i=o.get("product"),s=o.get("cover"),u=[b.coverTypes.PSNC,b.coverTypes.PSLC],d=a;return i===b.productTypes.PS&&u.indexOf(s)!==-1&&(d=a.filter(function(e){return e.get("type")!==b.elementTypes.cameo}),l(r,a,e)),e({type:y.DELETE_ALL,willDeleteElementIds:d.map(function(e){return e.get("id")})}),e({type:y.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(t()).elementArray)}),g.default.resolve()}}function c(e){return function(t,n){var o=(0,I.getDataFromState)(n()),a=o.imageArray,r=o.pageArray,i=o.containers,s=o.elementPageIdMap,u=m.default.List(),l=m.default.fromJS(e);if(!l.size)return g.default.resolve();l.forEach(function(e){var t=e.get("elements")||m.default.List([e]),n=s.get(t.getIn(["0","id"])),o=r.find(function(e){return e.get("id")===n})||i.find(function(e){return e.get("id")===n}),l=o.get("elements"),d=m.default.fromJS(t);d.forEach(function(e,t){var n=l.find(function(t){return t.get("id")===e.get("id")});if(n){var o=e.set("type",n.get("type"));d=d.set(String(t),o)}});var c=m.default.List();d.forEach(function(e){c=c.push((0,E.default)(e,o,a))}),u=u.push(m.default.Map({pageId:n,elements:c}))}),t({type:y.UPDATE_ELEMENTS,updateObjectArray:u});var d=u.getIn(["0","elements","0"]);return"undefined"!=typeof d.get("encImgId")&&t({type:y.SET_IMAGE_USED_MAP,imageUsedMap:(0,T.getImageUsedMap)((0,I.getDataFromState)(n()).elementArray)}),g.default.resolve()}}function p(e){return c([{elements:[e]}])}Object.defineProperty(t,"__esModule",{value:!0});var f=n(14),g=a(f);t.createElements=r,t.createElement=i,t.deleteElements=s,t.deleteElement=u,t.deleteAll=d,t.updateElements=c,t.updateElement=p;var h=n(2),m=a(h),v=n(10),y=o(v),M=n(17),I=n(26),T=n(51),w=n(88),E=a(w),b=n(9)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return{type:i.DELETE_PROJECT_IMAGE,encImgId:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteProjectImage=a;var r=n(10),i=o(r)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(79),u=o(s),l=n(327),d=o(l),c=n(321),p=o(c),f=n(325),g=o(f),h=n(326),m=o(h),v=n(320),y=o(v),M=n(324),I=o(M),T=n(319),w=o(T),E=n(322),b=o(E);t.default=(0,i.default)({},u,d,p,g,m,y,I,w,b)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(t,n){var o=(0,g.getDataFromState)(n()),a=o.urls,r=o.userId,i=a.get("baseUrl");return t((0,u.default)({},f.CALL_API,{apiPattern:{name:d.GET_PROJECT_ORDERED_STATUS,params:{baseUrl:i,projectId:e,userId:r}}}))}}function i(){return{type:p.CLEAR_ORDER_INFO}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=a(s);t.getOrderInfo=r,t.clearOrderInfo=i;var l=n(16),d=o(l),c=n(10),p=o(c),f=n(25),g=n(26)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o=null,a=null;return e?(o=(0,P.generatePage)(t,n),a=(0,P.generatePage)(t,n)):(o=(0,P.generateSheet)(t,n),a=(0,P.generatePage)(t,n),a.backend.isPrint=!1),[o,a]}function i(e,t){for(var n=t.setting,o=t.parameterMap,a=t.bookSetting,i=n.get("product")===C.productTypes.PS,s=o.toJS(),u=a.getIn(["background","color"]),l=A.default.List(),d=0;d<e;d+=1){var c=r(i,s,u),p=(0,T.default)(c,2),f=p[0],g=p[1];l=l.push(A.default.fromJS(f)),l=l.push(A.default.fromJS(g))}return l}function s(e,t,n,o){var a=(0,j.getUpdatedCoverElementsOnSheetNumChange)(e,t,n,o);if(a){var r=null,i=null;e.get("containers").forEach(function(e){var t=e.get("type");switch(t){case"Full":r=e;break;case"Back":i=e}});var s=A.default.List(),u=A.default.List();if(a.forEach(function(e){if(r){var t=r.get("elements").find(function(t){return t.get("id")===e.get("id")});t&&(s=s.push(e))}if(i){var n=i.get("elements").find(function(t){return t.get("id")===e.get("id")});n&&(u=u.push(e))}}),r)return A.default.fromJS([{pageId:r.get("id"),elements:s}])}return null}function u(e,t){return function(n,o){var a=(0,x.getDataFromState)(o()),r=a.parameterMap,u=a.pageArray,l=a.setting,d=i(t,a),c=l.get("product")===C.productTypes.PS,p=u.size,f=c?p-2:p;(0,S.default)(e)&&(f=e);var g=r.getIn(["spineWidth","addtionalValue"]);n({type:_.CREATE_MULTIPLE_DUAL_PAGE,insertIndex:f,insertPageArray:d});var h=g*t;n({type:_.UPDATE_SPINE_WIDTH,spineWidth:h});var m=(0,x.getDataFromState)(o()),v=m.cover,y=m.imageArray,I=s(v,y,r,h);return I&&n({type:_.UPDATE_ELEMENTS,updateObjectArray:I}),M.default.resolve()}}function l(e){var t=1;return u(e,t)}function d(e,t){return function(n,o){var a=(0,x.getDataFromState)(o()),r=a.parameterMap;n({type:_.DELETE_DUAL_PAGE,leftPageId:e,rightPageId:t});var i=r.getIn(["spineWidth","addtionalValue"]),u=-i;n({type:_.UPDATE_SPINE_WIDTH,spineWidth:u});var l=(0,x.getDataFromState)(o()),d=l.cover,c=l.imageArray,p=s(d,c,r,u);return p&&n({type:_.UPDATE_ELEMENTS,updateObjectArray:p}),M.default.resolve()}}function c(e,t){return{type:_.CHANGE_PAGE_BGCOLOR,pageId:e,bgColor:t}}function p(e){var t=e;return t.forEach(function(e,n){e.get("id")||(t=t.setIn([String(n),"id"],(0,L.guid)()))}),t}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.APPLY_TEMPLATE_TO_PAGES;return function(n,o){var a=(0,x.getDataFromState)(o()),r=(a.cover,a.containers),i=(a.setting,a.imageArray,a.parameterMap,e);return i.forEach(function(e,t){var n=p(e.get("elements")),o=r.findIndex(function(e){return"cover"===e.get("type")});r.get(o);i=i.setIn([String(t),"elements"],n)}),n({type:t,templateDataArray:i}),n({type:_.SET_IMAGE_USED_MAP,imageUsedMap:(0,O.getImageUsedMap)((0,x.getDataFromState)(o()).elementArray)}),M.default.resolve()}}function g(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_.APPLY_TEMPLATE_TO_PAGES;return f(A.default.fromJS([{pageId:e,templateId:t,elements:n}]),o)}function h(e,t){return{type:_.UPDATE_PAGE_TEMPLATE_ID,pageId:e,templateId:t}}function m(e,t){return{type:_.MOVE_PAGE_BEFORE,pageId:e,beforePageId:t}}function v(e){return function(t,n){var o=(0,E.default)(n(),"project.data.pageArray"),a=(0,E.default)(n(),"project.data.setting"),r=a.get("product");return o.size&&(o=o.map(function(t){if(r===C.productTypes.WC&&t.get("type")===C.pageTypes.bottom)return t;t=t.setIn(["template","tplGuid"],e.id);var n=t.get("elements"),o=(0,k.updateElementsByTemplate)(t,A.default.List(),A.default.List(),e);return o=n.concat(o),o&&o.size&&(o=o.map(function(e){return e.get("type")===C.elementTypes.photo&&e.get("border")?e.delete("border"):e})),t.set("elements",o)})),t({type:_.CHANGE_PROJECT_PROPERTY,data:{isInnerDefaultTemplateUsed:!0}}),t({type:_.SET_PAGE_ARRAY,pageArray:o})}}Object.defineProperty(t,"__esModule",{value:!0});var y=n(14),M=a(y),I=n(38),T=a(I),w=n(12),E=a(w),b=n(64),S=a(b);t.createMultipleDualPage=u,t.createDualPage=l,t.deleteDualPage=d,t.changePageBgColor=c,t.applyTemplateToPages=f,t.applyTemplate=g,t.updatePageTemplateId=h,t.movePageBefore=m,t.applyDefaultTemplateToPages=v;var D=n(2),A=a(D),N=n(10),_=o(N),C=n(9),P=n(87),x=n(26),O=n(51),L=n(17),j=n(492),k=n(40)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return e.map(function(e){var o={x:e.get("px")*t,y:e.get("py")*n};return e.get("type")!==Q.elementTypes.photo?(o.width=e.get("pw")*t,o.height=e.get("ph")*n):(o.pw=e.get("width")/t,o.ph=e.get("height")/n),e.merge(o)})}function i(e){var t=e;return t.forEach(function(e,n){if(e.get("type")!==Q.pageTypes.spine){var o=r(e.get("elements"),e.get("width"),e.get("height"));t=t.setIn([String(n),"elements"],o)}}),t}function s(e,t){var n=t,o=e.first();return o.get("type")===Q.pageTypes.cover&&(n=n.setIn(["containers","0"],o)),n}function u(e,t){var n=e,o=e.first();if(o.get("type")===Q.pageTypes.cover&&(n=e.shift()),!t.size)return U.default.List();var a=t.first(),r={width:a.get("width"),height:a.get("height"),bleed:a.get("bleed")};return n.forEach(function(e,t){n=n.set(String(t),e.merge(r))}),i(n)}function l(e){return function(t,n){var o=(0,J.getDataFromState)(n()),a=o.urls,r=(o.property,o.userId),i=a.get("baseUrl");return t((0,x.default)({},X.CALL_API,{apiPattern:{name:F.GET_PROJECT_DATA,params:{baseUrl:i,userId:r,projectId:e,autoRandomNum:Date.now()}}})).then(function(e){$(e,n,t)})}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,o){var a=(0,J.getDataFromState)(o()),r=a.urls,i=r.get("uploadBaseUrl");return n((0,x.default)({},X.CALL_API,{apiPattern:{name:F.GET_PREVIEW_PROJECT_DATA,params:{uploadBaseUrl:i,isParentBook:t,projectId:encodeURIComponent(e)}}})).then(function(e){$(e,o,n)})}}function c(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return function(a,r){n="2.0";var i=(0,J.getDataFromState)(r()),s=i.urls,u=i.property,l=i.setting,d=s.get("baseUrl"),c=u.get("projectId"),p=l.get("product"),f=t.get("id"),g=o||u.get("title"),h=(0,Z.generateProject)(e,t,n,g),m=(0,Z.generateSku)(h),v=Boolean(o),y=null,M=u.get("title");y=c===-1?F.NEW_PROJECT:F.SAVE_PROJECT,v&&(delete h.guid,y=F.NEW_PROJECT,M=o);var I=["web-h5","1","JSON",p,n,Date.now()];return a((0,x.default)({},X.CALL_API,{apiPattern:{name:y,params:{baseUrl:d,userId:f,projectId:c,projectType:p}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:z.default.stringify({title:M,projectJson:(0,C.default)(h),skuJson:(0,C.default)(m),requestKey:I.join("|")})}}))}}function p(e,t,n,o){return c(e,t,n,o)}function f(){return function(e,t){var n=(0,J.getDataFromState)(t()),o=n.urls,a=n.property,r=n.userId,i=o.get("baseUrl"),s=a.get("projectId");return e((0,x.default)({},X.CALL_API,{apiPattern:{name:F.SUBMIT_CHECK_FAIL_PROJECT,params:{baseUrl:i,projectId:s,userId:r}}})).then(function(t){var n=(0,j.default)(t,"resultData.code");return"200"===n&&e((0,x.default)({},X.CALL_API,{apiPattern:{name:F.GET_PROJECT_ORDERED_STATUS,params:{baseUrl:i,projectId:s,userId:r}}})),n})}}function g(e,t){return function(n,o){var a=o(),r=(0,j.default)(a,"system.env.urls").get("baseUrl");return n((0,x.default)({},X.CALL_API,{apiPattern:{name:F.HAS_PARENT_BOOK,params:{baseUrl:r,projectId:t,userId:e}}}))}}function h(e,t,n,o){return function(a,r){var i=(0,J.getDataFromState)(r()),s=i.pageArray,u=i.imageArray,l=i.containers,d=i.ratioMap,c=d.get("innerWorkspaceForArrangePages"),p=null,f=null;s.forEach(function(t){t.get("id")===e&&(p=t),t.get("id")===n&&(f=t)}),l.forEach(function(t){t.get("id")===e&&(p=t),t.get("id")===n&&(f=t)});var g=p.get("elements").find(function(e){return e.get("id")===t}),h=f.get("elements").find(function(e){return e.get("id")===o}),m=null,v=null;u.forEach(function(e){e.get("encImgId")===g.get("encImgId")&&(m=e),e.get("encImgId")===h.get("encImgId")&&(v=e)});var y=U.default.List(),M=U.default.Map({id:t}),I=U.default.Map({id:o});if(v){var T=(0,V.getCropOptions)(v.get("width"),v.get("height"),g.get("width")*c,g.get("height")*c,g.get("imgRot"));M=M.merge({encImgId:h.get("encImgId"),style:h.get("style"),border:h.get("border"),cropLUX:T.cropLUX,cropLUY:T.cropLUY,cropRLX:T.cropRLX,cropRLY:T.cropRLY})}else M=M.merge({encImgId:"",style:h.get("style"),border:h.get("border")});var w=(0,V.getCropOptions)(m.get("width"),m.get("height"),h.get("width")*c,h.get("height")*c,h.get("imgRot"));return I=I.merge({encImgId:g.get("encImgId"),style:g.get("style"),border:g.get("border"),cropLUX:w.cropLUX,cropLUY:w.cropLUY,cropRLX:w.cropRLX,cropRLY:w.cropRLY}),y=y.push(U.default.Map({pageId:e,elements:U.default.List([M])})),y=y.push(U.default.Map({pageId:n,elements:U.default.List([I])})),a({type:G.UPDATE_ELEMENTS,updateObjectArray:y}),N.default.resolve()}}function m(e){return e.reduce(function(e,t){return e+","+t.id},"").replace(/^\,/,"")}function v(e,t){return t instanceof Array||(t=[t]),e.map(function(e){var n=t.filter(function(t){return t.id===e.id})[0];return e.encImgId=n.encImgId,e})}function y(e,t){var n=this;return function(){var o=(0,D.default)(w.default.mark(function o(a,r){var i,s,u,l,d,c,p,f,g,h;return w.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=r(),s=(0,j.default)(i,"system.env.urls").get("baseUrl"),u=123,n.next=5,a((0,x.default)({},X.CALL_API,{apiPattern:{name:F.GET_MAIN_PROJECT_IMAGE,params:{baseUrl:s,mainProjectUid:e,autoRandomNum:u}}}));case 5:if(l=n.sent,d=l.errorCode,c=l.data,!c||"1"!==d){n.next=30;break}t=t.replace(/\s+/g,"+"),n.prev=10,c=JSON.parse(c),n.next=23;break;case 14:return n.prev=14,n.t0=n.catch(10),c=(0,j.default)(Y.default.xml2js(c),"images.image"),c instanceof Array||(c=[c]),p=m(c),n.next=21,a((0,x.default)({},X.CALL_API,{apiPattern:{name:F.GET_ENCODE_IMAGE_IDS,params:{baseUrl:s}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:z.default.stringify({imageIds:p})}}));case 21:f=n.sent,c=v(c,(0,j.default)(f,"result.images.image"));case 23:return n.prev=23,g=(0,j.default)(i,"project.imageArray"),h=[].concat((0,b.default)(g||[]),(0,b.default)(c||[])),h.sort(function(e,n){return n.encImgId===encodeURIComponent(t)?1:e.shotTime-n.shotTime}),a({type:G.SET_IMAGE_ARRAY,imageArray:U.default.fromJS(h)}),n.abrupt("return",N.default.resolve(h));case 30:case"end":return n.stop()}},o,n,[[10,14,23,30]])}));return function(e,t){return o.apply(this,arguments)}}()}function M(){var e=this;return function(){var t=(0,D.default)(w.default.mark(function t(n,o){var a,r,i,s;return w.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o(),r=(0,j.default)(a,"system.env.urls").get("baseUrl"),i=String((0,j.default)(a,"system.env.albumId")),s=(0,j.default)(a,"project.data.deletedEncImgIds").toJS(),s.length){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",n((0,x.default)({},X.CALL_API,{apiPattern:{name:F.DELETE_SERVER_PHOTOS,params:{baseUrl:r}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:z.default.stringify({data:(0,C.default)({albumId:i,images:s})})}})));case 7:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}()}function I(e){return function(t,n){var o=(0,j.default)(n(),"system.env.urls").toJS(),a=o.baseUrl;return t((0,x.default)({},X.CALL_API,{apiPattern:{name:F.MY_PHOTOS,params:{baseUrl:a}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:z.default.stringify({customerId:e,autoRandomNum:Date.now()})}})).then(function(e){return JSON.parse(e.data)})}}Object.defineProperty(t,"__esModule",{value:!0});var T=n(185),w=a(T),E=n(47),b=a(E),S=n(182),D=a(S),A=n(14),N=a(A),_=n(48),C=a(_),P=n(24),x=a(P),O=n(18),L=(a(O),n(12)),j=a(L);t.getProjectData=l,t.getPreviewProjectData=d,t.saveProject=c,t.cloneProject=p,t.submitCheckFailProject=f,t.hasParentBook=g,t.swapPhotoElement=h,t.loadMainProjectImages=y,t.deleteServerPhotos=M,t.getMyPhotosInfo=I;var k=n(36),z=a(k),R=n(2),U=a(R),B=n(39),Y=a(B),W=n(16),F=o(W),H=n(10),G=o(H),Q=n(9),X=n(25),Z=(n(17),n(87)),J=n(26),V=n(21),q=n(79),K=n(51),$=function(e,t,n){var o=e.project,a=o.spec;n({type:G.INIT_PROJECT_SETTING,setting:a});var r=(0,J.getDataFromState)(t()),i=U.default.fromJS((0,q.computeNewData)(r,a)),l=i.get("cover"),d=i.get("pageArray"),c=i.getIn(["setting","product"]);c===Q.productTypes.LC&&n({type:G.SWITCH_SHEET,index:1});var p=U.default.fromJS(o.pages),f=s(p,l),g=u(p,d);n({type:G.SET_COVER,cover:f}),n({type:G.SET_PAGE_ARRAY,pageArray:g}),n({type:G.SET_VARIABLE_MAP,variableMap:i.get("variableMap")}),n({type:G.SET_PARAMETER_MAP,parameterMap:i.get("parameterMap")}),n({type:G.SET_IMAGE_ARRAY,imageArray:U.default.fromJS(o.images)}),n({type:G.INIT_CALENDAR_SETTING,calendarSetting:U.default.fromJS(o.calendarSetting)}),n({type:G.SET_OPTION_MAP,availableOptionMap:i.get("availableOptionMap")});var h=(0,J.getDataFromState)(t()).elementArray;n({type:G.SET_IMAGE_USED_MAP,imageUsedMap:(0,K.getImageUsedMap)(h)})}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(){return{type:v.PROJECT_LOAD_COMPLETED}}function i(e){return{type:v.UPDATE_PROJECT_ID,projectId:e}}function s(e){return function(t,n){var o=(0,T.getDataFromState)(n()),a=o.urls,r=o.userId,i=a.get("baseUrl");return t((0,f.default)({},I.CALL_API,{apiPattern:{name:M.GET_PROJECT_TITLE,params:{baseUrl:i,userId:r,projectId:e}}}))}}function u(e,t){return function(n,o){var a=(0,T.getDataFromState)(o()),r=a.urls,i=a.userId,s=r.get("baseUrl");return n((0,f.default)({},I.CALL_API,{apiPattern:{name:M.SAVE_PROJECT_TITLE,params:{baseUrl:s,userId:i,projectId:e,projectName:t}}}))}}function l(e){return{type:v.CHANGE_PROJECT_TITLE,title:e}}function d(e){return function(t,n){var o=(0,T.getDataFromState)(n()),a=o.urls,r=a.get("baseUrl");return t((0,f.default)({},I.CALL_API,{apiPattern:{name:M.CHECK_PROJECT_TITLE,params:{baseUrl:r}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:h.default.stringify(e)}}))}}function c(e){return{type:v.CHANGE_PROJECT_PROPERTY,data:e}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(24),f=a(p);t.projectLoadCompleted=r,t.updateProjectId=i,t.getProjectTitle=s,t.saveProjectTitle=u,t.changeProjectTitle=l,t.checkProjectTitle=d,t.changeProjectProperty=c;var g=n(36),h=a(g),m=n(10),v=o(m),y=n(16),M=o(y),I=n(25),T=n(26)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);
return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e,t){var n=T.default.xml2js(M.default);if(n){var o=(0,l.default)(n,"product-spec"),a=v.default.prepareConfigurableOptionMap(o),r=v.default.prepareOptionGroup(o),i=v.default.prepareParameters(o),u=v.default.prepareVariables(o),d=v.default.prepareDisableOptionMap(o);e({type:f.INIT_SPEC_DATA,configurableOptionArray:a,allOptionMap:r,parameterArray:i,variableArray:u,disableOptionArray:d,version:o.version});var p=(0,h.getDataFromState)(t()),m=p.property,y=p.queryStringObj,I=y.get("isPreview"),E=m.get("projectId")===-1;if(!I&&E){var b=c.default.fromJS((0,g.computeNewData)(p)),S=b.getIn(["setting","product"]);S===w.productTypes.LC&&e({type:f.SWITCH_SHEET,index:1}),e({type:f.INIT_PROJECT_SETTING,setting:b.get("setting")}),e({type:f.SET_COVER,cover:b.get("cover")}),e({type:f.SET_PAGE_ARRAY,pageArray:b.get("pageArray")}),e({type:f.SET_VARIABLE_MAP,variableMap:b.get("variableMap")}),e({type:f.SET_OPTION_MAP,availableOptionMap:b.get("availableOptionMap")}),e({type:f.SET_PARAMETER_MAP,parameterMap:b.get("parameterMap")})}}return s.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=a(i),u=n(12),l=a(u);t.getSpecData=r;var d=n(2),c=a(d),p=n(10),f=o(p),g=n(79),h=n(26),m=n(317),v=a(m),y=n(534),M=a(y),I=n(39),T=a(I),w=n(9)},function(e,t,n){"use strict";function o(e){return{type:r.SHOW_ALERT_MODAL,alertData:e}}function a(){return{type:r.HIDE_ALERT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlertModal=o,t.hideAlertModal=a;var r=n(10)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e,t){var n=(0,u.getDataFromState)(t()),o=n.queryStringObj,a="factory"===o.get("source"),r=l.merge({}),d=l.merge({canSelectElement:!0,canMoveElement:!0,canResizeElement:!0,canRotateElement:!1,canEditElement:!0,canCreateElement:!0,canDeleteElement:!0,canShowSnackBar:!0,canSwapImage:!0,canDragImageInPage:!0,canDropImageInPage:!0,canUseElementActionBar:!0,canUseGlobalActionBar:!0}),c=l.merge({canShowOriginalPhotoLayer:a}),p=l.merge({}),f=i.default.Map({base:r,editPages:d,previewPages:c,allPages:p});e({type:s.SET_CAPABILITIES,capabilities:f})}}Object.defineProperty(t,"__esModule",{value:!0}),t.initCapabilities=a;var r=n(2),i=o(r),s=n(10),u=n(26),l=i.default.fromJS({canSelectElement:!1,canMoveElement:!1,canResizeElement:!1,canRotateElement:!1,canShowOriginalPhotoLayer:!1,canEditElement:!1,canCreateElement:!1,canDeleteElement:!1,canShowSnackBar:!1,canSwapImage:!1,canDragImageInPage:!1,canDropImageInPage:!1,canSwapSheet:!1,canNavigateSheet:!1,canUseElementActionBar:!1,canUseGlobalActionBar:!1})},function(e,t,n){"use strict";function o(){return{type:r.SHOW_CLONE_MODAL}}function a(){return{type:r.HIDE_CLONE_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showCloneModal=o,t.hideCloneModal=a;var r=n(10)},function(e,t,n){"use strict";function o(e){return{type:r.SHOW_CONFIRM,confirmData:e}}function a(){return{type:r.HIDE_CONFIRM}}Object.defineProperty(t,"__esModule",{value:!0}),t.showConfirm=o,t.hideConfirm=a;var r=n(10)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){return{type:h.SHOW_CONTACT_US_MODAL}}function r(){return{type:h.HIDE_CONTACT_US_MODAL}}function i(e){return function(t,n){var o=(0,f.getUrl)(n(),"system.env.urls"),a=o.get("baseUrl"),r=e.userId,i=e.userName,s=e.userEmail,l=e.projectName,h=e.projectId,m=e.os,v=e.browser,y=e.question,M=e.featureRequest,I=e.bug;return t((0,u.default)({},c.CALL_API,{apiPattern:{name:p.CONTACT_US,params:{baseUrl:a}},options:{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:d.default.stringify({userId:r,userName:i,userEmail:s,sku:"",projectName:l,projectId:h,autoRandomNum:(0,g.getRandomNum)().toString(),webClientId:"1",os:m,browser:v,question:y,featureRequest:M,bug:I})}}))}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=o(s);t.showContactUsModal=a,t.hideContactUsModal=r,t.handleSubmit=i;var l=n(36),d=o(l),c=n(25),p=n(16),f=n(60),g=(n(59),n(17)),h=n(10)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){return function(e){return e((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_ENV,params:{webClientId:g.webClientId,baseUrl:p.API_BASE,autoRandomNum:(0,h.getRandomNum)()}}}))}}function r(){return function(e,t){var n=(0,f.getUrl)(t(),"system.env.urls"),o=n.get("baseUrl");return e((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_SESSION_USER_INFO,params:{baseUrl:o,webClientId:g.webClientId,autoRandomNum:(0,h.getRandomNum)()}}}))}}function i(e){return function(t,n){var o=(0,f.getUrl)(n(),"system.env.urls"),a=o.get("baseUrl");return t((0,d.default)({},c.CALL_API,{apiPattern:{name:p.HEART_BEAT,params:{baseUrl:a,userId:e}}}))}}function s(e,t){return function(n,o){var a=(0,f.getUrl)(o(),"system.env.urls"),r=a.get("baseUrl");return n((0,d.default)({},c.CALL_API,{apiPattern:{name:p.GET_USER_ALBUM_ID,params:{baseUrl:r,userId:e,albumName:encodeURIComponent(t)}}}))}}function u(e,t){return function(n,o){var a=(0,f.getUrl)(o(),"system.env.urls"),r=a.get("baseUrl");return n((0,d.default)({},c.CALL_API,{apiPattern:{name:p.ADD_ALBUM,params:{baseUrl:r,userId:e,webClientId:g.webClientId,albumName:t,autoRandomNum:(0,h.getRandomNum)()}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(24),d=o(l);t.getEnv=a,t.getUserInfo=r,t.keepAlive=i,t.getAlbumId=s,t.addAlbum=u;var c=n(25),p=n(16),f=n(60),g=n(59),h=n(17)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=i.default.parse(window.location.search.substr(1));return{type:s.PARSER_QUERYSTRING,value:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parser=a;var r=n(36),i=o(r),s=n(10)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(){return function(e,t){var n=(0,l.default)(t(),"system.env.urls").toJS();return e((0,s.default)({},d.CALL_API,{apiPattern:{name:p.GET_FONTS,params:{baseUrl:n.baseUrl}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),s=a(i),u=n(12),l=a(u);t.getFontList=r;var d=n(25),c=n(16),p=o(c)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(t,n){return t({type:u.SWITCH_SHEET,index:e}),s.default.resolve()}}function r(e,t){return function(n,o){return n({type:u.SWITCH_PAGE,index:e,id:t}),s.default.resolve()}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),s=o(i);t.switchSheet=a,t.switchPage=r;var u=n(10)},function(e,t,n){"use strict";function o(e){return{type:a.UPDATE_RATIO,ratios:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateRatio=o;var a=n(10)},function(e,t,n){"use strict";function o(e){return{type:a.ADD_TRACKER,param:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addTracker=o;var a=n(10)},function(e,t,n){"use strict";function o(e){return{type:r.SHOW_IMAGE_EDIT_MODAL,data:e}}function a(){return{type:r.HIDE_IMAGE_EDIT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showImageEditModal=o,t.hideImageEditModal=a;var r=n(10)},function(e,t,n){"use strict";function o(e){return function(t,n){var o=n(),a=o.system;return!!a.env.userInfo&&(e.sort(function(e){return["image/jpeg","image/jpg","image/png","image/x-png"].indexOf(e.type)!==-1}),t({type:s.ADD_IMAGES,files:e}),!0)}}function a(e){return function(t,n){return t({type:s.RETRY_IMAGE,guid:e})}}function r(e){return{type:s.UPLOAD_COMPLETE,fields:e}}function i(e){return{type:s.AUTO_ADD_PHOTO_TO_CANVAS,params:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addImages=o,t.retryImage=a,t.uploadComplete=r,t.autoAddPhotoToCanvas=i;var s=n(10)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return{type:l.ADD_NOTIFICATION,data:e}}function r(e){return{type:l.REMOVE_NOTIFICATION,uid:e}}function i(){return{type:l.CLEAR_NOTIFICATION}}function s(e){return{type:l.INIT_NOTIFICATION_SYSTEM,notificationSystem:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addNotification=a,t.removeNotification=r,t.clearNotification=i,t.initNotificationSystem=s;var u=n(10),l=o(u)},function(e,t,n){"use strict";function o(e){return{type:r.SHOW_PREVIEW,data:e}}function a(){return{type:r.HIDE_PREVIEW}}Object.defineProperty(t,"__esModule",{value:!0}),t.show=o,t.hide=a;var r=n(10)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(t,n){var o=[e.size,e.numberOfMonth,e.dateStyle].join(","),a=(0,u.default)(n(),"system.env.urls").get("baseUrl");return t((0,i.default)({},l.CALL_API,{apiPattern:{name:d.GET_PRODUCT_PRICE,params:{baseUrl:a,options:o,product:e.product}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=o(r),s=n(12),u=o(s);t.getProductPrice=a;var l=n(25),d=n(16)},function(e,t,n){"use strict";function o(e){return{type:a.CHANGE_TAB_IN_SIDEBAR,tabIndex:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeTab=o;var a=n(10)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return function(n){return n((0,i.default)({},s.CALL_API,{apiPattern:{name:u.GET_STYLE_LIST,params:{baseUrl:u.API_BASE,autoRandomNum:(0,l.getRandomNum)(),size:e,productType:t}}}))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),i=o(r);t.getStyleList=a;var s=n(25),u=n(16),l=(n(59),n(17))},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return function(o,a){var i=a(),s=t,u=(0,S.default)(i,"project.data.setting").get("product"),l=(0,S.default)(i,"project.data.setting").get("orientation");u!==P.productTypes.LC&&"Portrait"!==l&&(s=t.split("X")[1]+"X"+t.split("X")[0]);var d=(0,S.default)(i,"system.env.urls").get("baseUrl");return o((0,v.default)({},D.CALL_API,{apiPattern:{name:A.GET_TEMPLATE_LIST,params:{baseUrl:d,designSize:s,customerId:e,autoRandomNum:(new Date).getTime(),productType:n}}})).then(function(e){if("success"===e.result.state){var t=(0,x.convertObjIn)(e.result.list.template),n=[],i=[],s="",u="",l=t instanceof Array?t:[t];l instanceof Array&&l.forEach(function(e){var t="object"===(0,h.default)(e.guid)?e.guid.__text.replace(/\s/g,""):e.guid&&e.guid.replace(/\s/g,"");0==e.usePosition?(e.isCoverDefault&&(s=t),n.push((0,M.default)({},e,{guid:t}))):e.usePosition>0&&(e.isCoverDefault&&(u=t),i.push((0,M.default)({},e,{guid:t})))}),s||(s=n.length&&(0,S.default)(n,"0.guid")),u||(u=i.length&&(0,S.default)(i,"0.guid")),s="object"===("undefined"==typeof s?"undefined":(0,h.default)(s))?s.__text.replace(/\s/g,""):s&&s.replace(/\s/g,""),u="object"===("undefined"==typeof u?"undefined":(0,h.default)(u))?u.__text.replace(/\s/g,""):u&&u.replace(/\s/g,""),o({type:C.SET_TEMPLATE_LIST,ListInfo:{coverTemplateList:n,innerTemplateList:i,coverDefaultTemplateGuid:s,innerDefaultTemplateGuid:u}});var d=(0,S.default)(a(),"project.data"),c=(0,S.default)(d,"property").get("isNewProject");if(c&&s&&u){var p=(0,S.default)(d,"setting").get("size");r(s,p),r(u,p)}}else console.log("模板列表获取失败")})}}function r(e,t){return function(n,o){var a=(0,S.default)(o(),"system.env.urls").get("baseUrl"),r=(0,S.default)(o(),"project.data.setting").get("product"),i=(0,S.default)(o(),"project.data.setting").get("orientation"),s=t;r!==P.productTypes.LC&&"Portrait"!==i&&(s=t.split("X")[1]+"X"+t.split("X")[0]);var u=(0,T.default)(e)?e:[e];return n((0,v.default)({},D.CALL_API,{apiPattern:{name:A.APPLY_LAYOUT,params:{baseUrl:a,templateIds:u,size:s}},options:{method:"POST",body:(0,f.default)({templates:u,size:s})}}))}}function i(){return function(e,t){return e({type:C.CLEAR_TEMPLATE_LIST}),c.default.resolve()}}function s(e){return function(t,n){return t({type:C.ADD_TEMPLATE,params:e}),c.default.resolve(e)}}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:C.IS_IN_APPLY_TEMPLATE,value:e}}function l(e,t){return function(n,o){var a=(0,S.default)(o(),"system.env.urls").get("baseUrl");return n((0,v.default)({},D.CALL_API,{apiPattern:{name:A.GET_RELATION_TEMPLATE,params:{baseUrl:a,templateGUID:e,size:t,autoRandomNum:Date.now()}}})).then(function(e){var t=(0,S.default)(e,"data.viewData");if(t){t=_.default.xml2js(t);var n=(0,x.convertObjIn)((0,S.default)(t,"templateView.spread.elements.element"));(0,E.default)(e,"data.viewData",t),(0,E.default)(e,"data.templateElement",n)}return e},function(e){return c.default.reject(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(14),c=o(d),p=n(48),f=o(p),g=n(93),h=o(g),m=n(24),v=o(m),y=n(11),M=o(y),I=n(46),T=o(I),w=n(92),E=o(w),b=n(12),S=o(b);t.getTemplateList=a,t.getTemplateInfo=r,t.clearTemplateList=i,t.addTemplate=s,t.changeApplyTemplateStatus=u,t.getRelationTemplate=l;var D=n(25),A=n(16),N=n(39),_=o(N),C=n(10),P=n(9),x=n(20)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return{type:s.SHOW_TEXT_EDIT_MODAL,data:e}}function r(){return{type:s.HIDE_TEXT_EDIT_MODAL}}Object.defineProperty(t,"__esModule",{value:!0}),t.showTextEditModal=a,t.hideTextEditModal=r;var i=n(10),s=o(i)},function(e,t,n){"use strict";function o(e){return{type:a.TOGGLE_UPLOAD,status:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.toggleUpload=o;var a=n(10)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o=t-e.left,a=n-e.top;return[o,a]}function i(e,t,n,o,a){var r=t;r=(0,v.setSpineMaxDep)(t),a&&(r=r.setIn([0,"rot"],0));var i=(0,v.getIntersection)({x:n,y:o},r);return i}function s(e){if(e.isDraggingCreatePhotoFrame){e.isDraggingCreatePhotoFrame=!1;var t=e.state.draggingCreatePhotoFrame,n=t.startPosition,o=t.endPosition;if(n&&o){var a=Math.abs(o.x-n.x),r=Math.abs(o.y-n.y),i=o.x>n.x?n.x:o.x,s=o.y>n.y?n.y:o.y;if(e.forceUpdate(),a&&r){var u=e.props,l=u.actions,d=u.data,c=d.page,p=d.ratio,f=(d.settings,l.boundProjectActions,Math.round(150*p.workspace)),h=Math.round(150*p.workspace);if(a<f||r<h)return;var m=c.get("elements").maxBy(function(e){return e.get("dep")}),v=i/p.workspace,y=s/p.workspace,M=a/p.workspace,I=r/p.workspace;new D.default({type:E.elementTypes.photo,x:v,y:y,width:M,height:I,px:v/c.get("width"),py:y/c.get("height"),pw:M/c.get("width"),ph:I/c.get("height"),dep:m?m.get("dep")+1:0,border:(0,g.default)({},E.defaultBorder)})}}}}function u(e,t){if(e.isDraggingCreatePhotoFrame){var n=e.state.containerRect,o=r(n,t.pageX,t.pageY),a=(0,p.default)(o,2),i=a[0],s=a[1];e.setState({draggingCreatePhotoFrame:(0,d.default)({},e.state.draggingCreatePhotoFrame,{endPosition:{x:i,y:s}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventsToLayerOfElements=void 0;var l=n(18),d=a(l),c=n(38),p=a(c),f=n(11),g=a(f),h=n(12),m=a(h);t.createNewPhotoFrame=s,t.setEndPosition=u;var v=(n(52),n(41)),y=n(123),M=o(y),I=n(125),T=o(I),w=n(124),E=n(9),b=n(28),S=n(45),D=a(S);t.addEventsToLayerOfElements=function(e){var t=e.props.data,n=t.capability,o=t.page,a=t.paginationSpread,s=t.settings,u=t.variables,l=((0,m.default)(s,"spec.product"),a.getIn(["summary","isCover"])),d=(!(!u||!l||(0,m.default)(s,"spec.product")===E.productTypes.PS)&&u.get("cameoSupportCondition"),o.get("type")===E.pageTypes.spine);e.layerNodeOfElements;if(e.stage){var c=e.stage.getStage(),f=c.getContainer(),g={};f.addEventListener("dragover",function(e){n.get("canDropImageInPage")&&y(e)}),f.addEventListener("dragend",function(e){delete __app.dragType}),f.addEventListener("dragleave",function(t){T.onPageDragLeave(e,t)}),f.addEventListener("mouseup",function(t){if(__app.isResizing)return __app.isResizing=!1,void(e.isResizeMouseUp=!0);if(__app.isMoved)return void(__app.isMoved=!1);if(__app.isExchangeImage)I(t);else if(!e.isDraggingCreatePhotoFrame&&n.get("canSelectElement")){var o=e.state,a=o.elementArray,s=o.containerRect,u=r(s,t.pageX,t.pageY),l=(0,p.default)(u,2),c=l[0],g=l[1],h=i(f,a,c,g,d);if(e.elementControlsNode){var m=e.elementControlsNode,v=(m.isDragging,m.isRotating);h&&!v&&(M.selectElements(e,h,t),t.stopPropagation())}else h&&!t.dragEndNode&&(M.selectElements(e,h,t),t.stopPropagation())}}),f.addEventListener("mousedown",function(t){var a=e.state,s=a.elementArray,u=a.containerRect,l=r(u,t.pageX,t.pageY),c=(0,p.default)(l,2),g=c[0],h=c[1],m=i(f,s,g,h,d);m?t.stopPropagation():o.get("enabled")&&n.get("canCreateElement")&&(e.isDraggingCreatePhotoFrame=!0,e.setState({draggingCreatePhotoFrame:{startPosition:{x:g,y:h}}}))}),f.addEventListener("click",function(t){if(e.isResizeMouseUp)return void(e.isResizeMouseUp=!1);var n=e.state,o=n.elementArray,a=n.containerRect,s=r(a,t.pageX,t.pageY),u=(0,p.default)(s,2),l=u[0],c=u[1],g=i(f,o,l,c,d);if(g){e.clicksObj.num+=1;var h=g.get("id");1===e.clicksObj.num&&window.setTimeout(function(){if(1===e.clicksObj.num)e.clicksObj.clickElementId=h;else if(h===e.clicksObj.clickElementId)switch(g.get("type")){case E.elementTypes.photo:var n=Boolean(g.get("encImgId"));n&&(0,w.onEditImage)(e,g,t);break;case E.elementTypes.paintedText:case E.elementTypes.text:(0,w.onEditText)(e,g,t)}e.clicksObj.num=0},300)}});var h=function(e){},v=function(e){};window.addEventListener("mousemove",h),window.addEventListener("mouseup",v),f.addEventListener("mousemove",function(e){__app.isExchangeImage&&n.get("canDropImageInPage")&&y(e)}),f.addEventListener("drop",function(e){n.get("canDropImageInPage")&&I(e)});var y=function(t){var n=(0,m.default)(e.props.data,"ratio");t.preventDefault();var a=e.state,s=a.elementArray,u=a.containerRect,l=r(u,t.pageX,t.pageY),c=(0,p.default)(l,2),h=c[0],v=c[1],y=i(f,s,h,v,d);if(y&&__app.dragType!==E.dragTypes.template){var M=(0,b.getTransferDataByNode)(t,!1);if(y){if(y.get("type")===E.elementTypes.text||M.elementId===y.get("id"))return void e.setState({isDragOver:!1});var I=y.get("computed");g={left:I.get("left")+"px",top:I.get("top")+"px",width:I.get("width")+"px",height:I.get("height")+"px",transform:"rotate("+y.get("rot")+"deg)"},e.setState({isDragOver:!0,hoverBoxStyle:g})}}else __app.isExchangeImage?e.setState({isDragOver:!1}):(g={left:0,top:0,width:o.get("width")*n.workspace+"px",height:o.get("height")*n.workspace+"px"},e.setState({isDragOver:!0,hoverBoxStyle:g}))},I=function(t){t.preventDefault();var n=e.props,o=n.data,a=n.actions,s=o.page,u=a.boundProjectActions,l=s.get("id"),c=e.state,g=c.elementArray,h=c.containerRect,m=r(h,t.pageX,t.pageY),v=(0,p.default)(m,2),y=v[0],I=v[1],w=i(f,g,y,I,d);if(__app.isExchangeImage){if(__app.dragType!==E.dragTypes.template&&w&&w.get("type")===E.elementTypes.photo){var S=w.get("id"),D=(0,b.getTransferDataByNode)();D.elementId&&D.elementId!==S&&u.swapPhotoElement(D.pageId,D.elementId,l,S).then(function(){e.reSelectElement(S)}),e.setState({isDragOver:!1,isExchangeImage:!1}),delete __app.isExchangeImage}}else if(__app.dragType===E.dragTypes.template)T.onPageDroped(e,t),delete __app.dragType;else if(w)w.get("type")!==E.elementTypes.photo&&w.get("type")!==E.elementTypes.cameo||M.onDrop(e,w,t);else{var A=s.get("enabled");if(!A)return;T.onPageDroped(e,t)}}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyTemplate=t.doAutoLayout=void 0;var a=n(18),r=o(a),i=n(14),s=o(i),u=n(55),l=o(u),d=n(12),c=o(d),p=n(2),f=o(p),g=n(9),h=(n(145),n(40)),m=n(42),v=n(148),y=n(53),M=function(e,t){var n=t.sort(function(e,t){return e.get("dep")-t.get("dep")});if(e&&n&&n.size){var o=n.getIn(["0","dep"]);if(o>e)return n;var a=e-o+1;return n=n.map(function(e){return e.set("dep",e.get("dep")+a)})}return[]},I=function(e,t,n,o){var a=n||e.props,r=a.data,i=a.actions,u=i.boundProjectActions,d=r.images,c=r.page,p=r.summary,m=(r.ratio,r.settings,o||r.elements),v=c,I=[],T=p.get("isCrystal")||p.get("isMetal"),w=[],E=void 0,b=m.filterNot(function(e){return e.get("type")===g.elementTypes.decoration}),S=m.filter(function(e){return e.get("type")===g.elementTypes.text&&!e.get("text")}),D=m.filter(function(e){return e.get("type")===g.elementTypes.decoration}),A=[];S&&S.size&&S.forEach(function(e){A.push(e.get("id"))}),d.forEach(function(e){I.push(e.toJS())}),b.forEach(function(e){e.get("type")===g.elementTypes.text?e.get("text")&&w.push(e):w.push(e)});var N=t.elements,_=N.filter(function(e){return e.type===g.elementTypes.text});if(_.length){var C=w.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),P=w.filter(function(e){return e.get("type")===g.elementTypes.photo}),x=N.filter(function(e){return e.type===g.elementTypes.text}),O=x.length,L=C.length;if(L>=O){for(var j=[],k=(0,l.default)(C,function(e){return-e.get("lastModified")}),z=0;z<O;z++)j.push(k[z]);w=P.concat(j)}E=(0,h.updateElementsByTemplate)(c,w,I,t,T);var R=E.maxBy(function(e){return e.get("dep")}),U=R?R.get("dep"):0,B=M(U,D);B&&B.size&&(E=E.concat(B)),v=c.set("elements",E);var Y=d.valueSeq().toList(),W=f.default.List(),F=f.default.List();E.forEach(function(e){e.get("type")===g.elementTypes.photo?F=F.push(e):W=W.push(e)});var H=(0,y.mergeTemplateElements)(v,F,Y);if(E=H.concat(W),E&&E.size)return A&&A.length?u.deleteElements(A).then(function(){return u.applyTemplate(c.get("id"),t.id,E)}):u.applyTemplate(c.get("id"),t.id,E)}else{E=(0,h.updateElementsByTemplate)(c,w,I,t,T),v=c.set("elements",E);var G=d.valueSeq().toList(),Q=f.default.List(),X=f.default.List();E.forEach(function(e){e.get("type")===g.elementTypes.photo?X=X.push(e):Q=Q.push(e)});var Z=(0,y.mergeTemplateElements)(v,X,G);E=Z.concat(Q);var J=E.maxBy(function(e){return e.get("dep")}),V=J?J.get("dep"):0,q=M(V,D);if(q&&q.size&&(E=E.concat(q)),E&&E.size)return A&&A.length?u.deleteElements(A).then(function(){return u.applyTemplate(c.get("id"),t.id,E)}):u.applyTemplate(c.get("id"),t.id,E)}return s.default.resolve()};t.doAutoLayout=function(e,t){var n=e.props,o=n.data,a=n.actions,i=o.settings,s=o.page,u=o.summary,l=o.template,d=o.images,p=a.boundProjectActions,h=f.default.fromJS(t),y=s.get("elements").concat(h),M=s.set("elements",y),T=(0,c.default)(i,"bookSetting.autoLayout"),w=(0,c.default)(i,"spec.cover");if(T&&y.size){var E=(0,c.default)(i,"spec.size"),b=(0,c.default)(l,"list")||[],S=(0,c.default)(l,"details"),D=u.get("isCover");b=M.get("enabled")?D?(0,m.filterCoverTemplates)(b,w):b.filter(function(e){return e.sheetType.toLowerCase().indexOf("inner")>=0}):[];var A=[],N=0;y.forEach(function(e){var t=d.get(e.get("encImgId"));A.push((0,r.default)({},e.toJS(),{image:t&&t.toJS()})),e.get("type")===g.elementTypes.text&&(N+=1)});var _=(0,v.getTemplateId)(s.get("width"),s.get("height"),N,b,A);if(_){var C=_+"_"+E;if(S[C])I(e,S[C],e.props,y);else{var P=a.boundTemplateActions;P.getTemplateInfo(_,E).then(function(t){var n=(0,m.convertResultToJson)(t),o=(0,m.formatTemplateInstance)(n,[_],E);o&&o.length&&I(e,o[0][C],e.props,y)})}}else p.createElements(t)}else p.createElements(t)},t.applyTemplate=function(e,t){var n=e.props,o=n.actions,a=n.data,r=a.template,i=a.settings,s=o.boundTrackerActions,u=o.boundTemplateActions,l=r.details,d=(0,c.default)(i,"spec.size");s.addTracker("SelectLayout,"+t),u.changeApplyTemplateStatus(!0);var p=t+"_"+d;l[p]?I(e,l[p]).then(function(){u.changeApplyTemplateStatus(!1),e.elementControlsNode.needRedrawElementControlsRect()}):u.getTemplateInfo(t,d).then(function(n){var o=(0,m.convertResultToJson)(n),a=(0,m.formatTemplateInstance)(o,[t],d);a&&a.length&&I(e,a[0][p]).then(function(){u.changeApplyTemplateStatus(!1),e.elementControlsNode.needRedrawElementControlsRect()})}),e.setState({selectedTemplateId:t})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var a=n(19),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=n(23),c=o(d),p=n(2),f=o(p),g=n(62),h=n(9),m=n(29),v=o(m),y=n(33),M=n(16),I=n(21),T=n(149),w=180,E=180,b=140,S=140,D=t.getCurrentScale=function(e,t,n){var o=t.data.images,a=e.props.data,r=a.images,i=void 0,s=n.toJS(),u=s.imgRot,l=s.width,d=s.height,c=s.cropLUX,p=s.cropLUY,f=s.cropRLX,h=s.cropRLY,m=s.encImgId,v=r.get(m),y=o.get(m);return v=v||y,i=v?(0,g.getScale)({imgRot:u,imageDetail:v,width:l,height:d,cropRLX:f,cropLUX:c,cropRLY:h,cropLUY:p}):0};t.computedElementOptions=function(e,t,n,o,a){var i=t||e.props,u=i.data,d=u.urls,p=u.page,g=(u.images,u.userInfo),m=g.toJS(),A=(m.timestamp,m.authToken,m.id,o||u.ratio.workspace),N={width:0,height:0,left:0,top:0,imgUrl:""},_=n.get("imgRot"),C=n.get("imgFlip"),P=p.get("width"),x=p.get("height");N.width=P*n.get("pw")*A,N.height=x*n.get("ph")*A,N.left=Math.round(P*n.get("px")*A),N.top=Math.round(x*n.get("py")*A);var O=n.get("encImgId");switch(n.get("type")){case h.elementTypes.text:N=(0,T.computedTextElementOptions)(N,n,A,d,p,b,S);break;case h.elementTypes.calendar:var L=(0,s.default)(a,"spec.product"),j=(0,s.default)(a,"spec.size"),k=(0,s.default)(a,"spec.orientation"),z=n.get("month"),R=(0,s.default)(a,"spec.dateStyle"),U=z&&z<10?"0"+z:z,B=n.get("year"),Y=d.baseUrl,W="Portrait"!==k?j.split("X")[1]+"X"+j.split("X")[0]:j;N.imgUrl=L&&W?(0,c.default)(M.CALENDAR_IMAGE)({dateStyle:R,productType:L,size:W,month:U,year:B,baseUrl:Y,imageSize:700}):null;break;case h.elementTypes.photo:if(N.keepRatio=!1,N.minHeight=Math.round(w*A),N.minWidth=Math.round(E*A),O){var F=null;if(n.get("cropRLY")&&(F=(0,I.getCropOptionsByLR)(n.get("cropLUX"),n.get("cropLUY"),n.get("cropRLX"),n.get("cropRLY"),N.width,N.height)),F){var H="rect",G={effectId:0,opacity:100};n.get("style")&&(G=n.get("style").toJS()),N.imgUrl=O?(0,c.default)(""+M.IMAGES_API+M.IMAGES_FILTER_PARAMS)((0,l.default)({},F,G,(0,r.default)({encImgId:O,imgFlip:C,shape:H,rotation:_,baseUrl:d.baseUrl},v.default))):null,N.corpApiTemplate=(0,c.default)(M.IMAGES_CROPPER)({baseUrl:d.baseUrl})+M.IMAGES_CROPPER_PARAMS,N.filterApiTemplate=(0,c.default)(M.IMAGES_API)({baseUrl:d.baseUrl})+M.IMAGES_FILTER_PARAMS,N.scale=D(e,t,n)}var Q=n.get("border");if(Q){var X=(0,y.hexToRGBA)(Q.get("color"),Q.get("opacity"));N.border={size:Math.round(Q.get("size")*A),color:X}}}}return f.default.fromJS(N)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return e.map(function(e){return e.merge({isSelected:e.get("id")===t})})}function r(e){var t=e.state.elementArray,n=u.default.List();t.forEach(function(e){n=n.push(e.set("isSelected",!1))}),u.default.is(t,n)||e.setState({elementArray:n})}function i(e,t){var n=e.state.elementArray,o=a(n,t);e.setState({elementArray:o})}Object.defineProperty(t,"__esModule",{value:!0}),t.unSelectElements=r,t.reSelectElement=i;var s=n(2),u=o(s)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),i=a(r),s=n(18),u=a(s),l=n(6),d=a(l),c=n(4),p=a(c),f=n(5),g=a(f),h=n(8),m=a(h),v=n(7),y=a(v),M=n(11),I=a(M),T=n(2),w=a(T),E=n(13),b=a(E),S=n(3),D=a(S),A=n(15),N=n(27),_=(n(121),n(9)),C=n(52),P=(o(C),n(352)),x=o(P),O=n(125),L=o(O),j=n(353),k=(o(j),n(124)),z=(o(k),n(351)),R=o(z),U=n(41),B=o(U),Y=n(350),W=o(Y),F=n(123),H=o(F),G=(n(122),n(132)),Q=a(G),X=n(134),Z=a(X),J=n(131),V=a(J);n(225);var q=function(e){function t(e){(0,p.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));n.computedElementOptions=function(e,t,o,a){return x.computedElementOptions(n,e,t,o,a)},n.doAutoLayout=function(e){return R.doAutoLayout(n,e)},n.applyTemplate=function(e){return R.applyTemplate(n,e)},n.getRenderHtml=n.getRenderHtml.bind(n),n.addEventsToLayerOfElements=function(){return W.addEventsToLayerOfElements(n)},n.createNewPhotoFrame=function(){return W.createNewPhotoFrame(n)},n.setEndPosition=function(e){return W.setEndPosition(n,e)},n.onMouseUp=function(e,t){return H.onMouseUp(n,e,t)},n.onMouseEnter=function(e,t){return H.onMouseEnter(n,e,t)},n.onMouseLeave=function(e,t){return H.onMouseLeave(n,e,t)},n.onMouseOver=function(e,t){return H.onMouseOver(n,e,t)},n.onMouseOut=function(e,t){return H.onMouseOut(n,e,t)},n.onMouseMove=function(e,t){return H.onMouseMove(n,e,t)};return n.stopEvent=function(e){return L.stopEvent(e)},n.changeCurrentElement=function(e){return L.changeCurrentElement(n,e)},n.switchPage=function(e){return L.switchPage(n,e)},n.state={elementArray:w.default.List(),downloadData:w.default.Map(),tooltip:{isShown:!1,content:"",elementRect:{},containerHeight:0},snackBar:{isShown:!1,left:0,bottom:0,width:0,templateId:0},containerRect:null,isDragOver:!1,hoverBoxStyle:{},controlRectRot:0,isExchangeImage:!1,exchangeImageThumbnail:null,exchangeThumbnailRect:{},draggingCreatePhotoFrame:{startPosition:{x:0,y:0},endPosition:{x:0,y:0}},originalPhotoLayer:{isShown:!1,x:0,y:0,imageUrl:""},hideSnackBarTimer:null,currentPointPhotoElementId:-1},n.clicksObj={num:0,clickElementId:null},n}return(0,y.default)(t,e),(0,g.default)(t,[{key:"componentWillMount",value:function(){L.componentWillMount(this)}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){L.componentWillReceiveProps(this,e)}},{key:"componentWillUnmount",value:function(){}},{key:"getRenderHtml",value:function(e){var t=this,n=this.props,o=n.data,a=(n.t,o.isPreview),r=o.page,i=(o.summary,o.ratio,o.settings,o.parameters,o.paginationSpread,o.isBookCoverInnerWarp,o.materials,o.project,r.get("id")),s=[],u=this.state.downloadData,l=B.sortElementsByZIndex(e),d={onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseMove:this.onMouseMove};return l&&l.size&&l.forEach(function(e){var n=e.get("id"),o=u.get(n)||w.default.Map(),r={key:n,element:e,isPreview:a,actions:d,imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),isShowTextNotFit:!1,isShowTextOverflow:!1,tryToDownload:function(){return t.toDownload(w.default.List([e]))},isScreenshot:!0};switch(e.get("type")){case _.elementTypes.photo:var l=!0,c={key:n,element:e,isPreview:!0,pageId:i,isScreenshot:!0,imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),actions:(0,I.default)({},d,{onElementArrayChange:t.onElementArrayChange,updateElement:t.updateElement,changeCurrentElement:t.changeCurrentElement}),tryToDownload:function(){return t.toDownload(w.default.List([e]),l)}};s.push(D.default.createElement(Q.default,c));break;case _.elementTypes.text:if(!e.get("text"))return;s.push(D.default.createElement(Z.default,r));break;case _.elementTypes.calendar:var p={key:n,element:e,isPreview:a,actions:{},imageObj:o.get("imageObj"),downloadStatus:o.get("downloadStatus"),tryToDownload:function(){return t.toDownload(w.default.List([e]))},isScreenshot:!0};s.push(D.default.createElement(V.default,p))}}),s}},{key:"updateElement",value:function(e){var t=this.props.actions,n=t.boundProjectActions;delete e.computed,n.updateElement(e)}},{key:"clearHideSnackBarTimer",value:function(){var e=this.state.hideSnackBarTimer;window.clearTimeout(e)}},{key:"delayHideSnackBar",value:function(){var e=this,t=window.setTimeout(function(){e.state&&e.setState({snackBar:(0,u.default)({},e.state.snackBar,{isShown:!1})})},30);this.setState({hideSnackBarTimer:t})}},{key:"stopEvent",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.actions,a=(t.t,this.state),r=(a.isDragOver,a.hoverBoxStyle,a.controlRectRot,a.downloadData),s=(a.isExchangeImage,a.exchangeThumbnailRect,n.page),u=n.ratio,l=n.summary,d=(n.settings,n.specData,n.isBookCoverInnerWarp,n.innerEffectValue,n.project,
n.x),c=n.y,p=(o.boundImagesActions,s.get("enabled")),f=(s.get("id"),l.get("isCover")),g=(s.get("isActive"),(0,b.default)("book-page",{enabled:p,disabled:!p,cover:f,inner:!f})),h={width:Math.round(s.get("width")*u.workspace),height:Math.round(s.get("height")*u.workspace)},m=this.state,v=m.elementArray,y=(m.containerRect,m.tooltip,m.snackBar,m.draggingCreatePhotoFrame),M=(m.originalPhotoLayer,m.currentPointPhotoElementId),I=w.default.List(),T=w.default.List();v.forEach(function(e){e.get("isSelected")?I=I.push(e):T=T.push(e)});var E=(v.find(function(e){return e.get("id")===M}),v),S=null,A=null,_=-1;1===I.size&&(A=I.get(0),_=A.get("id")),I.size&&I.getIn([0,"encImgId"])&&(S=r.getIn([_,"imageObj"]));var C=(r.get(_)||w.default.Map(),{ref:function(t){return e.stage=t},width:h.width,height:h.height,className:g,onMouseDown:this.switchPage});o.activePage&&(C.onMouseUp=this.activePage);var P=y.startPosition,x=y.endPosition,O={fill:"#f6f6f6",stroke:"#dfdfdf",strokeWidth:1};P&&x&&(O.x=P.x,O.y=P.y,O.width=x.x-P.x,O.height=x.y-P.y);var L={x:d,y:c};return D.default.createElement(N.Group,(0,i.default)({ref:function(t){return e.unselectElements=t}},L),this.getRenderHtml(E))}}]),t}(S.Component);q.propTypes={},q.defaultProps={},t.default=(0,A.translate)("BookPageScreenshot")(q)},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var o=t-e.left,a=n-e.top;return[o,a]}function i(e,t,n,o,a){var r=t;r=(0,v.setSpineMaxDep)(t),a&&(r=r.setIn([0,"rot"],0));var i=(0,v.getIntersection)({x:n,y:o},r);return i}function s(e){if(e.isDraggingCreatePhotoFrame){e.isDraggingCreatePhotoFrame=!1;var t=e.state.draggingCreatePhotoFrame,n=t.startPosition,o=t.endPosition;if(n&&o){var a=Math.abs(o.x-n.x),r=Math.abs(o.y-n.y),i=o.x>n.x?n.x:o.x,s=o.y>n.y?n.y:o.y;if(e.forceUpdate(),a&&r){var u=e.props,l=u.actions,d=u.data,c=d.page,p=d.ratio,f=(d.settings,l.boundProjectActions,Math.round(150*p.workspace)),h=Math.round(150*p.workspace);if(a<f||r<h)return;var m=c.get("elements").maxBy(function(e){return e.get("dep")}),v=i/p.workspace,y=s/p.workspace,M=a/p.workspace,I=r/p.workspace;new D.default({type:E.elementTypes.photo,x:v,y:y,width:M,height:I,px:v/c.get("width"),py:y/c.get("height"),pw:M/c.get("width"),ph:I/c.get("height"),dep:m?m.get("dep")+1:0,border:(0,g.default)({},E.defaultBorder)})}}}}function u(e,t){if(e.isDraggingCreatePhotoFrame){var n=e.state.containerRect,o=r(n,t.pageX,t.pageY),a=(0,p.default)(o,2),i=a[0],s=a[1];e.setState({draggingCreatePhotoFrame:(0,d.default)({},e.state.draggingCreatePhotoFrame,{endPosition:{x:i,y:s}})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.addEventsToLayerOfElements=void 0;var l=n(18),d=a(l),c=n(38),p=a(c),f=n(11),g=a(f),h=n(12),m=a(h);t.createNewPhotoFrame=s,t.setEndPosition=u;var v=(n(52),n(41)),y=n(127),M=o(y),I=n(129),T=o(I),w=n(128),E=n(9),b=n(28),S=n(45),D=a(S);t.addEventsToLayerOfElements=function(e){var t=e.props.data,n=t.capability,o=t.page,a=t.paginationSpread,s=t.settings;t.variables,(0,m.default)(s,"spec.product"),a.getIn(["summary","isCover"]),e.layerNodeOfElements;if(e.stage){var u=e.stage.getStage(),l=u.getContainer(),d={};l.addEventListener("dragover",function(e){n.get("canDropImageInPage")&&g(e)}),l.addEventListener("dragend",function(e){delete __app.dragType}),l.addEventListener("dragleave",function(t){T.onPageDragLeave(e,t)}),l.addEventListener("mouseup",function(t){if(__app.isResizing)return __app.isResizing=!1,void(e.isResizeMouseUp=!0);if(__app.isMoved)return void(__app.isMoved=!1);if(__app.isExchangeImage)h(t);else if(!e.isDraggingCreatePhotoFrame&&n.get("canSelectElement")){var o=e.state,a=o.elementArray,s=o.containerRect,u=r(s,t.pageX,t.pageY),d=(0,p.default)(u,2),c=d[0],f=d[1],g=i(l,a,c,f);if(e.elementControlsNode){var m=e.elementControlsNode,v=(m.isDragging,m.isRotating);g&&!v&&(M.selectElements(e,g,t),t.stopPropagation())}else g&&!t.dragEndNode&&(M.selectElements(e,g,t),t.stopPropagation())}}),l.addEventListener("mousedown",function(t){var a=e.state,s=a.elementArray,u=a.containerRect,d=r(u,t.pageX,t.pageY),c=(0,p.default)(d,2),f=c[0],g=c[1],h=i(l,s,f,g);h?t.stopPropagation():o.get("enabled")&&n.get("canCreateElement")&&(e.isDraggingCreatePhotoFrame=!0,e.setState({draggingCreatePhotoFrame:{startPosition:{x:f,y:g}}}))}),l.addEventListener("click",function(t){if(e.isResizeMouseUp)return void(e.isResizeMouseUp=!1);var n=e.state,o=n.elementArray,a=n.containerRect,s=r(a,t.pageX,t.pageY),u=(0,p.default)(s,2),d=u[0],c=u[1],f=i(l,o,d,c);if(f){e.clicksObj.num+=1;var g=f.get("id");1===e.clicksObj.num&&window.setTimeout(function(){if(1===e.clicksObj.num)e.clicksObj.clickElementId=g,[E.elementTypes.paintedText,E.elementTypes.text].indexOf(f.get("type"))>=0&&(0,w.onEditText)(e,f,t);else if(g===e.clicksObj.clickElementId)switch(f.get("type")){case E.elementTypes.photo:var n=Boolean(f.get("encImgId"));n&&(0,w.onEditImage)(e,f,t);break;case E.elementTypes.paintedText:case E.elementTypes.text:}e.clicksObj.num=0},300)}});var c=function(e){},f=function(e){};window.addEventListener("mousemove",c),window.addEventListener("mouseup",f),l.addEventListener("mousemove",function(e){__app.isExchangeImage&&n.get("canDropImageInPage")&&g(e)}),l.addEventListener("drop",function(e){n.get("canDropImageInPage")&&h(e)});var g=function(t){var n=(0,m.default)(e.props.data,"ratio");t.preventDefault();var a=e.state,s=a.elementArray,u=a.containerRect,c=r(u,t.pageX,t.pageY),f=(0,p.default)(c,2),g=f[0],h=f[1],v=i(l,s,g,h);if(v&&__app.dragType!==E.dragTypes.template){var y=(0,b.getTransferDataByNode)(t,!1);if(v){if(v.get("type")===E.elementTypes.text||y.elementId===v.get("id"))return void e.setState({isDragOver:!1});var M=v.get("computed");d={left:M.get("left")+"px",top:M.get("top")+"px",width:M.get("width")+"px",height:M.get("height")+"px",transform:"rotate("+v.get("rot")+"deg)"},e.setState({isDragOver:!0,hoverBoxStyle:d})}}else __app.isExchangeImage?e.setState({isDragOver:!1}):(d={left:0,top:0,width:o.get("width")*n.workspace+"px",height:o.get("height")*n.workspace+"px"},e.setState({isDragOver:!0,hoverBoxStyle:d}))},h=function(t){t.preventDefault();var n=e.props,o=n.data,a=n.actions,s=o.page,u=a.boundProjectActions,d=s.get("id"),c=e.state,f=c.elementArray,g=c.containerRect,h=r(g,t.pageX,t.pageY),m=(0,p.default)(h,2),v=m[0],y=m[1],I=i(l,f,v,y);if(__app.isExchangeImage){if(__app.dragType!==E.dragTypes.template&&I&&I.get("type")===E.elementTypes.photo){var w=I.get("id"),S=(0,b.getTransferDataByNode)();S.elementId&&S.elementId!==w&&u.swapPhotoElement(S.pageId,S.elementId,d,w).then(function(){e.reSelectElement(w)}),e.setState({isDragOver:!1,isExchangeImage:!1}),delete __app.isExchangeImage}}else if(__app.dragType===E.dragTypes.template)T.onPageDroped(e,t),delete __app.dragType;else if(I)I.get("type")!==E.elementTypes.photo&&I.get("type")!==E.elementTypes.cameo||M.onDrop(e,I,t);else{var D=s.get("enabled");if(!D)return;T.onPageDroped(e,t)}}}}},351,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var a=n(19),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=n(23),c=o(d),p=n(2),f=o(p),g=n(62),h=n(9),m=n(29),v=o(m),y=n(33),M=n(16),I=n(21),T=n(149),w=180,E=180,b=140,S=140,D=t.getCurrentScale=function(e,t,n){var o=t.data.images,a=e.props.data,r=a.images,i=void 0,s=n.toJS(),u=s.imgRot,l=s.width,d=s.height,c=s.cropLUX,p=s.cropLUY,f=s.cropRLX,h=s.cropRLY,m=s.encImgId,v=r.get(m),y=o.get(m);return v=v||y,i=v?(0,g.getScale)({imgRot:u,imageDetail:v,width:l,height:d,cropRLX:f,cropLUX:c,cropRLY:h,cropLUY:p}):0};t.computedElementOptions=function(e,t,n,o,a){var i=t||e.props,u=i.data,d=u.urls,p=u.page,g=(u.images,u.userInfo),m=g.toJS(),A=(m.timestamp,m.authToken,m.id,o||u.ratio.workspace),N={width:0,height:0,left:0,top:0,imgUrl:""},_=n.get("imgRot"),C=n.get("imgFlip"),P=p.get("width"),x=p.get("height");N.width=P*n.get("pw")*A,N.height=x*n.get("ph")*A,N.left=Math.round(P*n.get("px")*A),N.top=Math.round(x*n.get("py")*A);var O=n.get("encImgId");switch(n.get("type")){case h.elementTypes.text:N=(0,T.computedTextElementOptions)(N,n,A,d,p,b,S);break;case h.elementTypes.calendar:var L=(0,s.default)(a,"spec.product"),j=(0,s.default)(a,"spec.size"),k=(0,s.default)(a,"spec.orientation"),z=(0,s.default)(a,"spec.dateStyle"),R=n.get("month"),U=R&&R<10?"0"+R:R,B=n.get("year"),Y=(d.calendarBaseUrl,d.baseUrl),W="Portrait"!==k?j.split("X")[1]+"X"+j.split("X")[0]:j;N.imgUrl=L&&W?(0,c.default)(M.CALENDAR_IMAGE)({dateStyle:z,productType:L,size:W,month:U,year:B,baseUrl:Y,imageSize:700}):null;break;case h.elementTypes.photo:if(N.keepRatio=!1,N.minHeight=Math.round(w*A),N.minWidth=Math.round(E*A),O){var F=null;if(n.get("cropRLY")&&(F=(0,I.getCropOptionsByLR)(n.get("cropLUX"),n.get("cropLUY"),n.get("cropRLX"),n.get("cropRLY"),N.width,N.height)),F){var H="rect",G={effectId:0,opacity:100};n.get("style")&&(G=n.get("style").toJS()),N.imgUrl=O?(0,c.default)(""+M.IMAGES_API+M.IMAGES_FILTER_PARAMS)((0,l.default)({},F,G,(0,r.default)({encImgId:O,imgFlip:C,shape:H,rotation:_,baseUrl:d.baseUrl},v.default))):null,N.corpApiTemplate=(0,c.default)(M.IMAGES_CROPPER)({baseUrl:d.baseUrl})+M.IMAGES_CROPPER_PARAMS,N.filterApiTemplate=(0,c.default)(M.IMAGES_API)({baseUrl:d.baseUrl})+M.IMAGES_FILTER_PARAMS,N.scale=D(e,t,n)}var Q=n.get("border");if(Q){var X=(0,y.hexToRGBA)(Q.get("color"),Q.get("opacity"));N.border={size:Math.round(Q.get("size")*A),color:X}}}}return f.default.fromJS(N)}},353,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o){var a=Math.atan2(o-t,n-e);return a}function r(e){return e*(Math.PI/180)}function i(e){return e*(180/Math.PI)}function s(e){var t=0;return t=e<0?e%360+360:e%360}Object.defineProperty(t,"__esModule",{value:!0});var u=n(19),l=o(u),d=n(18),c=o(d),p=n(38),f=o(p),g=n(6),h=o(g),m=n(4),v=o(m),y=n(5),M=o(y),I=n(8),T=o(I),w=n(7),E=o(w),b=n(3),S=o(b),D=n(2),A=o(D),N=n(27),_=n(498),C=n(62),P=n(360),x=o(P),O=n(9),L=n(61),j=n(135),k=o(j),z=n(133),R=o(z),U=[0,2,4,6],B=[3,7],Y=[1,5],W=function(e){function t(e){(0,v.default)(this,t);var n=(0,T.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return n.state={x:0,y:0,width:0,height:0,degree:0,offset:{x:0,y:0},needRedraw:!1,clickElementId:null},n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.onRotateStart=n.onRotateStart.bind(n),n.onRotate=n.onRotate.bind(n),n.onRotateStop=n.onRotateStop.bind(n),n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.getPointAndOpposite=n.getPointAndOpposite.bind(n),n.clampElementArray=n.clampElementArray.bind(n),n.getNewControlBoxAndElementArray=n.getNewControlBoxAndElementArray.bind(n),n.moveElement=n.moveElement.bind(n),n.redrawElementControlsRect=n.redrawElementControlsRect.bind(n),n.needRedrawElementControlsRect=n.needRedrawElementControlsRect.bind(n),n.setCursor=n.setCursor.bind(n),n.clicks=0,n}return(0,E.default)(t,e),(0,M.default)(t,[{key:"componentWillMount",value:function(){this.redrawElementControlsRect(this.props.selectedElementArray)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.selectedElementArray,n=e.selectedElementArray,o=t.size===n.size&&1===n.size&&t.first().get("id")!==n.first().get("id");(t.size!==n.size||o)&&n.size&&this.redrawElementControlsRect(n);var a=this.state.needRedraw;a&&(this.redrawElementControlsRect(n),this.setState({needRedraw:!1}))}},{key:"getMinMaxPosition",value:function(e){var t=this.props.selectedElements,n=e.first(),o=(0,L.findKonvaObjectById)(t,n.get("id")),a=o.getParent(),r=a.getClientRect(),i=r.x,s=r.y,u=0,l=0;return e.forEach(function(e){var n=(0,L.findKonvaObjectById)(t,e.get("id")),o=n.getParent(),a=o.getClientRect(),r=a.x,d=a.y,c=a.width,p=a.height,f=r+c,g=d+p;r<i&&(i=r),f>u&&(u=f),d<s&&(s=d),g>l&&(l=g)}),[i,s,u,l]}},{key:"redrawElementControlsRect",value:function(e){var t=e||this.props.selectedElementArray,n=this.props,o=n.selectedElements,a=n.syncControlDegree,i=0,s=0,u=0,l=0,d=0;if(t.size>1){var c=this.getMinMaxPosition(t),p=(0,f.default)(c,4),g=p[0],h=p[1],m=p[2],v=p[3];i=g,s=h,u=m-g,l=v-h}else if(1===t.size){var y=t.first(),M=(0,L.findKonvaObjectById)(o,y.get("id")),I=M.getParent(),T=I.getOffset();i=I.getX()-T.x,s=I.getY()-T.y,u=I.getWidth(),l=I.getHeight(),d=y.get("rot")}this.lastAngle=r(d),a(d),this.setState({x:i,y:s,width:u,height:l,degree:d})}},{key:"needRedrawElementControlsRect",value:function(){this.setState({needRedraw:!0})}},{key:"moveElement",value:function(e,t,n){var o=this.props,a=o.onElementArrayChange,r=o.selectedElementArray,i=A.default.List();r.size&&(r.forEach(function(n){if(n.get("isSelected")){var o=n.get("computed"),a=n.set("computed",o.merge({left:o.get("left")+e,top:o.get("top")+t}));i=i.push(a)}}),a(i,function(){n&&n()}))}},{key:"onDragStart",value:function(e){this.isDragging=!0;var t=this.props.selectedElementArray,n=this.getMinMaxPosition(t),o=(0,f.default)(n,2),a=o[0],r=o[1],i=e.evt;this.startDragPosition={x:i.pageX,y:i.pageY},this.baseDragPosition=(0,c.default)({},this.startDragPosition),this.baseDelta={x:i.pageX-a,y:i.pageY-r}}},{key:"onDrag",value:function(e){if(this.isDragging){var t=e.evt;if(0!==t.movementX||0!==t.movementY){__app.isMoved=!0;var n=t.pageX-this.startDragPosition.x,o=t.pageY-this.startDragPosition.y;this.startDragPosition={x:t.pageX,y:t.pageY},this.moveElement(n,o);var a=this.state,r=a.x,i=a.y;return void this.setState({x:r+n,y:i+o})}}}},{key:"onDragStop",value:function(e){this.isDragging=!1,__app.isMoved=!1;var t=this.props,n=t.selectedElementArray,o=t.submitElementArray;t.hideAllGuideLines;o(n,"move"),e.evt.cancelBubble=!0}},{key:"onRotateStart",value:function(e){this.isRotating=!0;var t=e.evt;this.startRotatePosition={x:t.pageX,y:t.pageY};var n=this.props,o=n.containerRect,r=n.selectedElements,i=this.state,s=i.x,u=i.y,l=i.width,d=i.height,c=i.degree,p=l/2,f=d/2,g=s+o.left+p,h=u+o.top+f;this.startDegree=c,this.startAngle=a(g,h,t.clientX,t.clientY)-this.lastAngle;var m={x:Math.round(s+p),y:Math.round(u+f)};r.setOffset(m).setX(m.x).setY(m.y).setRotation(0)}},{key:"onRotate",value:function(e){if(this.isRotating){var t=this.props,n=t.containerRect,o=t.selectedElementArray,r=t.syncControlDegree,u=this.state,l=u.x,d=u.y,c=u.width,p=u.height,f=c/2,g=p/2,h=l+n.left+f,m=d+n.top+g;this.lastAngle=a(h,m,e.clientX,e.clientY)-this.startAngle;var v=s(Math.round(i(this.lastAngle))),y=this.props.selectedElements;if(1===o.size){var M=o.first();y.setRotation(v-M.get("rot"))}else y.setRotation(v-this.startDegree);r(v),this.setState({degree:v})}}},{key:"onRotateStop",value:function(e){var t=this;if(this.isRotating){this.isRotating=!1;var n=this.props,o=n.submitElementArray,a=n.selectedElementArray,r=n.selectedElements,i=this.state.degree;if(i!==this.startDegree){var u=a;u=1===a.size?u.setIn([String(0),"rot"],i):a.map(function(e){var n=(0,L.findKonvaObjectById)(r,e.get("id")),o=n.getParent(),a=o.getAbsolutePosition(),u=o.getOffset(),l=e.get("computed");return e.merge({rot:s(i-t.startDegree+o.getRotation()),computed:l.merge({left:a.x-u.x,top:a.y-u.y})})}),o(u,"rotate")}r.setOffset({x:0,y:0}).setX(0).setY(0).setRotation(0),e.stopPropagation()}}},{key:"getPointAndOpposite",value:function(e,t,n){var o={},a={},r=1e3,i=0,s=0;return e.forEach(function(u,l){var d=Math.sqrt(Math.pow(u.x-t,2)+Math.pow(u.y-n,2));if(d<r){a=u,i=l,r=d;var c=4,p=l-c;p<0&&(p=l+c),o=e.slice(p,p+1)[0],s=p}}),{current:{index:i,point:a},opposite:{index:s,point:o}}}},{key:"getNewControlBoxAndElementArray",value:function(e){var t=this.state.degree,n=this.props,o=n.selectedElementArray,a=(n.submitElementArray,this.baseIndex),r=(this.oppositePoint.x,this.oppositePoint.y,this.originalElementArray),i=(this.originalOffset.width,this.originalOffset.height,this.originalRect.x),s=this.originalRect.y,u=this.originalRect.width,l=this.originalRect.height,d=this.originalTransformedControlRect,c=(0,C.getScaledRect)({x:i,y:s,width:u,height:l,scale:this.scale}),p=(0,_.transform)(c,t),f=d.point[a].x-p.point[a].x+p.left,g=d.point[a].y-p.point[a].y+p.top,h=f+p.width/2-c.width/2,m=g+p.height/2-c.height/2,v=c.width,y=c.height,M=o.map(function(e,t){var n=r.getIn([t,"computed"]),o=(n.get("left")-i)/u,a=(n.get("top")-s)/l,d=n.get("width")/u,c=n.get("height")/l,p=h+o*v||0,f=m+a*y||0,g=v*d||0,M=y*c||0;return e.merge({computed:n.merge({left:p,top:f,width:g,height:M})})});return{controlBox:{x:h,y:m,width:v,height:y},elementArray:M}}},{key:"clampElementArray",value:function(e){var t=this.props.ratio,n=Math.round(150*t.workspace),o=Math.round(150*t.workspace);return e.map(function(e){var t=e.merge({}),a=e.get("width"),r=e.get("height"),i=a/r,s=e.getIn(["computed","width"]),u=e.getIn(["computed","height"]),l=s/u;return Math.abs(i-l)<=.002?s>u?s<=n&&(s=n,u=s/l):s<u?u<=o&&(u=o,s=u*l):(s<=n||u<=o)&&(s=u=o):(s<=n&&(s=n),u<=o&&(u=o)),t=t.setIn(["computed","width"],s),t=t.setIn(["computed","height"],u)})}},{key:"onResizeStart",value:function(e){__app.isResizing=!0;var t=e.evt;this.startResizePosition={x:t.pageX,y:t.pageY};var n=this.state,o=n.x,a=n.y,r=n.width,i=n.height,s=n.degree,u=this.props,l=u.containerRect,d=u.selectedElementArray,c=l.left,p=l.top,f=t.pageX-c,g=t.pageY-p,h=(0,_.transform)({x:o,y:a,width:r,height:i},s),m=h.point,v=this.getPointAndOpposite(m,f,g),y=v.opposite;this.baseIndex=y.index,this.oppositePoint=y.point,this.originalOffset={width:Math.abs(f-y.point.x),height:Math.abs(g-y.point.y)},this.originalRect={x:o,y:a,width:r,height:i},this.originalElementArray=d,this.originalTransformedControlRect=h}},{key:"onResize",value:function(e){if(__app.isResizing){var t=e.evt,n=this.props,o=n.onElementArrayChange,a=n.containerRect,r=a.left,i=a.top,s=t.pageX-r,u=t.pageY-i,l={x:1,y:1},d=this.baseIndex,c=this.oppositePoint.x,p=this.oppositePoint.y,f=this.originalOffset.width,g=this.originalOffset.height,h=1;h=f>g?Math.abs(s-c)/f:Math.abs(u-p)/g,U.indexOf(d)>=0?l.x=l.y=h:B.indexOf(d)>=0?l.x=h:Y.indexOf(d)>=0&&(l.y=h),this.scale=l;var m=this.getNewControlBoxAndElementArray(l),v=m.elementArray,y=m.controlBox;v=this.clampElementArray(v),o(v),this.setState(y)}}},{key:"onResizeStop",value:function(e){__app.isResizing=!1;var t=this.props.submitElementArray,n=this.getNewControlBoxAndElementArray(this.scale),o=n.elementArray;o=this.clampElementArray(o),t(o,"resize"),e.evt.stopPropagation()}},{key:"setCursor",value:function(e){this.elementControlsNode&&(this.elementControlsNode.getStage().content.style.cursor=e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedElementArray,o=(t.actionbarActions,t.onExchangeDragStart),a=t.onExchangeDragMove,r=t.onExchangeDragEnd,i=t.toDownload,s=t.isShowTextNotFit,u=t.isShowTextOverflow,d=(t.clicksObj,this.state),c=d.x,p=d.y,f=d.width,g=d.height,h=d.degree,m=Boolean(n.size),v={x:Math.round(f/2),y:Math.round(g/2)},y={},M=!1,I=Boolean(1===n.size),T=Boolean(n.getIn([0,"type"])===O.elementTypes.text&&!!n.getIn([0,"computed","imgUrl"]));I&&n.getIn([0,"encImgId"])&&(M=!0,y={actions:{onDragStart:function(e){o(e)},onDragMove:function(e){a(e)},onDragEnd:function(e){r(e)}}});var w={ref:function(t){return e.elementControlsNode=t},rotation:h,offset:v,x:c+v.x,y:p+v.y,width:f,height:g,onMouseOver:function(t){e.setCursor("move")},onMouseOut:function(t){e.setCursor("default")},onMouseDown:function(e){e.evt.stopPropagation()},onClick:function(){if(I&&e.props.downloadStatus===O.downloadStatus.DOWNLOAD_FAIL){var t=!0;i(n,t)}}},E={x:0,y:0,width:f,height:g,degree:h},b=(0,l.default)({},E,{stroke:"#4CC1FC",strokeWidth:1,id:O.shapeType.controlElement,draggable:!0,onDragStart:this.onDragStart,onDragMove:this.onDrag,onDragEnd:this.onDragStop}),D=(0,l.default)({},E,{actions:{onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop}}),A=((0,l.default)({},E,{actions:{onRotateStart:this.onRotateStart,onRotate:this.onRotate,onRotateStop:this.onRotateStop}}),!1),_=!1;if(M){var C=n.getIn(["0","computed","scale"]);_=C>O.RESIZE_LIMIT}I&&T&&(A=s||u);var P={parentHeight:g,isShowTextNotFit:s,isShowTextOverflow:u},L={parentHeight:g};return m?S.default.createElement(N.Group,w,S.default.createElement(N.Rect,b),S.default.createElement(x.default,D),A?S.default.createElement(k.default,P):null,_?S.default.createElement(R.default,L):null):S.default.createElement(N.Group,null)}}]),t}(b.Component);W.propTypes={selectedElementArray:b.PropTypes.instanceOf(A.default.List),submitElementArray:b.PropTypes.func.isRequired,onElementArrayChange:b.PropTypes.func.isRequired,containerRect:b.PropTypes.object,selectedElements:b.PropTypes.object,showGuideLineIfNear:b.PropTypes.func,hideAllGuideLines:b.PropTypes.func,snapToGuideLine:b.PropTypes.func,actionbarActions:b.PropTypes.object,downloadStatus:b.PropTypes.number,clicksObj:b.PropTypes.object},t.default=W},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(3),v=o(m),y=n(27),M=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.setCursor=n.setCursor.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"getNewCursorArray",value:function(e){var t=["ns-resize","nesw-resize","ew-resize","nwse-resize","ns-resize","nesw-resize","ew-resize","nwse-resize"],n=8,o=45,a=0;if(e&&(a=Math.floor(e/o),e%o>o/2&&(a+=1)),a>1){var r=n-a;return t.slice(a,a+r).concat(t.slice(0,a))}return t}},{key:"setCursor",value:function(e){this.resizableNode&&(this.resizableNode.getStage().content.style.cursor=e)}},{key:"getCircleProps",value:function(e){var t=this,n=this.props,o=n.actions,a=n.degree,i=n.x,s=n.y,u=n.width,l=n.height,d={ref:e,stroke:"#4CC1FC",strokeWidth:1,radius:5,fill:"#fff",draggable:!0,dragOnTop:!1,onDragStart:o.onResizeStart,onDragMove:function(e){o.onResize(e)},onDragEnd:o.onResizeStop,onMouseOut:function(e){t.setCursor("default")},onMouseDown:function(e){e.evt.stopPropagation()}},c=this.getNewCursorArray(a),p=null,f=i+u,g=s+l,h=i+u/2,m=s+l/2;switch(e){case"top":p=(0,r.default)({},d,{x:h,y:s,onMouseOver:function(e){t.setCursor(c[0]),e.cancelBubble=!0}});break;case"topRight":p=(0,r.default)({},d,{x:f,y:s,onMouseOver:function(e){t.setCursor(c[1]),e.cancelBubble=!0}});break;case"right":p=(0,r.default)({},d,{x:f,y:m,onMouseOver:function(e){t.setCursor(c[2]),e.cancelBubble=!0}});break;case"bottomRight":p=(0,r.default)({},d,{ref:"bottomRight",x:f,y:g,onMouseOver:function(e){t.setCursor(c[3]),e.cancelBubble=!0}});break;case"bottom":p=(0,r.default)({},d,{x:h,y:g,onMouseOver:function(e){t.setCursor(c[4]),e.cancelBubble=!0}});break;case"bottomLeft":p=(0,r.default)({},d,{ref:"bottomLeft",x:i,y:g,onMouseOver:function(e){t.setCursor(c[5]),e.cancelBubble=!0}});break;case"left":p=(0,r.default)({},d,{x:i,y:m,onMouseOver:function(e){t.setCursor(c[6]),e.cancelBubble=!0}});break;case"topLeft":p=(0,r.default)({},d,{x:i,y:s,onMouseOver:function(e){t.setCursor(c[7]),e.cancelBubble=!0}})}return p}},{key:"render",value:function(){var e=this,t=this.getCircleProps("topLeft"),n=this.getCircleProps("top"),o=this.getCircleProps("topRight"),a=this.getCircleProps("right"),r=this.getCircleProps("bottomLeft"),i=this.getCircleProps("bottom"),s=this.getCircleProps("bottomRight"),u=this.getCircleProps("left");return v.default.createElement(y.Group,{ref:function(t){return e.resizableNode=t}},v.default.createElement(y.Circle,t),v.default.createElement(y.Circle,n),v.default.createElement(y.Circle,o),v.default.createElement(y.Circle,a),v.default.createElement(y.Circle,s),v.default.createElement(y.Circle,i),v.default.createElement(y.Circle,r),v.default.createElement(y.Circle,u))}}]),t}(m.Component);M.propTypes={actions:m.PropTypes.shape({onResize:m.PropTypes.func.isRequired,onResizeStart:m.PropTypes.func.isRequired,onResizeStop:m.PropTypes.func.isRequired}).isRequired,degree:m.PropTypes.number.isRequired,x:m.PropTypes.number.isRequired,y:m.PropTypes.number.isRequired,width:m.PropTypes.number.isRequired,height:m.PropTypes.number.isRequired},t.default=M},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(12),h=o(g),m=n(11),v=o(m),y=n(13),M=o(y),I=n(15),T=n(3),w=o(T),E=n(27);n(227);var b=n(354),S=o(b),D=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actions,o=t.data,a=n.boundTemplateActions,r=n.boundPaginationActions,i=n.boundProjectActions,s=n.boundImageEditModalActions,u=n.boundImagesActions,l=n.boundUploadImagesActions,d=n.boundTextEditModalActions,c=n.boundTrackerActions,p=n.switchSheet,f=n.setMouseHoverDomNode,g=o.urls,m=o.size,y=o.ratios,I=o.styles,T=o.variables,b=o.template,D=o.pagination,A=o.paginationSpread,N=o.settings,_=o.parameters,C=o.allImages,P=o.userId,x=o.project,O=o.isPreview,L=o.capability,j=o.userInfo,k=A.get("summary"),z=A.get("images"),R=(0,M.default)("book-cover-screenshot"),U=(0,v.default)({},{},{width:(0,h.default)(m,"renderCoverSize.width")+"px",height:(0,h.default)(m,"renderCoverSize.height")+"px",cursor:"default"},I),B=(0,h.default)(N,"spec.product"),Y=(0,h.default)(N,"spec.size"),W=B?"./assets/"+B+"/"+Y+"/cover.png":"",F={boundPaginationActions:r,boundProjectActions:i,boundImageEditModalActions:s,boundImagesActions:u,boundUploadImagesActions:l,boundTextEditModalActions:d,boundTrackerActions:c,boundTemplateActions:a,switchSheet:p,setMouseHoverDomNode:f},H={workspace:y.coverWorkspace},G=[];if(x.cover.get("containers")){var Q=x.cover.get("containers");Q.forEach(function(e,t){var n={isPreview:O,urls:g,summary:k,page:e,images:z,elements:e.get("elements"),pagination:D,ratio:H,index:t,settings:N,template:b,paginationSpread:A,parameters:_,size:(0,v.default)(m),variables:T,allImages:C,userId:P,project:x,capability:L,x:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.left")+(0,h.default)(m,"renderCoverSheetSize.left"),y:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.top")+(0,h.default)(m,"renderCoverSheetSize.top"),userInfo:j};G.push(w.default.createElement(S.default,{key:t+"screenshot",actions:F,data:n}))})}0===G.length&&x.pageArray&&x.pageArray.forEach(function(e,t){var n={isPreview:O,urls:g,summary:k,page:e,images:z,elements:e.get("elements"),pagination:D,ratio:H,index:t,settings:N,template:b,paginationSpread:A,parameters:_,size:(0,v.default)(m),variables:T,allImages:C,userId:P,project:x,capability:L,x:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.left")+(0,h.default)(m,"renderCoverSheetSize.left"),y:(0,h.default)(m,"renderCoverSheetSizeWithoutBleed.top")+(0,h.default)(m,"renderCoverSheetSize.top"),userInfo:j};0===t&&G.push(w.default.createElement(S.default,{key:t+"screenshot",actions:F,data:n}))});var X=(0,M.default)("book-page",{enabled:!1,disabled:!0,cover:!0,inner:!1}),Z={ref:function(t){return e.stage=t},width:(0,h.default)(m,"renderCoverSize.width"),height:(0,h.default)(m,"renderCoverSize.height"),className:X},J=new window.Image;J.src=W;var V={x:0,y:0,width:(0,h.default)(m,"renderCoverSize.width"),height:(0,h.default)(m,"renderCoverSize.height"),image:J},q={x:0,y:0,width:(0,h.default)(m,"renderCoverSize.width"),height:(0,h.default)(m,"renderCoverSize.height")},K={x:0,y:0,width:(0,h.default)(m,"renderCoverSize.width"),height:(0,h.default)(m,"renderCoverSize.height"),fill:"#fff"};return w.default.createElement("div",{key:"cover",className:R,style:U,draggable:"false",onDragStart:this.stopDragEvent,ref:function(t){e.componentRef=t}},w.default.createElement("div",{className:"cover-overflow-container",style:U},w.default.createElement(E.Stage,Z,w.default.createElement(E.Layer,{ref:function(t){return e.layerNodeOfElements=t}},w.default.createElement(E.Group,q,w.default.createElement(E.Rect,K)),G,w.default.createElement(E.Group,q,w.default.createElement(E.Image,V))))))}}]),t}(T.Component);D.propTypes={},D.defaultProps={},t.default=(0,I.translate)("Screenshot")(D)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(32),v=o(m),y=n(31),M=o(y);n(228);var I=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onButtonClick=n.onButtonClick.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"onButtonClick",value:function e(){var t=this.props,e=t.onButtonClick,n=t.closeAlertModal;"function"==typeof e&&e(),n()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.title,o=e.message,a=e.buttonText,r=e.closeAlertModal,i=e.escapeClose,s=e.isHideIcon;return h.default.createElement(v.default,{className:"alert-wrap",onClosed:r,opened:t,escapeClose:i,isHideIcon:s},n?h.default.createElement("div",{className:"alert-title"},n):null,h.default.createElement("div",{className:"alert-mes"},o),h.default.createElement("div",{className:"button-wrap"},h.default.createElement(M.default,{className:"little-button",onClicked:this.onButtonClick},a)))}}]),t}(g.Component);I.propTypes={isShown:g.PropTypes.bool.isRequired,message:g.PropTypes.string.isRequired,buttonText:g.PropTypes.string.isRequired,closeAlertModal:g.PropTypes.func.isRequired,title:g.PropTypes.string,escapeClose:g.PropTypes.bool,isHideIcon:g.PropTypes.bool,onButtonClick:g.PropTypes.func},I.defaultProps={buttonText:"OK"},t.default=I},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.startExchangeImage=function(e){e.setState({isExchangeImage:!0})},t.stopExchangeImage=function(e){e.setState({isExchangeImage:!1})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isSmallView=t.hasBleed=t.computedCoverSheet=void 0;var a=n(11),r=o(a),i=n(2),s=(o(i),n(9));t.computedCoverSheet=function(e,t,n,o,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:bookShapeTypes.square,d={width:t.renderCoverSheetSize.width,height:t.renderCoverSheetSize.height,top:0,left:0},c={width:t.renderCoverSheetSizeWithoutBleed.width,height:t.renderCoverSheetSizeWithoutBleed.height,top:0,left:0},p=(0,r.default)({},{render:{top:0,left:0}},a),f=n.get(o);if(f){var g=0,h=(t.renderSpainWidth,{top:Math.ceil(f.getIn(["bleed","top"])*e),right:Math.ceil(f.getIn(["bleed","right"])*e),bottom:Math.ceil(f.getIn(["bleed","bottom"])*e),left:Math.ceil(f.getIn(["bleed","left"])*e)}),m=({width:Math.ceil(f.get("width")*e),height:Math.ceil(f.get("height")*e)},Math.ceil(i?t.renderCoverSheetSize.width+g:t.renderCoverSheetSize.width)),v=Math.ceil(i?t.renderCoverSheetSizeWithoutBleed.width+g:t.renderCoverSheetSizeWithoutBleed.width);switch(f.get("type")){case s.pageTypes.back:d={width:Math.ceil((m-t.renderSpainWidth)/2+(f.getIn(["bleed","right"])+f.getIn(["bleed","left"]))*e),height:Math.ceil(t.renderCoverSheetSize.height),top:-h.top,left:-h.left},c={width:Math.ceil((v-t.renderSpainWidthWithoutBleed)/2),height:t.renderCoverSheetSizeWithoutBleed.height,top:p.render.top,left:p.render.left};break;case s.pageTypes.spine:d={width:t.renderSpainWidth,height:t.renderCoverSheetSize.height,top:-h.top,left:-h.left},c={width:t.renderSpainWidthWithoutBleed,height:t.renderCoverSheetSizeWithoutBleed.height,top:p.render.top,left:Math.ceil(p.render.left+(v-t.renderSpainWidthWithoutBleed)/2)};break;case s.pageTypes.front:var y=Math.ceil((m-t.renderSpainWidthWithoutBleed)/2+f.getIn(["bleed","left"])*e);Math.ceil((m-t.renderSpainWidthWithoutBleed)/2+t.renderSpainWidthWithoutBleed);d={width:i?y-g:y,height:t.renderCoverSheetSize.height,
top:-h.top,left:i?-h.left+g:-h.left};var M=Math.ceil((v-t.renderSpainWidthWithoutBleed)/2),I=Math.ceil((v-t.renderSpainWidthWithoutBleed)/2+t.renderSpainWidthWithoutBleed),T={width:i&M>130?-g:0,height:M>130?4:0,top:M>130?-2:0,left:i&M>130?g:0};switch(l){case bookShapeTypes.landscape:break;case bookShapeTypes.square:break;case bookShapeTypes.portrait:}c={width:M+T.width,height:t.renderCoverSheetSizeWithoutBleed.height+T.height,top:p.render.top+T.top,left:p.render.left+I+T.left};break;case s.pageTypes.full:d={width:m,height:t.renderCoverSheetSize.height,top:-h.top,left:-h.left};var w={height:u?t.renderCoverSheetSizeWithoutBleed.height>=100?6:2:0,width:0,top:u?t.renderCoverSheetSizeWithoutBleed.height>=100?-3:-1:0,left:0};c={width:v+w.width,height:t.renderCoverSheetSizeWithoutBleed.height+w.height,top:p.render.top+w.top,left:p.render.left+w.left}}}return{renderCoverSheetSize:d,renderCoverSheetSizeWithoutBleed:c}},t.hasBleed=function(e){var t=0;if(e&&e.size){var n=e.find(function(e){return e.get("type")===s.pageTypes.full||e.get("type")===s.pageTypes.back||e.get("type")===s.pageTypes.front});n&&(t=n.getIn(["bleed","top"]))}return 0!==t},t.isSmallView=function(e){var t=!1;if(e){var n=e.width;e.height;t=n<150}return t}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.computedElementOptions=t.getCurrentScale=void 0;var a=n(19),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=n(23),c=o(d),p=n(2),f=o(p),g=n(9),h=n(33),m=n(49),v=(n(17),n(62)),y=n(29),M=o(y),I=n(16),T=n(21),w=t.getCurrentScale=function(e,t){var n=e.props.data,o=n.images,a=void 0,r=t.toJS(),i=r.imgRot,s=r.width,u=r.height,l=r.cropLUX,d=r.cropLUY,c=r.cropRLX,p=r.cropRLY,f=r.encImgId,g=o.get(f);return a=g?(0,v.getScale)({imgRot:i,imageDetail:g,width:s,height:u,cropRLX:c,cropLUX:l,cropRLY:p,cropLUY:d}):0};t.computedElementOptions=function(e,t,n){var o=e.props.data,a=o.urls,i=o.page,u=(o.images,o.settings),d=(o.userInfo,n||o.ratio.workspace),p={width:0,height:0,left:0,top:0,imgUrl:""},v=t.get("imgRot"),y=t.get("imgFlip");p.width=t.get("width")*d,p.height=t.get("height")*d,p.left=t.get("x")*d,p.top=t.get("y")*d;var E=t.get("encImgId");switch(t.get("type")){case g.elementTypes.text:if(o.page.get("type")===g.pageTypes.spine){p.width=t.get("width")*d,p.height=t.get("height")*d,p.left=t.get("x")*d,p.top=t.get("y")*d;var b=t.get("text"),S=t.get("fontSize"),D=(S*i.get("height"),t.get("fontColor")?t.get("fontColor"):"#ffffff");p.imgUrl=b?(0,c.default)(PAINETEXT_SRC)({text:(0,m.toEncode)(b),color:(0,h.hexString2Number)(D),fontFamily:t.get("fontFamily"),width:t.get("height"),height:t.get("width"),baseUrl:a.baseUrl,ratio:d}):null}else{var A=t.get("text"),N=t.get("fontSize"),_=N*i.get("height"),C=t.get("fontColor")?t.get("fontColor"):"#ffffff";p.imgUrl=(0,c.default)(I.TEXT_SRC)({text:(0,m.toEncode)(A),fontSize:_,fontColor:(0,h.hexString2Number)(C),fontFamily:t.get("fontFamily"),width:t.get("width"),height:t.get("height"),originalWidth:t.get("width"),originalHeight:t.get("height"),originalFontSize:_,baseUrl:a.baseUrl,textAlign:t.get("textAlign"),verticalTextAlign:t.get("textVAlign"),ratio:d})}break;case g.elementTypes.photo:if(E){var P=null;if(t.get("cropRLY")&&(P=(0,T.getCropOptionsByLR)(t.get("cropLUX"),t.get("cropLUY"),t.get("cropRLX"),t.get("cropRLY"),p.width,p.height)),P){var x="rect",O={effectId:0,opacity:100,brightness:0,contrast:0,saturation:100};t.get("style")&&(O=(0,l.default)({},O,t.get("style").toJS())),p.imgUrl=(0,c.default)(""+I.IMAGES_API+I.IMAGES_FILTER_PARAMS)((0,l.default)({},P,O,(0,r.default)({encImgId:E,imgFlip:y,shape:x,rotation:v,baseUrl:a.baseUrl},M.default))),p.keepRatio=!1,p.corpApiTemplate=(0,c.default)(I.IMAGES_CROPPER)({baseUrl:a.baseUrl})+I.IMAGES_CROPPER_PARAMS,p.filterApiTemplate=(0,c.default)(I.IMAGES_API)({baseUrl:a.baseUrl})+I.IMAGES_FILTER_PARAMS,p.scale=w(e,t)}var L=t.get("border");if(L)if(L.get("size")){var j=(0,h.hexToRGBA)(L.get("color"),L.get("opacity"));p.border=Math.round(L.get("size")*d)+"px solid "+j}else p.border="none"}break;case g.elementTypes.calendar:var k=(0,s.default)(u,"spec.product"),z=(0,s.default)(u,"spec.size"),R=t.get("month"),U=(0,s.default)(u,"spec.dateStyle"),B=R&&R<10?"0"+R:R,Y=t.get("year"),W=(a.calendarBaseUrl,a.baseUrl);p.imgUrl=k&&z?(0,c.default)(I.CALENDAR_IMAGE)({dateStyle:U,productType:k,size:z,month:B,year:Y,baseUrl:W,imageSize:700}):null}return f.default.fromJS(p)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=u.default.List(),a=e.state.elementArray;return t.forEach(function(t){var r=e.computedElementOptions(t,n);a.find(function(e){return e.get("id")===t.get("id")});o=o.push(t.merge({computed:r},{isSelected:!1}))}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.componentWillReceiveProps=t.componentWillMount=t.onEditText=t.onRemoveImage=t.onEditImage=void 0;var r=n(11),i=o(r),s=n(2),u=o(s),l=n(9),d=n(45),c=(o(d),n(21),n(29)),p=o(c);t.onEditImage=function(e,t){var n=e.props,o=n.data,a=n.actions,r=a.boundImageEditModalActions,s=a.boundProjectActions,u=o.images,l=o.ratio,d=t.toJS(),c=d.computed,f=d.encImgId,g=d.imgRot,h=d.imageid,m=d.cropLUX,v=d.cropLUY,y=d.cropRLX,M=d.cropRLY,I=c.width,T=c.height,w=u.get(f);if(w){var E=w.toJS(),b=E.width,S=E.height,D=E.name;r.showImageEditModal({imageEditApiTemplate:c.corpApiTemplate,encImgId:f,imageId:f?0:h,rotation:g,imageWidth:b,imageHeight:S,imageName:D,elementWidth:I/l.workspace,elementHeight:T/l.workspace,crop:{cropLUX:m,cropLUY:v,cropRLX:y,cropRLY:M},securityString:p.default,onDoneClick:function(e,n,o){s.updateElement((0,i.default)({},n,{imgRot:o,id:t.get("id")}))}})}},t.onRemoveImage=function(e,t){var n=e.props,o=n.data,a=n.actions,r=o.page,i=a.boundProjectActions,s=a.boundTrackerActions;t.get("type")===l.elementTypes.photo?t.get("encImgId")?(s.addTracker("ClickDeleteImage,AllPages"),i.updateElement({id:t.get("id"),style:{opacity:100,effectId:0},border:{color:"#FFFFFF",size:0,opacity:100},encImgId:"",imageid:"",cropLUX:0,cropLUY:0,cropRLX:0,cropRLY:0,imgRot:0})):i.deleteElement(t.get("id"),r.get("id")).then(function(){}):i.deleteElement(t.get("id"),r.get("id"))},t.onEditText=function(e,t){var n=e.props,o=n.actions,a=n.data,r=o.boundTextEditModalActions,i=o.boundPaginationActions,s=a.allPageSheetIndex,u=a.page,l=a.index,d=u.get("id");i.switchSheet(s).then(function(){i.switchPage(l,d).then(function(){r.showTextEditModal({element:t})})})},t.componentWillMount=function(e){var t=e.props.data,n=t.page,o=t.ratio;e.setState({elementArray:a(e,n.get("elements"),o.workspace)})},t.componentWillReceiveProps=function(e,t){var n=e.props.data.page.get("elements"),o=t.data.page.get("elements"),r=e.props.data.ratio.workspace,i=t.data.ratio.workspace,s=e.props.data.settings.spec.size,l=t.data.settings;if(!u.default.is(n,o)||r!==i||s!==l){var d=a(e,o,i);e.setState({elementArray:d})}}},363,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onDragPageTitleEnd=t.onDragPageTitleStarted=t.onDragLeaved=t.onDragOvered=t.onDropPage=t.onDragPageEnd=t.onDragPageStarted=t.stopEvent=t.computedInnerSheet=t.getRefName=void 0;var a=n(2),r=(o(a),n(35)),i=o(r),s=(n(599),n(21),n(9)),u=n(28),l=t.getRefName=function(e,t){return"BookPageThumbnail-"+e+"-"+t},d=(t.computedInnerSheet=function(e,t,n,o){var a={width:t.renderInnerSheetSize.width,height:t.renderInnerSheetSize.height,top:t.renderInnerSheetSize.top,left:t.renderInnerSheetSize.left},r={width:t.renderInnerSheetSizeWithoutBleed.width,height:t.renderInnerSheetSizeWithoutBleed.height,top:0,left:0},i=n.get(o);return i.get("type")===s.pageTypes.top?(r.top=t.renderInnerSheetSizeWithoutBleed.topPageTop,r.left=t.renderInnerSheetSizeWithoutBleed.topPageLeft):i.get("type")===s.pageTypes.bottom&&(r.top=t.renderInnerSheetSizeWithoutBleed.bottomPageTop,r.left=t.renderInnerSheetSizeWithoutBleed.bottomPageLeft),{renderInnerSheetSize:a,renderInnerSheetSizeWithoutBleed:r}},t.stopEvent=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()},t.onDragPageStarted=function(e,t,n,o){var a=o||window.event,r=i.default.findDOMNode(e.refs[n]),l=(0,u.cloneDragNode)(r,s.dragPageSelector.clonedPage);(0,u.setTransferDragNode)(a,l),(0,u.setTransferData)(a,{pageId:t.get("id")}),e.setState({dragPageId:t.get("id")}),window.__isDragPage=!0}),c=t.onDragPageEnd=function(e){window.__isDragPage=!1;var t=document.getElementById(s.dragPageSelector.clonedPage);t&&t.parentNode.removeChild(t),delete window.__isDragPage,e.setState({dropPageId:null,dragPageId:null})};t.onDropPage=function(e,t,n){var o=n||window.event;o.preventDefault();var a=(0,u.getTransferData)(o);if(!a.elementId){var r=a&&a.pageId||"",i=t.get("id");if(r&&r!==i){var s=e.props,l=s.actions,d=s.data,c=l.boundProjectActions,p=l.boundPaginationActions;c.movePageBefore(r,i);var f=d.pagination;i===f.pageId&&p.switchPage(f.pageIndex,r),r===f.pageId&&p.switchPage(f.pageIndex,i),e.setState({dropPageId:null,dragPageId:null})}}},t.onDragOvered=function(e,t,n){if(window.__isDragPage){var o=(n||window.event,t.get("id")),a=e.state.dragPageId;e.state.dropPageId!==o&&a!==o&&e.setState({dropPageId:o})}},t.onDragLeaved=function(e,t,n){e.setState({dropPageId:null})},t.onDragPageTitleStarted=function(e,t,n,o){var a=o||window.event,r=e.props.data,i=r.paginationSpread,s=i.get("pages"),u=l(t,n);n!==-1&&s&&s.size>n&&d(e,s.get(n),u,a)},t.onDragPageTitleEnd=function(e,t,n,o){c(e)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.lazyLoadingImage=void 0;var a=n(2),r=(o(a),n(86),n(9));window.__allPhotosUrls=[];t.lazyLoadingImage=function(e,t){var n=initImagePool(r.limitImagesLoading);e.setState({isImgLoading:!0});var o=__allPhotosUrls.find(function(e){return e.imgUrl==t});o?e.setState({src:t,isImgLoading:!1}):n.load(t,{success:function(n){e.setState({src:n,isImgLoading:!1}),__allPhotosUrls.push({imgUrl:t})},error:function(t){e.setState({isImgLoading:!1})}})}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(11),m=a(h),v=n(3),y=a(v),M=n(2),I=a(M),T=n(15),w=n(13),E=a(w),b=n(111),S=a(b),D=n(75),A=n(82),N=a(A),_=n(369),C=o(_);n(232);var P=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={isImgLoading:!1,src:null,isShowActionBar:!0},n.hideLoading=function(){n.setState({isImgLoading:!1})},n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"onImageError",value:function(){this.setState({isImgLoading:!1})}},{key:"onImageLoad",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillMount",value:function(){var e=this.props.data,t=e.element,n=(t.get("computed"),t.getIn(["computed","imgUrl"]));n&&(D.isSafari?this.setState({isImgLoading:!0,src:n}):C.lazyLoadingImage(this,n))}},{key:"shouldComponentUpdate",value:function(e,t){return!I.default.is(this.props.data.element,e.data.element)||this.props.data.isHover!==e.data.isHover||this.state.isImgLoading!==t.isImgLoading||this.state.img!==t.img||this.state.src!==t.src}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.element.getIn(["computed","imgUrl"]),n=e.data.element.getIn(["computed","imgUrl"]);t!==n&&(D.isSafari?this.setState({src:n,isImgLoading:!0}):(this.setState({src:null}),C.lazyLoadingImage(this,n)))}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,o=n.element,a=n.isHover,r=o.get("computed"),i=o.getIn(["computed","imgUrl"]),s={zIndex:o.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+o.get("rot")+"deg)"},u={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},l=(0,m.default)({},u,{display:i?"block":"none",border:r.get("border")?""+r.get("border"):"none"}),d={width:r.get("width")+"px",height:r.get("height")+"px"},c=(0,m.default)({},t),p=(0,m.default)({},n,{className:(0,E.default)("calendar-element-thumbnail",{"has-image":!!i}),style:s,handlerStyle:u,setCursorDefault:!0}),f=this.state,g=f.isImgLoading,h=f.src,v=(0,E.default)("box",{hover:a});return y.default.createElement(N.default,{actions:c,data:p},y.default.createElement("div",{className:"layer-image",style:d},y.default.createElement(S.default,{isShown:g}),g?null:y.default.createElement("img",{className:"photo-img",src:h,onLoad:this.onImageLoad,onError:this.onImageError,style:l})),y.default.createElement("div",{className:v,style:u}))}}]),t}(v.Component);P.propTypes={},t.default=(0,T.translate)("PhotoElement")(P)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(13),h=o(g),m=n(15),v=n(3),y=o(v),M=n(32),I=o(M),T=n(31),w=o(T);n(233);var E=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={name:"",timer:null,isInvalid:!1,isFormatInvalid:!1,errorTip:".",placeHolder:"input new book title here"},n.handleClone=n.handleClone.bind(n),n.resetTitle=n.resetTitle.bind(n),n.handleCloseCloneModal=n.handleCloseCloneModal.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"resetTitle",value:function(e){this.setState({name:e.target.value}),this.checkProjectTitleFun(e.target.value)}},{key:"checkProjectTitleFun",value:function(e,t){var n=this,o=this.props,a=o.checkProjectTitle,r=o.userId,i=(o.closeCloneModal,function(e){a({projectName:n.state.name,customerID:r}).then(function(o){o?(t&&(n.handleCloseCloneModal(),t(e)),n.setState({isInvalid:!1,isFormatInvalid:!1,errorTip:""})):n.state.isFormatInvalid?n.setState({isFormatInvalid:!1}):n.setState({isInvalid:!0,errorTip:"Title existed, please pick another one."})})});if(e.trim())if(/^[a-zA-Z 0-9\d_\s-]+$/.test(e))if(t)i(e),this.setState({isFormatInvalid:!1});else{this.state.timer&&clearTimeout(this.state.timer);var s=setTimeout(i,300);this.setState({isFormatInvalid:!1,timer:s})}else this.setState({isInvalid:!0,isFormatInvalid:!0,errorTip:"Only letters, numbers, blank space, - (hyphen) and _ (underscore) are allowed in the title."});else this.setState({isInvalid:!0,isFormatInvalid:!0,errorTip:"Title is required"})}},{key:"handleCloseCloneModal",value:function(){var e=this.props.closeCloneModal;e(),this.setState({name:"",timer:null,isInvalid:!1,isFormatInvalid:!1,errorTip:"."})}},{key:"handleClone",value:function(){var e=this.props,t=e.onCloneProject,n=e.addAlbum,o=e.userId,a=e.addTracker,r=function(e){n(o,e).then(function(){t(e)})};a("ClickCloneAndDone"),this.checkProjectTitleFun(this.state.name,r)}},{key:"render",value:function(){var e=this.props.isShown,t=(0,h.default)("error-tip",{show:this.state.isInvalid});return y.default.createElement(I.default,{className:"clone-modal",onClosed:this.handleCloseCloneModal,opened:e},y.default.createElement("p",{className:"modal-title"},"Clone Project"),y.default.createElement("p",{className:"input-tip"},"Please input new book title"),y.default.createElement("div",{className:"name-inputer-wrap"},y.default.createElement("input",{type:"text",value:this.state.name,onChange:this.resetTitle,maxLength:"50",placeholder:this.state.placeHolder}),y.default.createElement("span",{className:t},this.state.errorTip)),y.default.createElement("div",{className:"button-wrap"},y.default.createElement(w.default,{className:"little-button white",onClicked:this.handleCloseCloneModal},"Cancel"),y.default.createElement(w.default,{className:"little-button",disabled:this.state.isInvalid||!this.state.name,onClicked:this.handleClone},"Clone")))}}]),t}(v.Component);E.propTypes={isShown:v.PropTypes.bool.isRequired,closeCloneModal:v.PropTypes.func.isRequired,onCloneProject:v.PropTypes.func.isRequired,addAlbum:v.PropTypes.func.isRequired,userId:v.PropTypes.number,addTracker:v.PropTypes.func.isRequired},t.default=(0,m.translate)("CloneModal")(E)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(13),h=o(g),m=n(3),v=o(m),y=n(32),M=o(y),I=n(31),T=o(I);n(234);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleConfirm=n.handleConfirm.bind(n),n.handleCancel=n.handleCancel.bind(n),n.getButtonHtml=n.getButtonHtml.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleConfirm",value:function(){var e=this.props,t=e.onOkClick,n=e.closeConfirmModal,o=e.hideOnOk;t(),o&&n()}},{key:"handleCancel",value:function(){var e=this.props,t=e.onCancelClick,n=e.closeConfirmModal;t&&t(),n()}},{key:"getButtonHtml",value:function(){var e=this.props,t=e.okButtonText,n=e.okButtonClass,o=e.cancelButtonText,a=e.cancelInFirst,r=e.activeButton,i=void 0===r?"ok":r,s=[],u=(0,h.default)(n,{"button-white":"ok"!==i}),l=(0,h.default)({"button-white":"ok"===i}),d=o?v.default.createElement(T.default,{key:"cancel",className:l,onClicked:this.handleCancel},o):null,c=t?v.default.createElement(T.default,{key:"ok",onClicked:this.handleConfirm,className:u},t):null;return a?(d&&s.push(d),c&&s.push(c)):(c&&s.push(c),d&&s.push(d)),s}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.confirmTitle,o=e.confirmMessage,a=e.closeConfirmModalByX,r=o.toJS?o.toJS():o;return v.default.createElement(M.default,{className:"confirm-wrap",onClosed:a,opened:t},v.default.createElement("div",{className:"confirm-title"},n),v.default.createElement("div",{className:"confirm-mes"},r),v.default.createElement("div",{className:"button-wrap"},this.getButtonHtml()))}}]),t}(m.Component);w.propTypes={isShown:m.PropTypes.bool.isRequired,onOkClick:m.PropTypes.func.isRequired,closeConfirmModal:m.PropTypes.func.isRequired,confirmTitle:m.PropTypes.string,confirmMessage:m.PropTypes.oneOfType([m.PropTypes.string,m.PropTypes.node]).isRequired,okButtonText:m.PropTypes.string,cancelButtonText:m.PropTypes.string,onCancelClick:m.PropTypes.func,okButtonClass:m.PropTypes.string,cancelButtonClass:m.PropTypes.string,activeButton:m.PropTypes.string,hideOnOk:m.PropTypes.bool,cancelInFirst:m.PropTypes.bool},w.defaultProps={okButtonText:"Done",activeButton:"ok",cancelInFirst:!0},t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkBlank=t.handleSubmit=t.closeContactUsModal=void 0;var o=n(298);t.closeContactUsModal=function(e){var t=e.props.boundContactUsActions;e.refs.questionInputer.value="",e.refs.requestInputer.value="",e.refs.bugInputer.value="",e.setState({isBlank:!0}),t.hideContactUsModal()},t.handleSubmit=function(e){var t=e.props,n=t.boundContactUsActions,a=t.addNotification,r=e.props,i=r.env,s=r.project,u=i.userInfo,l=u.get("id").toString(),d=u.get("firstName"),c=u.get("email"),p=s.property,f=p.get("projectId").toString(),g=p.get("title"),h=e.refs.questionInputer.value,m=e.refs.requestInputer.value,v=e.refs.bugInputer.value,y=(0,o.getUserOS)(),M="[appName:"+navigator.appName+";userAgent:"+navigator.userAgent+";appVersion:"+navigator.appVersion+"]",I={userId:l,userName:d,userEmail:c,projectName:g,projectId:f,os:y,browser:M,question:h,featureRequest:m,bug:v};e.closeContactUsModal(),n.handleSubmit(I).then(function(e){a("success"===e.resultData.state?{message:"Submit successfully.\nMany thanks for your feedback.",level:"success",autoDismiss:2}:{message:"Send failed, you may try again later",level:"error",autoDismiss:0})})},t.checkBlank=function(e){e.refs.questionInputer.value||e.refs.requestInputer.value||e.refs.bugInputer.value?e.setState({isBlank:!1}):e.setState({isBlank:!0})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(15),h=n(3),m=o(h),v=n(32),y=o(v),M=n(31),I=o(M);n(235);var T=n(373),w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={isBlank:!0},n.checkBlank=function(){return(0,T.checkBlank)(n)},n.handleSubmit=function(){return(0,T.handleSubmit)(n)},n.closeContactUsModal=function(){return(0,T.closeContactUsModal)(n)},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.t;return m.default.createElement(y.default,{className:"contact-us-modal",onClosed:this.closeContactUsModal,opened:t},m.default.createElement("p",{className:"modal-title"},n("TITLE")),m.default.createElement("p",{className:"modal-item"},n("QUESTION_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"questionInputer",onChange:this.checkBlank,placeholder:n("QUESTION_PLACEHOLDER")}),m.default.createElement("p",{className:"modal-item"},n("REQUEST_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"requestInputer",onChange:this.checkBlank,placeholder:n("REQUEST_PLACEHOLDER")}),m.default.createElement("p",{className:"modal-item"},n("BUG_TITLE")),m.default.createElement("textarea",{className:"item-textarea",ref:"bugInputer",onChange:this.checkBlank,placeholder:n("BUG_PLACEHOLDER")}),m.default.createElement("div",{className:"button-wrap"},m.default.createElement(I.default,{className:"little-button",onClicked:this.closeContactUsModal},n("CANCEL")),m.default.createElement(I.default,{className:"little-button",onClicked:this.handleSubmit,disabled:this.state.isBlank},n("SUBMIT"))))}}]),t}(h.Component);w.propTypes={isShown:h.PropTypes.bool.isRequired,t:h.PropTypes.func.isRequired},t.default=(0,g.translate)("ContactUsModal")(w)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onMouseUp=function(e,t){var n=e.props,o=n.data,a=n.actions;a.handleMouseUp&&a.handleMouseUp(o,t)},t.onMouseEnter=function(e,t){var n=e.props,o=n.data,a=n.actions;a.handleMouseEnter&&a.handleMouseEnter(o,t)},t.onMouseOut=function(e,t){var n=e.props,o=n.data,a=n.actions;a.handleMouseOut&&a.handleMouseOut(o,t)},t.onMouseLeave=function(e,t){var n=e.props,o=n.data,a=n.actions;a.handleMouseLeave&&a.handleMouseLeave(o,t)},t.onMouseOver=function(e,t){var n=e.props,o=n.data,a=n.actions;a.handleMouseOver&&a.handleMouseOver(o,t)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(237);var y=function(e){function t(e,n){(0,s.default)(this,t);var o=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e,n));return o.handleMouseDown=o.handleMouseDown.bind(o),o.handleMouseEnter=o.handleMouseEnter.bind(o),o.handleMouseMove=o.handleMouseMove.bind(o),o}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleMouseDown",value:function(e){var t=this.props,n=t.onSelect,o=t.option;n(o,e),e.preventDefault(),e.stopPropagation()}},{key:"handleMouseEnter",value:function(e){var t=this.props,n=t.onFocus,o=t.option;n(o,e)}},{key:"handleMouseMove",value:function(e){var t=this.props,n=t.onFocus,o=t.option;n(o,e)}},{key:"render",value:function(){var e=this.props.className,t=this.props.option,n=(t.label,t.title),o=t.fontThumbnailUrl,a=t.disabled,r=(0,v.default)(e,{"font-option-disabled":a});return h.default.createElement("div",{className:r,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,title:n},h.default.createElement("img",{src:o,alt:""}))}}]),t}(g.Component);y.propTypes={option:g.PropTypes.shape({label:g.PropTypes.string,title:g.PropTypes.string.isRequired,fontThumbnailUrl:g.PropTypes.string.isRequire}).isRequired},t.default=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.onHandleMouseMove=function(e,t){var n=e.props.actions,o=n.handleMouseMove;o&&o(t||window.event)},o=t.onHandleMouseUp=function(e,t){var n=e.props.actions,o=n.handleMouseUp;o&&o(t||window.event)};t.onHandleMouseEnter=function(e,t){var n=e.props.actions,o=n.handleMouseEnter;o&&o(t||window.event)},t.onHandleMouseOut=function(e,t){var n=e.props.actions,o=n.handleMouseOut;o&&o(t||window.event)},t.onHandleMouseLeave=function(e,t){var n=e.props.actions,o=n.handleMouseLeave;o&&o(t||window.event),e.setState({showDeleteButton:!1})},t.onHandleMouseOver=function(e,t){var n=e.props.actions,o=n.handleMouseOver;o&&o(t||window.event),e.setState({showDeleteButton:!0})},t.onHandleMouseDown=function(e,t){var a=e.props.actions,r=a.handleMouseDown;r&&r(t||window.event),document.onmousemove=function(t){n(e,t||window.event)},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,o(e,t||window.event)}},t.onHandleDblClick=function(e,t){var n=e.props,o=n.actions,a=n.data,r=o.handleDblClick;r&&r(a,t||window.event)},t.onHandleClick=function(e,t){var n=e.props,o=n.actions,a=n.data,r=o.handleClick;r&&r(a,t||window.event)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(13),y=a(v),M=n(377),I=o(M),T=n(553),w=a(T);n(238);var E=n(9),b=n(421),S=a(b),D=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onHandleMouseMove=function(e){return I.onHandleMouseMove(n,e)},n.onHandleMouseUp=function(e){return I.onHandleMouseUp(n,e)},n.onHandleMouseOut=function(e){return I.onHandleMouseOut(n,e)},n.onHandleMouseEnter=function(e){return I.onHandleMouseEnter(n,e)},n.onHandleMouseOver=function(e){return I.onHandleMouseOver(n,e)},n.onHandleMouseDown=function(e){return I.onHandleMouseDown(n,e)},n.onHandleDblClick=function(e){return I.onHandleDblClick(n,e)},n.onHandleMouseLeave=function(e){return I.onHandleMouseLeave(n,e)},n.onHandleClick=function(e){return I.onHandleClick(n,e)},n.handleDeleteButtonClick=n.handleDeleteButtonClick.bind(n),n.state={showDeleteButton:!1},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"handleDeleteButtonClick",value:function(e){e.stopPropagation();var t=this.props,n=t.actions,o=t.data,a=o.element,r=n.removeImage;r(a)}},{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,o=e.children,a=(t.handleClick,t.handleMouseOver,t.handleDrop),r=t.handleDragStart,i=t.handleDragOver,s=t.handleDragEnter,u=t.handleDragLeave,l=t.handleDragEnd,d=t.handleContextMenu,c=(t.removeImage,n.className),p=n.draggable,f=n.style,g=n.element,h=n.product,v=g.get("encImgId")?"Drag to swap. Click to edit.":"Drag and drop your photo here.<br>The grey area will not print if left blank.",M=g.get("type")===E.elementTypes.photo?v:"",I=g.get("computed"),T=g.getIn(["computed","imgUrl"]),b=g.getIn(["computed","scale"]),D=b>E.RESIZE_LIMIT,A=(0,y.default)("x-handler",c),N={width:"24px",height:"24px",position:"absolute",top:"6px",right:"6px",cursor:"pointer"};return h&&"LC"===h&&(N.top="8px",N.right="8px"),m.default.createElement("div",{style:f,className:A,onClick:this.onHandleClick,onDoubleClick:this.onHandleDblClick,onMouseDown:this.onHandleMouseDown,onMouseOver:this.onHandleMouseOver,onMouseOut:this.onHandleMouseOut,onMouseLeave:this.onHandleMouseLeave,onMouseEnter:this.onHandleMouseEnter,onDrop:a,onDragStart:r,onDragOver:i,onDragEnter:s,onDragLeave:u,onDragEnd:l,draggable:p,onContextMenu:d,"data-tip":M,"data-effect":"solid","data-place":"bottom","data-delayShow":500,"data-class":"swap-photo-hint","data-multiline":!0},o,g.get("type")===E.elementTypes.photo&&g.get("encImgId")&&this.state.showDeleteButton?m.default.createElement("img",{style:N,src:w.default,onClick:this.handleDeleteButtonClick}):null,Boolean(T)&&D?m.default.createElement(S.default,{title:"Photo has low resolution and may look poor in print",parentHeight:I.get("height")}):null)}}]),t}(h.Component);t.default=D,D.propTypes={actions:h.PropTypes.shape({handleClick:h.PropTypes.func,handleDblClick:h.PropTypes.func,handleMouseDown:h.PropTypes.func,handleMouseMove:h.PropTypes.func,handleMouseUp:h.PropTypes.func,handleMouseOver:h.PropTypes.func,handleMouseOut:h.PropTypes.func,handleMouseEnter:h.PropTypes.func,handleDrop:h.PropTypes.func,handleDragStart:h.PropTypes.func,handleDragOver:h.PropTypes.func,handleDragEnter:h.PropTypes.func,handleDragLeave:h.PropTypes.func,handleDragEnd:h.PropTypes.func,handleContextMenu:h.PropTypes.func}),data:h.PropTypes.shape({className:h.PropTypes.string,draggable:h.PropTypes.bool,cursor:h.PropTypes.string})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleImageName=t.handleMouseDown=t.handleMouseOut=t.handleMouseOver=t.imgErrored=t.imgLoaded=t.lazyLoadingImage=void 0;var o=n(9);t.lazyLoadingImage=function(e,t){var n=initImagePool(o.limitImagesLoading);e.setState({isImgLoading:!0}),n.load(t,{success:function(t){e.setState({src:t,isImgLoading:!1})},error:function(t){e.setState({isImgLoading:!1})}})},t.imgLoaded=function(e){e.setState({isImgLoading:!1})},t.imgErrored=function(e){e.setState({isImgLoading:!1})},t.handleMouseOver=function(e){var t=e.props,n=t.actions,o=t.imageObj,a=n.onOverImageItem;a(o)},t.handleMouseOut=function(e){var t=e.props.actions,n=t.onOutImageItem;n()},t.handleMouseDown=function(e,t){var n=e.props,o=n.actions,a=n.imageObj,r=a.guid,i=o.toggleImageItemSelected;i(r,t)},t.handleImageName=function(e){return e=e.length>15?e.substr(0,5)+"..."+e.substr(e.length-6):e}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(12),h=o(g),m=n(13),v=o(m),y=n(3),M=o(y),I=n(119),T=(n(54),n(44)),w=o(T),E=n(278),b=o(E),S=n(289),D=o(S),A=n(379);n(239);var N=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.handleMouseOver=function(){return(0,A.handleMouseOver)(n)},n.handleMouseOut=function(){return(0,A.handleMouseOut)(n)},n.imgLoaded=function(){return(0,A.imgLoaded)(n)},n.imgErrored=function(){return(0,A.imgErrored)(n)},n.handleImageName=function(e){return(0,A.handleImageName)(e)},n.handleMouseDown=function(e){return(0,A.handleMouseDown)(n,e)},n.state={src:null,isImgLoading:!0},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.imageObj,n=t.src,o=t.orientation;n&&(o?(0,I.convertRotateImg)(n,o).then(function(t){e.setState({imageUrl:t,isImgLoading:!1})}):this.setState({imageUrl:n,isImgLoading:!1}))}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=(0,h.default)(this.props,"imageObj.src"),o=(0,h.default)(e,"imageObj.src"),a=(0,h.default)(e,"imageObj.orientation");n!==o&&(o?a?(0,I.convertRotateImg)(o,a).then(function(e){t.setState({imageUrl:e,isImgLoading:!1})}):this.setState({imageUrl:o,isImgLoading:!1}):this.setState({imageUrl:"",isImgLoading:!1}))}},{key:"shouldComponentUpdate",value:function(e,t){var n=(0,h.default)(this.props,"imageObj.src"),o=(0,h.default)(e,"imageObj.src"),a=(0,h.default)(this.props,"imageObj.usedCount"),r=(0,h.default)(e,"imageObj.usedCount"),i=(0,h.default)(this.state,"isImgLoading"),s=(0,h.default)(t,"isImgLoading");return n!==o||a!==r||i!==s}},{key:"render",value:function(){var e=this.props,t=e.imageObj,n=e.deleteImage,o=t.name,a=t.usedCount,r=(t.imageId,t.guid),i=(t.src,(0,v.default)("wrap-image")),s=this.state,u=s.isImgLoading,l=s.imageUrl;return M.default.createElement("div",{
className:"image-item"},M.default.createElement("div",{className:i,onMouseUp:this.handleMouseDown,"data-guid":r},M.default.createElement("div",{className:"loaded-image"},M.default.createElement(w.default,{isShown:u}),M.default.createElement("div",{className:"loaded-image-item"},M.default.createElement("img",{className:"preview-image",src:l,id:"img-"+r,onLoad:this.imgLoaded,onError:this.imgErrored,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),a?M.default.createElement(D.default,{count:a}):null,a?null:M.default.createElement(b.default,{onClicked:n})))),M.default.createElement("div",{className:"preview-image-tip",title:o}))}}]),t}(y.Component);t.default=N},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSelectStop=t.onSelect=t.deleteImage=t.onDragStarted=t.onImageListDown=t.toggleImageItemSelected=t.onOutImageItem=t.onOverImageItem=t.convertImageData=void 0;var a=n(19),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=n(28),c=n(9),p=n(16),f=n(60),g=n(29),h=o(g),m=null,v=(t.convertImageData=function(e,t,n){var o=[],a=3,i=n.toJS();i.timestamp,i.authToken,i.id;if(e){var s=e.map(function(e){var n=e;return n.src=e.encImgId?(0,f.combine)(t,p.IMAGE_SRC,(0,r.default)({qaulityLevel:0,puid:e.encImgId,rendersize:"fit350"},h.default)):null,n}),u=[];s.forEach(function(e){u.length===a&&(o.push(u),u=[]),u.push(e)}),u.length&&(o.push(u),u=[])}return o},t.onOverImageItem=function(e,t){clearTimeout(m);var n=t.src,o=t.guid,a=(e.refs.imageList,t.orientation||0),r=document.querySelector('[data-guid="'+o+'"]'),i=r.getBoundingClientRect(),s=window.innerHeight,u=1===Math.abs(a/90%2),l=u?t.height:t.width,d=u?t.width:t.height,c=I(l,d);if(!(i.top+i.height>s+10)){var p=i.left+i.width+15,f=i.top+i.height/2,g=0;f+(c.height+50)/2>s&&(g=f+(c.height+50)/2-s,f-=g),m=setTimeout(function(){e.setState({magnifierParams:{isMagnifierShow:!0,imageUrl:n,name:t.name,orientation:t.orientation||0,pixel:t.width+" x "+t.height+" px",width:c.width,height:c.height,offset:{x:p,y:f,marginTop:g}}})},e.state.magnifierShowTime)}},t.onOutImageItem=function(e){clearTimeout(m),e.setState({magnifierParams:{isMagnifierShow:!1,imageUrl:"",orientation:0,name:"",pixel:"",offset:{x:0,y:0}}})},t.toggleImageItemSelected=function(e,t,n){var o=n||window.event,a=(0,l.default)([],e.state.selectedImageIds),r=a.indexOf(t);o.ctrlKey||o.metaKey?r>=0?a.splice(r,1):a.push(t):r===-1&&(a=[t]),e.setState({selectedImageIds:a}),y(n)},t.onImageListDown=function(e){M(e)},t.onDragStarted=function(e,t,n){var o=e.state.selectedImageIds,a=e.props.uploadedImages;clearTimeout(m),e.setState({magnifierParams:{isMagnifierShow:!1,imageUrl:"",offset:{x:0,y:0}}});var r=[];if(o&&o.length)a.map(function(e){(o.indexOf(e.guid)>=0||e.id===t)&&r.push({orientation:e.orientation||0,encImgId:e.encImgId,imageid:e.id,width:e.width,height:e.height,type:c.elementTypes.photo})});else{var i=a.find(function(e){return e.guid===t});i&&r.push({orientation:i.orientation||0,encImgId:i.encImgId,imageid:i.id,width:i.width,height:i.height,type:c.elementTypes.photo})}var u=document.querySelector("#img-"+(0,s.default)(a[0],"id"));(0,d.setTransferData)(n,r),(0,d.setTransferDragNode)(n,u),e.setState({selectedImageIds:[]})},t.deleteImage=function(e,t){var n=e.props.boundProjectActions;t.encImgId&&n.deleteProjectImage(t.encImgId)},t.onSelect=function(e,t){t.p1&&t.p2&&v(e,t.p1,t.p2)},t.onSelectStop=function(e,t){t.p1&&t.p2&&v(e,t.p1,t.p2)},function(e,t,n){var o=[],a=Array.prototype.slice.call(document.querySelectorAll(".preview-image"),0),r={x:t.x<n.x?t.x:n.x,y:t.y<n.y?t.y:n.y},i={x:n.x>t.x?n.x:t.x,y:n.y>t.y?n.y:t.y};a.map(function(e){var t=e.parentNode.parentNode,n={x:t.offsetLeft,y:t.offsetTop},a={x:t.offsetLeft+e.offsetWidth,y:t.offsetTop+e.offsetHeight};if(r.y<a.y&&i.y>n.y&&r.x<a.x&&i.x>n.x){var s=t.getAttribute("data-guid");o.push(s)}});o.length&&e.setState({selectedImageIds:o})}),y=function(e){var t=e||window.event;t.stopPropagation()},M=function(e){e.setState({selectedImageIds:[]})},I=function(e,t){var n=400,o=400,a=e/t;if(e>=t){var r=n;return{width:r,height:r/a}}var i=o;return{width:i*a,height:i}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(380),v=o(m),y=(n(60),n(57)),M=o(y),I=n(399),T=o(I),w=n(404),E=(o(w),n(617)),b=o(E),S=n(13),D=(o(S),n(381));n(240);var A=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={magnifierParams:{isMagnifierShow:!1,imageUrl:"",name:"",pixel:"",offset:{x:0,y:0,marginTop:0}},magnifierShowTime:500,selectedImageIds:[]},n.onOverImageItem=function(e){return(0,D.onOverImageItem)(n,e)},n.onOutImageItem=function(){return(0,D.onOutImageItem)(n)},n.onImageListDown=function(e){return(0,D.onImageListDown)(n,e)},n.toggleImageItemSelected=function(e,t){return(0,D.toggleImageItemSelected)(n,e,t)},n.onDragStarted=function(e,t){return(0,D.onDragStarted)(n,e,t)},n.deleteImage=function(e){return(0,D.deleteImage)(n,e)},n.onSelect=function(e){return(0,D.onSelect)(n,e)},n.onSelectStop=function(e){return(0,D.onSelectStop)(n,e)},n.getImagesRenderHtml=n.getImagesRenderHtml.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getImagesRenderHtml",value:function(e){var t=this,n=this.state.selectedImageIds,o=this.onOverImageItem,a=this.onOutImageItem,r=this.toggleImageItemSelected,i={onOutImageItem:a,onOverImageItem:o,toggleImageItemSelected:r},s=[];return e&&e.length&&e.forEach(function(o,a){var r=[];a===e.length-1&&2===o.length;o.forEach(function(e,o){var a=n.indexOf(e.guid)>=0,s=a?{background:"#d6d6d6",borderRadius:"5px"}:{};r.push(h.default.createElement("div",{key:e.guid,className:"lazy-item",style:s},h.default.createElement(M.default,{onDragStarted:t.onDragStarted.bind(t,e.guid)},h.default.createElement(b.default,{height:80,offset:0},h.default.createElement(v.default,{imageObj:e,deleteImage:t.deleteImage.bind(t,e),actions:i})))))}),s.push(h.default.createElement("div",{className:"image-row",key:a},r))}),s}},{key:"componentDidMount",value:function(){window.onscroll=this.onOutImageItem}},{key:"componentWillUnmount",value:function(){window.onscroll=null}},{key:"render",value:function(){var e=this.props,t=e.uploadedImages,n=e.baseUrls,o=e.userInfo,a=this.state.magnifierParams,r=(0,D.convertImageData)(t,n.get("uploadBaseUrl"),o);return h.default.createElement("div",null,h.default.createElement("div",{className:"image-list",ref:"imageList",onMouseUp:this.onImageListDown},r&&r.length?this.getImagesRenderHtml(r):null,h.default.createElement(T.default,{data:a})))}}]),t}(g.Component);A.propTypes={},t.default=A},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation()};t.onReadMoreToggle=function(e,t){var o=e.props.actions,a=o.boundTrackerActions;a.addTracker("CheckPrice,"+e.payPrice);var r=e.state.priceDetailShow;e.setState({priceDetailShow:!r},function(){e.state.priceDetailShow&&e.popupDetail.focus()}),n(t)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(3),y=a(v),M=n(15),I=n(383),T=o(I),w=n(9),E=n(17);n(241);var b="",S="",D=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={priceDetailShow:!1,basicPrice:0},n.onReadMoreToggle=function(e){return T.onReadMoreToggle(n,e)},n.hidePriceDetail=n.hidePriceDetail.bind(n),n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"hidePriceDetail",value:function(){this.setState({priceDetailShow:!1})}},{key:"renderDetail",value:function(e,t){b=0,S=0;var n=this.props,o=(n.t,n.data),a=(o.parameters,[]),r=0;return e&&(r="undefined"!=typeof e.trialPrice?e.trialPrice:e.sPrice?e.sPrice:e.oriPrice,b+=e.oriPrice,S+=r),this.payPrice=S,a}},{key:"render",value:function(){var e=this.props,t=e.data,n=(e.t,t.parameters,t.settings),o=(0,m.default)(n,"spec.product"),a=t.price.toJS(),r=a.main,i=a.options,s=(this.renderDetail(r,i),""),u="";return 0===S?(s=w.FREE,u="$"+(0,E.round)(b).toFixed(2)):(S<b&&(u="$"+(0,E.round)(b).toFixed(2)),s=S!==w.FREE?"$"+(0,E.round)(S).toFixed(2)+" USD":(0,E.round)(S).toFixed(2)),S?y.default.createElement("div",{className:"item-price"},o===w.productTypes.LC?y.default.createElement("span",{className:"price-describtion"},"An easel + six lustre photo cards printed on each side."):null,y.default.createElement("span",{className:"price"},u?y.default.createElement("span",null,u):null,s)):null}}]),t}(v.Component);t.default=(0,M.translate)("ItemPrice")(D)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(2),h=o(g),m=n(13),v=(o(m),n(3)),y=o(v);n(242);var M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onClicked=n.onClicked.bind(n),n.state={delectIconShow:!0},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!h.default.is(this.props.data,e.data)}},{key:"componentDidMount",value:function(){var e=this.props.data.get("isSelected");e&&this.itemNode&&this.itemNode.scrollIntoView()}},{key:"componentDidUpdate",value:function(){var e=this.props.data.get("isSelected");e&&this.itemNode&&this.itemNode.scrollIntoView()}},{key:"onClicked",value:function(){var e=this.props,t=e.data,n=e.actions,o=n.applyTemplate,a=t.getIn(["template","guid"]),r=t.get("isSelected");!r&&o&&o(a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=(t.actions,n.getIn(["template","templateUrl"]));return y.default.createElement("div",{className:"layout-item"},o?y.default.createElement("img",{className:"layout-img",src:o,ref:function(t){return e.itemNode=t},onClick:this.onClicked}):null)}}]),t}(v.Component);t.default=M},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.didMount=t.receiveProps=t.handlerMouseWheel=t.onLayoutDragStarted=t.groupTemplateByNum=t.getTemplateHTML=void 0;var a=n(157),r=o(a),i=n(12),s=o(i),u=n(23),l=o(u),d=n(11),c=o(d),p=n(3),f=o(p),g=n(13),h=o(g),m=n(2),v=(o(m),n(16)),y=n(9),M=n(86),I=n(385),T=o(I),w=n(28),E=n(57),b=(o(E),function(e){var t=e.width,n=void 0===t?0:t,o=e.height,a=void 0===o?0:o,r=0,i=0,s=a?n/a:0;return s>1.5?(r=190,i=2):s<=1.5&&s>=1/1.5?(r=120,i=3):(r=85,i=4),{width:r,height:s?r/s:0,colNumber:i}}),S=function(e,t){var n=function n(o){if(!(o>=t.length)){var a=t[o];(0,M.loadImg)(a.templateUrl).then(function(t){if(t.img){var a=b({width:t.img.width,height:t.img.height});e.setState({imageSize:{width:a.width,height:a.height},colNumber:a.colNumber})}else{var r=o+1;n(r)}},function(e){var t=o+1;n(t)})}};t&&t.length&&n(0)},D=(t.getTemplateHTML=function(e){var t=e.props,n=t.data,o=t.actions,a=(t.t,o.applyTemplate,o.boundTemplateActions,o.onSelectFilter,n.baseUrls,n.setting),r=n.paginationSpread,i=n.page,s=n.userInfo,u=(n.currentFilterTag,n.pagination),l=e.state,d=l.templateList,c=l.imageSize;l.colNumber;if(a){var p=(r.get("pages"),u.pageId,i?i.getIn(["template","tplGuid"]):0);return i&&0===i.get("elements").size&&(p=0),d.map(function(t,n){var o=p===t.guid,a=(0,m.fromJS)({template:t,imageSize:c,isSelected:o,userInfo:s}),r={applyTemplate:e.applyTemplate,deleteTemplate:function(){},onSelectFilter:function(){}},i=(0,h.default)("lazy-item",{selected:o});return f.default.createElement("div",{className:i,key:t.guid},f.default.createElement(T.default,{actions:r,data:a}))})}return[]},t.groupTemplateByNum=function(e,t){var n=e.props.data,o=n.setting,a=o.get("product"),r=a===y.productTypes.PS,i=r?y.LAYOUT_MAX_VIEW_NUM_PS:y.LAYOUT_MAX_VIEW_NUM_DEFAULT,s={},u=(0,c.default)([],t);return u.sort(function(e,t){return t.imageNum-e.imageNum}),u.map(function(e){var t=e.imageNum;e.textFrameNum>0||e.customerId||(t>=i&&(t=i+"+"),s[t]||(s[t]=[]),s[t].push(e))}),s},t.onLayoutDragStarted=function(e,t,n){(0,w.setTransferData)(n,{type:y.dragTypes.template,guid:t}),__app.dragType=y.dragTypes.template},t.handlerMouseWheel=function(e,t){e.layoutList.scrollLeft+=t*y.mouseWheel.width},function(e,t,n,o){var a=(!(arguments.length>4&&void 0!==arguments[4])||arguments[4],[]);return a=t.filter(function(e){return!0})}),A=function(e,t,n){var o=void 0,a=t.find(function(e){return e.id==n}),r="";return a?(r=a.guid,o=e.filter(function(e){return e.styleGuid==r})):e},N=function(e,t,n,o,a){var r=D(e,t,n,o,a);return r=r.sort(function(e,t){return t.isCoverDefault?1:e.imageNum-t.imageNum})};t.receiveProps=function(e,t){var n=(0,s.default)(e.props,"data.template.list"),o=(0,s.default)(t,"data.template.list"),a=(0,m.fromJS)((0,s.default)(e.props,"data.page")),i=(0,m.fromJS)((0,s.default)(t,"data.page")),u=(a?a.get("elements"):(0,m.fromJS)({}),i?i.get("elements"):(0,m.fromJS)({}),a?a.getIn(["template","tplGuid"]):-1),d=i?i.getIn(["template","tplGuid"]):-1,p=(0,s.default)(e.props,"data.setting"),f=(0,s.default)(t,"data.setting"),g=i&&i.get("enabled"),h=(0,s.default)(t,"data.pagination"),M=(0,s.default)(t,"data.styles"),I=(0,s.default)(t,"data.baseUrls");(0,s.default)(p,"spec.size"),(0,s.default)(f,"spec.size");if(n.length!==o.length||u!==d||!(0,r.default)(n,o)){var T=(0,s.default)(f,"calendarSetting.styleId");if(o=N(e,o,h,f,g),o=A(o,M,T),o.length){var w=I.layoutTemplateServerBaseUrl,E=(0,s.default)(f,"spec.size"),b=(0,s.default)(f,"spec.product"),D=(0,s.default)(f,"spec.orientation"),_=b!==y.productTypes.LC&&"Portrait"!==D?E.split("X")[1]+"X"+E.split("X")[0]:E;o=o.map(function(e){var t=(0,l.default)(v.TEMPLATE_SRC)({templateThumbnailPrefx:w,size:_,guid:e.guid});return(0,c.default)({},e,{templateUrl:t})})}S(e,o),e.setState({templateList:o})}},t.didMount=function(e){var t=(0,s.default)(e.props,"data.template.list"),n=(0,m.fromJS)((0,s.default)(e.props,"data.page")),o=(n?n.get("elements"):(0,m.fromJS)({}),n?n.getIn(["template","tplGuid"]):-1,n&&n.get("enabled")),a=(0,s.default)(e.props,"data.pagination"),r=(0,s.default)(e.props,"data.setting"),i=(0,s.default)(e.props,"data.styles"),u=(0,s.default)(e.props,"data.baseUrls");if(t.length){var d=(0,s.default)(r,"calendarSetting.styleId");if(t=N(e,t,a,r,o),t=A(t,i,d),t.length){var p=u.layoutTemplateServerBaseUrl,f=(0,s.default)(r,"spec.size"),g=(0,s.default)(r,"spec.product"),h=g===y.productTypes.LC?f:f.split("X")[1]+"X"+f.split("X")[0];t=t.map(function(e){var t=(0,l.default)(v.TEMPLATE_SRC)({templateThumbnailPrefx:p,size:h,guid:e.guid});return(0,c.default)({},e,{templateUrl:t})})}S(e,t),e.setState({templateList:t})}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSelectFilter=t.groupTemplateByNum=t.applyTemplate=void 0;var a=n(14),r=o(a),i=n(72),s=(o(i),n(55)),u=o(s),l=n(12),d=o(l),c=n(3),p=(o(c),n(2)),f=o(p),g=n(9),h=n(40),m=(n(89),n(42)),v=n(53),y=(t.applyTemplate=function(e,t){var n=e.props,o=n.data,a=n.actions,r=a.boundTrackerActions,i=a.boundTemplateActions,s=o.template,u=o.setting,l=o.isCover,c=s.details,p=(0,d.default)(u,"spec.size"),f=l?"ChangeCoverLayout":"ChangeInnerLayout";r.addTracker(f+","+t),i.changeApplyTemplateStatus(!0);var g=t+"_"+p;c[g]?y(e,c[g]).then(function(){i.changeApplyTemplateStatus(!1)}):i.getTemplateInfo(t,p).then(function(n){var o=(0,m.convertResultToJson)(n),a=(0,m.formatTemplateInstance)(o,[t],p);a&&a.length&&y(e,a[0][g]).then(function(){i.changeApplyTemplateStatus(!1)})}),e.setState({selectedTemplateId:t})},t.groupTemplateByNum=function(e,t){var n={},o=e.props.data,a=(o.setting,o.paginationSpread),r=a.getIn(["summary","isPressBook"]),i=r?g.LAYOUT_MAX_VIEW_NUM_PS:g.LAYOUT_MAX_VIEW_NUM_DEFAULT;return t.map(function(e){var t=e.imageNum;e.textFrameNum>0||(t>=i&&(t=i+"+"),n[t]||(n[t]=[]),n[t].push(e))}),n},t.onSelectFilter=function(e,t){e.setState({currentFilterTag:t})},function(e,t){var n=e.props,o=n.data,a=n.actions,i=a.boundProjectActions,s=a.boundPaginationActions,l=o.paginationSpread,c=o.uploadedImages,p=o.ratios,m=(o.fontList,o.pagination),y=(o.setting,[]),M=[],I=(t.elements,l.get("pages")),T=(0,d.default)(m,"pageId"),w=I.find(function(e){return e.get("id")===T}),E=w&&w.get("enabled");E||(w=I.get("0"),s.switchPage(0,w.get("id")));var b=(w.get("height")*p.workspace,w.get("width")*p.workspace,w.get("elements")),S=b.filter(function(e){return e.get("type")===g.elementTypes.photo&&!!e.get("encImgId")}),D=b.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),A=b.filter(function(e){return e.get("type")===g.elementTypes.calendar}),N=S.concat(D);N.forEach(function(e){y.push(e)}),A.forEach(function(e){y.push(e)});var _=t.elements,C=_.filter(function(e){return e.type===g.elementTypes.text});if(C.length){var P=y.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),x=y.filter(function(e){return e.get("type")===g.elementTypes.photo}),O=_.filter(function(e){return e.type===g.elementTypes.text}),L=O.length,j=P.length;if(j>=L){for(var k=[],z=(0,u.default)(P,function(e){return-e.get("lastModified")}),R=0;R<L;R++)k.push(z[R]);y=x.concat(k)}if(M=(0,h.updateElementsByTemplate)(w,y,c,t),M&&M.size){M=M.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var U=w.set("elements",M),B=f.default.List(),Y=f.default.List();M.forEach(function(e){e.get("type")===g.elementTypes.photo?Y=Y.push(e):B=B.push(e)});var W=(0,v.mergeTemplateElements)(U,Y,f.default.fromJS(c));return M=W.concat(B),i.applyTemplate(w.get("id"),t.id,M)}return r.default.resolve()}if(y=y.filter(function(e){return e.get("type")===g.elementTypes.photo||e.get("type")===g.elementTypes.calendar}),M=(0,h.updateElementsByTemplate)(w,y,c,t),M&&M.size){M=M.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var F=w.set("elements",M),H=f.default.List(),G=f.default.List();M.forEach(function(e){e.get("type")===g.elementTypes.photo?G=G.push(e):H=H.push(e)});var Q=(0,v.mergeTemplateElements)(F,G,f.default.fromJS(c));return M=Q.concat(H),i.applyTemplate(w.get("id"),t.id,M)}return r.default.resolve()})},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(103),y=(a(v),n(2)),M=(a(y),n(13)),I=a(M),T=n(15),w=n(35),E=(a(w),n(3)),b=a(E),S=n(316),D=n(386),A=o(D),N=n(387),_=o(N);n(243);var C=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={templateList:[],imageSize:{width:0,height:0},colNumber:0},n.getTemplateHTML=function(){return A.getTemplateHTML(n)},n.groupTemplateByNum=function(e){return A.groupTemplateByNum(n,e)},n.onLayoutDragStarted=function(e,t){return A.onLayoutDragStarted(n,e,t)},n.handlerMouseWheel=function(e){return A.handlerMouseWheel(n,e)},n.receiveProps=function(e){return A.receiveProps(n,e)},n.applyTemplate=function(e){return _.applyTemplate(n,e)},n.didMount=function(){return A.didMount(n)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.receiveProps(e)}},{key:"componentDidMount",value:function(){var e=this;(0,m.default)(this.props,"data.templateList");this.didMount(),(0,S.addMouseWheelEvent)(this.layoutList,function(t){e.handlerMouseWheel(t)})}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.data.isShow,n=e.data.isShow;return!(!t&&!n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=(t.actions,t.t),a=(n.isLoaded,n.pagination),r=(n.userInfo,n.isShow),i=this.state.templateList,s=0===a.sheetIndex,u={width:"auto"},l=(0,I.default)("layout-list",{show:r}),d=(0,I.default)("list",{"display-flex":!i.length});return b.default.createElement("div",{className:l},b.default.createElement("div",{className:d,ref:function(t){return e.layoutList=t}},i.length?this.getTemplateHTML():b.default.createElement("span",{className:"no-layouts",style:u},o(s?"NO_LAYOUTS":"NO_LAYOUTS_INNER"))))}}]),t}(E.Component);t.default=(0,T.translate)("LayoutList")(C)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(13),v=o(m),y=n(3),M=o(y),I=n(15);n(244);var T=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.itemChange=n.itemChange.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"itemChange",value:function(e,t){var n=this.props,o=n.data,a=n.actions,i=a.boundProjectActions,s=(a.boundTrackerActions,a.onApplyTemplate,a.applyRelativeTemplate),u=o.selected,l=o.project;l.setting;if(u!==t)if("startDate"===e){var d=t.split("_")[0],c=t.split("_")[1];i.changeCalendarSetting({startMonth:d,startYear:c})}else i.changeProjectSetting((0,r.default)({},e,t)).then(function(){"size"===e&&s((0,r.default)({},e,t))})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.t,t.actions,t.data),o=n.name,a=n.list,r=n.title,i=n.selected,s=(0,v.default)("OptionItem");return M.default.createElement("div",{className:s},M.default.createElement("div",{className:"option-item-title"},r,":"),M.default.createElement("div",{className:"item"},a.map(function(t,n){var a=t.get("id"),r=t.get("name"),s=(0,v.default)("item-span",{selected:i===a});return M.default.createElement("span",{className:s,key:a},M.default.createElement("input",{type:"radio",name:o,id:a,checked:i===a,onClick:function(){e.itemChange(o,a)}}),M.default.createElement("label",{htmlFor:a},r))})))}}]),t}(y.Component);T.proptype={},t.default=(0,I.translate)("OptionItem")(T)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(2),v=o(m),y=n(15),M=n(9),I=n(389),T=o(I);n(245);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),o=n.getStartDates();return n.state={startDates:o},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getStartDates",value:function(){for(var e=[],t=new Date,n=t.getFullYear(),o=t.getMonth(),a=o>5?7:1,r=0;r<6;r++)e.push({id:a+r+"_"+n,month:a+r,year:n,name:M.monthStrings[a+r-1]+" "+n});return e.push({id:"1_"+(n+1),month:1,year:n+1,name:M.monthStrings[0]+" "+(n+1)}),v.default.fromJS(e)}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,o=this.state.startDates,a=n.project,r=t.boundProjectActions,i=t.boundTrackerActions,s=t.boundPriceActions,u=t.onApplyTemplate,l=t.applyRelativeTemplate,d=a.availableOptionMap.get("size"),c=a.availableOptionMap.get("dateStyle"),p=a.orderInfo,f=p.get("isCheckFailed"),g={name:"size",list:d,title:"Size",selected:a.setting.get("size"),project:a},m={name:"dateStyle",list:c,title:"Style",selected:a.setting.get("dateStyle"),project:a},v=({name:"startDate",list:o,title:"Starting Date",selected:a.calendarSetting.get("startMonth")+"_"+a.calendarSetting.get("startYear"),project:a},{boundProjectActions:r,boundTrackerActions:i,boundPriceActions:s,onApplyTemplate:u,applyRelativeTemplate:l}),y=!0;return h.default.createElement("div",{className:"OptionTab"},d&&!f?h.default.createElement(T.default,{data:g,actions:v}):null,c&&!y?h.default.createElement(T.default,{data:m,actions:v}):null)}}]),t}(g.Component);w.proptype={},t.default=(0,y.translate)("OptionTab")(w)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(13),h=o(g),m=n(3),v=o(m),y=n(15);n(246);var M=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.rotatePage=n.rotatePage.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"rotatePage",value:function(e){var t=this.props,n=t.orientation,o=t.changeOrientation,a=t.applyRelativeTemplate;n!==e&&o&&o({orientation:e}).then(function(){a({orientation:e})})}},{key:"render",value:function(){var e=this,t=this.props.orientation,n=(0,h.default)("landscape-button",{active:"Landscape"===t}),o=(0,h.default)("portrait-button",{active:"Portrait"===t});return v.default.createElement("div",{className:"bottons-wrap"},v.default.createElement("div",{onClick:function(){e.rotatePage("Landscape")},className:n},"Landscape"),v.default.createElement("div",{onClick:function(){e.rotatePage("Portrait")},className:o},"Portrait"))}}]),t}(m.Component);t.default=(0,y.translate)("OrientationSelector")(M)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onSubmitCheckFailProject=t.onClickLogo=t.onSave=t.onPreview=t.onOrder=void 0;var a=n(14),r=o(a),i=n(3),s=o(i),u=n(494);t.onOrder=function(e){if(!e.isOrdering){var t=e.props,n=t.data,o=t.actions,a=n.project,r=o.onSaveProject,i=o.boundConfirmModalActions,l=o.boundCloneModalActions,d=o.boundNotificationActions,c=o.boundTrackerActions;e.isOrdering=!0;var p=a.property.get("projectId"),f=a.orderInfo,g=a.calendarSetting.get("startYear"),h=a.calendarSetting.get("startMonth"),m=f&&f.get("isOrdered")&&!f.get("isCheckFailed");if(m){var v=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:l&&l.showCloneModal},"clone")," it to save your additional changes");return e.errorMessageNode||d.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},v),level:"error",autoDismiss:0}),void(e.isOrdering=!1)}var y=0;a.cover.get("containers").forEach(function(e){e.toJS().elements.forEach(function(e){"PhotoElement"!==e.type||e.encImgId||y++})}),a.pageArray.forEach(function(e){e.toJS().elements.forEach(function(e){"PhotoElement"!==e.type||e.encImgId||y++})});var M=/allpages/.test(window.location.hash)?"AllPages":"SinglePage",I=g+"-"+h;c.addTracker("ClickOrder,"+y+","+M+","+I),y>0?i.showConfirm({confirmMessage:s.default.createElement("div",{className:"text-center"},"The calendar you are ordering has ",y," blank layout(s).",s.default.createElement("br",null),"Do you wish to continue?"),onOkClick:function(){c.addTracker("ClickOrderAndContinue,"+y),r(function(){},function(){e.isOrdering=!1}).then(function(){c.addTracker("ClickOrderAndContinueThenSuccess,"+y),(0,u.redirectToOrder)(p)})},xCloseFun:function(){e.isOrdering=!1},onCancelClick:function(){e.isOrdering=!1},okButtonText:"Continue",cancelButtonText:"Cancel"}):(c.addTracker("ClickOrderAndContinue,"+y),r(function(){},function(){e.isOrdering=!1}).then(function(){c.addTracker("ClickOrderAndContinueThenSuccess,"+y),(0,u.redirectToOrder)(p)}))}},t.onPreview=function(e){var t=e.props.actions,n=t.boundPreviewModalActions;n.show()},t.onSave=function(e,t,n){var o=e.props,a=o.actions,i=o.data,u=a.onSaveProject,l=a.boundTrackerActions,d=a.boundNotificationActions,c=a.boundCloneModalActions,p=i.project,f=p.orderInfo,g=f&&f.get("isOrdered")&&!f.get("isCheckFailed");if(l.addTracker("ClickSave"),g){var h=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:c&&c.showCloneModal},"clone")," it to save your additional changes");return e.errorMessageNode||d.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},h),level:"error",autoDismiss:0}),r.default.reject()}return u(t,n)},t.onClickLogo=function(e,t){var n=e.props,o=n.actions,a=n.data,r=o.onSaveProject,i=o.boundCloneModalActions,u=o.boundNotificationActions,l=a.project,d=l.orderInfo,c=d&&d.get("isOrdered")&&!d.get("isCheckFailed");if(c){var p=s.default.createElement("div",null,"Your current project has been ordered or is in the cart. You need to"," ",s.default.createElement("a",{onClick:i&&i.showCloneModal},"clone")," it to save your additional changes");e.errorMessageNode||u.addNotification({children:s.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},p),level:"error",autoDismiss:0})}else r(function(){},null).then(function(){t&&"function"==typeof t&&t()})},t.onSubmitCheckFailProject=function(e){var t=e.props,n=t.actions,o=t.t,a=t.data,r=n.boundProjectActions,i=n.boundNotificationActions,u=n.onSaveProject,l=(a.project,function(){r.submitCheckFailProject().then(function(t){"200"===t?e.submitProjectSuccessNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectSuccessNode=t}},o("SUBMIT_PROJECT_SUCCESS")),level:"success",autoDismiss:2}):e.submitProjectFailedNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectFailedNode=t}},o("SUBMIT_PROJECT_FAILED")),level:"error",autoDismiss:0}),e.isSubmitingCheckFail=!1},function(t){e.submitProjectFailedNode||i.addNotification({children:s.default.createElement("div",{ref:function(t){return e.submitProjectFailedNode=t}},o("SUBMIT_PROJECT_FAILED")),level:"error",autoDismiss:0}),e.isSubmitingCheckFail=!1})});e.isSubmitingCheckFail||(e.isSubmitingCheckFail=!0,u().then(function(){l()},function(){e.isSubmitingCheckFail=!1}))}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(15),v=n(415),y=o(v),M=n(279),I=o(M),T=n(392);n(247);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.isOrdering=!1,n.isSubmitingCheckFail=!1,n.onSave=function(e,t){return(0,T.onSave)(n,e,t)},n.onOrder=function(){return(0,T.onOrder)(n)},n.onPreview=function(){return(0,T.onPreview)(n)},n.onClickLogo=function(e){return(0,T.onClickLogo)(n,e)},n.onSubmitCheckFailProject=function(){return(0,T.onSubmitCheckFailProject)(n)},n.state={isUpgrade:!1},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,o=e.t,a=t.boundProjectActions,r=t.boundConfirmModalActions,i=t.boundTrackerActions,s=n.project,u=n.env,l=n.capability,d=s.property,c=d.get("title"),p=d.get("projectId"),f=u.userInfo&&u.userInfo.get("id"),g=u.urls&&u.urls.toJS(),m=s.orderInfo,v=m.get("isCheckFailed"),M={title:c,projectId:p,userId:f,orderInfo:m,capability:l},T={boundProjectActions:a,boundTrackerActions:i};return h.default.createElement(I.default,{boundSystemActions:r,isProjectEdited:!1,onSaveProject:this.onClickLogo,baseUrls:g},h.default.createElement(y.default,{actions:T,data:M}),h.default.createElement("div",{className:"head-nav"},h.default.createElement("span",{className:"nav-item",onClick:this.onPreview},o("PREVIEW")),h.default.createElement("span",{className:"nav-item",onClick:this.onSave},o("SAVE")),v?h.default.createElement("span",{className:"nav-item",onClick:this.onSubmitCheckFailProject},o("SUBMIT")):h.default.createElement("span",{className:"nav-item",onClick:this.onOrder},o("ORDER"))))}}]),t}(g.Component);w.propTypes={},t.default=(0,m.translate)("PageHeader")(w)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{
value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=(n(162),n(15));n(248);var v=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=(e.t,e.data);t.settings.spec.product;return h.default.createElement("div",{className:"page-nav"},h.default.createElement("div",{className:"page-nav-wrap"}),h.default.createElement("div",{className:"line"}),h.default.createElement("section",{className:"content"},this.props.children))}}]),t}(g.Component);v.propTypes={},t.default=(0,m.translate)("PageNav")(v)},369,function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(11),m=a(h),v=n(3),y=a(v),M=n(2),I=a(M),T=n(15),w=n(13),E=a(w),b=n(111),S=a(b),D=n(75),A=n(82),N=a(A),_=n(9),C=n(395),P=o(C);n(250);var x=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={isImgLoading:!1,src:null,isShowActionBar:!0},n.hideLoading=function(){n.setState({isImgLoading:!1})},n.onImageLoad=n.onImageLoad.bind(n),n.onImageError=n.onImageError.bind(n),n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"onImageError",value:function(){this.setState({isImgLoading:!1})}},{key:"onImageLoad",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillMount",value:function(){var e=this.props.data,t=e.element,n=(t.get("computed"),t.getIn(["computed","imgUrl"]));n&&(D.isSafari?this.setState({isImgLoading:!0,src:n}):P.lazyLoadingImage(this,n))}},{key:"shouldComponentUpdate",value:function(e,t){return!I.default.is(this.props.data.element,e.data.element)||this.props.data.isHover!==e.data.isHover||this.state.isImgLoading!==t.isImgLoading||this.state.img!==t.img||this.state.src!==t.src}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.element.getIn(["computed","imgUrl"]),n=e.data.element.getIn(["computed","imgUrl"]);t!==n&&(D.isSafari?this.setState({src:n,isImgLoading:!0}):(this.setState({src:null}),P.lazyLoadingImage(this,n)))}},{key:"render",value:function(){var e=this.props,t=(e.t,e.actions),n=e.data,o=n.element,a=n.isHover,r=(n.product,o.get("computed")),i=o.getIn(["computed","imgUrl"]),s={zIndex:o.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+o.get("rot")+"deg)"},u={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},l=(0,m.default)({},u,{display:i?"block":"none",border:r.get("border")?""+r.get("border"):"none"}),d={width:r.get("width")+"px",height:r.get("height")+"px"},c=(0,m.default)({},t),p=(0,m.default)({},n,{className:(0,E.default)("photo-element-thumbnail",{"has-image":!!i}),style:s,handlerStyle:u}),f=this.state,g=f.isImgLoading,h=f.src,v=(0,E.default)("box",{hover:a}),M=o.getIn(["computed","scale"]);M>_.RESIZE_LIMIT;return y.default.createElement(N.default,{actions:c,data:p},y.default.createElement("div",{className:"layer-image",style:d},y.default.createElement(S.default,{isShown:g}),g?null:y.default.createElement("img",{className:"photo-img",src:h,onLoad:this.onImageLoad,onError:this.onImageError,style:l})),y.default.createElement("div",{className:v,style:u}))}}]),t}(v.Component);x.propTypes={},t.default=(0,T.translate)("PhotoElement")(x)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onToggleHideUsed=function(e){var t=e.props,n=t.actions,o=(t.data,n.boundTrackerActions),a=e.state,r=a.uploadedImages,i=a.copyUploadedImages,s=!e.state.isHideUseChecked;if(s){var u=r.filter(function(e){return 0===e.usedCount});e.setState({uploadedImages:u,isHideUseChecked:s},function(){o.addTracker("ChangeHideUsed,on")})}else e.setState({uploadedImages:i,isHideUseChecked:s},function(){o.addTracker("ChangeHideUsed,off")})},t.onSorted=function(e,t){var n=e.props.actions,o=n.boundTrackerActions,a=(e.state.copyUploadedImages,e.state.uploadedImages),r=t.value,i=r.split(","),s=i[0],u=i[1],l="<"===s?u+"Dsc":u+"Asc";if(a.sort(function(e,t){switch(s){case"<":return"name"===u?t[u].localeCompare(e[u]):t[u]-e[u];default:return"name"===u?e[u].localeCompare(t[u]):e[u]-t[u]}}),e.state.isHideUseChecked){var d=a.filter(function(e){return 0===e.usedCount});e.setState({uploadedImages:d,sortValue:r},function(){o.addTracker("ChangeSort,"+l)})}else e.setState({uploadedImages:a,sortValue:r},function(){o.addTracker("ChangeSort,"+l)})},t.uploadFileClicked=function(e){var t=e.props.actions,n=t.boundImagesActions,o=t.boundTrackerActions,a=function(){o.addTracker("ClickAddPhotos"),n.autoAddPhotoToCanvas({status:!1,elementId:"",elementWidth:0,elementHeight:0})};e.timer&&clearTimeout(e.timer);var r=setTimeout(a,30);e.timer=r}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(12),h=o(g),m=n(11),v=o(m),y=n(3),M=o(y),I=n(15),T=n(2),w=(o(T),n(74)),E=o(w),b=n(31),S=(o(b),n(411)),D=o(S),A=n(382),N=o(A),_=n(397);n(251);var C=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),o=n.props.data,a=o.uploadedImages;return a=a.map(function(e){return(0,v.default)({},e,{usedCount:0,uploadTime:(new Date).getTime()})}),n.state={uploadedImages:a,copyUploadedImages:a,isHideUseChecked:!1,sortValue:"<,uploadTime"},n.onToggleHideUsed=function(){return(0,_.onToggleHideUsed)(n)},n.onSorted=function(e){return(0,_.onSorted)(n,e)},n.uploadFileClicked=function(){return(0,_.uploadFileClicked)(n)},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getNewElements",value:function(e,t){var n=[];return e.map(function(e){n.push(e.id)}),t.filter(function(e){return n.indexOf(e.id)===-1})}},{key:"checkUsageCount",value:function(e,t){return e&&e.length&&e.forEach(function(e){var n=t&&t[e.encImgId]?t[e.encImgId]:0;e.usedCount=n,e.uploadedImages=(new Date).getTime()}),e}},{key:"componentWillReceiveProps",value:function(e){var t=(0,h.default)(this.props,"data.uploadedImages"),n=(0,h.default)(e,"data.uploadedImages"),o=(0,h.default)(this.props,"data.imageUsedMap"),a=(0,h.default)(e,"data.imageUsedMap");if(t!=n||o!=a){var r=this.checkUsageCount((0,v.default)([],n),a.toJS());r.map(function(e){e.shotTime||(e.shotTime=(new Date).getTime())});var i=this.state.sortValue.split(","),s=i[0],u=i[1];if(r.sort(function(e,t){switch(s){case"<":return"name"===u?t[u].localeCompare(e[u]):t[u]-e[u];default:return"name"===u?e[u].localeCompare(t[u]):e[u]-t[u]}}),this.state.isHideUseChecked){var l=r.filter(function(e){return 0===e.usedCount});this.setState({uploadedImages:l,copyUploadedImages:r})}else this.setState({uploadedImages:r,copyUploadedImages:r})}}},{key:"componentDidMount",value:function(){var e=(0,h.default)(this.props,"data.uploadedImages"),t=(0,h.default)(this.props,"data.imageUsedMap"),n=this.checkUsageCount((0,v.default)([],e),t.toJS());n.map(function(e){e.shotTime||(e.shotTime=(new Date).getTime())});var o=this.state.sortValue.split(","),a=o[0],r=o[1];n.sort(function(e,t){switch(a){case"<":return"name"===r?t[r].localeCompare(e[r]):t[r]-e[r];default:return"name"===r?e[r].localeCompare(t[r]):e[r]-t[r]}}),this.setState({uploadedImages:n,copyUploadedImages:n})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.actions,o=e.data,a=this.state,r=a.uploadedImages,i=(a.isHideUseChecked,a.copyUploadedImages),s=n.boundImagesActions,u=n.boundProjectActions,l=n.toggleModal,d=o.baseUrls,c=o.imageUsedMap,p=o.allImages,f=o.userInfo,g=!!i.length;return M.default.createElement("div",{className:"PhotoTab"},M.default.createElement(E.default,{className:"add-photo",multiple:"multiple",inputId:"file-upload",boundUploadedImagesActions:s,toggleModal:l,uploadFileClicked:this.uploadFileClicked},t("ADD_PHOTOS")),M.default.createElement(D.default,{onToggleHideUsed:this.onToggleHideUsed,onSorted:this.onSorted,isShow:g}),p&&p.size?M.default.createElement(N.default,{uploadedImages:r,boundProjectActions:u,baseUrls:d,imageUsedMap:c,userInfo:f}):M.default.createElement("label",{className:"empty-list-tip",htmlFor:"file-upload"},t("ADD_PHOTOS_TIP")))}}]),t}(y.Component);C.proptype={},t.default=(0,I.translate)("PhotoTab")(C)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m),y=n(44),M=o(y);n(252);var I=n(119),T=400,w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={isImgLoading:!1},n.hideLoading=n.hideLoading.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"hideLoading",value:function(){this.setState({isImgLoading:!1})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props.data.imageUrl,o=e.data.imageUrl;n!==o&&(o?e.data.isIgnore||!e.data.orientation?this.setState({isImgLoading:!0,imageUrl:o}):(0,I.convertRotateImg)(e.data.imageUrl,e.data.orientation).then(function(e){t.setState({isImgLoading:!0,imageUrl:e})}):this.setState({isImgLoading:!1,imageUrl:""}))}},{key:"render",value:function(){var e=this.props.data,t=e.isMagnifierShow,n=e.offset,o=e.name,a=e.pixel,r=e.width,i=e.height,s=this.state.imageUrl,u=n.x,l=n.y,d=n.marginTop,c={display:t?"block":"none",left:u+"px",top:l+"px"},p={marginTop:2*d/3+"px"},f=(0,v.default)("extra-info",{removeFloat:r/i<.5}),g={width:r>=i?T+"px":"auto",height:i>=r?T+"px":"auto"};return h.default.createElement("div",{className:"PicMagnifier",style:c},h.default.createElement(M.default,{isShown:this.state.isImgLoading}),h.default.createElement("img",{src:s,className:"fill",style:g}),h.default.createElement("img",{src:s,style:g,onLoad:this.hideLoading,onError:this.hideLoading}),h.default.createElement("div",{className:f},h.default.createElement("div",{className:"image-name",title:o},o?o.length<=20?o:o.substr(0,10)+"..."+o.substr(o.length-7):""),h.default.createElement("div",{className:"image-size"},a)),h.default.createElement("div",{className:"arrow",style:p}),h.default.createElement("div",{className:"arrow-filter",style:p}))}}]),t}(g.Component);w.proptype={data:g.PropTypes.object},t.default=w},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onClosePreviewModal=function(e){var t=e.props.actions,n=t.closePreviewModal;n&&n()}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(32),y=a(v),M=n(403),I=a(M),T=n(400),w=o(T);n(253);var E=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.onClosePreviewModal=function(){return w.onClosePreviewModal(n)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,o=n.boundSnippingActions,a=n.onSwitchSheet,r=t.isInPreviewModel,i=t.isShown,s=t.pagination,u=t.urls,l=t.ratios,d=t.size,c=t.position,p=t.variables,f=t.settings,g=t.project,h=t.parameters,v=t.allSheets,M=t.capability,T=t.ignoreEmpty,w=void 0===T||T,E=t.userInfo,b={boundSnippingActions:o,onSwitchSheet:a},S={pagination:s,urls:u,ratios:l,size:d,position:c,variables:p,settings:f,project:g,parameters:h,allSheets:v,ignoreEmpty:w,capability:M,userInfo:E};return m.default.createElement(y.default,{className:"preview-modal",onClosed:this.onClosePreviewModal,isHideIcon:r,opened:i},i&&d&&d.renderCoverSize?m.default.createElement(I.default,{actions:b,data:S}):null)}}]),t}(h.Component);E.proptype={isShown:h.PropTypes.bool},t.default=E},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.switchSheet=t.updatePaginationInState=t.updatePaginationSpreadInState=t.onClosePreviewModal=void 0;var a=n(11),r=o(a),i=n(2),s=(o(i),n(9),t.onClosePreviewModal=function(e){var t=e.props.actions,n=t.closePreviewModal;n&&n()},t.updatePaginationSpreadInState=function(e,t,n){var o=t?t.data.allSheets:e.props.data.allSheets,a=o.get(n);n<o.size&&e.setState({paginationSpread:a})}),u=t.updatePaginationInState=function(e,t,n){var o=e.state.pagination,a=t.data.pagination||e.props.data.pagination;e.setState({pagination:{prevSheetIndex:o.sheetIndex,sheetIndex:n,total:a.get("total")}})};t.switchSheet=function(e,t){var n=e.props.actions,o=void 0===n?{}:n,a=o.onSwitchSheet,i=t.current;s(e,e.props,i),u(e,e.props,i);var l=(0,r.default)({},e.state.pagination,{sheetIndex:i});a&&a(l)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(3),y=a(v),M=n(13),I=(a(M),n(2)),T=a(I),w=n(402),E=o(w),b=n(32),S=(a(b),n(286)),D=(a(S),n(141)),A=a(D),N=n(44),_=(a(N),n(142)),C=a(_),P=n(9);n(254);var x=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),o=n.props.data,a=o.pagination,r=o.allSheets,s=o.snipping;return n.state={pagination:{prevSheetIndex:-1,prevPageIndex:-1,sheetIndex:a.get("sheetIndex"),pageIndex:0,pageId:"",total:a.get("total")},paginationSpread:r.size?r.get(a.get("sheetIndex")):T.default.Map({}),snipping:s},n.updatePaginationSpreadInState=function(e,t){return E.updatePaginationSpreadInState(n,e,t)},n.updatePaginationInState=function(e,t){return E.updatePaginationInState(n,e,t)},n.switchSheet=function(e){return E.switchSheet(n,e)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.data.allSheets.size&&this.updatePaginationSpreadInState(e,this.state.pagination.sheetIndex),this.state.pagination.total!==e.data.pagination.get("total")&&this.updatePaginationInState(e,this.state.pagination.sheetIndex);var t=(0,m.default)(this.props,"data.pagination"),n=(0,m.default)(e,"data.pagination");t.get("sheetIndex")!==n.get("sheetIndex")&&(this.updatePaginationInState(e,n.get("sheetIndex")),this.updatePaginationSpreadInState(e,n.get("sheetIndex")))}},{key:"render",value:function(){var e=this.props.data,t=e.urls,n=e.ratios,o=e.size,a=(e.position,e.variables),r=e.settings,i=e.project,s=e.parameters,u=(e.allSheets,e.ignoreEmpty),l=e.capability,d=e.userInfo,c=this.state,p=c.paginationSpread,f=c.pagination,g=(c.snipping,{}),h=(0,m.default)(r,"spec.product"),v=h===P.productTypes.LC,M=(p.get("summary"),{urls:t,size:o,ratios:n,paginationSpread:p,variables:a,pagination:f,settings:r,project:i,parameters:s,ignoreEmpty:u,capability:l,isPreview:!0,userInfo:d}),I={},T={onPage:this.switchSheet},w={total:f.total,current:f.sheetIndex,style:I,minSheetIndex:v?1:0},E=o.renderCoverSize.width>o.renderInnerSize.width?o.renderCoverSize.width:o.renderInnerSize.width,b=o.renderCoverSize.height>o.renderInnerSize.height?o.renderCoverSize.height:o.renderInnerSize.height,S={width:E+"px",height:b+"px",margin:"0 auto"},D={};v?f.total:f.total+1,v?f.sheetIndex:f.sheetIndex+1;return y.default.createElement("div",{className:"preview-wrap"},y.default.createElement("div",{className:"preview-sheet-render",style:D},y.default.createElement("div",{style:S},y.default.createElement(A.default,{actions:g,data:M}))),y.default.createElement(C.default,{actions:T,data:w}))}}]),t}(v.Component);x.proptype={},t.default=x},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(11),h=o(g),m=n(3),v=o(m);n(255);var y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.isSelecting=!1,n.state={selectionBox:null,selectionBoxStyle:null},n.onSelect=n.onSelect.bind(n),n.onSelectStart=n.onSelectStart.bind(n),n.onSelectStop=n.onSelectStop.bind(n),window.addEventListener("mousedown",n.onSelectStart),window.addEventListener("mousemove",n.onSelect),window.addEventListener("mouseup",n.onSelectStop),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onSelectStart),window.removeEventListener("mousemove",this.onSelect),window.removeEventListener("mouseup",this.onSelectStop)}},{key:"onSelectStart",value:function(e){var t=this.props,n=t.containerOffsetTop,o=t.containerOffsetLeft,a=t.containerOffsetWidth,r=t.containerOffsetHeight;e.pageX<o||e.pageY<n||e.pageX>o+a||e.pageY>n+r||(this.isSelecting=!0,this.setState({selectionBox:{p1:{x:e.pageX-o,y:e.pageY-n}}}))}},{key:"onSelect",value:function(e){if(this.isSelecting){var t=this.state.selectionBox,n=this.props,o=n.containerOffsetTop,a=n.containerOffsetLeft,r=n.actions,i={x:e.pageX-a,y:e.pageY-o},s=(0,h.default)({},t,{p2:i}),u=t.p1,l={};l=i.x>u.x?(0,h.default)(l,{left:u.x,width:i.x-u.x}):(0,h.default)(l,{left:i.x,width:u.x-i.x}),l=i.y>u.y?(0,h.default)(l,{top:u.y,height:i.y-u.y}):(0,h.default)(l,{top:i.y,height:u.y-i.y}),r.onSelect(s),this.setState({selectionBox:s,selectionBoxStyle:l})}}},{key:"onSelectStop",value:function(){if(this.isSelecting){this.isSelecting=!1;var e=this.state.selectionBox,t=this.props.actions;t.onSelectStop(e),this.setState({selectionBox:null,selectionBoxStyle:null})}}},{key:"render",value:function(){var e=this.state.selectionBoxStyle;return v.default.createElement("div",{className:"selection",style:e})}}]),t}(m.Component);y.propTypes={actions:m.PropTypes.shape({onSelect:m.PropTypes.func.isRequired,onSelectStop:m.PropTypes.func.isRequired}).isRequired,containerOffsetTop:m.PropTypes.number.isRequired,containerOffsetLeft:m.PropTypes.number.isRequired,containerOffsetWidth:m.PropTypes.number.isRequired,containerOffsetHeight:m.PropTypes.number.isRequired},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(13),h=(o(g),n(15)),m=n(3),v=o(m);n(256);var y=n(137),M=o(y),I=n(139),T=o(I),w=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.data,o=t.boundTemplateActions,a=t.boundPaginationActions,r=t.boundProjectActions,i=t.boundImageEditModalActions,s=t.boundImagesActions,u=t.boundUploadImagesActions,l=t.boundTextEditModalActions,d=t.boundPropertyModalActions,c=t.boundTrackerActions,p=t.boundNotificationActions,f=n.urls,g=n.size,h=n.ratios,m=n.materials,y=n.variables,I=n.template,w=n.pagination,E=n.paginationSpread,b=n.settings,S=n.project,D=n.parameters,A=n.isPreview,N=n.specData,_=n.allImages,C=n.userId,P=n.capability,x=n.userInfo,O=E.get("summary"),L=E.get("pages"),j={boundTemplateActions:o,boundPaginationActions:a,boundProjectActions:r,boundImageEditModalActions:i,boundImagesActions:s,boundUploadImagesActions:u,boundTextEditModalActions:l,boundPropertyModalActions:d,boundNotificationActions:p,boundTrackerActions:c},k={boundTemplateActions:o,boundPaginationActions:a,boundProjectActions:r,boundImageEditModalActions:i,boundImagesActions:s,boundUploadImagesActions:u,boundTextEditModalActions:l,boundPropertyModalActions:d,boundTrackerActions:c,boundNotificationActions:p},z=[];if(L&&L.size){var R=0;if(O.get("isCover")){var U={urls:f,size:g,ratios:h,materials:m,variables:y,template:I,pagination:w,paginationSpread:E,settings:b,parameters:D,isPreview:A,specData:N,project:S,allImages:_,userId:C,capability:P,userInfo:x};z.push(v.default.createElement(M.default,{key:R,actions:j,data:U}))}else{var B={urls:f,size:g,ratios:h,variables:y,template:I,pagination:w,paginationSpread:E,project:S,settings:b,isPreview:A,parameters:D,specData:N,userId:C,capability:P,userInfo:x};z.push(v.default.createElement(T.default,{key:R,actions:k,data:B}))}}return v.default.createElement("div",{className:"sheet-render"},z)}}]),t}(m.Component);t.default=(0,h.translate)("BookSheet")(w)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getAllStyles=function(e){var t={prev:{transform:"translateX("+-e+"px)",WebkitTransform:"translateX("+-e+"px)",OTransform:"translateX("+-e+"px)",opacity:.5},current:{transform:"translateX(0)",WebkitTransform:"translateX(0)",OTransform:"translateX(0)",opacity:1},next:{transform:"translateX("+e+"px)",WebkitTransform:"translateX("+e+"px)",OTransform:"translateX("+e+"px)",opacity:.5}};return t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.onSelect=function(e,t){var n=e.props.actions,o=n.boundSidebarActions,a=n.boundTrackerActions;a.addTracker("ChangeTab,"+e.tabsText[t]),o.changeTab(t)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(11),m=a(h),v=n(3),y=a(v),M=n(15),I=n(561),T=n(13),w=a(T),E=n(398),b=a(E),S=n(390),D=a(S),A=n(407),N=o(A);n(258);var _=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={tabsText:[],numTemplate:{},pageSize:8,page:1,getMoreShow:!0,html:""},I.Tabs.setUseDefaultStyles(!1),n.onSelect=function(e){return N.onSelect(n,e)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.data,o=e.actions,a=n.sidebar,r=n.uploadedImages,i=n.baseUrls,s=n.imageUsedMap,u=n.isShowSideBar,l=n.project,d=n.settings,c=n.allImages,p=n.userInfo,f=o.toggleModal,g=o.boundImagesActions,h=o.boundProjectActions,v=o.boundTrackerActions,M=o.boundPriceActions,T=o.onApplyTemplate,E=o.applyRelativeTemplate,S=d.spec.product,A=S&&"LC"===S?[t("PHOTOS"),""]:[t("OPTIONS"),t("PHOTOS")],N={toggleModal:f,boundImagesActions:g,boundProjectActions:h,boundTrackerActions:v},_={uploadedImages:r,baseUrls:i,imageUsedMap:s,allImages:c,userInfo:p},C={toggleModal:f,boundImagesActions:g,boundProjectActions:h,boundTrackerActions:v,boundPriceActions:M,onApplyTemplate:T,applyRelativeTemplate:E},P={project:l,settings:d},x=A.map(function(e,t){var n=(0,w.default)("item",{active:t===a.tabIndex});return y.default.createElement(I.Tab,{key:t,className:n},e)}),O={borderTop:"none"};return O=(0,m.default)({},O,{display:u?"block":"none"}),this.tabsText=A,y.default.createElement("div",{className:"side-bar",style:O},S?"LC"===S?y.default.createElement(I.Tabs,{onSelect:this.onSelect,selectedIndex:0,forceRenderTabPanel:!0},y.default.createElement(I.TabList,{className:"list"},y.default.createElement(I.Tab,{key:0,className:(0,w.default)("item",{active:!0})},t("PHOTOS")),y.default.createElement(I.Tab,{key:1,className:(0,w.default)("item",{active:!1}),disabled:!0},"")),y.default.createElement(I.TabPanel,null,y.default.createElement(b.default,{actions:N,data:_})),y.default.createElement(I.TabPanel,null)):y.default.createElement(I.Tabs,{onSelect:this.onSelect,selectedIndex:a.tabIndex,forceRenderTabPanel:!0},y.default.createElement(I.TabList,{className:"list"},x),y.default.createElement(I.TabPanel,null,y.default.createElement(D.default,{actions:C,data:P})),y.default.createElement(I.TabPanel,null,y.default.createElement(b.default,{actions:N,data:_}))):null)}}]),t}(v.Component);_.propTypes={},t.default=(0,M.translate)("SideBar")(_)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){clearTimeout(e.timer),e.timer=setTimeout(function(){var n=e.state.total,o=e.props,a=o.actions,r=o.data,i=r.current,s=r.minSheetIndex,u=a.onPage,l=s||0;if(t>=l&&t<=n&&(e.setState({current:t}),u&&"function"==typeof u)){var d=t>i?"ClickNextPage":"ClickPreviousPage",c=d+","+t;u({total:n,current:t,TrackerParam:c})}},300)};t.goPrevious=function(e){var t=e.state.current;n(e,t-1)},t.goNext=function(e){var t=e.state.current;n(e,t+1)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(13),h=o(g),m=n(3),v=o(m);n(260);var y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.delete=n.delete.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"delete",value:function(){var e=this.props.actions;e.onDelete&&e.onDelete()}},{key:"render",value:function(){var e=this.props,t=e.isShown,n=e.left,o=e.top,a=e.width,r=e.isShowEdit,i=void 0===r||r,s=e.isShowDelete,u=void 0===s||s,l=e.actions,d=(0,h.default)("snack-bar",{show:t&&(i||u),mini:i?a<300:a<200}),c={left:n,top:o,width:a};return v.default.createElement("div",{className:d,style:c,onMouseEnter:l.onMouseEnter,onMouseLeave:l.onMouseLeave},v.default.createElement("ul",{className:"action-buttons"},i?v.default.createElement("li",null,v.default.createElement("a",{onClick:l.onEditImage,title:"Edit Image"},v.default.createElement("icon",{className:"icon edit-image"}),v.default.createElement("span",null,"Edit Image"))):null,u?v.default.createElement("li",null,v.default.createElement("a",{onClick:this.delete,title:"Delete"},v.default.createElement("icon",{className:"icon delete-image"}),v.default.createElement("span",null,"Delete"))):null))}}]),t}(m.Component);y.propTypes={isShown:m.PropTypes.bool.isRequired,left:m.PropTypes.number.isRequired,top:m.PropTypes.number.isRequired,width:m.PropTypes.number.isRequired,imageType:m.PropTypes.number.isRequired,actions:m.PropTypes.shape({onMouseEnter:m.PropTypes.func.isRequired,onMouseLeave:m.PropTypes.func.isRequired}).isRequired},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(15),v=n(13),y=o(v),M=n(110),I=(o(M),n(422)),T=o(I);n(261);var w=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),o=e.t;return n.state={sortOptions:[{label:o("DATE_TOKEN_O_T_N"),value:">,shotTime"},{label:o("DATE_TOKEN_N_T_O"),value:"<,shotTime"},{label:o("UPLOAD_TIME_O_T_N"),value:">,uploadTime"},{label:o("UPLOAD_TIME_N_T_O"),value:"<,uploadTime"},{label:o("TITLE_A_Z"),value:">,name"},{label:o("TITLE_Z_A"),value:"<,name"}],sortValue:{label:o("UPLOAD_TIME_N_T_O"),value:"upload-time-new-to-old"},OptionsStatus:!1},n.hideOptions=n.hideOptions.bind(n),n.showOptions=n.showOptions.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleOptionChange",value:function(e){this.setState({sortValue:e});var t=this.props.onSorted;t({value:e.value})}},{key:"handleHideUsedToggle",value:function(e){var t=this.props.onToggleHideUsed,n=e.target.checked;t(n)}},{key:"hideOptions",value:function(){this.setState({OptionsStatus:!1})}},{key:"showOptions",value:function(){this.setState({OptionsStatus:!0})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.isShow,o=this.state.OptionsStatus,a=(0,y.default)("upload-hide",{hide:!n});return h.default.createElement("div",{className:a},h.default.createElement("div",{className:"t-left",tabIndex:"1",onBlur:this.hideOptions},h.default.createElement("span",{className:"sort-by",onClick:this.showOptions},h.default.createElement("label",null,t("SORT_BY")),h.default.createElement("div",{className:"triangle-down"})),o?h.default.createElement(T.default,{optionValue:this.state.sortValue,onChanged:this.handleOptionChange.bind(this),hideOptions:this.hideOptions,options:this.state.sortOptions}):null),h.default.createElement("div",{className:"t-right"},h.default.createElement("input",{type:"checkbox",id:"hideUsed",onChange:this.handleHideUsedToggle.bind(this)}),h.default.createElement("label",{htmlFor:"hideUsed",className:"hide-used"},t("HIDE_USED"))))}}]),t}(g.Component);t.default=(0,m.translate)("SortAndFilter")(w)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(11),h=o(g),m=n(23),v=o(m),y=n(3),M=o(y),I=n(2),T=o(I),w=n(13),E=o(w),b=n(9),S=n(32),D=o(S),A=n(31),N=o(A),_=n(110),C=o(_),P=n(288),x=o(P),O=n(277),L=o(O),j=n(49),k=n(376),z=o(k),R=n(414),U=o(R),B=n(17),Y=n(33),W=n(16),F=n(85),H=o(F),G=n(491);n(262);var Q=4,X=120,Z=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),o=[{value:"left",title:"Align Text Left"},{value:"center",title:"Center Text"},{value:"right",title:"Align Text Right"}],a=[{value:"top",title:"Vertical Align Text Top"},{value:"middle",title:"Middle Text"},{value:"bottom",title:"Vertical Align Text Bottom"}];return n.state={alignOptionList:o,verticalAlignOptionList:a,previewTextImageSrc:null,previewTextImageBlobSrc:null,timer:null,lastRequestTime:null,isShowIllegalCharTip:!1,isShowTextNotFit:!1,hideTipTimer:null,lastAppearIllegalCharTime:null},n.onTextAreaChange=n.onTextAreaChange.bind(n),n.onFontNameChange=n.onFontNameChange.bind(n),n.onFontWeightChange=n.onFontWeightChange.bind(n),n.onFontColorChange=n.onFontColorChange.bind(n),n.onSliderChange=n.onSliderChange.bind(n),n.onSizeInputChange=n.onSizeInputChange.bind(n),n.onSizeInputBlur=n.onSizeInputBlur.bind(n),n.onSubmit=n.onSubmit.bind(n),n.updatePreviewTextSrc=n.updatePreviewTextSrc.bind(n),n.delayUpdatePreviewTextSrc=n.delayUpdatePreviewTextSrc.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillMount",value:function(){this.initData(this.props.element)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.isShown,n=e.isShown;t!==n&&n&&this.initData(e.element)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.isShown!==e.isShown||this.state.fontName!==t.fontName||this.state.fontWeight!==t.fontWeight||this.state.align!==t.align||this.state.verticalAlign!==t.verticalAlign||this.state.fontSize!==t.fontSize||this.state.fontColor!==t.fontColor||this.state.inputText!==t.inputText||this.state.inputSize!==t.inputSize||this.state.previewTextImageSrc!==t.previewTextImageSrc||this.state.previewTextImageBlobSrc!==t.previewTextImageBlobSrc||this.state.isShowIllegalCharTip!==t.isShowIllegalCharTip||this.state.isShowTextNotFit!==t.isShowTextNotFit}},{key:"componentDidUpdate",value:function(e,t){var n=t.fontWeight,o=this.state.fontWeight;n!==o&&this.updatePreviewTextSrc();var a=t.fontSize,r=this.state.fontSize;a!==r&&this.delayUpdatePreviewTextSrc();var i=t.fontColor,s=this.state.fontColor;i!==s&&this.delayUpdatePreviewTextSrc();var u=t.inputText,l=this.state.inputText;u!==l&&this.delayUpdatePreviewTextSrc();var d=t.align,c=this.state.align;d!==c&&this.updatePreviewTextSrc();var p=t.verticalAlign,f=this.state.verticalAlign;p!==f&&this.updatePreviewTextSrc();var g=t.previewTextImageSrc,h=this.state.previewTextImageSrc;g!==h&&this.getPreviewTextBlobAndTextInfo(h,this.props.element);var m=e.isShown,v=this.props.isShown;if(m!==v&&v){var y=this.refs.inputText;y.focus(),y.setSelectionRange&&y.setSelectionRange(y.value.length,y.value.length);
}}},{key:"initData",value:function(e){var t=this.props,n=t.fontList,o=t.baseUrl,a=t.currentPage,r=T.default.fromJS(b.defaultFontSetting),i=n.filter(function(e){return!e.deprecated}),s=[],u=void 0,l=[];e&&e.get("type")===b.elementTypes.paintedText&&(b.paintedTextFontsFilterArray.forEach(function(e){u=i.find(function(t){return t.displayName===e.font});var t=(0,h.default)({},u);t.name&&(l=[],e.weight.forEach(function(e){var n=t.font.find(function(t){return t.displayName===e});n&&l.push(n)}),t.font=l),t.name&&s.push(t)}),i=s);var d=this.state,c=d.alignOptionList,p=d.verticalAlignOptionList,f=r.get("fontFamilyId"),g=r.get("fontId"),m=r.get("fontSize"),y=r.get("color"),M=c[0].value,I=p[0].value,w="",E=null;if(e){var S=(0,j.toDecode)(e.get("fontFamily"));n.forEach(function(e){e.font.forEach(function(t){t.fontFace===S&&f===r.get("fontFamilyId")&&(f=e.id,g=t.id)})});var D=e.get("fontSize");m=(0,G.getFontSizeInPt)(D*a.get("height")),y=e.get("fontColor"),M=e.get("textAlign"),I=e.get("textVAlign")||I,w=e.get("text")?(0,j.toDecode)(e.get("text")):"",E=this.getPreviewTextImageSrc(w,m,y,S,M,I,e),this.getPreviewTextBlobAndTextInfo(E,e),this.setState({isShowTextNotFit:!1})}var A=i.find(function(e){return e.id===f});A||(A=i.find(function(e){return e.id===b.DEFAULT_FONT_FAMILY_ID}),f=b.DEFAULT_FONT_FAMILY_ID,g=b.DEFAULT_FONT_WEIGHT_ID);var N=A.deprecated?n:i,_=N.map(function(e){return{disabled:e.deprecated,title:e.displayName,label:e.displayName,value:e.id,fontThumbnailUrl:(0,v.default)(W.GET_FONT_THUMBNAIL)({baseUrl:o,fontName:e.name})}}),C=A.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{disabled:A.deprecated,title:t,label:t,value:e.id}});this.setState({avaiableFontList:i,fontName:f,fontWeight:g,timer:null,lastRequestTime:null,inputSize:m,previewTextImageSrc:E,fontSize:m,fontColor:y,align:M,verticalAlign:I,inputText:w,fontOptionList:_,fontWeightOptionList:C})}},{key:"onFontNameChange",value:function(e){var t=(this.props.fontList,this.state.avaiableFontList),n=t.find(function(t){return t.id===e.value}),o=n.font.map(function(e){var t=e.displayName.replace(/\s*\d+/,"");return{title:t,label:t,value:e.id}});this.setState({fontName:e.value,fontWeight:n.font[0].id,fontWeightOptionList:o})}},{key:"onFontWeightChange",value:function(e){this.setState({fontWeight:e.value})}},{key:"onSliderChange",value:function(e){this.setState({fontSize:e,inputSize:e})}},{key:"onSizeInputChange",value:function(e){var t=e.target.value;this.setState({inputSize:t})}},{key:"onSizeInputBlur",value:function(e){var t=+e.target.value,n=t;t>X?n=X:t<Q&&(n=Q),this.setState({inputSize:n,fontSize:n})}},{key:"onFontColorChange",value:function(e){this.setState({fontColor:e.hex})}},{key:"onTextAreaChange",value:function(e){var t=this,n=/[^\u000d\u000a\u0020-\u007e]*/g,o=e.target.value,a=o.replace(n,""),r=this.props.hideTipInterval,i=this.state,s=i.hideTipTimer,u=i.lastAppearIllegalCharTime;if(/^\s*$/.test(o))return void this.setState({inputText:o});if(a!==o){if(!u||Date.now()-u<r){window.clearTimeout(s);var l=window.setTimeout(function(){t.setState({isShowIllegalCharTip:!1})},r);this.setState({hideTipTimer:l})}else this.setState({lastAppearIllegalCharTime:Date.now()});this.setState({isShowIllegalCharTip:!0})}else this.setState({isShowIllegalCharTip:!1});this.setState({inputText:a})}},{key:"getFontObj",value:function(e){var t=this.props.fontList,n=null;return t.forEach(function(t){t.font.forEach(function(t){t.id===e&&(n=t)})}),n}},{key:"onSubmit",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,o=e.fontColor,a=e.align,r=e.verticalAlign,i=e.inputText,s=this.props,u=s.updateElement,l=s.closeTextEditModal,d=s.element,c=this.getFontObj(t),p=i||"";u({fontSize:(0,B.getPxByPt)(n),fontColor:o,text:(0,j.toEncode)(p),id:d.get("id"),textAlign:a,textVAlign:r,fontWeight:c.weight,fontFamily:(0,j.toEncode)(c.fontFace)}),this.setState({inputText:""}),l()}},{key:"getPreviewTextImageSrc",value:function(e,t,n,o,a,r,i){var s=this.props,u=s.baseUrl,l=s.ratio,d=e||"";if(d){var c=(i.get("computed"),(0,B.getPxByPt)(t));return(0,v.default)(W.TEXT_SRC)({text:(0,j.toEncode)(d),fontSize:c,fontColor:(0,Y.hexString2Number)(n),fontFamily:(0,j.toEncode)(o),width:i.get("width"),height:i.get("height"),originalWidth:i.get("width"),originalHeight:i.get("height"),originalFontSize:c,baseUrl:u,textAlign:a,verticalTextAlign:r,ratio:l})}return""}},{key:"updatePreviewTextSrc",value:function(){var e=this.state,t=e.fontWeight,n=e.fontSize,o=e.fontColor,a=e.align,r=e.verticalAlign,i=e.inputText;if(!i)return void this.setState({previewTextImageSrc:null});var s=this.getFontObj(t);this.setState({previewTextImageSrc:this.getPreviewTextImageSrc(i,n,o,s.fontFace,a,r,this.props.element)})}},{key:"getPreviewTextBlobAndTextInfo",value:function(e,t){var n=this;if(!e)return void this.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1});var o=t.get("width"),a=t.get("height");(0,H.default)(e,o,a).then(function(e){var t=e.isShowTextNotFit,o=e.blobUrl;n.setState({previewTextImageBlobSrc:o,isShowTextNotFit:t})}).catch(function(e){n.setState({previewTextImageBlobSrc:null,isShowTextNotFit:!1})})}},{key:"delayUpdatePreviewTextSrc",value:function(){var e=this.props.requestInterval,t=this.state,n=t.lastRequestTime,o=t.timer;if(!n||Date.now()-n<e){window.clearTimeout(o);var a=window.setTimeout(this.updatePreviewTextSrc,e);this.setState({timer:a})}else this.setState({lastRequestTime:Date.now()})}},{key:"onAlignChange",value:function(e){this.setState({align:e})}},{key:"onVerticalAlignChange",value:function(e){this.setState({verticalAlign:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.fontOptionList,o=t.fontWeightOptionList,a=t.alignOptionList,r=t.verticalAlignOptionList,i=t.fontName,s=t.fontWeight,u=t.fontSize,l=t.fontColor,d=t.inputSize,c=t.inputText,p=t.align,f=t.verticalAlign,g=t.previewTextImageBlobSrc,h=t.isShowIllegalCharTip,m=t.isShowTextNotFit,v="#ffffff";l&&"#ffffff"===l.toLowerCase()&&(v="#7B7B7B");var y=this.props,I=y.isShown,T=y.closeTextEditModal,w=I;return M.default.createElement(D.default,{className:"text-edit-modal",onClosed:T,opened:I},M.default.createElement("h2",{className:"modal-title"},"Edit Text"),M.default.createElement("div",{className:"modal-content"},M.default.createElement("div",{className:"option-container"},M.default.createElement("div",{className:"option-item"},M.default.createElement("div",{className:"select-container font-name"},I?M.default.createElement(C.default,{className:"font",options:n,searchable:!1,onChanged:this.onFontNameChange,value:i,optionComponent:z.default}):null),M.default.createElement("div",{className:"select-container font-weight"},M.default.createElement(C.default,{className:"font-weight",options:o,searchable:!1,onChanged:this.onFontWeightChange,value:s}))),M.default.createElement("div",{className:"divider"}),M.default.createElement("div",{className:"option-item"},M.default.createElement("div",{className:"size-container"},M.default.createElement("input",{type:"number",className:"size-input",value:d,min:Q,max:X,onChange:this.onSizeInputChange,onBlur:this.onSizeInputBlur}),M.default.createElement("div",{className:"slider-container"},M.default.createElement(x.default,{value:u,min:Q,max:X,step:1,handleSliderChange:this.onSliderChange,vertical:!0})))),M.default.createElement(L.default,{needResetColor:w,initHexString:l,onColorChange:this.onFontColorChange}),M.default.createElement("div",{className:"divider"}),M.default.createElement("div",{className:"align-container"},M.default.createElement("div",{className:"horizonal-group"},a.map(function(t,n){var o="align-"+t.value,a=(0,E.default)("icon",o,{selected:t.value===p});return M.default.createElement("button",{key:n,type:"button",className:a,title:t.title,onClick:e.onAlignChange.bind(e,t.value)})})),M.default.createElement("div",{className:"divider"}),M.default.createElement("div",{className:"vertical-group"},r.map(function(t,n){var o="align-"+t.value,a=(0,E.default)("icon",o,{selected:t.value===f});return M.default.createElement("button",{key:n,type:"button",className:a,title:t.title,onClick:e.onVerticalAlignChange.bind(e,t.value)})})))),M.default.createElement("div",{className:"text-box"},M.default.createElement("textarea",{className:"text-box",placeholder:"Type here...",onInput:this.onTextAreaChange,value:c,ref:"inputText"}),M.default.createElement("p",{className:"illegal-char-tip"},m?M.default.createElement("span",null,"Text does not fit"):null,h?M.default.createElement("span",null,"Invalid characters removed"):null)),M.default.createElement("p",{className:"button-container"},M.default.createElement(N.default,{onClicked:this.onSubmit,disabled:!1},"Done")),M.default.createElement(U.default,{imageSrc:g,backgroundColor:v})))}}]),t}(y.Component);Z.propTypes={baseUrl:y.PropTypes.string.isRequired,fontList:y.PropTypes.array.isRequired,isShown:y.PropTypes.bool.isRequired,closeTextEditModal:y.PropTypes.func.isRequired,updateElement:y.PropTypes.func.isRequired,element:y.PropTypes.instanceOf(T.default.Map),currentPage:y.PropTypes.instanceOf(T.default.Map),ratio:y.PropTypes.number.isRequired,requestInterval:y.PropTypes.number,hideTipInterval:y.PropTypes.number},Z.defaultProps={requestInterval:1e3,hideTipInterval:2e3},t.default=Z},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(11),h=o(g),m=n(3),v=o(m),y=n(2),M=o(y),I=n(13),T=o(I),w=n(82),E=o(w);n(263);var b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.data.element,o=e.data.element;return!M.default.is(n,o)}},{key:"onLoad",value:function(e){}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,o=t.element,a=o.getIn(["computed","imgUrl"]),r=o.get("computed"),i=Boolean(o.get("text")),s={position:"absolute",width:r.get("width")+"px",height:r.get("height")+"px",top:0,left:0},u={className:(0,T.default)("text-element-thumbnail",{"has-text":i,selected:o.get("isSelected")}),style:{zIndex:o.get("dep")+100,width:r.get("width"),height:r.get("height"),left:r.get("left"),top:r.get("top"),transform:"rotate("+o.get("rot")+"deg)"},handlerStyle:s,handlerData:o,element:o},l={};return i&&(l=(0,h.default)({},s)),v.default.createElement(E.default,{data:u,actions:n},v.default.createElement("div",{className:"img-border",style:l}),i?v.default.createElement("img",{className:"text-img",alt:"",src:a,onLoad:this.onLoad}):null)}}]),t}(m.Component);b.propTypes={actions:m.PropTypes.shape({}),data:m.PropTypes.shape({element:m.PropTypes.instanceOf(M.default.Map).isRequired}).isRequired},t.default=b},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m),y=n(103),M=o(y);n(264);var I=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onLoad=n.onLoad.bind(n),n.state={isLoaded:!0},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.imageSrc,n=e.imageSrc;t!==n&&(this.setState({isLoaded:!1}),n||this.setState({imgWidth:0,imgHeight:0}))}},{key:"onLoad",value:function(e){this.setState({imgWidth:e.target.naturalWidth,imgHeight:e.target.naturalHeight,isLoaded:!0})}},{key:"renderPreviewBox",value:function(){var e=this.props,t=e.imageSrc,n=e.backgroundColor,o={lines:13,length:20,width:10,radius:30,scale:.12,corners:1,color:"#7b7b7b",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,top:"50%",left:"-36%",shadow:!1,hwaccel:!1,position:"absolute"},a=this.state,r=(a.previewImgPosition,a.isLoaded),i={backgroundColor:n},s=[];return t?(r||s.push(h.default.createElement("div",{className:"load-container",key:"0"},h.default.createElement("div",{className:"load-mask"}),h.default.createElement("div",{className:"load-content"},h.default.createElement(M.default,{loaded:r,options:o}),"Loading"))),s.push(h.default.createElement("img",{key:"1",src:t,alt:"",className:"preview-img",style:i,draggable:"false",onLoad:this.onLoad}))):s.push(h.default.createElement("div",{className:"no-preview",key:"2"},"No Preview available")),s}},{key:"render",value:function(){var e=this,t=this.state,n=t.imgWidth,o=t.imgHeight,a=this.props,r=a.maxImgContainerWidth,i=a.maxImgContainerHeight,s=a.initImgContainerWidth,u=a.initImgContainerHeight,l=(a.backgroundColor,(0,v.default)("img-container")),d=o||u;d%2>0&&d++;var c={width:n||s,height:d,maxHeight:i,maxWidth:r,border:n&&o?"1px dashed #7b7b7b":"none",overflow:"hidden"};return h.default.createElement("div",{className:"text-preview-box"},h.default.createElement("div",{className:l,style:c,ref:function(t){e.imgContainer=t}},this.renderPreviewBox()))}}]),t}(g.Component);I.propTypes={imageSrc:g.PropTypes.string,maxImgContainerWidth:g.PropTypes.number,maxImgContainerHeight:g.PropTypes.number,initImgContainerWidth:g.PropTypes.number,initImgContainerHeight:g.PropTypes.number},I.defaultProps={maxImgContainerWidth:720,maxImgContainerHeight:262,initImgContainerHeight:100,initImgContainerWidth:720},t.default=I},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(12),h=o(g),m=n(13),v=o(m),y=n(15),M=n(3),I=o(M);n(265);var T=n(556),w=o(T),E=n(555),b=o(E),S=n(554),D=o(S),A=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.state={title:n.props.data.title||"",isEditIconShow:!1,isInEdit:!1,isInvalid:!1,invalidText:"It is invalid",disable:n.props.data.disable},n.toggleEditIcon=n.toggleEditIcon.bind(n),n.toggleEditModel=n.toggleEditModel.bind(n),n.editDone=n.editDone.bind(n),n.cancelEdit=n.cancelEdit.bind(n),n.editTitle=n.editTitle.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.data.title,n=e.data.title;t!==n&&this.setState({title:n,disable:e.data.disable})}},{key:"toggleEditIcon",value:function(e){this.props.data.disable||this.setState({isEditIconShow:e})}},{key:"toggleEditModel",value:function(e){if(!this.props.data.disable){if(e){var t=this.props.actions,n=t.boundTrackerActions;n.addTracker("ClickChangeTitle")}this.setState({isInEdit:e,isInvalid:!1,invalidText:""});var o=this.refs.titleInput;o.setSelectionRange&&o.setSelectionRange(o.value.length,o.value.length)}}},{key:"editDone",value:function(){var e=this;if(this.state.title)if(/^[a-zA-Z 0-9\d_\s\-]+$/.test(this.state.title))if(this.state.title!==this.props.data.title){var t=this.props,n=t.actions,o=t.data,a=n.boundProjectActions,r=n.boundTrackerActions,i=o.projectId,s=this.state.title;a.saveProjectTitle(i,s).then(function(t){"200"===(0,h.default)(t,"respCode")?(e.setState({isInvalid:!1,invalidText:"",isInEdit:!1}),r.addTracker("ClickChangeTitleAndDone"),a.changeProjectTitle(s)):e.setState({isInvalid:!0,invalidText:"Please use a name you haven't used before."})})}else this.state.title===this.props.data.title&&this.setState({isInEdit:!1});else this.setState({isInvalid:!0,invalidText:"Only letters, numbers, blank space, - (hyphen) and _ (underscore) are allowed in the title"});else this.setState({isInvalid:!0,invalidText:"Title is required"})}},{key:"cancelEdit",value:function(){var e=this.props.actions,t=e.boundTrackerActions;t.addTracker("CancelChangeTitle"),this.setState({title:this.props.data.title,isInEdit:!1})}},{key:"editTitle",value:function(e){this.setState({title:e.target.value})}},{key:"render",value:function(){var e=this.props.data,t=e.title,n=e.orderInfo,o=(e.capability,n&&n.get("isOrdered")&&!n.get("isCheckFailed")),a=(0,v.default)("title-edit-icon",{hide:!this.state.isEditIconShow}),r=(0,v.default)("title-warn",{show:this.state.isInvalid});return I.default.createElement("div",{className:"bed-title"},I.default.createElement("div",{onMouseOver:this.toggleEditIcon.bind(this,!0),onMouseOut:this.toggleEditIcon.bind(this,!1),className:this.state.isInEdit?"hide":""},I.default.createElement("p",{className:"box-title"},t),o?null:I.default.createElement("label",{htmlFor:"titleInputer"},I.default.createElement("img",{className:a,title:"Click to edit title",alt:"edit title",src:w.default,onClick:this.toggleEditModel.bind(this,!0)}))),o?null:I.default.createElement("div",{className:this.state.isInEdit?"":"hide"},I.default.createElement("div",{className:"box-title-edit"},I.default.createElement("input",{className:"title-edit",type:"text",maxLength:"50",value:this.state.title,onChange:this.editTitle,id:"titleInputer",ref:"titleInput"}),I.default.createElement("img",{className:"icon-done",src:b.default,alt:"Done",onClick:this.editDone}),I.default.createElement("img",{className:"icon-delete",src:D.default,alt:"Cancel",onClick:this.cancelEdit})),I.default.createElement("span",{className:r},this.state.invalidText)))}}]),t}(M.Component);A.propTypes={},t.default=(0,y.translate)("TitleEditor")(A)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(15),v=n(417),y=o(v);n(266);var M=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.uploadList,n=e.t,o=e.boundUploadedImagesActions,a=e.boundContactUsActions;return h.default.createElement("div",null,h.default.createElement("ul",{className:"upload-title"},h.default.createElement("li",{className:"upload-title"},h.default.createElement("div",{className:"file-name"},n("FILE")),h.default.createElement("div",{className:"file-progress"},n("FILE_PROGRESS")))),h.default.createElement("div",{className:"box-list"},h.default.createElement("ul",{className:"upload-list"},t&&t.map(function(e,t){return h.default.createElement(y.default,{key:t,uploadItem:e,boundContactUsActions:a,boundUploadedImagesActions:o})}))))}}]),t}(g.Component);M.propTypes={uploadList:g.PropTypes.array.isRequired},t.default=(0,m.translate)("ItemList")(M)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(287),v=o(m),y=n(143),M=n(15),I=n(13),T=o(I),w=n(546),E=o(w);n(267);var b=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleDelete",value:function(){var e=this.props,t=e.uploadItem,n=e.boundUploadedImagesActions;t.xhr.abort(),n.deleteImage(t.guid)}},{key:"handleRetry",value:function(){var e=this.props,t=e.uploadItem,n=e.boundUploadedImagesActions;n.retryImage(t.guid)}},{key:"render",value:function(){var e=this.props,t=e.uploadItem,n=e.boundContactUsActions,o=e.t,a=t.name,r=t.info,i=t.status,s=t.percent,u=t.canRetry,l=t.retryCount,d="";switch(i){case y.PROGRESS:d="progress";break;case y.DONE:d="done";break;case y.FAIL:d="fail";break;default:d=""}var c=(0,T.default)("upload-item",d);return h.default.createElement("li",{className:c},h.default.createElement("div",{className:"file-name"},a?a.length<10?a:a.substr(0,5)+"..."+a.substr(a.length-3):""),h.default.createElement("div",{className:"file-progress"},h.default.createElement(v.default,{percent:s}),h.default.createElement("span",{className:"status",title:r},i===y.DONE?""+s:i===y.FAIL?""+r:s+"%"),h.default.createElement("a",{href:"javascript:void(0);",className:"delete"},h.default.createElement("img",{width:"8px",height:"8px",src:E.default,onClick:this.handleDelete.bind(this),alt:"Delete"})),u?null:h.default.createElement("span",{className:"failed"},o("FAILED")),l<2&&u?h.default.createElement("a",{href:"javascript:void(0);",className:"retry",onClick:this.handleRetry.bind(this)},o("RETRY")):null,l>=2?h.default.createElement("a",{href:"javascript:void(0);",className:"help",onClick:n.showContactUsModal},o("HELP")):null))}}]),t}(g.Component);b.propTypes={uploadItem:g.PropTypes.object.isRequired},t.default=(0,M.translate)("UploadItem")(b)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.onUploadMoreClick=t.handleUploadModalClosed=t.receiveProps=void 0;var a=n(23),r=o(a),i=n(157),s=o(i),u=n(92),l=o(u),d=n(12),c=o(d),p=n(499),f=o(p),g=n(290),h=o(g),m=n(59),v=n(54),y=(n(21),n(293),n(20),n(296)),M=n(143),I=n(16),T=0,w=[],E=[],b={},S=2,D=0,A=[],N=null,_=null,C=function(e,t,n){_&&clearTimeout(_),_=setTimeout(function(){var o=e.props.addTracker;o("PhotosUploadComplete,"+t+","+n)},100)},P=(t.receiveProps=function(e,t){var n=e.props.uploadingImages,o=t.uploadingImages,a=[],r=!1;if(!(0,s.default)(n,o)){var i=e.state.allImages,u=e.state.syncedGuids;o.map(function(t){if(u.indexOf(t.file.guid)==-1&&t&&t.file&&(t.file.percent=0,t.file.status="",t.file.retryCount=0,i.push(t.file),u.push(t.file.guid),a.push(t.file)),t.retryCount&&t.retryCount<=2&&b[t.file.guid]!==t.retryCount&&t&&t.file){t.file.percent=0,t.file.status="",t.file.retryCount=t.retryCount,b[t.file.guid]=t.retryCount,a.push(t.file);var n=e.state.errorUploaded-1;r=!0,e.setState({isRetry:r,errorUploaded:n})}}),e.setState({allImages:i,syncedGuids:u},function(){a.length&&(w=w.concat(a),r||(T+=a.length),x(e,a.length))})}},t.handleUploadModalClosed=function(e,t){var n=e.props,o=n.toggleModal,a=n.t,r=n.addTracker,i=n.autoFill,s=e.state.allImages,u=s.filter(function(e){return e&&e.status===M.FAIL}).length;if(L(e,!0),s.length&&u!==s.length){if(!window.confirm(a("CLOSE_PROMPT")))return!1;s.map(function(e){e.xhr&&e.xhr.abort()})}t&&(D=0,r("PhotosUploadFailed,"+u)),T=0,w=[],E=[],e.setState({allImages:[],successUploaded:0,errorUploaded:0}),o("upload",!1),i(A),A=[]}),x=(t.onUploadMoreClick=function(e){e.setState({addMore:!0})},function(e,t){var n=e.props,o=(n.env,n.addTracker),a=e.state,r=a.addMore,i=a.isRetry;r||i?e.setState({addMore:!1,isRetry:!1}):e.setState({successUploaded:0,errorUploaded:0}),o("StartUploadPhotos,"+t),D<S&&U(e)}),O=function(e){e.state.successUploaded&&e.state.successUploaded===T&&(C(e,e.state.successUploaded,e.state.successUploaded),P(e))},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.props.saveProject,o=e.state.successUploaded+e.state.errorUploaded;if(o&&o===T||t&&e.state.successUploaded){C(e,e.state.successUploaded,e.state.errorUploaded);var a=!1;N&&clearTimeout(N),N=setTimeout(function(){n(function(){},null,!0,a)},500)}},j=function(e,t,n){var o=e.state.allImages.findIndex(function(e){return e.guid===t}),a=(0,c.default)(e.state.allImages,o);if(a){for(var r in n)n.hasOwnProperty(r)&&(a[r]=n[r]);var i=(0,l.default)(e.state.allImages,o,a);e.setState({allImages:i})}},k=function(e,t){var n=e.state.allImages,o=n.findIndex(function(e){return e.guid===t});n.splice(o,1),e.setState({allImages:n})},z=function(e){e.setState({successUploaded:e.state.successUploaded+1})},R=function(e){e.setState({errorUploaded:e.state.errorUploaded+1})},U=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(D=D?D-1:0,w.length){if(0===D){var t=w.splice(0,S);t.map(function(t){H(e,t)})}else if(D<S){var n=w.shift();H(e,n)}}else D=0},B=function(e){var t=new FormData;for(var n in e)e.hasOwnProperty(n)&&t.append(n,e[n]);return t},Y=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];j(e,t.guid,{status:M.FAIL,percent:n,info:n,canRetry:o}),R(e),U(e)},W=function(e,t){var n=!0,o="";if(e){var a=e.size/1048576;if(0===a)return n=!1,o=t("FILE_EMPTY"),{isAccept:n,errorText:o};if(a>100)return n=!1,o=t("FILE_EXCEEDS_MAXIMUM_SIZE"),{isAccept:n,errorText:o};if(m.supportedImagesTypes.indexOf(e.type)===-1)return n=!1,o=t("TYPE_CONFLICT"),{isAccept:n,errorText:o}}return{isAccept:n,errorText:o}},F=function(e){var t=!0;switch(e){case m.uploadFailTypes.timeExpired:t=!0;break;case m.uploadFailTypes.emptyFile:case m.uploadFailTypes.colorSpace:case m.uploadFailTypes.invalidFileType:case m.uploadFailTypes.overSize:t=!1}return t},H=function(e,t){var n=e.props,o=n.env,a=n.project,i=n.boundUploadedImagesActions,s=n.boundProjectActions,u=n.autoAddPhotoToCanvas,l=n.addTracker,d=n.t,p=o.userInfo,g=p.get("id"),m=p.get("timestamp"),T=p.get("authToken"),w=o.albumId,E=a.property.get("title"),b=!1;D++;var S=function(){var n=t.name,a=Math.round(t.size/1024)+"kb";j(e,t.guid,{percent:0,info:""});var p=!0,S=W(t,d);if(S.isAccept){var D=Date.now();l("StartUploadEachPhoto,"+D+","+n+","+a);var N=B({uid:g,timestamp:m,token:T,albumId:w,albumName:E,Filename:t.name.replace(/[\&\/\_]+/g,""),filename:t});j(e,t.guid,{status:M.PROGRESS});var _=(0,h.default)({url:(0,r.default)(I.UPLOAD_IMAGES)({uploadBaseUrl:(0,c.default)(o,"urls").get("uploadBaseUrl")}),method:"post",data:N,success:function(r){var d=Date.now(),p=Math.round((d-D)/1e3)+"s";if(l("CompleteUploadEachPhoto,"+d+","+n+","+a+","+p),r){var g=f.default.xml2js(r);switch((0,c.default)(g,"resultData.state")){case"success":j(e,t.guid,{status:M.DONE,percent:"Done"});var h={name:t.name.replace(/[\&\/\_]+/g,""),url:(0,v.combine)((0,c.default)(o,"urls.uploadBaseUrl"),I.IMAGE_SRC,{qaulityLevel:0,puid:(0,c.default)(g,"resultData.img.encImgId")}),usedCount:0,imageId:(0,c.default)(g,"resultData.img.id"),totalSize:(0,c.default)(g,"resultData.img.size"),guid:(0,c.default)(g,"resultData.img.guid"),uploadTime:(new Date).getTime(),shotTime:(0,c.default)(g,"resultData.img.shotTime"),encImgId:(0,c.default)(g,"resultData.img.encImgId"),width:(0,c.default)(g,"resultData.img.width"),height:(0,c.default)(g,"resultData.img.height"),createTime:t.lastModified,orientation:(0,y.getDegree)((0,c.default)(g,"resultData.img.exifOrientation"))},m=(0,c.default)(g,"resultData.img.failType");if(m||i.uploadComplete(h),u&&u.status&&!b){var T=u.elementId,w=u.elementHeight,E=u.elementWidth;u.imgRot;b=!0;var S={id:T,encImgId:(0,c.default)(g,"resultData.img.encImgId"),width:E,height:w};s.updateElement(S),i.autoAddPhotoToCanvas({status:!1,elementWidth:0,elementHeight:0})}A.push(h),z(e),k(e,t.guid),L(e),O(e);break;case"fail":var N=F(g.resultData.failType);Y(e,t,g.resultData.errorInfo,N),L(e)}}U(e)},progress:function(n){var o=Math.round(n.loaded/n.total*100);100===o?U(e):j(e,t.guid,{percent:o})},timeout:function(o){var r=Date.now(),i=Math.round((r-D)/1e3)+"s";l("TimeoutUploadEachPhoto,"+r+","+n+","+a+","+i),Y(e,t,d("TIMEOUT"),p),U(e),L(e)},error:function(o){var r=Date.now(),i=Math.round((r-D)/1e3)+"s";l("FaildedUploadEachPhoto,"+r+","+n+","+a+","+i),U(e),L(e),Y(e,t,d("ERROR"),p)}});j(e,t.guid,{xhr:_})}else Y(e,t,S.errorText),L(e)};S()}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(3),m=a(h),v=n(15),y=n(32),M=a(y),I=n(31),T=a(I),w=n(74),E=a(w),b=n(416),S=a(b),D=n(418),A=o(D);n(268);var N=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.state={allImages:[],syncedGuids:[],addMore:!1,successUploaded:0,errorUploaded:0},n.receiveProps=function(e){return A.receiveProps(n,e)},n.handleUploadModalClosed=function(e){return A.handleUploadModalClosed(n,e)},n.onUploadMoreClick=function(){return A.onUploadMoreClick(n)},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.receiveProps(e)}},{key:"render",value:function(){var e=this.props,t=e.opened,n=e.t,o=(e.uploadingImages,e.boundUploadedImagesActions),a=e.toggleModal,r=e.boundContactUsActions,i=this.state,s=i.allImages,u=i.successUploaded,l=i.errorUploaded;return m.default.createElement(M.default,{className:"upload-modal",onClosed:this.handleUploadModalClosed.bind(this,!0),opened:t},m.default.createElement("div",{className:"box-image-upload"},m.default.createElement("h3",{className:"title"},n("UPLOAD_IMAGES")),m.default.createElement(S.default,{uploadList:s,boundContactUsActions:r,boundUploadedImagesActions:o}),m.default.createElement("div",{className:"upload-meta"},m.default.createElement("div",{className:"upload-info"},m.default.createElement("span",{className:"compelete"},n("COMPLETE_COUNT",{n:u})),m.default.createElement("span",{className:"failed"},l?n("FILED_COUNT",{n:l}):"")),m.default.createElement("div",{className:"upload-buttons"},m.default.createElement(E.default,{className:"white",boundUploadedImagesActions:o,toggleModal:a,uploadFileClicked:this.onUploadMoreClick,multiple:"multiple"},n("ADD_MORE_PHOTOS")),m.default.createElement(T.default,{onClicked:this.handleUploadModalClosed.bind(this,!0),className:"cancel-all"},this.state.completeButton)))))}}]),t}(h.Component);N.propTypes={className:h.PropTypes.string,width:h.PropTypes.number,height:h.PropTypes.number,uploadList:h.PropTypes.array},t.default=(0,v.translate)("UploadModal")(N)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(162),v=n(15),y=n(394),M=o(y),I=n(424),T=o(I),w=n(434),E=o(w);n(269);var b=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.trackSelectedTab=n.trackSelectedTab.bind(n),n.routes=h.default.createElement(m.Route,{path:"/",component:function(e){return h.default.createElement(M.default,{data:n.props.data},e.children)}},h.default.createElement(m.IndexRedirect,{to:"onepage"}),h.default.createElement(m.Route,{path:"allpages",component:T.default,onEnter:n.trackSelectedTab}),h.default.createElement(m.Route,{path:"onepage",component:E.default,onEnter:n.trackSelectedTab})),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"trackSelectedTab",value:function(e){var t=e.location,n=this.props,o=n.actions,a=n.data,r=a.projectId,i=o.boundTrackerActions;switch(t.pathname){case"/allpages":r!==-1&&i.addTracker("ClickAllPages");break;case"/onepage":r!==-1&&i.addTracker("ClickManagePhotos")}}},{key:"render",value:function(){return h.default.createElement(m.Router,{history:m.hashHistory,routes:this.routes})}}]),t}(g.Component);b.propTypes={actions:g.PropTypes.shape({boundTrackerActions:g.PropTypes.object.isRequired}).isRequired},t.default=(0,v.translate)("ViewTabs")(b)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(557),v=o(m),y=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"onMouseEnter",value:function(){var e=this.props.title;this.imageNode.getStage().content.title=e}},{key:"onMouseLeave",value:function(){this.imageNode.getStage().content.title=""}},{key:"render",value:function(){var e=this.props,t=(e.parentWidth,e.parentHeight),n=e.title,o={width:18,height:18,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave};t&&(o.x=8,o.y=t-8-18);var a={position:"absolute",left:"8px",top:t-8-18+"px",width:"18px",height:"18px"};return h.default.createElement("img",{src:v.default,title:n,style:a})}}]),t}(g.Component);y.propTypes={parentHeight:g.PropTypes.number,parentWidth:g.PropTypes.number,
title:g.PropTypes.string.isRequired},t.default=y},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(3),h=o(g),m=n(13),v=o(m);n(270);var y=function(e){function t(e){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e))}return(0,f.default)(t,e),(0,l.default)(t,[{key:"choseOption",value:function(e){var t=this.props,n=t.onChanged,o=t.hideOptions;n(e),o()}},{key:"render",value:function(){var e=this,t=this.props,n=t.optionValue,o=t.options;return h.default.createElement("div",{className:"sort-options"},o.map(function(t){var o=(0,v.default)("option-each",{active:t.label===n.label});return h.default.createElement("div",{onClick:function(){return e.choseOption(t)},className:o},t.label)}))}}]),t}(g.Component);t.default=y},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SHOW_CLONE_MODAL:"ClickClone",SHOW_PREVIEW:"ClickPreview",SHOW_SHARE_PROJECT_MODAL:"ClickShare",SHOW_QUICK_START_MODAL:"ClickQuickStart",SHOW_HOW_THIS_WORKS_MODAL:"ClickHowThisWorks",SHOW_CONTACT_US_MODAL:"ClickContactUs"}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),r=o(a),i=n(4),s=o(i),u=n(5),l=o(u),d=n(8),c=o(d),p=n(7),f=o(p),g=n(12),h=o(g),m=n(11),v=o(m),y=n(65),M=n(15),I=n(3),T=o(I),w=n(35),E=o(w),b=n(160),S=o(b),D=n(84),A=n(83),N=n(44),_=o(N),C=n(137),P=o(C),x=n(139),O=o(x),L=n(9);n(271);var j=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e)),o=n.props.materials,a=o?o.getIn(["cover","img"]):null;return n.setMouseHoverDomNode=n.setMouseHoverDomNode.bind(n),n.state={hasCoverRender:!a},n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.materials,n=t?t.getIn(["cover","img"]):null;this.setState({hasCoverRender:!n})}},{key:"setMouseHoverDomNode",value:function(e){e?S.default.show(E.default.findDOMNode(e)):S.default.hide()}},{key:"render",value:function(){var e=this.props,t=(e.t,e.urls),n=(e.materials,e.variables),o=e.pagination,a=e.settings,r=e.parameters,i=e.ratios,s=e.arrangePagesSize,u=e.allSheets,l=e.spec,d=e.boundProjectActions,c=e.boundPaginationActions,p=e.boundImageEditModalActions,f=e.boundTextEditModalActions,g=e.boundTrackerActions,m=e.userInfo,y=l,M=s,I=[];if(u.size&&this.state.hasCoverRender&&(0,h.default)(M,"renderCoverSize")){var w={boundProjectActions:d,boundPaginationActions:c,setMouseHoverDomNode:this.setMouseHoverDomNode,boundImageEditModalActions:p,boundTextEditModalActions:f,boundTrackerActions:g},E=M.renderCoverSize.width>M.renderInnerContainerSize.width?M.renderCoverSize.width:M.renderInnerContainerSize.width,b=M.renderCoverSize.height>M.renderInnerContainerSize.height?M.renderCoverSize.height:M.renderInnerContainerSize.height,S={width:E+"px",height:b+"px"},D=(0,h.default)(a,"spec.product");u.forEach(function(e,s){var u=e.getIn(["summary","isCover"]),l=(0,v.default)({},{width:u?M.renderCoverSize.width+"px":M.renderInnerSize.width+"px",display:E?"block":"none"});if(u){if(D!==L.productTypes.LC){var d={userInfo:m,styles:S,specData:y,pageNumberStyle:l,allPageSheetIndex:s,thumbnail:!0,urls:t,size:M,ratios:i,variables:n,pagination:o,paginationSpread:e,settings:a,parameters:r};I.push(T.default.createElement(P.default,{key:e.get("id"),actions:w,data:d}))}}else{var c={userInfo:m,styles:S,pageNumberStyle:l,allPageSheetIndex:s,thumbnail:!0,urls:t,size:M,ratios:i,variables:n,pagination:o,paginationSpread:e,settings:a,parameters:r};I.push(T.default.createElement(O.default,{key:e.get("id"),actions:w,data:c}))}})}return T.default.createElement("div",{className:"all-pages"},T.default.createElement("div",{className:"wrap clearfix"},I),T.default.createElement(_.default,{isShown:!this.state.hasCoverRender,loadingText:"Loading..."}))}}]),t}(I.Component);j.propTypes={},t.default=(0,y.connect)(D.mapStateToProps,A.mapAppDispatchToProps)((0,M.translate)("ArrangePages")(j))},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resizingHandler=t.getSpreadSize=t.recomputedRenderRatios=t.recomputedPreviewRatios=t.recomputedWorkspaceRatio=void 0;var a=n(12),r=o(a),i=n(9),s=n(147),u=n(58),l=n(490),d=null,c=t.recomputedWorkspaceRatio=function(e){var t=e.boundRatioActions,n=e.size,o=e.settings,a=(e.togglePanel,e.pagination,(0,r.default)(o,"spec.product")),i=((0,r.default)(o,"spec.size"),!0),s=(0,l.computedWorkSpaceOffset)(a,i);(0,l.updateWorkspaceRatio)(t,n,s,a)},p=t.recomputedPreviewRatios=function(e){var t=0,n=0,o=e.boundRatioActions,a=e.size,l=e.settings,d=(0,r.default)(l,"spec.product"),c=d===i.productTypes.WC;if(d!==i.productTypes.PC){var p={top:c?50:100,right:50,bottom:c?50:100,left:50};t=(0,s.computedWorkSpaceRatio)(a.coverBgParams,{top:100,right:50,bottom:100,left:50},i.percent.lg),n=(0,s.computedWorkSpaceRatio)(a.innerBgParams,p,i.percent.lg)}else if(d===i.productTypes.PC){var f=(0,r.default)(l,"spec.orientation"),g=(0,u.getSize)().width,h="Portrait"===f?1040:1520,m=.8,v=Math.floor(g*m);v>h&&(v=h),t=v/(0,r.default)(a.coverBgParams,"width"),n=v/(0,r.default)(a.innerBgParams,"width")}o.updateRatio([{type:i.ratioTypes.previewCoverWorkspace,ratio:t},{type:i.ratioTypes.previewInnerWorkspace,ratio:n}])};t.recomputedRenderRatios=function(e){var t=e.boundRatioActions,n=e.size,o=n.coverWorkspaceSize,a=n.innerWorkspaceSize,r=(n.renderCoverSize,n.renderCoverSheetSize),s=(n.renderInnerSize,n.renderInnerSheetSizeWithoutBleed),u=(o.width-r.width)/2,l=(o.height-r.height)/2,d=(a.width-s.width)/2,c=(a.height-s.height)/2;t.updateRatio([{type:i.ratioTypes.coverSheetPaddingLeft,ratio:u/o.width},{type:i.ratioTypes.coverSheetPaddingTop,ratio:l/o.height},{type:i.ratioTypes.innerSheetPaddingLeft,ratio:d/a.width},{type:i.ratioTypes.innerSheetPaddingTop,ratio:c/a.height}])},t.getSpreadSize=function(e){return(0,r.default)(e.props,"size.coverSpreadSize")},t.resizingHandler=function(e){clearTimeout(d),d=setTimeout(function(){c(e.props),p(e.props)},500)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyRelativeTemplate=t.applyTemplate=t.autoFill=void 0;var a=n(14),r=o(a),i=n(11),s=o(i),u=n(55),l=o(u),d=n(12),c=o(d),p=n(2),f=o(p),g=n(9),h=n(42),m=n(40),v=n(53),y=(t.autoFill=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.props,a=o.project,r=o.boundProjectActions,i=(0,c.default)(a,"pageArray"),u=(0,c.default)(a,"cover"),l=u.get("containers"),d=[],p=0,f=[],h=(0,s.default)([],t);return n&&h.sort(function(e,t){return(0,c.default)(e,"shotTime")-(0,c.default)(t,"shotTime")}),l&&l.size&&l.forEach(function(e){var t=e.get("elements");t&&t.size&&t.forEach(function(e){e.get("type")!==g.elementTypes.photo||e.get("encImgId")||d.push(e.get("id"))})}),i&&i.size&&i.forEach(function(e){var t=e.get("elements");t&&t.size&&t.forEach(function(e){e.get("type")!==g.elementTypes.photo||e.get("encImgId")||d.push(e.get("id"))})}),d.forEach(function(e){if(h[p]){var t=h[p];f.push({id:e,encImgId:t.encImgId,imageid:t.imageId,imgRot:t.orientation?t.orientation:0,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1}),p+=1}}),r.updateElements(f)},function(e,t){var n=e.props,o=n.paginationSpread,a=n.uploadedImages,i=n.ratios,s=(n.fontList,n.pagination),u=(n.settings,n.boundProjectActions),d=n.boundPaginationActions,p=[],h=[],y=(t.elements,o.get("pages")),M=(0,c.default)(s,"pageId"),I=y.find(function(e){return e.get("id")===M}),T=I&&I.get("enabled");T||(I=y.get("0"),d.switchPage(0,I.get("id")));var w=(I.get("height")*i.workspace,I.get("width")*i.workspace,I.get("elements")),E=w.filter(function(e){return e.get("type")===g.elementTypes.photo&&!!e.get("encImgId")}),b=w.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),S=w.filter(function(e){return e.get("type")===g.elementTypes.calendar}),D=E.concat(b);D.forEach(function(e){p.push(e)}),S.forEach(function(e){p.push(e)});var A=t.elements,N=A.filter(function(e){return e.type===g.elementTypes.text});if(N.length){var _=p.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),C=p.filter(function(e){return e.get("type")===g.elementTypes.photo}),P=A.filter(function(e){return e.type===g.elementTypes.text}),x=P.length,O=_.length;if(O>=x){for(var L=[],j=(0,l.default)(_,function(e){return-e.get("lastModified")}),k=0;k<x;k++)L.push(j[k]);p=C.concat(L)}if(h=(0,m.updateElementsByTemplate)(I,p,a,t),h&&h.size){h=h.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var z=I.set("elements",h),R=f.default.List(),U=f.default.List();h.forEach(function(e){e.get("type")===g.elementTypes.photo?U=U.push(e):R=R.push(e)});var B=(0,v.mergeTemplateElements)(z,U,f.default.fromJS(a));return h=B.concat(R),u.applyTemplate(I.get("id"),t.id,h)}return r.default.resolve()}if(p=p.filter(function(e){return e.get("type")===g.elementTypes.photo||e.get("type")===g.elementTypes.calendar}),h=(0,m.updateElementsByTemplate)(I,p,a,t),h&&h.size){h=h.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var Y=I.set("elements",h),W=f.default.List(),F=f.default.List();h.forEach(function(e){e.get("type")===g.elementTypes.photo?F=F.push(e):W=W.push(e)});var H=(0,v.mergeTemplateElements)(Y,F,f.default.fromJS(a));return h=H.concat(W),u.applyTemplate(I.get("id"),t.id,h)}return r.default.resolve()});t.applyTemplate=function(e,t){var n=e.props,o=n.template,a=n.settings,r=n.isCover,i=n.boundTrackerActions,s=n.boundTemplateActions,u=o.details,l=(0,c.default)(a,"spec.size"),d=r?"ChangeCoverLayout":"ChangeInnerLayout";i.addTracker(d+","+t),s.changeApplyTemplateStatus(!0);var p=t+"_"+l;u[p]?y(e,u[p]).then(function(){s.changeApplyTemplateStatus(!1)}):s.getTemplateInfo(t,l).then(function(n){var o=(0,h.convertResultToJson)(n),a=(0,h.formatTemplateInstance)(o,[t],l);a&&a.length&&y(e,a[0][p]).then(function(){s.changeApplyTemplateStatus(!1)})})},t.applyRelativeTemplate=function(e,t){var n=e.props,o=n.settings,a=n.boundTemplateActions,r=n.paginationSpread,i=n.boundPaginationActions,s=n.pagination,u=r.get("pages"),l=(0,c.default)(s,"pageId"),d=u.find(function(e){return e.get("id")===l}),p=d&&d.get("enabled");p||(d=u.get("0"),i.switchPage(0,d.get("id")));var f=d&&d.getIn(["template","tplGuid"]),g=t.size||(0,c.default)(o,"spec.size"),h=t.orientation||(0,c.default)(o,"spec.orientation"),m="Portrait"!==h?g.split("X")[1]+"X"+g.split("X")[0]:g;a.getRelationTemplate(f,m).then(function(t){var n=(0,c.default)(t,"data.guid");n&&n!==-1&&a.getTemplateInfo(n,m).then(function(){e.applyTemplate(n)})})}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.props.env.userInfo,o=t.env.userInfo,a=o.get("id"),r=e.props,i=r.boundProjectActions,s=r.boundEnvActions,u=r.boundTemplateActions,l=r.boundPriceActions,c=r.boundTrackerActions,p=(r.boundConfirmModalActions,r.project),f=(r.translations,r.boundStyleActions),g=p.property,h=p.setting,m=g.get("projectId"),v=g.get("title"),y=h.get("product");if(n!==o){if(a===-1)return window.onbeforeunload=null,void(window.location="/sign-in.html");m!==-1?d.default.all([i.getProjectData(m),i.getProjectTitle(m),i.getOrderInfo(m)]).then(function(){i.projectLoadCompleted(),c.addTracker("LoadComplete")}):(v&&s.addAlbum(a,v).then(function(){s.getAlbumId(a,v).then(function(){i.projectLoadCompleted()})}),f.getStyleList(h.get("size"),y),u.getTemplateList(o.get("id"),h.get("size"),M.templateTypes[y]),l.getProductPrice(h.toJS()),c.addTracker("LoadComplete"))}var I=v,T=t.project.property.get("title");I!==T&&s.getAlbumId(a,T)}function r(e){var t=e.props.boundNotificationActions;t.clearNotification(),window.onbeforeunload=null,window.open(M.loginPath,"newwindow"),setTimeout(function(){window.onbeforeunload=function(){return"Unsaved changes(If any) will be discarded. Are you sure to exit?"}},0)}function i(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=e.props,s=i.boundProjectActions,u=i.boundNotificationActions,l=i.boundAlertModalActions,c=(i.boundCloneModalActions,i.boundTrackerActions),f=i.project,h=i.env,v=i.spec,M=h.userInfo,T=v.version;return s.saveProject(f,M,T).then(function(i){var h="success"===(0,p.default)(i,"status");if(h){var v=new d.default(function(n,r){c.addTracker("SaveComplete,success"),s.deleteServerPhotos();var l=+(0,p.default)(i,"data.guid");f.property.get("projectId")===-1&&l&&(s.updateProjectId(l),window.history.replaceState({},"calendar","?"+g.default.stringify({initGuid:l}))),l&&(t&&"function"==typeof t?t():a&&(e.projectSaveSuccessNode||u.addNotification({children:m.default.createElement("div",{ref:function(t){return e.projectSaveSuccessNode=t}},"Project saved successfully!"),level:"success",autoDismiss:2}),n()),(0,y.getScreenShot)(".book-cover-screenshot canvas",o).then(function(e){s.uploadCoverImage(e).then(function(){n()},function(){r()})}))});return v}if(c.addTracker("SaveComplete,failed"),n&&"function"==typeof n&&n(),f.property.get("projectId")===-1)l.showAlertModal({title:"Error",message:"We are so apologize that something error occurred, please try again later",escapeClose:!1,isHideIcon:!0,onButtonClick:function(){window.onbeforeunload=null,window.location="/create.html"}});else{var M=+(0,p.default)(i,"errorCode"),T="Project save failed! Please try again later.";I.codesOfSaveProject.sessionTimeout===M&&(T=m.default.createElement("div",null,"Your session has timed out. You must log in again to continue. Clicking ",m.default.createElement("a",{onClick:r.bind(e,e)},"log in")," ","will open a new window. Once successfully log in, you may return to this window to continue editing.")),a&&(e.errorMessageNode||u.addNotification({children:m.default.createElement("div",{ref:function(t){return e.errorMessageNode=t}},T),level:"error",autoDismiss:0}))}return d.default.reject()},function(){return e.networkDisconnectNode||u.addNotification({children:m.default.createElement("div",{ref:function(t){return e.networkDisconnectNode=t}},"No interenet connection, please check your network and try again."),level:"error",autoDismiss:0}),d.default.reject()})}function s(e,t,n){var o=e.props,a=o.boundProjectActions,r=o.boundNotificationActions,i=o.project,s=o.env,u=o.spec,l=s.userInfo,d=u.version;a.cloneProject(i,l,d,t).then(function(o){var i="success"===(0,p.default)(o,"status");if(i){var s=+(0,p.default)(o,"data.guid");s&&(a.updateProjectId(s),a.changeProjectTitle(t),a.clearOrderInfo(),window.history.replaceState({},"PhotoBook","?"+g.default.stringify({initGuid:s})),(0,y.getScreenShot)(".book-cover-screenshot canvas").then(function(t){a.uploadCoverImage(t).then(function(){n?n():e.projectClonedSuccessNode||r.addNotification({children:m.default.createElement("div",{ref:function(t){return e.projectClonedSuccessNode=t}},"Project cloned successfully!"),level:"success",autoDismiss:2})})}))}else e.projectClonedFailedNode||r.addNotification({children:m.default.createElement("div",{ref:function(t){return e.projectClonedFailedNode=t}},"Project clone failed! Please try again later."),level:"error",autoDismiss:0})})}function u(e){var t=e.props,n=t.boundProjectActions,o=t.project,a=o.property.get("mainProjectUid"),r=o.property.get("crossSellMainEncImgId");n.loadMainProjectImages(a,r).then(function(t){e.autoFill(t,!1).then(function(){n.changeProjectProperty({shouldSaveProjectAfterCrossSell:!0})})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDefaultTemplateToPage=t.toggleModal=t.doPrepare=void 0;var l=n(14),d=o(l),c=n(12),p=o(c);t.doUserThings=a,t.openLoginPage=r,t.onSaveProject=i,t.onCloneProject=s,t.loadMainProjectImages=u;var f=n(36),g=o(f),h=n(3),m=o(h),v=n(42),y=n(496),M=n(9),I=n(294);t.doPrepare=function(e){var t=e.props,n=t.boundEnvActions,o=t.boundSpecActions,a=t.boundQueryStringActions,r=t.boundProjectActions,i=t.project,s=t.boundCapabilitiesActions,u=t.boundFontActions;i.setting;a.parser(),n.getEnv().then(function(){var t=e.props.env,a=t.qs.get("isPreview");a||u.getFontList(),s.initCapabilities();var l=i.property.get("encProjectIdString");l?o.getSpecData().then(function(){r.getPreviewProjectData(l).then(function(){r.projectLoadCompleted()})}):o.getSpecData().then(function(){n.getUserInfo()})})},t.toggleModal=function(e,t,n){e.toggleUpload(n)},t.applyDefaultTemplateToPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.props,a=o.boundProjectActions,r=o.boundTemplateActions,i=o.project,s=i.setting,u=s.get("size");r.getTemplateInfo(t,u).then(function(e){var o=t+"_"+u,r=(0,v.convertResultToJson)(e),i=(0,v.formatTemplateInstance)(r,[t],u);n?a.applyDefaultTemplateToCover(i[0][o]):a.applyDefaultTemplateToPages(i[0][o])})}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(12),m=a(h),v=n(3),y=a(v),M=n(618),I=a(M),T=n(65),w=n(2),E=a(w),b=n(160),S=a(b),D=n(15),A=n(408),N=a(A),_=n(295);n(297),n(315);var C=n(493);n(223),n(272);var P=n(9);n(221),n(222);var x=n(44),O=a(x),L=n(280),j=a(L),k=n(393),z=a(k),R=n(420),U=a(R),B=n(384),Y=a(B),W=n(430),F=a(W),H=n(429),G=a(H),Q=n(361),X=a(Q),Z=n(83),J=n(84),V=n(425),q=o(V),K=n(426),$=o(K),ee=n(427),te=function(e){function t(e){(0,u.default)(this,t);var n=e.boundUploadImagesActions,o=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return o.doPrepare=function(){return(0,ee.doPrepare)(o)},o.toggleModal=function(e,t){return(0,ee.toggleModal)(n,e,t)},o.applyDefaultTemplateToPage=function(e,t){return(0,ee.applyDefaultTemplateToPage)(o,e,t)},o.onSaveProject=function(e,t,n,a){return(0,ee.onSaveProject)(o,e,t,n,a)},o.onCloneProject=function(e,t){return(0,ee.onCloneProject)(o,e,t)},o.recomputedPreviewRatios=function(e){return q.recomputedPreviewRatios(e)},o.recomputedWorkspaceRatio=function(e){return q.recomputedWorkspaceRatio(e)},o.onresizingHandler=function(){return q.resizingHandler(o)},o.loadMainProjectImages=function(){return(0,ee.loadMainProjectImages)(o)},o.autoFill=function(e,t){return $.autoFill(o,e,t)},o.applyTemplate=function(e){return $.applyTemplate(o,e)},o.applyRelativeTemplate=function(e){return $.applyRelativeTemplate(o,e)},o.showPreviewModal=function(e){var t=e||o.props,n=t.boundPreviewModalActions;n.show()},o.state={isCoverDefaultTemplateUsed:!1,isInnerDefaultTemplateUsed:!1,shouldSaveProjectAfterTemplateUsed:!1},(0,C.initGlobalVariables)(),o}return(0,g.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){this.doPrepare()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.env,o=t.project,a=t.boundPriceActions,r=t.boundTemplateActions,i=(0,m.default)(n,"qs"),s=(0,m.default)(n,"userInfo"),u=s?s.get("id"):-1,l=!!i&&i.get("isPreview"),d=e.project,c=o,p=d.setting,f=c.setting,g=p.get("size"),h=f.get("size"),v=p.get("orientation"),y=f.get("orientation"),M=f.get("product");g!==h&&a.getProductPrice(f.toJS()),g===h&&v===y||u===-1||r.getTemplateList(u,h,P.templateTypes[M]);var I=c.property.get("projectId"),T=d.property.get("isProjectLoadCompleted"),w=c.property.get("isProjectLoadCompleted");I!==-1||l||T===w||this.onSaveProject(function(){},null,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=this;(0,ee.doUserThings)(this,e);var n=e.boundProjectActions,o=e.env,a=o.userInfo,r=(o.qs,a.get("id")),i=(0,m.default)(this.props,"settings.spec.size"),s=(0,m.default)(e,"settings.spec.size"),u=(0,m.default)(this.props,"size.baseWidth"),l=(0,m.default)(e,"size.baseWidth");(l&&u!==l||i&&i!==s)&&(this.recomputedWorkspaceRatio(e),this.recomputedPreviewRatios(e));var d=(0,m.default)(this.props,"env.qs"),c=(0,m.default)(e,"env.qs");d.get("isPreview")!==c.get("isPreview")&&c.get("isPreview")&&this.showPreviewModal(e);var p=(this.props.project.property.get("isProjectLoadCompleted"),e.project.property.get("isProjectLoadCompleted"),e.project.property.get("isNewProject")),f=e.project.property.get("crossSell");if(p){var g=this.props.template.list.coverDefaultTemplateGuid,h=e.template.list.coverDefaultTemplateGuid,v=this.props.template.list.innerDefaultTemplateGuid,y=e.template.list.innerDefaultTemplateGuid;h&&!this.state.isCoverDefaultTemplateUsed&&g!==h&&(this.applyDefaultTemplateToPage(h,!0),this.setState({isCoverDefaultTemplateUsed:!0})),y&&!this.state.isInnerDefaultTemplateUsed&&v!==y&&(this.applyDefaultTemplateToPage(y),this.setState({isInnerDefaultTemplateUsed:!0}));var M=(0,m.default)(this.props,"project"),I=(0,m.default)(e,"project"),T=I.property.get("projectId"),w=M.property.get("isCoverDefaultTemplateUsed"),E=I.property.get("isCoverDefaultTemplateUsed"),b=M.property.get("isInnerDefaultTemplateUsed"),S=I.property.get("isInnerDefaultTemplateUsed");w===E&&b===S||this.setState({shouldSaveProjectAfterTemplateUsed:!0}),T&&T!==-1&&this.state.shouldSaveProjectAfterTemplateUsed&&(this.onSaveProject(function(){},null,!0),this.setState({shouldSaveProjectAfterTemplateUsed:!1})),E&&w!==E&&c.get("isFromMyPhoto")&&n.getMyPhotosInfo(r).then(function(e){t.autoFill(e).then(function(){n.changeProjectProperty({shouldSaveProjectAfterMyPhotos:!0})})}),f&&E&&w!==E&&this.loadMainProjectImages();var D=I.property.get("shouldSaveProjectAfterCrossSell");T&&T!==-1&&D&&(this.onSaveProject(function(){},null,!0),n.changeProjectProperty({shouldSaveProjectAfterCrossSell:!1}))}}},{key:"componentDidMount",value:function(){var e=!0;(0,_.addEventListener)(window,"resize",this.onresizingHandler),/isPreview/.test(window.location.href)||(window.onbeforeunload=function(){return"Unsaved changes(If any) will be discarded. Are you sure to exit?"}),e||(window.onbeforeunload=null);var t=this.props.boundNotificationActions;t.initNotificationSystem(this.refs.notificationSystem)}},{key:"componentWillUnmount",value:function(){(0,_.removeEventListener)(window,"resize",this.onresizingHandler)}},{key:"render",value:function(){var e=this.props,t=e.translations,n=e.env,o=e.confirmModal,a=(e.summary,e.upload),r=e.project,i=e.sidebar,s=e.paginationSpread,u=e.uploadedImages,l=e.settings,d=e.imageUsedMap,c=e.imageEditModal,p=e.alertModal,f=e.cloneModal,g=e.pagination,h=e.price,v=e.parameters,M=e.allSheets,T=e.allImages,w=e.fontList,b=e.textEditModal,A=e.previewModal,_=e.previewRatios,C=e.previewSize,P=e.capabilities,x=e.urls,L=e.size,k=e.ratios,R=e.variables,B=e.template,W=e.specData,H=e.capability,Q=e.autoAddPhotoToCanvas,Z=e.boundEnvActions,J=e.boundTrackerActions,V=e.boundImagesActions,q=e.boundProjectActions,K=e.boundSidebarActions,$=(e.boundUploadImagesActions,e.boundContactUsActions),ee=e.uploadingImages,te=e.contactUsModal,ne=e.boundImageEditModalActions,oe=e.boundNotificationActions,ae=e.boundConfirmModalActions,re=e.boundAlertModalActions,ie=e.boundTemplateActions,se=(e.boundPaginationActions,e.boundTextEditModalActions),ue=(e.boundPropertyModalActions,e.boundCloneModalActions),le=e.boundPriceActions,de=e.boundPreviewModalActions,ce=n.urls,pe=this.toggleModal,fe=!1,ge=!0,he=n.userInfo.get("id"),me=(0,m.default)(n,"userInfo"),ve={boundProjectActions:q,boundTrackerActions:J,boundCloneModalActions:ue,boundNotificationActions:oe,boundConfirmModalActions:ae,boundAlertModalActions:re,boundPreviewModalActions:de,onSaveProject:this.onSaveProject,onCloneProject:this.onCloneProject},ye={env:n,project:r},Me={boundTrackerActions:J,boundImageEditModalActions:ne},Ie={settings:l},Te=s.get("pages"),we=g.pageId,Ee=Te.find(function(e){return e.get("id")===we}),be={toggleModal:pe,boundImagesActions:V,boundProjectActions:q,boundTrackerActions:J,boundContactUsActions:$,boundImageEditModalActions:ne,boundConfirmModalActions:ae,boundAlertModalActions:re,boundCloneModalActions:ue,boundEnvActions:Z,boundPreviewModalActions:de,boundTextEditModalActions:se,onSaveProject:this.onSaveProject,onCloneProject:this.onCloneProject,autoFill:this.autoFill},Se={alertModal:p,confirmModal:o,cloneModal:f,env:n,upload:a,project:r,settings:l,parameters:v,allSheets:M,allImages:T,baseUrls:ce,fontList:w,textEditModal:b,pagination:E.default.fromJS(g),autoAddPhotoToCanvas:Q,uploadingImages:ee,contactUsModal:te,imageEditModal:c,previewModal:A,previewRatios:_,previewSize:C,capabilities:P,currentPage:Ee,variables:R,ratio:k.workspace,elementArray:r.elementArray,userInfo:me},De={toggleModal:pe,boundImagesActions:V,boundProjectActions:q,boundTrackerActions:J,boundSidebarActions:K,boundPriceActions:le,boundTemplateActions:ie,onApplyTemplate:this.applyTemplate,applyRelativeTemplate:this.applyRelativeTemplate},Ae={sidebar:i,uploadedImages:u,baseUrls:ce,imageUsedMap:d,project:r,isShowSideBar:!0,settings:l,allImages:T,userInfo:me},Ne={boundTrackerActions:J},_e={price:h,parameters:v,settings:l},Ce={},Pe={urls:x,size:L,ratios:k,variables:R,template:B,pagination:g,paginationSpread:s,settings:l,parameters:v,isPreview:fe,specData:W,project:r,allImages:T,userId:he,capability:H,allSheets:M,userInfo:me};return y.default.createElement(D.TranslatorProvider,{translations:t},y.default.createElement("div",{className:"app"},y.default.createElement("div",{className:"main-modules"},y.default.createElement(z.default,{actions:ve,data:ye}),y.default.createElement(Y.default,{actions:Ne,data:_e}),y.default.createElement(U.default,{actions:Me,data:Ie}),y.default.createElement(N.default,{actions:De,data:Ae})),fe?null:y.default.createElement(j.default,{userId:he,keepAlive:Z.keepAlive}),y.default.createElement(F.default,{actions:be,data:Se}),y.default.createElement(I.default,{ref:"notificationSystem",style:G.default}),y.default.createElement(O.default,{loadingText:"Loading...",isShown:!ge}),Pe?y.default.createElement(X.default,{actions:Ce,data:Pe}):null,y.default.createElement(S.default,null)))}}]),t}(v.Component);t.default=(0,T.connect)(J.mapStateToProps,Z.mapAppDispatchToProps)(te)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={Containers:{DefaultStyle:{marginTop:"50px",width:"inherit"}},NotificationItem:{DefaultStyle:{fontSize:"12px",padding:"16px 45px 16px 20px",minHeight:"50px",boxSizing:"border-box",minWidth:"220px",maxWidth:"530px",border:"1px solid #ccc",backgroundColor:"#fff",boxShadow:"0 2px 2px rgba(0, 0, 0, 0.16)",lineHeight:"18px"},success:{color:"#3a3a3a"},error:{color:"#de3418",fontStyle:"italic"}},Dismiss:{DefaultStyle:{fontWeight:"normal",backgroundColor:"inherit",borderRadius:"inherit",color:"#7b7b7b",fontSize:"22px",lineHeight:"21px",width:"20px",height:"20px",top:"50%",right:"15px",transform:"translate(0, -50%)"}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),r=o(a),i=n(6),s=o(i),u=n(4),l=o(u),d=n(5),c=o(d),p=n(8),f=o(p),g=n(7),h=o(g),m=n(12),v=o(m),y=n(3),M=o(y),I=n(15),T=n(372),w=o(T),E=n(419),b=o(E),S=(n(9),n(374)),D=o(S),A=n(362),N=o(A),_=n(371),C=o(_),P=n(401),x=o(P),O=n(412),L=o(O),j=n(283),k=o(j);n(273);var z=function(e){function t(e){(0,l.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.closeImageEditModal=n.closeImageEditModal.bind(n),n.closeConfirmModalByX=n.closeConfirmModalByX.bind(n),n.closePreviewModal=n.closePreviewModal.bind(n),n.closeTextEditModal=n.closeTextEditModal.bind(n),n}return(0,h.default)(t,e),(0,c.default)(t,[{key:"closeImageEditModal",value:function(){var e=this.props.actions,t=e.boundImageEditModalActions;t.hideImageEditModal()}},{key:"closeConfirmModalByX",value:function(){var e=this.props,t=e.actions,n=e.data,o=t.boundConfirmModalActions,a=n.confirmModal;o.hideConfirm(),a.get("xCloseFun")&&"function"==typeof a.get("xCloseFun")&&a.get("xCloseFun")()}},{key:"closePreviewModal",value:function(){var e=this.props.actions,t=e.boundPreviewModalActions;t.hide()}},{key:"closeTextEditModal",value:function(){var e=this.props.actions,t=e.boundTextEditModalActions;t.hideTextEditModal()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.actions,o=t.env,a=t.confirmModal,i=t.uploadingImages,s=t.contactUsModal,u=t.upload,l=t.project,d=t.ratio,c=t.capabilities,p=t.cloneModal,f=t.imageEditModal,g=t.alertModal,h=t.baseUrls,m=t.previewRatios,y=t.previewSize,I=t.variables,T=t.settings,E=t.allSheets,S=t.fontList,A=t.textEditModal,_=t.pagination,P=t.parameters,O=t.elementArray,j=t.previewModal,z=t.currentPage,R=t.autoAddPhotoToCanvas,U=n.boundNotificationActions,B=n.boundConfirmModalActions,Y=n.boundEnvActions,W=n.boundContactUsActions,F=n.toggleModal,H=n.boundImagesActions,G=n.boundProjectActions,Q=n.boundTrackerActions,X=n.onSaveProject,Z=n.onCloneProject,J=n.boundAlertModalActions,V=n.boundCloneModalActions,q=n.autoFill,K={isInPreviewModel:(0,v.default)(o,"qs").get("isPreview"),isShown:j.get("isShown"),urls:h.toJS(),ratios:m,size:y,variables:I,settings:T,project:l,pagination:_,parameters:P,allSheets:E,capability:c.get("previewPages"),userInfo:o.userInfo},$={closePreviewModal:this.closePreviewModal},ee=/isPreview/.test(window.location.href),te=o.userInfo.get("id"),ne=f.toJS();return te===-1||ee?M.default.createElement("div",{className:"modals"},M.default.createElement(x.default,{actions:$,data:K})):M.default.createElement("div",{className:"modals"},M.default.createElement(b.default,{opened:u.get("isShown"),uploadingImages:i,boundUploadedImagesActions:H,boundProjectActions:G,boundContactUsActions:W,toggleModal:F,env:o,project:l,autoAddPhotoToCanvas:R,addTracker:Q.addTracker,saveProject:X,autoFill:q}),a.get("isShown")?M.default.createElement(w.default,{isShown:!0,onOkClick:a.get("onOkClick"),confirmTitle:a.get("confirmTitle"),confirmMessage:a.get("confirmMessage"),okButtonText:a.get("okButtonText"),cancelButtonText:a.get("cancelButtonText"),onCancelClick:a.get("onCancelClick"),hideOnOk:a.get("hideOnOk"),activeButton:a.get("activeButton"),cancelInFirst:a.get("cancelInFirst"),closeConfirmModal:B.hideConfirm,closeConfirmModalByX:this.closeConfirmModalByX}):null,g.get("isShown")?M.default.createElement(N.default,{isShown:!0,title:g.get("title"),onButtonClick:g.get("onButtonClick"),message:g.get("message"),escapeClose:g.get("escapeClose"),isHideIcon:g.get("isHideIcon"),closeAlertModal:J.hideAlertModal}):null,M.default.createElement(k.default,(0,r.default)({},ne,{onCancelClick:this.closeImageEditModal})),p.get("isShown")?M.default.createElement(C.default,{env:o,userId:te,isShown:!0,onCloneProject:Z,addAlbum:Y.addAlbum,checkProjectTitle:G.checkProjectTitle,closeCloneModal:V.hideCloneModal,addTracker:Q.addTracker,uploadCoverImage:G.uploadCoverImage}):null,S.length?M.default.createElement(L.default,{fontList:S,baseUrl:h.get("baseUrl"),isShown:A.get("isShown"),element:A.get("element"),variables:I,currentPage:z,elementArray:O,closeTextEditModal:this.closeTextEditModal,updateElement:G.updateElement,ratio:d}):null,s.get("isShown")?M.default.createElement(D.default,{env:o,project:l,isShown:!0,boundContactUsActions:W,addNotification:U.addNotification}):null,M.default.createElement(x.default,{actions:$,data:K}))}}]),t}(y.Component);z.propTypes={actions:y.PropTypes.object.isRequired,data:y.PropTypes.object.isRequired},t.default=(0,I.translate)("Modals")(z)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyRelativeTemplate=t.applyTemplate=t.autoFill=void 0;var a=n(14),r=o(a),i=n(11),s=o(i),u=n(55),l=o(u),d=n(12),c=o(d),p=n(2),f=o(p),g=n(9),h=n(42),m=n(40),v=n(53),y=(t.autoFill=function(e,t){var n=e.props,o=n.project,a=n.boundProjectActions,r=(0,c.default)(o,"pageArray"),i=(0,c.default)(o,"cover"),u=i.get("containers"),l=[],d=0,p=[],f=(0,s.default)([],t);f.sort(function(e,t){return(0,c.default)(e,"shotTime")-(0,
c.default)(t,"shotTime")}),u&&u.size&&u.forEach(function(e){var t=e.get("elements");t&&t.size&&t.forEach(function(e){e.get("type")!==g.elementTypes.photo||e.get("encImgId")||l.push(e.get("id"))})}),r&&r.size&&r.forEach(function(e){var t=e.get("elements");t&&t.size&&t.forEach(function(e){e.get("type")!==g.elementTypes.photo||e.get("encImgId")||l.push(e.get("id"))})}),l.forEach(function(e){if(f[d]){var t=f[d];p.push({id:e,encImgId:t.encImgId,imageid:t.imageId,imgRot:0,style:{effectId:0,opacity:100,brightness:0},imgFlip:!1}),d+=1}}),a.updateElements(p)},function(e,t){var n=e.props,o=n.paginationSpread,a=n.uploadedImages,i=n.ratios,s=(n.fontList,n.pagination),u=(n.settings,n.boundProjectActions),d=n.boundPaginationActions,p=[],h=[],y=(t.elements,o.get("pages")),M=(0,c.default)(s,"pageId"),I=y.find(function(e){return e.get("id")===M}),T=I&&I.get("enabled");T||(I=y.get("0"),d.switchPage(0,I.get("id")));var w=(I.get("height")*i.workspace,I.get("width")*i.workspace,I.get("elements")),E=w.filter(function(e){return e.get("type")===g.elementTypes.photo&&!!e.get("encImgId")}),b=w.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),S=w.filter(function(e){return e.get("type")===g.elementTypes.calendar}),D=E.concat(b);D.forEach(function(e){p.push(e)}),S.forEach(function(e){p.push(e)});var A=t.elements,N=A.filter(function(e){return e.type===g.elementTypes.text});if(N.length){var _=p.filter(function(e){return e.get("type")===g.elementTypes.text&&!!e.get("text")}),C=p.filter(function(e){return e.get("type")===g.elementTypes.photo}),P=A.filter(function(e){return e.type===g.elementTypes.text}),x=P.length,O=_.length;if(O>=x){for(var L=[],j=(0,l.default)(_,function(e){return-e.get("lastModified")}),k=0;k<x;k++)L.push(j[k]);p=C.concat(L)}if(h=(0,m.updateElementsByTemplate)(I,p,a,t),h&&h.size){h=h.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var z=I.set("elements",h),R=f.default.List(),U=f.default.List();h.forEach(function(e){e.get("type")===g.elementTypes.photo?U=U.push(e):R=R.push(e)});var B=(0,v.mergeTemplateElements)(z,U,f.default.fromJS(a));return h=B.concat(R),u.applyTemplate(I.get("id"),t.id,h)}return r.default.resolve()}if(p=p.filter(function(e){return e.get("type")===g.elementTypes.photo||e.get("type")===g.elementTypes.calendar}),h=(0,m.updateElementsByTemplate)(I,p,a,t),h&&h.size){h=h.map(function(e){return e.get("type")===g.elementTypes.photo?e.get("border")?e:e.merge(g.defaultBorder):e});var Y=I.set("elements",h),W=f.default.List(),F=f.default.List();h.forEach(function(e){e.get("type")===g.elementTypes.photo?F=F.push(e):W=W.push(e)});var H=(0,v.mergeTemplateElements)(Y,F,f.default.fromJS(a));return h=H.concat(W),u.applyTemplate(I.get("id"),t.id,h)}return r.default.resolve()});t.applyTemplate=function(e,t){var n=e.props,o=n.template,a=n.settings,r=n.isCover,i=n.boundTrackerActions,s=n.boundTemplateActions,u=o.details,l=(0,c.default)(a,"spec.size"),d=r?"ChangeCoverLayout":"ChangeInnerLayout";i.addTracker(d+","+t),s.changeApplyTemplateStatus(!0);var p=t+"_"+l;u[p]?y(e,u[p]).then(function(){s.changeApplyTemplateStatus(!1)}):s.getTemplateInfo(t,l).then(function(n){var o=(0,h.convertResultToJson)(n),a=(0,h.formatTemplateInstance)(o,[t],l);a&&a.length&&y(e,a[0][p]).then(function(){s.changeApplyTemplateStatus(!1)})})},t.applyRelativeTemplate=function(e,t){var n=e.props,o=n.settings,a=n.boundTemplateActions,r=n.paginationSpread,i=n.boundPaginationActions,s=n.pagination,u=r.get("pages"),l=(0,c.default)(s,"pageId"),d=u.find(function(e){return e.get("id")===l}),p=d&&d.get("enabled");p||(d=u.get("0"),i.switchPage(0,d.get("id")));var f=d&&d.getIn(["template","tplGuid"]),g=t.size||(0,c.default)(o,"spec.size"),h=t.orientation||(0,c.default)(o,"spec.orientation"),m="Portrait"!==h?g.split("X")[1]+"X"+g.split("X")[0]:g;a.getRelationTemplate(f,m).then(function(t){var n=(0,c.default)(t,"data.guid");n&&n!==-1&&a.getTemplateInfo(n,m).then(function(){e.applyTemplate(n)})})}},function(e,t){"use strict"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.switchPageTo=t.switchPage=t.switchSheet=void 0;var o=n(9);t.switchSheet=function(e,t){var n=e.props.boundPaginationActions;n.switchSheet(t.current)},t.switchPage=function(e,t){var n=t||e.props,o=n.boundPaginationActions,a=n.paginationSpread,r=n.pagination,i=a.get("pages"),s=i.findIndex(function(e){return e.get("enabled")});s=s===-1?0:s;var u=i.getIn([s.toString(),"id"]);i.size&&r.pageId!==u&&o.switchPage(s,u)},t.switchPageTo=function(e,t){var n=e.props,a=n.boundPaginationActions,r=n.paginationSpread,i=n.pagination,s=r.get("pages"),u=s.get(t.toString()),l=u.get("type"),d=u.get("id"),c=t;l===o.pageTypes.spine&&++c<s.size&&(u=s.get(c.toString()),d=u.get("id"),l=u.get("type")),s.size&&i.pageId!==d&&t<s.size&&l!==o.pageTypes.full&&l!==o.pageTypes.spine&&a.switchPage(c,d)}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=a(r),s=n(4),u=a(s),l=n(5),d=a(l),c=n(8),p=a(c),f=n(7),g=a(f),h=n(11),m=a(h),v=n(12),y=a(v),M=n(3),I=a(M),T=n(65),w=n(15),E=n(2),b=a(E),S=n(13),D=a(S),A=n(58),N=n(83),_=n(84),C=n(9);n(274);var P=n(142),x=(a(P),n(391)),O=a(x),L=n(432),j=(o(L),n(433)),k=o(j),z=n(431),R=o(z),U=n(141),B=a(U),Y=n(388),W=a(Y),F=function(e){function t(e){(0,u.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.switchSheet=function(e){k.switchSheet(n,e)},n.changeContainerTop=n.changeContainerTop.bind(n),n.applyTemplate=function(e){return R.applyTemplate(n,e)},n.applyRelativeTemplate=function(e){return R.applyRelativeTemplate(n,e)},n.state={isNeedTransition:!1},n}return(0,g.default)(t,e),(0,d.default)(t,[{key:"changeContainerTop",value:function(e){var t=this.props;t.pagination,t.size;e?k.switchPageTo(this,1):k.switchPageTo(this,0),this.setState({isNeedTransition:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=(e.pagination,(0,y.default)(this.props,"pagination.sheetIndex")),n=(0,y.default)(e,"pagination.sheetIndex"),o=this.props.paginationSpread.get("pages"),a=e.paginationSpread.get("pages"),r=(0,y.default)(this.props,"pagination.pageId"),i=(0,y.default)(e,"pagination.pageId"),s=(0,y.default)(this.props,"pagination.total"),u=(0,y.default)(e,"pagination.total"),l=e.project.property.get("isProjectLoadCompleted");t!==n?(k.switchPage(this,e),this.setState({isNeedTransition:!1})):r!==i&&this.setState({isNeedTransition:!0}),(!b.default.is(o,a)&&a.size&&!r||s!==u)&&l&&k.switchPage(this,e),l&&!i&&k.switchPage(this,e)}},{key:"render",value:function(){var e=this.props,t=(e.t,e.env),n=e.size,o=e.ratios,a=e.urls,r=e.paginationSpread,i=e.spec,s=e.variables,u=e.pagination,l=e.settings,d=e.project,c=e.parameters,p=e.allImages,f=e.capability,g=e.template,h=e.styles,v=e.uploadedImages,M=e.boundPaginationActions,T=e.boundProjectActions,w=e.boundImageEditModalActions,E=(e.boundImagesActions,e.boundUploadImagesActions),b=e.boundTextEditModalActions,S=e.boundTemplateActions,N=e.boundTrackerActions,_=r.get("pages"),P=_.find(function(e){return e.get("id")===u.pageId}),x=_.findIndex(function(e){return e.get("id")===u.pageId}),L=P&&P.get("enabled"),j=0===u.sheetIndex,k={workspace:j?(0,y.default)(o,"coverWorkspace"):(0,y.default)(o,"innerWorkspace")},z=(0,m.default)({},g,{list:(0,y.default)(g,"list.coverTemplateList")}),R=((0,m.default)({},g,{list:(0,y.default)(g,"list.innerTemplateList")}),{paginationSpread:r,pagination:u,template:z,setting:l,styles:h,page:P,baseUrls:a,ratios:k,uploadedImages:v,isShow:j&&L,isCover:j}),U={boundTemplateActions:S,boundProjectActions:T,boundTrackerActions:N,boundPaginationActions:M},Y=this.state.isNeedTransition,F=(0,D.default)("one-page"),H=(0,y.default)(l,"spec.product"),G=(0,y.default)(l,"spec.orientation"),Q=(H===C.productTypes.WC,0===u.sheetIndex?(0,y.default)(n,"renderCoverSize.width"):(0,y.default)(n,"renderInnerSize.width")),X=(0,A.getSize)(),Z={position:"relative",width:X.width-280+"px",height:X.height-77-130+"px"},J=(x>0?parseInt(Z.height)-(0,y.default)(n,"renderInnerSize.height"):0,0),V={width:Q+"px",margin:"0 auto",position:"relative",zIndex:100,top:J+"px",transition:0!==u.sheetIndex&&Y?"top 0.7s":""},q=(0,y.default)(t,"userInfo").get("id"),K={boundProjectActions:T,boundPaginationActions:M,boundTrackerActions:N,boundUploadImagesActions:E,boundImageEditModalActions:w,boundTextEditModalActions:b},$={urls:a,size:n,ratios:o,paginationSpread:r,variables:s,pagination:u,settings:l,project:d,parameters:c,allImages:p,userId:q,specData:i,capability:f,userInfo:(0,y.default)(t,"userInfo")};({onPage:this.switchSheet}),{total:u.total,current:u.sheetIndex,minSheetIndex:H===C.productTypes.LC?1:0};return I.default.createElement("div",{className:F},I.default.createElement("div",{className:"available-client",style:Z},I.default.createElement("div",{className:"top-buttons-wrap"},I.default.createElement(O.default,{changeOrientation:T.changeProjectSetting,orientation:G,applyRelativeTemplate:this.applyRelativeTemplate})),I.default.createElement("div",{className:"sheet-container",style:V},(0,y.default)(n,"renderCoverSize.width")?I.default.createElement(B.default,{actions:K,data:$}):null),I.default.createElement("div",{className:"layout-wrap"},I.default.createElement(W.default,{key:"coverLayout",data:R,actions:U}))))}}]),t}(M.Component);F.propTypes={},t.default=(0,T.connect)(_.mapStateToProps,N.mapAppDispatchToProps)((0,w.translate)("OnePage")(F))},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(423),r=o(a),i=n(10),s=n(9),u=n(318),l=n(26);t.default=function(e){return function(t){return function(n){var o=(0,l.getDataFromState)(e.getState()),a=o.queryStringObj,d=o.property,c=o.setting,p=a.get("isPreview"),f=c.get("product"),g=d.get("projectId"),h=s.clientType+"_"+f+","+g;return!p&&f&&g&&(n.type===i.ADD_TRACKER?(0,u.goTracker)(h+","+n.param):n.type in r.default&&(0,u.goTracker)(h+","+r.default[n.type])),t(n)}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(443),i=o(r),s=n(451),u=o(s),l=n(467),d=o(l);t.default=(0,a.combineReducers)({spec:u.default,project:i.default,system:d.default})},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_OPTION_MAP:var n=t.availableOptionMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=n(54),u=((0,s.getQueryStingObj)(),r.default.fromJS({styleId:"null",startYear:"2018",startMonth:"1"}));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case i.INIT_CALENDAR_SETTING:case i.CHANGE_CALENDAR_SETTING:return e.merge(t.calendarSetting);default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s),l=n(144),d=a(l),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_COVER:var n=t.cover;return i.default.Map.isMap(n)?n:e;case u.CREATE_ELEMENTS:var o=t.pageId,a=e.get("containers"),r=a.findIndex(function(e){return e.get("id")===o});if(r!==-1){var s=a.getIn([String(r),"elements"]);return e.setIn(["containers",String(r),"elements"],(0,d.default)(s,t))}return e;case u.DELETE_ELEMENTS:var l=t.elementIds,c=e;return l.forEach(function(e){var n=c.get("containers"),o=n.findIndex(function(t){return t.get("elements").map(function(e){return e.get("id")}).indexOf(e)!==-1});if(o!==-1){var a=n.getIn([String(o),"elements"]);c=c.setIn(["containers",String(o),"elements"],(0,d.default)(a,t))}}),c;case u.UPDATE_ELEMENTS:var p=t.updateObjectArray,f=e;return p.forEach(function(e){var n=e.get("pageId"),o=e.get("elements"),a=f.get("containers"),r=a.findIndex(function(e){return e.get("id")===n});if(r!==-1){var i=a.getIn([String(r),"elements"]);f=f.setIn(["containers",String(r),"elements"],(0,d.default)(i,t,o))}}),f;case u.CHANGE_CALENDAR_SETTING:var g=t.calendarSetting;if(g.get("startYear")){var h=e.getIn(["containers","0","year"]),m=g.get("startYear");if(h&&h!=m)return e.setIn(["containers","0","year"],m)}return e;case u.APPLY_TEMPLATE_TO_PAGES:var v=t.templateDataArray,y=e.get("containers");return v.forEach(function(e){var t=e.get("pageId"),n=e.get("templateId"),o=e.get("elements"),a=y.findIndex(function(e){return e.get("id")===t});if(a!==-1){var r=y.get(a);y=y.set(String(a),r.merge({template:{tplGuid:n},elements:o}))}}),e.set("containers",y);case u.UPDATE_PAGE_TEMPLATE_ID:var M=t.pageId,I=t.templateId,T=e.get("containers"),w=T.findIndex(function(e){return e.get("id")===M});return w!==-1?e.setIn(["containers",String(w),"template","tplGuid"],I):e;case u.DELETE_ALL:var E=e.get("containers");return E.forEach(function(e,n){var o=e.get("elements");E=E.set(String(n),e.merge({elements:(0,d.default)(o,t),template:{tplGuid:""}}))}),e.set("containers",E);default:return e}};t.default=c},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1];switch(t.type){case u.DELETE_PROJECT_IMAGE:var n=t.encImgId;return e.push(n);default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(93),i=a(r),s=n(12),u=a(s),l=n(2),d=a(l),c=n(20),p=n(16),f=o(p),g=n(10),h=o(g);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.List(),t=arguments[1];switch(t.type){case h.API_SUCCESS:switch(t.apiPattern.name){case f.MY_PHOTOS:var n=JSON.parse((0,u.default)(t,"response.data"));if(n&&n.length){var o=n.filter(function(e){return e.id}),a=e.concat(d.default.fromJS(o));return a}return e}case h.SET_IMAGE_ARRAY:var r=t.imageArray;return d.default.List.isList(r)?r:e;case h.UPLOAD_COMPLETE:var s=t.fields,l="object"===(0,i.default)(s.guid)?s.guid.__text.replace(/\s/g,""):s.guid&&s.guid.replace(/\s/g,""),p=d.default.Map((0,c.convertObjIn)({id:s.imageId,guid:l,encImgId:s.encImgId,name:s.name,height:s.height,width:s.width,uploadTime:s.uploadTime,order:e.size,shotTime:s.shotTime,orientation:s.orientation}));return e.push(p);case h.DELETE_PROJECT_IMAGE:var g=t.encImgId;return e.filter(function(e){return e.get("encImgId")!==g});default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s),l=n(51);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_IMAGE_USED_MAP:var n=t.imageUsedMap;return i.default.Map.isMap(n)?n:e;case u.CREATE_ELEMENTS:var o=t.elements,a=(0,l.getImageUsedMap)(o),r=e;return a.size&&a.forEach(function(e,t){var n=r.get(t)||0;r=r.set(t,n+e)}),r;case u.CLEAR_IMAGE_USED_MAP:return i.default.Map();default:return e}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(447),i=o(r);t.default=(0,a.combineReducers)({data:i.default})},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(16),u=o(s),l=n(10),d=o(l),c=n(20),p=i.default.Map({isOrdered:!1,isCheckFailed:!1});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments[1];switch(t.type){case d.API_SUCCESS:switch(t.apiPattern.name){case u.GET_PROJECT_ORDERED_STATUS:var n=t.response,o=n.resultData,a=(0,c.convertObjIn)(o);return e.merge({isOrdered:a.ordered,isCheckFailed:a.checkFailed});default:return e}case d.CLEAR_ORDER_INFO:return p;default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(9),u=n(10),l=o(u),d=n(144),c=a(d),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.List(),t=arguments[1];switch(t.type){case l.SET_PAGE_ARRAY:var n=t.pageArray;return i.default.List.isList(n)?n:e;case l.CREATE_ELEMENTS:case l.DELETE_ELEMENTS:var o=t.pageId,a=e.findIndex(function(e){return e.get("id")===o});if(a!==-1){var r=e.getIn([String(a),"elements"]);return e.setIn([String(a),"elements"],(0,c.default)(r,t))}return e;case l.UPDATE_ELEMENTS:var u=t.updateObjectArray,d=e;return u.forEach(function(n){var o=n.get("pageId"),a=n.get("elements"),r=e.findIndex(function(e){return e.get("id")===o});if(r!==-1){var i=d.getIn([String(r),"elements"]);d=d.setIn([String(r),"elements"],(0,c.default)(i,t,a))}}),d;case l.CREATE_DUAL_PAGE:case l.CREATE_MULTIPLE_DUAL_PAGE:var p=t.insertIndex,f=t.insertPageArray,g=e.slice(0,p),h=e.slice(p);return g.concat(f).concat(h);case l.DELETE_DUAL_PAGE:var m=t.leftPageId,v=t.rightPageId;return e.filter(function(e){var t=e.get("id");return t!==m&&t!==v});case l.CHANGE_PAGE_BGCOLOR:var y=t.pageId,M=t.bgColor,I=e.findIndex(function(e){return e.get("id")===y});return I!==-1?e.setIn([String(I),"bgColor"],M):e;case l.APPLY_TEMPLATE_TO_PAGES:var T=t.templateDataArray,w=e;return T.forEach(function(e){var t=e.get("pageId"),n=e.get("templateId"),o=e.get("elements"),a=w.findIndex(function(e){return e.get("id")===t});if(a!==-1){var r=w.get(a);w=w.set(String(a),r.merge({template:{tplGuid:n},elements:o}))}}),w;case l.UPDATE_PAGE_TEMPLATE_ID:var E=t.pageId,b=t.templateId,S=e.findIndex(function(e){return e.get("id")===E});return S!==-1?e.setIn([String(S),"template","tplGuid"],b):e;case l.MOVE_PAGE_BEFORE:var D=t.pageId,A=t.beforePageId,N=-1,_=-1;e.forEach(function(e,t){var n=e.get("id");n===D&&(N=t),n===A&&(_=t)});var C=e.get(N),P=e;if(N!==-1&&_!==-1){if(C.get("type")===s.pageTypes.sheet){var x=N+1,O=e.get(N+1);P=P.filter(function(e,t){return t!==N&&t!==x}),P=P.slice(0,_).concat(i.default.List([C,O])).concat(P.slice(_))}else P=P.delete(N),P=P.slice(0,1).concat(P.slice(1,_)).concat(i.default.List([C])).concat(P.slice(_));return P}return e;case l.DELETE_ALL:var L=e;return L.forEach(function(e,n){var o=e.get("elements");L=L.set(String(n),e.merge({elements:(0,c.default)(o,t),template:{tplGuid:""}}))}),L;default:return e}};t.default=p},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_PARAMETER_MAP:var n=t.parameterMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(439),i=o(r),s=n(449),u=o(s),l=n(448),d=o(l),c=n(444),p=o(c),f=n(445),g=o(f),h=n(441),m=o(h),v=n(450),y=o(v),M=n(446),I=o(M),T=n(442),w=o(T),E=n(438),b=o(E),S=n(440),D=o(S),A=n(437),N=o(A);t.default=(0,a.combineReducers)({cover:i.default,setting:u.default,property:d.default,pageArray:g.default,orderInfo:p.default,imageArray:m.default,variableMap:y.default,parameterMap:I.default,imageUsedMap:w.default,calendarSetting:b.default,deletedEncImgIds:D.default,availableOptionMap:N.default})},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s),l=n(16),d=o(l),c=n(54),p=n(29),f=a(p),g=(0,c.getQueryStingObj)(),h=g.initGuid||g.mainProjectUid;h&&(f.default.encProjectId=h);var m=i.default.Map({projectId:+h||-1,encProjectIdString:+h?"":h||"",title:g.title,webClientId:g.webClientId,isProjectLoadCompleted:!1,isProjectEdited:!1,isNewProject:h===-1,createdDate:new Date,mainProjectUid:g.mainProjectUid,crossSellMainEncImgId:g.encImageId,crossSell:g.crossSell,isCoverDefaultTemplateUsed:!1,isInnerDefaultTemplateUsed:!1,shouldSaveProjectAfterCrossSell:!1,shouldSaveProjectAfterMyPhotos:!1});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case u.API_SUCCESS:switch(t.apiPattern.name){case d.GET_PROJECT_TITLE:return e.merge({title:t.response.projectName});default:return e}case u.PROJECT_LOAD_COMPLETED:return e.merge({isProjectLoadCompleted:!0});case u.UPDATE_PROJECT_ID:return f.default.encProjectId=t.projectId,e.merge({projectId:t.projectId});case u.CHANGE_PROJECT_TITLE:return e.merge({title:t.title});case u.CHANGE_PROJECT_PROPERTY:return e.merge(t.data);default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=a(r),s=n(530),u=a(s),l=n(2),d=a(l),c=n(10),p=o(c),f=n(54),g=(0,f.getQueryStingObj)(),h=(0,u.default)(g,["size","product","numberOfMonth"]),m=d.default.Map((0,i.default)({},h,{orientation:"Portrait"}));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments[1];switch(t.type){case p.INIT_PROJECT_SETTING:case p.CHANGE_PROJECT_SETTING:return e.merge(t.setting);default:return e}}},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.SET_VARIABLE_MAP:var n=t.variableMap;return i.default.Map.isMap(n)?n:e;default:return e}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(453),i=o(r),s=n(452),u=o(s);t.default=(0,a.combineReducers)({version:i.default,data:u.default})},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=a(r),s=n(10),u=o(s),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case u.INIT_SPEC_DATA:var n=t.configurableOptionArray,o=t.allOptionMap,a=t.parameterArray,r=t.variableArray,s=t.disableOptionArray,l=t.version;return(0,i.default)({},{version:l,configurableOptionArray:n,allOptionMap:o,parameterArray:a,variableArray:r,disableOptionArray:s});default:return e}};t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),r=o(a),i=n(10),s=n(16),u=n(20),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case i.API_SUCCESS:switch(t.apiPattern.name){case s.GET_SPEC_VERSION_DATA:var n=(0,r.default)(t,"response.resultData.specVersionData");return(0,u.convertObjIn)(n);default:return e}default:return e}};t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.default.Map({}),t=arguments[1];switch(t.type){case i.SET_CAPABILITIES:return e.merge(t.capabilities);default:return e}};t.default=s},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=a(r),s=n(10),u=o(s),l=n(16),d=o(l),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case u.API_SUCCESS:switch(t.apiPattern.name){case d.GET_USER_ALBUM_ID:case d.ADD_ALBUM:return+(0,i.default)(t.response,"resultData.albumId")||-1;default:return e}default:return e}};t.default=c},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(457),i=o(r),s=n(458),u=o(s),l=n(459),d=o(l),c=n(455),p=o(c);t.default=(0,a.combineReducers)({qs:i.default,urls:u.default,userInfo:d.default,albumId:p.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=n(20),i=(0,o.fromJS)({initGuid:-1,webClientId:1,product:"",size:"",paper:"",paperThickness:"",title:""}),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case a.PARSER_QUERYSTRING:return e.merge((0,r.convertObjIn)(t.value));default:return e}};t.default=s},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),r=o(a),i=n(12),s=o(i),u=n(2),l=n(10),d=n(16),c=(0,u.fromJS)({}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case l.API_SUCCESS:if(t.apiPattern.name===d.GET_ENV){var n=t.response,o=e.merge(n.env,{liveUpdateCropImage:(0,r.default)(d.IMAGES_CROPPER)((0,s.default)(n,"env"))});return o}return e;default:return e}};t.default=p},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=n(10),i=n(16),s=n(20),u=n(29),l=o(u),d=(0,a.fromJS)({id:-1}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case r.API_SUCCESS:if(t.apiPattern.name===i.GET_SESSION_USER_INFO){var n=t.response,o=n.userSessionData.user;return o.id?(l.default.customerId=o.id,l.default.token=o.authToken,l.default.timestamp=o.timestamp,e.merge((0,s.convertObjIn)(o))):e.merge((0,s.convertObjIn)(o),{id:-1})}return e;default:return e}};t.default=c},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.fontFamilies.fontFamily,n=[];return t.forEach(function(e){var t=(0,c.default)({},e,{font:(0,f.default)(e.font)?[].concat((0,s.default)(e.font)):[e.font]});n.push(t)}),n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(47),s=a(i),u=n(12),l=a(u),d=n(11),c=a(d),p=n(46),f=a(p),g=n(10),h=o(g),m=n(16),v=o(m),y=n(20),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case h.API_SUCCESS:switch(t.apiPattern.name){case v.GET_FONTS:var n=(0,l.default)(t,"response.fontConfig");return(0,y.convertObjIn)(r(n));default:return e}default:return e}};t.default=M},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(464),i=o(r),s=n(462),u=o(s),l=n(463),d=o(l);t.default=(0,a.combineReducers)({ratio:i.default,material:u.default,pagination:d.default})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(48),r=o(a),i=n(2),s=n(10),u={img:null,base64:null,size:{width:0,height:0},paddings:{top:0,right:0,bottom:0,left:0}},l=(0,i.fromJS)({cover:JSON.parse((0,r.default)(u)),inner:JSON.parse((0,r.default)(u)),originalMaterials:null,isDownloadCompleted:!1}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case s.UPDATE_COVER_MATERIAL:return e.merge({cover:t.data});case s.UPDATE_INNER_MATERIAL:return e.merge({inner:t.data});case s.SET_ORIGINAL_MATERIALS:return e.merge({originalMaterials:t.data});case s.DOWNLOAD_MATERIALS_STATUS:return e.merge({isDownloadCompleted:t.isCompeleted});default:return e}};t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.Map)({prevSheetIndex:-1,prevPageIndex:-1,sheetIndex:0,pageIndex:0,pageId:""}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.SWITCH_SHEET:var n=e.get("sheetIndex");return n!==t.index?e.merge({prevSheetIndex:n,sheetIndex:t.index}):e;case a.SWITCH_PAGE:return e.merge({prevPageIndex:e.get("pageIndex"),pageIndex:t.index,pageId:t.id});default:return e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.Map)({coverWorkspace:0,innerWorkspace:0,previewCoverWorkspace:0,previewInnerWorkspace:0,coverWorkspaceForArrangePages:0,innerWorkspaceForArrangePages:0}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.UPDATE_RATIO:var n=t.ratios,o={};return n.forEach(function(e){o[e.type]=e.ratio}),e.merge(o);default:return e}};t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),r=o(a),i=n(22),s=n(10),u=n(466),l=o(u),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:!1},t=arguments[1];switch(t.type){case s.AUTO_ADD_PHOTO_TO_CANVAS:var n=t.params;return(0,r.default)({},e,n);default:return e}};t.default=(0,i.combineReducers)({uploading:l.default,autoAddPhotoToCanvas:d})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),r=o(a),i=n(589),s=o(i),u=n(92),l=o(u),d=n(11),c=o(d),p=n(17),f=n(10),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case f.ADD_IMAGES:
var n=(0,s.default)(t.files),o=n.map(function(e){return e.guid=(0,p.guid)(),{file:e}});return[].concat((0,r.default)(e),(0,r.default)(o));case f.RETRY_IMAGE:var a=(0,c.default)([],e),i=a.findIndex(function(e){return e.file.guid==t.guid});return(0,l.default)(a,""+i,(0,c.default)({},a[i],{retryCount:a[i].retryCount?a[i].retryCount+1:1}));case f.CLEAR_IMAGES:return[];case f.DELETE_IMAGE:var u=e.findIndex(function(e){return e.guid==t.guid});return[].concat((0,r.default)(e.slice(0,u)),(0,r.default)(e.slice(u+1)));case f.ERROR_TO_FIRST:var u=e.findIndex(function(e){return e.imageId==t.imageId}),d=(0,c.default)([],e),g=d.splice(u,1);return d.unshift(g[0]),d;default:return e}};t.default=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(456),i=o(r),s=n(461),u=o(s),l=n(473),d=o(l),c=n(479),p=o(c),f=n(482),g=o(f),h=n(465),m=o(h),v=n(480),y=o(v),M=n(460),I=o(M),T=n(486),w=o(T),E=n(454),b=o(E),S=n(484),D=o(S);t.default=(0,a.combineReducers)({env:i.default,global:u.default,modals:d.default,notifications:p.default,sidebar:g.default,images:m.default,price:y.default,fontList:I.default,template:w.default,capabilities:b.default,styles:D.default})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=r.default.Map({isShown:!1,title:"",message:"",onButtonClick:function(){},closeAlertModal:function(){}}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_ALERT_MODAL:return e.merge(t.alertData,{isShown:!0});case i.HIDE_ALERT_MODAL:return s;default:return e}};t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=r.default.Map({isShown:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CLONE_MODAL:return e.merge({isShown:!0});case i.HIDE_CLONE_MODAL:return e.merge({isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=r.default.Map({isShown:!1,hideOnOk:!0,onOkClick:function(){},closeConfirmModal:function(){},confirmMessage:""}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CONFIRM:return e.merge(t.confirmData,{isShown:!0});case i.HIDE_CONFIRM:return s;default:return e}};t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=r.default.Map({isShown:!1}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_CONTACT_US_MODAL:return e.merge({isShown:!0});case i.HIDE_CONTACT_US_MODAL:return e.merge({isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.Map)({isShown:!1,imageEditApiTemplate:"",imageName:"",encImgId:"",imageWidth:0,imageHeight:0,elementWidth:0,elementHeight:0,crop:{},onDoneClick:function(){},onCancelClick:function(){}}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.SHOW_IMAGE_EDIT_MODAL:return e.merge(t.data,{isShown:!0});case a.HIDE_IMAGE_EDIT_MODAL:return e.merge({isShown:!1});default:return e}};t.default=i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(474),i=o(r),s=n(477),u=o(s),l=n(470),d=o(l),c=n(478),p=o(c),f=n(468),g=o(f),h=n(471),m=o(h),v=n(469),y=o(v),M=n(475),I=o(M),T=n(472),w=o(T),E=n(476),b=o(E);t.default=(0,a.combineReducers)({loadings:i.default,upgradeModal:u.default,confirmModal:d.default,upload:p.default,contactUsModal:m.default,imageEditModal:w.default,alertModal:g.default,cloneModal:y.default,previewModal:I.default,textEditModal:b.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.fromJS)({isShow:!1,isModalShow:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.SHOW_LOADING:return e.merge({isShow:!0,isModalShow:t.isModalShow||!1});case a.HIDE_LOADING:return e.merge({isShow:!1});default:return e}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.Map)({isShown:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.SHOW_PREVIEW:return e.merge(t.data,{isShown:!0});case a.HIDE_PREVIEW:return e.merge({isShown:!1});default:return e}};t.default=i},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s),l=i.default.Map({isShown:!1}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case u.SHOW_TEXT_EDIT_MODAL:var n=t.data;return n?e.merge(t.data,{isShown:!0}):i.default.Map({isShown:!0});case u.HIDE_TEXT_EDIT_MODAL:return e.merge({isShown:!1});default:return e}};t.default=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),r=o(a),i=n(10),s=r.default.Map({isShown:!1,onOkClick:function(){},onCancelClick:function(){},from:{coverType:"",effectImage:null,element:{},options:{}},to:{coverType:"",effectImage:null,element:{},options:{}}}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SHOW_UPGRADE:return e.merge(t.upgradeData,{isShown:!0});case i.HIDE_UPGRADE:return e.merge(t.upgradeData,{isShown:!1});default:return e}};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=(0,o.Map)({isShown:!1}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case a.TOGGLE_UPLOAD:return e.merge({isShown:t.status});default:return e}};t.default=i},function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=a(r),s=n(10),u=o(s),l=null,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.default.Map(),t=arguments[1];switch(t.type){case u.ADD_NOTIFICATION:var n=t.data;return l.addNotification(n),e;case u.REMOVE_NOTIFICATION:var o=t.uid;return l.removeNotification(o),e;case u.CLEAR_NOTIFICATION:return l.clearNotifications(),e;case u.INIT_NOTIFICATION_SYSTEM:l=t.notificationSystem;default:return e}};t.default=d},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(481),i=o(r);t.default=(0,a.combineReducers)({price:i.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(10),r=n(20),i=n(16),s=(0,o.Map)({}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case a.API_SUCCESS:switch(t.apiPattern.name){case i.GET_PRODUCT_PRICE:var n=t.response;return e.merge((0,r.convertObjIn)(n.data));default:return e}default:return e}};t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(483),i=o(r);t.default=(0,a.combineReducers)({tabIndex:i.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments[1];switch(t.type){case o.CHANGE_TAB_IN_SIDEBAR:return t.tabIndex;default:return e}};t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),r=o(a),i=n(10),s=n(16),u=n(20),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case i.API_SUCCESS:switch(t.apiPattern.name){case s.GET_STYLE_LIST:var n=t.response,o=(0,u.convertObjIn)(n.styles.style);return(0,r.default)([],o);default:return e}default:return e}};t.default=l},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),r=o(a),i=n(12),s=o(i),u=n(11),l=o(u),d=(n(33),n(10)),c=n(16),p=n(42),f=n(39),g=(o(f),n(20),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case d.API_SUCCESS:switch(t.apiPattern.name){case c.APPLY_LAYOUT:var n=t.response,o=(0,s.default)(t,"apiPattern.params.templateIds"),a=(0,s.default)(t,"apiPattern.params.size"),i=(0,p.convertResultToJson)(n),u=(0,p.formatTemplateInstance)(i,o,a);return l.default.apply(void 0,[{},e].concat((0,r.default)(u)));default:return e}default:return e}});t.default=g},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),r=n(488),i=o(r),s=n(485),u=o(s),l=n(487),d=o(l);t.default=(0,a.combineReducers)({list:i.default,details:u.default,isInApplyingTemplate:d.default})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case o.IS_IN_APPLY_TEMPLATE:return t.value;default:return e}};t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),r=o(a),i=n(10),s=(n(16),n(20),{coverTemplateList:[],innerTemplateList:[],coverDefaultTemplateGuid:"",innerDefaultTemplateGuid:""}),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case i.SET_TEMPLATE_LIST:var n={};return(0,r.default)(n,t.ListInfo),n;default:return e}};t.default=u},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[(0,i.applyMiddleware)(m.default),(0,i.applyMiddleware)(l.default),(0,i.applyMiddleware)(g.default)],n=i.compose,o=n.apply(void 0,t)(i.createStore),a=o(p.default,e);return a}Object.defineProperty(t,"__esModule",{value:!0});var r=n(48);o(r);t.default=a;var i=n(22),s=n(2),u=(o(s),n(563)),l=o(u),d=n(562),c=(o(d),n(436)),p=o(c),f=n(25),g=o(f),h=n(435),m=o(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computedWorkSpaceOffset=t.updateWorkspaceRatio=void 0;var o=n(58),a=n(9),r=n(147),i=function(e,t){var n=0,r=a.pageNumPerRow[t],i=(0,o.getSize)().width,s=Math.floor((i-a.sideBarWidth-60-20*(r-1)-20)/r),u=s<200?200:s>400?400:s;return e&&e.width&&(n=u/e.width),n};t.updateWorkspaceRatio=function(e,t,n,o){var s=n||{},u=s.top,l=void 0===u?130:u,d=s.right,c=void 0===d?0:d,p=s.bottom,f=void 0===p?150:p,g=s.left,h=void 0===g?320:g,m=(0,r.computedWorkSpaceRatio)(t.coverBgParams,{top:l,right:c,bottom:f,left:h},a.percent.lg),v={width:t.innerBgParams.width,height:t.innerBgParams.height*a.innerPageHeightShowRatio[o]},y=(0,r.computedWorkSpaceRatio)(v,{top:l,right:c,bottom:f,left:h},a.percent.lg),M=i(t.allPageCoverBgParams,o),I=i(t.allPageInnerBgParams,o);e.updateRatio([{type:a.ratioTypes.coverWorkspace,ratio:m},{type:a.ratioTypes.innerWorkspace,ratio:y},{type:a.ratioTypes.coverWorkspaceForArrangePages,ratio:M},{type:a.ratioTypes.innerWorkspaceForArrangePages,ratio:I}])},t.computedWorkSpaceOffset=function(e,t){var n=150,o=40,r=320,i=130;switch(e){case a.productTypes.WC:n=t?100:77,i=t?150:130;break;case a.productTypes.DC:n=100,i=180;break;case a.productTypes.LC:n=100,i=180;break;case a.productTypes.PC:n=135,i=130}return{top:n,right:o,bottom:i,left:r}}},function(e,t,n){"use strict";function o(e){var t=Math.round((0,a.getPtByPx)(e));return t>i?i:t<r?r:t}Object.defineProperty(t,"__esModule",{value:!0}),t.getFontSizeInPt=o;var a=n(17),r=4,i=120},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e/2,r=t/2,i=(a-r)/e,s=(a+n/2)/e;return o?(i=1-r/e,s=1,[i,s]):[i,s]}function r(e,t,n,o,a,r,i){var s=e;i||(s=c.default.Map({id:e.get("id"),type:e.get("type"),x:e.get("x"),y:e.get("y"),width:e.get("width"),height:e.get("height"),encImgId:e.get("encImgId")}));var u=e.get("px"),l=e.get("px")+e.get("pw"),d=o/2;return r&&l<t?s=s.merge({x:e.get("x")-d}):l>t&&l<n||u>t&&u<n||u<t&&l>n?s=s.merge({x:e.get("px")*a,width:e.get("pw")*a}):u>n&&(s=s.merge({x:e.get("x")+(i?d:o)})),s}function i(e,t,n,o){var i=e.get("width"),s=e.get("containers"),u=null,d=null,p=null;s.forEach(function(e){var t=e.get("type");switch(t){case"Full":u=e;break;case"Spine":d=e;break;case"Back":p=e}});var g=d.get("bleed"),h=n.getIn(["spineWidth","baseValue"]),m=d.get("width")-(g.get("left")+g.get("right")),v=Boolean(p),y=a(i,m,h,v),M=(0,l.default)(y,2),I=M[0],T=M[1],w=c.default.List(),E=c.default.List();u&&(E=E.concat(u.get("elements"))),p&&(E=E.concat(p.get("elements")));var b=Boolean(p),S=!1;return E.forEach(function(e){var n=r(e,I,T,o,i,b,S);w=w.push((0,f.default)(n,u||p,t))}),w}function s(e,t,n,o){var i=e.get("width"),s=e.get("containers"),u=null,d=null;s.forEach(function(e){var t=e.get("type");switch(t){case"cover":u=e}});var p=d.get("width")-(spineBleed.get("left")+spineBleed.get("right")),g=n.getIn(["spineWidth","baseValue"]),h=p-g,m=i-h,v=g,y=a(m,v,g),M=(0,l.default)(y,2),I=M[0],T=M[1],w=c.default.List(),E=!0,b=!0;return o.forEach(function(e){var n=r(e,I,T,h,i,E,b);w=w.push((0,f.default)(n,u,t))}),w}Object.defineProperty(t,"__esModule",{value:!0});var u=n(38),l=o(u);t.getUpdatedCoverElementsOnSheetNumChange=i,t.getUpdatedCoverElementsOnApplyTemplate=s;var d=n(2),c=o(d),p=n(88),f=o(p)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initGlobalVariables=function(){var e=window.__app||{};window.__app=e}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.redirectToOrder=void 0;var a=n(23),r=o(a),i=n(16),s=n(9);t.redirectToOrder=function(e){var t=(0,r.default)(i.ORDER_PATH)({orderType:s.orderType,projectId:e});window.onbeforeunload=null,window.location=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.inPointInBox=function(e,t){var a=t.x,r=t.y,i=t.width,s=t.height,u=t.degree,l={x:a+i/2,y:r+s/2},d=n(e,l,-u);return o(d,t)},function(e,t,n){var o=n*Math.PI/180,a=t.x,r=t.y,i=e.x-a,s=e.y-r;return{x:i*Math.cos(o)-s*Math.sin(o)+a,y:i*Math.sin(o)+s*Math.cos(o)+r}}),o=function(e,t){var n=t.x,o=t.y,a=t.width,r=t.height;return e.x>n&&e.x<n+a&&e.y>o&&e.y<o+r}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getScreenShot=void 0;var a=n(14),r=o(a),i=n(497),s=n(9),u=1e3,l=null;t.getScreenShot=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"isStopRetry",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function(t,n){var a=document.querySelector(e),r=o?a.width:s.smallViewWidthInMyProjects;(0,i.toCanvas)(a,r).then(function(e){var n=e.url;t(n)},function(){n()})},d=new r.default(function(e,o){t?l=setInterval(function(){var t=window[n];t&&(clearInterval(l),setTimeout(function(){a(e,o)},2e3))},u):a(e,o)});return d}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.toCanvas=void 0;var a=n(14),r=o(a),i=(n(114),n(112));t.toCanvas=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"base64",o=new r.default(function(o,a){if(e){var r=e.width,s=e.height;if(r&&s){var u=t||r,l=u*s/r;if(e)if(n&&"blob"===n)(0,i.toObjectUrl)(e).then(function(t){o({url:t,canvas:e})});else{var d=document.createElement("canvas");d.width=u,d.height=l;var c=d.getContext("2d");c.drawImage(e,0,0,r,s,0,0,u,l),o({url:d.toDataURL().replace("data:image/png;base64,",""),canvas:e})}}else a()}else a()});return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.transform=function(e,t){var n=e.x,o=e.y,a=e.width,r=e.height,i=Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/2,s=Math.round(180*Math.atan(r/a)/Math.PI),u=180-t-s,l=s-t,d=90-t,c=t,p=a/2,f=r/2,g=n+p,h=o+f,m={x:g+i*Math.cos(u*Math.PI/180),y:h-i*Math.sin(u*Math.PI/180)},v={x:g+f*Math.cos(d*Math.PI/180),y:h-f*Math.sin(d*Math.PI/180)},y={x:g+i*Math.cos(l*Math.PI/180),y:h-i*Math.sin(l*Math.PI/180)},M={x:g+p*Math.cos(c*Math.PI/180),y:h+p*Math.sin(c*Math.PI/180)},I={x:g-i*Math.cos(u*Math.PI/180),y:h+i*Math.sin(u*Math.PI/180)},T={x:g-f*Math.sin(c*Math.PI/180),y:h+f*Math.cos(c*Math.PI/180)},w={x:g-i*Math.cos(l*Math.PI/180),y:h+i*Math.sin(l*Math.PI/180)},E={x:g-p*Math.cos(c*Math.PI/180),y:h-p*Math.sin(c*Math.PI/180)},b=Math.min(m.x,y.x,I.x,w.x),S=Math.max(m.x,y.x,I.x,w.x),D=Math.min(m.y,y.y,I.y,w.y),A=Math.max(m.y,y.y,I.y,w.y);return{point:[m,v,y,M,I,T,w,E],width:S-b,height:A-D,left:b,right:S,top:D,bottom:A}}},39,function(e,t,n){function o(e,t){var n=null==e?0:e.length;return!!n&&a(e,t,0)>-1}var a=n(602);e.exports=o},function(e,t){function n(e,t,n){for(var o=-1,a=null==e?0:e.length;++o<a;)if(n(t,e[o]))return!0;return!1}e.exports=n},function(e,t,n){function o(e,t,n){for(var o=-1,r=e.length;++o<r;){var i=e[o],s=t(i);if(null!=s&&(void 0===u?s===s&&!a(s):n(s,u)))var u=s,l=i}return l}var a=n(165);e.exports=o},function(e,t){function n(e){return e&&e.length?e[0]:void 0}e.exports=n},function(e,t){function n(e,t){return e>t}e.exports=n},function(e,t,n){function o(e,t,n){for(var o=n?i:r,c=e[0].length,p=e.length,f=p,g=Array(p),h=1/0,m=[];f--;){var v=e[f];f&&t&&(v=s(v,u(t))),h=d(v.length,h),g[f]=!n&&(t||c>=120&&v.length>=120)?new a(f&&v):void 0}v=e[0];var y=-1,M=g[0];e:for(;++y<c&&m.length<h;){var I=v[y],T=t?t(I):I;if(I=n||0!==I?I:0,!(M?l(M,T):o(m,T,n))){for(f=p;--f;){var w=g[f];if(!(w?l(w,T):o(e[f],T,n)))continue e}M&&M.push(T),m.push(I)}}return m}var a=n(601),r=n(500),i=n(501),s=n(96),u=n(178),l=n(605),d=Math.min;e.exports=o},function(e,t,n){function o(e,t,n,d,c){e!==t&&i(t,function(i,l){if(u(i))c||(c=new a),s(e,t,l,n,o,d,c);else{var p=d?d(e[l],i,l+"",e,t,c):void 0;void 0===p&&(p=i),r(e,l,p)}},l)}var a=n(575),r=n(151),i=n(176),s=n(507),u=n(68),l=n(66);e.exports=o},function(e,t,n){function o(e,t,n,o,y,M,I){var T=e[n],w=t[n],E=I.get(w);if(E)return void a(e,n,E);var b=M?M(T,w,n+"",e,t,I):void 0,S=void 0===b;if(S){var D=d(w),A=!D&&p(w),N=!D&&!A&&m(w);b=w,D||A||N?d(T)?b=T:c(T)?b=s(T):A?(S=!1,b=r(w,!0)):N?(S=!1,b=i(w,!0)):b=[]:h(w)||l(w)?(b=T,l(T)?b=v(T):(!g(T)||o&&f(T))&&(b=u(w))):S=!1}S&&(I.set(w,b),y(b,w,o,M,I),I.delete(w)),a(e,n,b)}var a=n(151),r=n(606),i=n(607),s=n(608),u=n(609),l=n(576),d=n(46),c=n(155),p=n(571),f=n(616),g=n(68),h=n(161),m=n(577),v=n(532);e.exports=o},function(e,t,n){function o(e,t,n){var o=-1;t=a(t.length?t:[d],u(r));var c=i(e,function(e,n,r){var i=a(t,function(t){return t(e)});return{criteria:i,index:++o,value:e}});return s(c,function(e,t){return l(e,t,n)})}var a=n(96),r=n(177),i=n(603),s=n(512),u=n(178),l=n(515),d=n(94);e.exports=o},function(e,t,n){function o(e,t){return a(e,t,function(t,n){return r(e,n)})}var a=n(510),r=n(610);e.exports=o},function(e,t,n){function o(e,t,n){for(var o=-1,s=t.length,u={};++o<s;){var l=t[o],d=a(e,l);n(d,l)&&r(u,i(l,e),d)}return u}var a=n(583),r=n(152),i=n(171);e.exports=o},function(e,t){function n(e){return function(t){return null==e?void 0:e[t]}}e.exports=n},function(e,t){function n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}e.exports=n},function(e,t,n){function o(e){return a(e)?e:[]}var a=n(155);e.exports=o},function(e,t,n){function o(e,t){if(e!==t){var n=void 0!==e,o=null===e,r=e===e,i=a(e),s=void 0!==t,u=null===t,l=t===t,d=a(t);if(!u&&!d&&!i&&e>t||i&&s&&l&&!u&&!d||o&&s&&l||!n&&l||!r)return 1;if(!o&&!i&&!d&&e<t||d&&n&&r&&!o&&!i||u&&n&&r||!s&&r||!l)return-1}return 0}var a=n(165);e.exports=o},function(e,t,n){function o(e,t,n){for(var o=-1,r=e.criteria,i=t.criteria,s=r.length,u=n.length;++o<s;){var l=a(r[o],i[o]);if(l){if(o>=u)return l;var d=n[o];return l*("desc"==d?-1:1)}}return e.index-t.index}var a=n(514);e.exports=o},function(e,t,n){function o(e,t,n,o){return void 0===e||a(e,r[n])&&!i.call(o,n)?t:e}var a=n(169),r=Object.prototype,i=r.hasOwnProperty;e.exports=o},function(e,t,n){var o=n(511),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=o(a);e.exports=r},function(e,t){function n(e){return"\\"+o[e]}var o={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function o(e,t,n){return t=r(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=r(o.length-t,0),u=Array(s);++i<s;)u[i]=o[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=o[i];return l[t]=n(u),a(e,this,l)}}var a=n(150),r=Math.max;e.exports=o},function(e,t){var n=/<%-([\s\S]+?)%>/g;e.exports=n},function(e,t){var n=/<%([\s\S]+?)%>/g;e.exports=n},519,function(e,t,n){var o=n(166),a=n(153),r=n(66),i=a(function(e,t,n,a){o(t,r(t),e,a)});e.exports=i},function(e,t,n){var o=n(150),a=n(63),r=n(158),i=a(function(e,t){try{return o(e,void 0,t)}catch(e){return r(e)?e:new Error(e)}});e.exports=i},function(e,t,n){function o(e){return e=r(e),e&&s.test(e)?e.replace(i,a):e}var a=n(517),r=n(173),i=/[&<>"']/g,s=RegExp(i.source);e.exports=o},function(e,t,n){var o=n(96),a=n(505),r=n(63),i=n(513),s=r(function(e){var t=o(e,i);return t.length&&t[0]===e[0]?a(t):[]});e.exports=s},function(e,t,n){function o(e,t){var n={};return t=i(t,3),r(e,function(e,o,r){a(n,o,t(e,o,r))}),n}var a=n(170),r=n(582),i=n(177);e.exports=o},function(e,t,n){function o(e){return e&&e.length?a(e,i,r):void 0}var a=n(502),r=n(504),i=n(94);e.exports=o},function(e,t,n){var o=n(509),a=n(519),r=a(function(e,t){return null==e?{}:o(e,t)});e.exports=r},function(e,t,n){var o=n(526),a=n(521),r=n(522),i=n(154),s={escape:a,evaluate:r,interpolate:i,variable:"",imports:{_:{escape:o}}};e.exports=s},function(e,t,n){function o(e){return a(e,r(e))}var a=n(166),r=n(66);e.exports=o},function(e,t,n){var o;(function(e,a){!function(r){function i(e){throw new RangeError(x[e])}function s(e,t){for(var n=e.length,o=[];n--;)o[n]=t(e[n]);return o}function u(e,t){var n=e.split("@"),o="";n.length>1&&(o=n[0]+"@",e=n[1]),e=e.replace(P,".");var a=e.split("."),r=s(a,t).join(".");return o+r}function l(e){for(var t,n,o=[],a=0,r=e.length;a<r;)t=e.charCodeAt(a++),t>=55296&&t<=56319&&a<r?(n=e.charCodeAt(a++),56320==(64512&n)?o.push(((1023&t)<<10)+(1023&n)+65536):(o.push(t),a--)):o.push(t);return o}function d(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:T}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,n){var o=0;for(e=n?L(e/S):e>>1,e+=L(e/t);e>O*E>>1;o+=T)e=L(e/O);return L(o+(O+1)*e/(e+b))}function g(e){var t,n,o,a,r,s,u,l,p,g,h=[],m=e.length,v=0,y=A,M=D;for(n=e.lastIndexOf(N),n<0&&(n=0),o=0;o<n;++o)e.charCodeAt(o)>=128&&i("not-basic"),h.push(e.charCodeAt(o));for(a=n>0?n+1:0;a<m;){for(r=v,s=1,u=T;a>=m&&i("invalid-input"),l=c(e.charCodeAt(a++)),(l>=T||l>L((I-v)/s))&&i("overflow"),v+=l*s,p=u<=M?w:u>=M+E?E:u-M,!(l<p);u+=T)g=T-p,s>L(I/g)&&i("overflow"),s*=g;t=h.length+1,M=f(v-r,t,0==r),L(v/t)>I-y&&i("overflow"),y+=L(v/t),v%=t,h.splice(v++,0,y)}return d(h)}function h(e){var t,n,o,a,r,s,u,d,c,g,h,m,v,y,M,b=[];for(e=l(e),m=e.length,t=A,n=0,r=D,s=0;s<m;++s)h=e[s],h<128&&b.push(j(h));for(o=a=b.length,a&&b.push(N);o<m;){for(u=I,s=0;s<m;++s)h=e[s],h>=t&&h<u&&(u=h);for(v=o+1,u-t>L((I-n)/v)&&i("overflow"),n+=(u-t)*v,t=u,s=0;s<m;++s)if(h=e[s],h<t&&++n>I&&i("overflow"),h==t){for(d=n,c=T;g=c<=r?w:c>=r+E?E:c-r,!(d<g);c+=T)M=d-g,y=T-g,b.push(j(p(g+M%y,0))),d=L(M/y);b.push(j(p(d,0))),r=f(n,v,o==a),n=0,++o}++n,++t}return b.join("")}function m(e){return u(e,function(e){return _.test(e)?g(e.slice(4).toLowerCase()):e})}function v(e){return u(e,function(e){return C.test(e)?"xn--"+h(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof a&&a);y.global!==y&&y.window!==y&&y.self!==y||(r=y);var M,I=2147483647,T=36,w=1,E=26,b=38,S=700,D=72,A=128,N="-",_=/^xn--/,C=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=T-w,L=Math.floor,j=String.fromCharCode;M={version:"1.4.1",ucs2:{decode:l,encode:d},decode:g,encode:h,toASCII:v,toUnicode:m},o=function(){return M}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))}(this)}).call(t,n(568)(e),function(){return this}())},function(e,t){e.exports='<product-spec version="2.0">\n  <global>\n    <dpi>300</dpi>\n    <imageQualityBufferPercent>30</imageQualityBufferPercent>\n    <imagedimenstions>\n      <imagedimenstion viewWidth="96" viewHeight="96">96x96</imagedimenstion>\n      <imagedimenstion viewWidth="350" viewHeight="350">350x350</imagedimenstion>\n      <imagedimenstion viewWidth="700" viewHeight="700">700x700</imagedimenstion>\n      <imagedimenstion viewWidth="1000" viewHeight="1000">1000x1000</imagedimenstion>\n      <imagedimenstion viewWidth="1500" viewHeight="1500">1500x1500</imagedimenstion>\n    </imagedimenstions>\n    <options>\n      <!-- 台历、挂历产品 -->\n      <optionGroup id="product">\n        <option id="DC">\n          <title><![CDATA[Desk Calendar]]></title>\n        </option>\n        <option id="WC" >\n          <title><![CDATA[Wall Calendar]]></title>\n        </option>\n        <option id="PC">\n          <title><![CDATA[Poster Calendar]]></title>\n        </option>\n        <option id="LC">\n          <title><![CDATA[Little Moments Calendar]]></title>\n        </option>\n      </optionGroup>\n\n      <!-- 尺寸 -->\n      <optionGroup id="size">\n        <option id="7X5" name="7X5"/>\n        <option id="6X11" name="6X11"/>\n        <option id="8X11" name="8X11"/>\n        <option id="12X12" name="12X12"/>\n        <option id="16X20" name="16X20"/>\n        <option id="20X30" name="20X30"/>\n      </optionGroup>\n      <!--支持几个月份-->\n      <optionGroup id="numberOfMonth">\n        <option id="none" name="None"/>\n        <option id="12" name="12"/>\n        <option id="18" name="18"/>\n      </optionGroup>\n\n      <!--日期样式-->\n\n      <optionGroup id="dateStyle">\n        <option id="none" name="None"/>\n        <option id="modern" name="Modern"/>\n        <option id="classic" name="Classic"/>\n      </optionGroup>\n\n      <!-- 旋转方向 -->\n      <optionGroup id="orientation">\n          <option id="Portrait" name="Portrait" />\n          <option id="Landscape" name="Landscape" />\n      </optionGroup>\n    </options>\n  </global>\n\n  <configurableOptionMap>\n    <optionMap id="size" keyPattern="product">\n      <entry key="DC" value="6X11" />\n      <entry key="WC" value="8X11,12X12"/>\n      <entry key="PC" value="16X20,20X30" />\n      <entry key="LC" value="7X5" />\n    </optionMap>\n    <optionMap id="numberOfMonth" keyPattern="product-size">\n      <entry key="DC-*" value="12" />\n      <entry key="WC-*" value="12"/>\n      <entry key="PC-*" value="12" />\n      <entry key="LC-*" value="12" />\n    </optionMap>\n    <optionMap id="dateStyle" keyPattern="product">\n      <entry key="DC" value="modern,classic" />\n      <entry key="WC" value="modern,classic" />\n      <entry key="PC" value="modern,classic" />\n      <entry key="LC" value="modern,classic" />\n    </optionMap>\n    <optionMap id="orientation" keyPattern="product">\n        <entry key="DC" value="Portrait,Landscape" defaultValue="Landscape"></entry>\n        <entry key="WC" value="Portrait,Landscape" defaultValue="Landscape"></entry>\n        <entry key="PC" value="Portrait,Landscape" defaultValue="Landscape"></entry>\n        <entry key="LC" value="Portrait,Landscape" defaultValue="Landscape"></entry>\n    </optionMap>\n  </configurableOptionMap>\n\n  <parameters>\n    <!-- 基础尺寸 -->\n    <parameter id="baseSize" keyPattern="product-size-orientation">\n      <entry key="DC-6X11-Landscape" widthInInch="10.78740157" heightInInch="5.47244094"/>\n      <entry key="DC-6X11-Portrait" widthInInch="5.47244094" heightInInch="10.78740157"/>\n      <entry key="WC-8X11-Landscape" widthInInch="10.82677165" heightInInch="8.42519685" />\n      <entry key="WC-8X11-Portrait" widthInInch="8.42519685" heightInInch="10.82677165" />\n      <entry key="WC-12X12-Landscape" widthInInch="11.73228346" heightInInch="11.73228346" default="true" />\n      <entry key="WC-12X12-Portrait" widthInInch="11.73228346" heightInInch="11.73228346" default="true" />\n      <entry key="PC-16X20-Landscape"  widthInInch="19.527559" heightInInch="15.511811" default="true" />\n      <entry key="PC-16X20-Portrait"  widthInInch="15.511811" heightInInch="19.527559" default="true" />\n      <entry key="PC-20X30-Landscape"  widthInInch="29.527559" heightInInch="19.527559"/>\n      <entry key="PC-20X30-Portrait"  widthInInch="19.527559" heightInInch="29.527559"/>\n      <entry key="LC-7X5-Landscape" widthInInch="5" heightInInch="7.440944881889764" />\n      <entry key="LC-7X5-Portrait" widthInInch="7.440944881889764" heightInInch="5" />\n    </parameter>\n\n    <!-- 出血 -->\n    <parameter id="pageBleed" keyPattern="product-size-orientation">\n      <entry key="DC-6X11-[Landscape,Portrait]" top="24" bottom="24" left="24" right="24" />\n      <entry key="WC-[8X11,12X12]-[Landscape,Portrait]" top="24" bottom="24" left="24" right="24" />\n      <entry key="PC-[16X20,20X30]-[Landscape,Portrait]" top="72" bottom="72" left="72" right="72" />\n      <entry key="LC-7X5-[Landscape,Portrait]" top="36" bottom="36" left="36" right="36" />\n    </parameter>\n\n    <!-- 日历日期区域尺寸 -->\n    <parameter id="calendarArea" keyPattern="product-size-orientation">\n      <entry key="DC-6X11-[Landscape,Portrait]" x="2067" y="24" width="1122" height="1654" />\n      <entry key="WC-8X11-[Landscape,Portrait]" x="189" y="260" width="2918" height="2127" />\n      <entry key="WC-12X12-[Landscape,Portrait]" x="189" y="260" width="3190" height="3119" />\n      <entry key="PC-16X20-Landscape" x="3540" y="581" width="2110" height="3632" />\n      <entry key="PC-16X20-Portrait" x="293" y="3708" width="4203" height="1846" />\n      <entry key="PC-20X30-Landscape" x="5437" y="525" width="2879" height="4955" />\n      <entry key="PC-20X30-Portrait" x="365" y="5778" width="5258" height="2303" />\n      <entry key="LC-7X5-[Landscape,Portrait]" x="36" y="1535" width="1500" height="590" />\n    </parameter>\n\n  </parameters>\n\n  <variables>\n    <variable id="coverForeground" keyPattern="product-size-orientation">\n      <entry key="WC-8X11-[Landscape,Portrait]" width="999" height="791" left="30" top="30" right="30" bottom="30" />\n      <entry key="WC-12X12-[Landscape,Portrait]" width="760" height="760" left="30" top="30" right="30" bottom="30" />\n      <entry key="DC-6X11-[Landscape,Portrait]" width="1394" height="829" left="40" top="60" right="110" bottom="138" />\n      <entry key="PC-16X20-Landscape" width="2102" height="1728" left="92" top="92" right="92" bottom="92" />\n      <entry key="PC-16X20-Portrait" width="1728" height="2099" left="90" top="90" right="90" bottom="90" />\n      <entry key="PC-20X30-Landscape" width="2592" height="1781" left="92" top="92" right="92" bottom="92" />\n      <entry key="PC-20X30-Portrait" width="1782" height="2592" left="92" top="92" right="92" bottom="92" />\n      <entry key="LC-7X5-[Landscape,Portrait]" width="577" height="920" left="40" top="40" right="40" bottom="142" />\n    </variable>\n    <variable id="innerForeground" keyPattern="product-size-orientation">\n      <entry key="WC-8X11-[Landscape,Portrait]" width="810" height="1233" topPageLeft="30" topPageTop="30" topPageRight="30" topPageBottom="614" bottomPageLeft="30" bottomPageTop="620" bottomPageRight="30" bottomPageBottom="30" />\n      <entry key="WC-12X12-[Landscape,Portrait]" width="643" height="1229" topPageLeft="30" topPageTop="30" topPageRight="30" topPageBottom="617" bottomPageLeft="30" bottomPageTop="617" bottomPageRight="30" bottomPageBottom="30" />\n      <entry key="DC-6X11-[Landscape,Portrait]" width="1394" height="829" bottomPageLeft="40" bottomPageTop="60" bottomPageRight="110" bottomPageBottom="138" />\n      <entry key="LC-7X5-[Landscape,Portrait]" width="577" height="920" bottomPageLeft="40" bottomPageTop="40" bottomPageRight="40" bottomPageBottom="142" />\n      <entry key="PC-16X20-Landscape" width="2102" height="1728" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottomPageBottom="92" />\n      <entry key="PC-16X20-Portrait" width="1728" height="2099" bottomPageLeft="90" bottomPageTop="90" bottomPageRight="90" bottomPageBottom="90" />\n      <entry key="PC-20X30-Landscape" width="2592" height="1781" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottomPageBottom="92" />\n      <entry key="PC-20X30-Portrait" width="1782" height="2592" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottom="92" />\n    </variable>\n    <variable id="allPageCoverForeground" keyPattern="product-size-orientation">\n      <entry key="WC-8X11-[Landscape,Portrait]" width="999" height="791" left="30" top="30" right="30" bottom="30" />\n      <entry key="WC-12X12-[Landscape,Portrait]" width="760" height="760" left="30" top="30" right="30" bottom="30" />\n      <entry key="DC-6X11-[Landscape,Portrait]" width="332" height="170" left="3" top="3" right="3" bottom="3" />\n      <entry key="PC-16X20-Landscape" width="2102" height="1728" left="92" top="92" right="92" bottom="92" />\n      <entry key="PC-16X20-Portrait" width="1728" height="2099" left="90" top="90" right="90" bottom="90" />\n      <entry key="PC-20X30-Landscape" width="2592" height="1781" left="92" top="92" right="92" bottom="92" />\n      <entry key="PC-20X30-Portrait" width="1782" height="2592" left="92" top="92" right="92" bottom="92" />\n      <entry key="LC-7X5-[Landscape,Portrait]" width="257" height="372" left="10" top="10" right="10" bottom="10" />\n    </variable>\n    <variable id="allPageInnerForeground" keyPattern="product-size-orientation">\n      <entry key="WC-8X11-[Landscape,Portrait]" width="810" height="1233" topPageLeft="30" topPageTop="30" topPageRight="30" topPageBottom="614" bottomPageLeft="30" bottomPageTop="620" bottomPageRight="30" bottomPageBottom="30" />\n      <entry key="WC-12X12-[Landscape,Portrait]" width="643" height="1229" topPageLeft="30" topPageTop="30" topPageRight="30" topPageBottom="617" bottomPageLeft="30" bottomPageTop="617" bottomPageRight="30" bottomPageBottom="30" />\n      <entry key="DC-6X11-[Landscape,Portrait]" width="332" height="170" bottomPageLeft="3" bottomPageTop="3" bottomPageRight="3" bottomPageBottom="3" />\n      <entry key="LC-7X5-[Landscape,Portrait]" width="257" height="372" bottomPageLeft="10" bottomPageTop="10" bottomPageRight="10" bottomPageBottom="10" />\n      <entry key="PC-16X20-Landscape" width="2102" height="1728" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottomPageBottom="92" />\n      <entry key="PC-16X20-Portrait" width="1728" height="2099" bottomPageLeft="90" bottomPageTop="90" bottomPageRight="90" bottomPageBottom="90" />\n      <entry key="PC-20X30-Landscape" width="2592" height="1781" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottomPageBottom="92" />\n      <entry key="PC-20X30-Portrait" width="1782" height="2592" bottomPageLeft="92" bottomPageTop="92" bottomPageRight="92" bottom="92" />\n    </variable>\n\n  </variables>\n</product-spec>\n';
},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCustomEvent=function(e){var t=this.state.event;return t||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(e){var t=this,o=this.state,r=o.event,i=o.eventOff,s=e.getAttribute("data-event")||r,u=e.getAttribute("data-event-off")||i;s.split(" ").forEach(function(o){e.removeEventListener(o,a),a=n.bind(t,u),e.addEventListener(o,a,!1)}),u&&u.split(" ").forEach(function(n){e.removeEventListener(n,t.hideTooltip),e.addEventListener(n,t.hideTooltip,!1)})},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,o=t.eventOff,r=n||e.getAttribute("data-event"),i=o||e.getAttribute("data-event-off");e.removeEventListener(r,a),i&&e.removeEventListener(i,this.hideTooltip)}};var n=function(e,t){var n=this.state.show,a=this.props.id,r=t.currentTarget.getAttribute("data-iscapture"),i=r&&"true"===r||this.props.isCapture,s=t.currentTarget.getAttribute("currentItem");i||t.stopPropagation(),n&&"true"===s?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),o(t.currentTarget,this.getTargetArray(a)),this.showTooltip(t))},o=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},a=void 0},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.getEffect=function(e){var t=e.getAttribute("data-effect");return t||this.props.effect||"float"}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.isCapture=function(e){var t=e.getAttribute("data-iscapture");return t&&"true"===t||this.props.isCapture||!1}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.hide=function(e){i(r.default.GLOBAL.HIDE,{target:e})},e.rebuild=function(){i(r.default.GLOBAL.REBUILD)},e.show=function(e){i(r.default.GLOBAL.SHOW,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t={currentTarget:e.detail.target};this.showTooltip(t,!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=e&&e.detail&&e.detail.target&&!0||!1;this.hideTooltip({currentTarget:t&&e.detail.target},t)}}};var a=n(159),r=o(a),i=function(e,t){var n=void 0;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("Event"),n.initEvent(e,!1,!0),n.detail=t),window.dispatchEvent(n)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindRemovalTracker=function(){var e=this,t=n();if(null!=t){var o=new t(function(t){var n=!0,o=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(n=(r=i.next()).done);n=!0){var s=r.value,u=!0,l=!1,d=void 0;try{for(var c,p=s.removedNodes[Symbol.iterator]();!(u=(c=p.next()).done);u=!0){var f=c.value;if(f===e.state.currentTarget)return void e.hideTooltip()}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}}}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}});o.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=o}},e.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)}};var n=function(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(r.default.GLOBAL.HIDE,this.globalHide),window.addEventListener(r.default.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(r.default.GLOBAL.SHOW,this.globalShow),window.addEventListener(r.default.GLOBAL.SHOW,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(r.default.GLOBAL.HIDE,this.globalHide),window.removeEventListener(r.default.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(r.default.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}};var a=n(159),r=o(a)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='.__react_component_tooltip{border-radius:3px;display:inline-block;font-size:13px;left:-999em;opacity:0;padding:8px 21px;position:fixed;pointer-events:none;transition:opacity 0.3s ease-out;top:-999em;visibility:hidden;z-index:999}.__react_component_tooltip:before,.__react_component_tooltip:after{content:"";width:0;height:0;position:absolute}.__react_component_tooltip.show{opacity:0.9;margin-top:0px;margin-left:0px;visibility:visible}.__react_component_tooltip.type-dark{color:#fff;background-color:#222}.__react_component_tooltip.type-dark.place-top:after{border-top-color:#222;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-dark.place-bottom:after{border-bottom-color:#222;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-dark.place-left:after{border-left-color:#222;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-dark.place-right:after{border-right-color:#222;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-dark.border{border:1px solid #fff}.__react_component_tooltip.type-dark.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-dark.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-dark.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-dark.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-success{color:#fff;background-color:#8DC572}.__react_component_tooltip.type-success.place-top:after{border-top-color:#8DC572;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-success.place-bottom:after{border-bottom-color:#8DC572;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-success.place-left:after{border-left-color:#8DC572;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-success.place-right:after{border-right-color:#8DC572;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-success.border{border:1px solid #fff}.__react_component_tooltip.type-success.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-success.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-success.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-success.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-warning{color:#fff;background-color:#F0AD4E}.__react_component_tooltip.type-warning.place-top:after{border-top-color:#F0AD4E;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-warning.place-bottom:after{border-bottom-color:#F0AD4E;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-warning.place-left:after{border-left-color:#F0AD4E;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-warning.place-right:after{border-right-color:#F0AD4E;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-warning.border{border:1px solid #fff}.__react_component_tooltip.type-warning.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-warning.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-warning.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-warning.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-error{color:#fff;background-color:#BE6464}.__react_component_tooltip.type-error.place-top:after{border-top-color:#BE6464;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-error.place-bottom:after{border-bottom-color:#BE6464;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-error.place-left:after{border-left-color:#BE6464;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-error.place-right:after{border-right-color:#BE6464;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-error.border{border:1px solid #fff}.__react_component_tooltip.type-error.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-error.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-error.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-error.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-info{color:#fff;background-color:#337AB7}.__react_component_tooltip.type-info.place-top:after{border-top-color:#337AB7;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-info.place-bottom:after{border-bottom-color:#337AB7;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-info.place-left:after{border-left-color:#337AB7;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-info.place-right:after{border-right-color:#337AB7;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-info.border{border:1px solid #fff}.__react_component_tooltip.type-info.border.place-top:before{border-top:8px solid #fff}.__react_component_tooltip.type-info.border.place-bottom:before{border-bottom:8px solid #fff}.__react_component_tooltip.type-info.border.place-left:before{border-left:8px solid #fff}.__react_component_tooltip.type-info.border.place-right:before{border-right:8px solid #fff}.__react_component_tooltip.type-light{color:#222;background-color:#fff}.__react_component_tooltip.type-light.place-top:after{border-top-color:#fff;border-top-style:solid;border-top-width:6px}.__react_component_tooltip.type-light.place-bottom:after{border-bottom-color:#fff;border-bottom-style:solid;border-bottom-width:6px}.__react_component_tooltip.type-light.place-left:after{border-left-color:#fff;border-left-style:solid;border-left-width:6px}.__react_component_tooltip.type-light.place-right:after{border-right-color:#fff;border-right-style:solid;border-right-width:6px}.__react_component_tooltip.type-light.border{border:1px solid #222}.__react_component_tooltip.type-light.border.place-top:before{border-top:8px solid #222}.__react_component_tooltip.type-light.border.place-bottom:before{border-bottom:8px solid #222}.__react_component_tooltip.type-light.border.place-left:before{border-left:8px solid #222}.__react_component_tooltip.type-light.border.place-right:before{border-right:8px solid #222}.__react_component_tooltip.place-top{margin-top:-10px}.__react_component_tooltip.place-top:before{border-left:10px solid transparent;border-right:10px solid transparent;bottom:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-top:after{border-left:8px solid transparent;border-right:8px solid transparent;bottom:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-bottom{margin-top:10px}.__react_component_tooltip.place-bottom:before{border-left:10px solid transparent;border-right:10px solid transparent;top:-8px;left:50%;margin-left:-10px}.__react_component_tooltip.place-bottom:after{border-left:8px solid transparent;border-right:8px solid transparent;top:-6px;left:50%;margin-left:-8px}.__react_component_tooltip.place-left{margin-left:-10px}.__react_component_tooltip.place-left:before{border-top:6px solid transparent;border-bottom:6px solid transparent;right:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-left:after{border-top:5px solid transparent;border-bottom:5px solid transparent;right:-6px;top:50%;margin-top:-4px}.__react_component_tooltip.place-right{margin-left:10px}.__react_component_tooltip.place-right:before{border-top:6px solid transparent;border-bottom:6px solid transparent;left:-8px;top:50%;margin-top:-5px}.__react_component_tooltip.place-right:after{border-top:5px solid transparent;border-bottom:5px solid transparent;left:-6px;top:50%;margin-top:-4px}.__react_component_tooltip .multi-line{display:block;padding:2px 0px;text-align:center}'},function(e,t){"use strict";function n(e){var t={};return Object.keys(e).filter(function(e){return/(^aria-\w+$|^role$)/.test(e)}).forEach(function(n){t[n]=e[n]}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseAria=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i,s,u,l){var d=i.clientWidth,c=i.clientHeight,p=n(e,t,u),f=p.mouseX,g=p.mouseY,h=o(u,t.clientWidth,t.clientHeight,d,c),m=a(l),v=m.extraOffset_X,y=m.extraOffset_Y,M=window.innerWidth,I=window.innerHeight,T=r(i),w=T.parentTop,E=T.parentLeft,b=function(e){var t=h[e].l;return f+t+v},S=function(e){var t=h[e].r;return f+t+v},D=function(e){var t=h[e].t;return g+t+y},A=function(e){var t=h[e].b;return g+t+y},N=function(){var e=!1,t=void 0;return D("left")<0&&A("left")<=I&&A("bottom")<=I?(e=!0,t="bottom"):A("left")>I&&D("left")>=0&&D("top")>=0&&(e=!0,t="top"),{result:e,newPlace:t}},_=function(){var e=N(),t=e.result,n=e.newPlace;return t&&P().result?{result:!1}:(!t&&b("left")<0&&S("right")<=M&&(t=!0,n="right"),{result:t,newPlace:n})},C=function(){var e=N(),t=e.result,n=e.newPlace;return t&&P().result?{result:!1}:(!t&&S("right")>M&&b("left")>=0&&(t=!0,n="left"),{result:t,newPlace:n})},P=function(){var e=!1,t=void 0;return b("top")<0&&S("top")<=M&&S("right")<=M?(e=!0,t="right"):S("top")>M&&b("top")>=0&&b("left")>=0&&(e=!0,t="left"),{result:e,newPlace:t}},x=function(){var e=P(),t=e.result,n=e.newPlace;return t&&N().result?{result:!1}:(!t&&D("top")<0&&A("bottom")<=I&&(t=!0,n="bottom"),{result:t,newPlace:n})},O=function(){var e=P(),t=e.result,n=e.newPlace;return t&&N().result?{result:!1}:(!t&&A("bottom")>I&&D("top")>=0&&(t=!0,n="top"),{result:t,newPlace:n})},L=_(),j=C(),k=x(),z=O();return"left"===s&&L.result?{isNewState:!0,newState:{place:L.newPlace}}:"right"===s&&j.result?{isNewState:!0,newState:{place:j.newPlace}}:"top"===s&&k.result?{isNewState:!0,newState:{place:k.newPlace}}:"bottom"===s&&z.result?{isNewState:!0,newState:{place:z.newPlace}}:{isNewState:!1,position:{left:parseInt(b(s)-E,10),top:parseInt(D(s)-w,10)}}};var n=function(e,t,n){var o=t.getBoundingClientRect(),a=o.top,r=o.left,i=t.clientWidth,s=t.clientHeight;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:r+i/2,mouseY:a+s/2}},o=function(e,t,n,o,a){var r=void 0,i=void 0,s=void 0,u=void 0,l=3,d=2,c=12;return"float"===e?(r={l:-(o/2),r:o/2,t:-(a+l+d),b:-l},s={l:-(o/2),r:o/2,t:l+c,b:a+l+d+c},u={l:-(o+l+d),r:-l,t:-(a/2),b:a/2},i={l:l,r:o+l+d,t:-(a/2),b:a/2}):"solid"===e&&(r={l:-(o/2),r:o/2,t:-(n/2+a+d),b:-(n/2)},s={l:-(o/2),r:o/2,t:n/2,b:n/2+a+d},u={l:-(o+t/2+d),r:-(t/2),t:-(a/2),b:a/2},i={l:t/2,r:o+t/2+d,t:-(a/2),b:a/2}),{top:r,bottom:s,left:u,right:i}},a=function(e){var t=0,n=0;"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/\'/g,'"')));for(var o in e)"top"===o?n-=parseInt(e[o],10):"bottom"===o?n+=parseInt(e[o],10):"left"===o?t-=parseInt(e[o],10):"right"===o&&(t+=parseInt(e[o],10));return{extraOffset_X:t,extraOffset_Y:n}},r=function(e){for(var t=e;t&&"none"===window.getComputedStyle(t).getPropertyValue("transform");)t=t.parentElement;var n=t&&t.getBoundingClientRect().top||0,o=t&&t.getBoundingClientRect().left||0;return{parentTop:n,parentLeft:o}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if(t)return t;if(void 0!==n&&null!==n)return n;if(null===n)return null;var a=/<br\s*\/?>/;return o&&"false"!==o&&a.test(e)?e.split(a).map(function(e,t){return r.default.createElement("span",{key:t,className:"multi-line"},e)}):e};var a=n(3),r=o(a)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length;return e.hasOwnProperty?Array.prototype.slice.call(e):new Array(t).fill().map(function(t){return e[t]})}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAPRJREFUOBGNk8ERgjAQRVkZOFuCJdgAoyVoB9iBZ7jkAle9eZQWrEBnOHmzBOnADvAvQ5iFIUs4kITd95JNCOV5XrVt+yrLsgo8nyzLtkR0iaLouGIYgzs+pj58Dz+R2xhjfmFd158kSRqWcMtjl0jAj6IouglDTvaRzMHMdoIliQseCVwSDWaG+DV9AKW8J9hgg/aM+FDzNHcoQQb6PQFLBpI3jvgg47I/K+iXfWMYkp12Oitp476sGTPvITlB4vxPRiuQsD3npSMeBHOwXZ0m6QQavCQJfWBNQhDwZframm2y1oJJEb/GcbwJcKPWWrIrZrk/1rvCAq4dl2AAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9ImFfX3gyQl9fem5vIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiCgkgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwLjEgMTgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMC4xIDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNOS4xLDQuOCIvPgoJPGcgaWQ9ImEiPgoJCTxwb2x5Z29uIGlkPSJhXzFfIiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjAsMC42IDAsMy4xIDAsMy4xIDAsMTcuNCAzLjEsMTcuNCA0LjIsMTcuNCA4LjQsMTcuNCA4LjQsMTMuMiA0LjIsMTMuMiA0LjIsNC44IAoJCQkxMi43LDQuOCAxMi43LDE3LjQgMTYuOSwxNy40IDE2LjksNC44IDE2LjksMy4xIDE2LjksMC42IAkJIi8+Cgk8L2c+Cgk8ZyBpZD0iem5vIj4KCQk8cGF0aCBpZD0ieiIgZmlsbD0iI0ZGRkZGRiIgZD0iTTUwLjEsMTYuM3YxLjFIMzMuN0w0Ny41LDEuN0gzMy43VjAuNmgxNi4zTDM2LjQsMTYuM0g1MC4xeiIvPgoJCTxwYXRoIGlkPSJuIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTguNSw5djguNGgtMS4xVjljMC0yLjUsMC45LTQuNiwyLjYtNi40QzYxLjgsMC45LDYzLjksMCw2Ni40LDBjMi41LDAsNC42LDAuOSw2LjQsMi42CgkJCWMxLjgsMS44LDIuNiwzLjksMi42LDYuNHY4LjRoLTEuMVY5YzAtMi4yLTAuOC00LTIuMy01LjZjLTEuNS0xLjUtMy40LTIuMy01LjYtMi4zYy0yLjIsMC00LDAuOC01LjYsMi4zQzU5LjMsNSw1OC41LDYuOCw1OC41LDl6CgkJCSIvPgoJCTxwYXRoIGlkPSJvIiBmaWxsPSIjRkZGRkZGIiBkPSJNOTcuNSwyLjZjMS44LDEuOCwyLjYsMy45LDIuNiw2LjRjMCwyLjUtMC45LDQuNi0yLjYsNi40Yy0xLjgsMS44LTMuOSwyLjYtNi40LDIuNgoJCQljLTIuNSwwLTQuNi0wLjktNi40LTIuNmMtMS44LTEuOC0yLjYtMy45LTIuNi02LjRjMC0yLjUsMC45LTQuNiwyLjYtNi40Qzg2LjUsMC45LDg4LjYsMCw5MS4xLDBDOTMuNiwwLDk1LjcsMC45LDk3LjUsMi42egoJCQkgTTk2LjcsMTQuNkM5OC4yLDEzLDk5LDExLjIsOTksOWMwLTIuMi0wLjgtNC0yLjMtNS42Yy0xLjUtMS41LTMuNC0yLjMtNS42LTIuM2MtMi4yLDAtNCwwLjgtNS42LDIuM0M4NCw1LDgzLjIsNi44LDgzLjIsOQoJCQljMCwyLjIsMC44LDQsMi4zLDUuNmMxLjUsMS41LDMuNCwyLjMsNS42LDIuM0M5My4zLDE2LjksOTUuMSwxNi4xLDk2LjcsMTQuNnoiLz4KCTwvZz4KPC9nPgo8L3N2Zz4K"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTAwcHgiIGhlaWdodD0iMTAwcHgiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+R3JvdXA8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iRGVza3RvcC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTEwLjAwMDAwMCwgLTQxOS4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5MTAuMDAwMDAwLCA0MTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAtMi1Db3B5LTYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3LjAwMDAwMCwgMjcuMDAwMDAwKSIgZmlsbD0iIzdCN0I3QiI+CiAgICAgICAgICAgICAgICAgICAgPHRleHQgaWQ9IkxvYWRpbmfigKYtQ29weSIgZm9udC1mYW1pbHk9IkdvdGhhbS1Cb29rLCBHb3RoYW0iIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSIzMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iMC4xNTIiIHk9IjQzIj5Mb2FkaW5n4oCmPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8L3RleHQ+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9ImxvYWRpbmctKDIpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMy4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQuODg5NTAwMTcsMTEuNzQ3MDYzOCBMMC42NzU4NzAzMDYsMTEuNzQ3MDYzOCBDMC4zMTI1MDU4NzMsMTEuNzQ3MDYzOCAwLjAxNTIzMDM5MDUsMTEuNDQ5NDcxOCAwLjAxNTIzMDM5MDUsMTEuMDg1NzcwOSBMMC4wMTUyMzAzOTA1LDExLjA2NzAxMjUgQzAuMDE1MjMwMzkwNSwxMC43MDMyODg5IDAuMzEyNTI4NTU0LDEwLjQwNTcxOTYgMC42NzU4NzAzMDYsMTAuNDA1NzE5NiBMNC44ODk1MDAxNywxMC40MDU3MTk2IEM1LjI1Mjg2NDYxLDEwLjQwNTcxOTYgNS41NTAxNDAwOSwxMC43MDMzMTE2IDUuNTUwMTQwMDksMTEuMDY3MDEyNSBMNS41NTAxNDAwOSwxMS4wODU3NzA5IEM1LjU1MDE2Mjc5LDExLjQ0OTQ5NDUgNS4yNTI4NjQ2MSwxMS43NDcwNjM4IDQuODg5NTAwMTcsMTEuNzQ3MDYzOCBaIE0yMS4zMjAzNTE2LDExLjc0NzA2MzggTDE3LjEwNjY5OTEsMTEuNzQ3MDYzOCBDMTYuNzQzMzM0NiwxMS43NDcwNjM4IDE2LjQ0NjA1OTIsMTEuNDQ5NDcxOCAxNi40NDYwNTkyLDExLjA4NTc3MDkgTDE2LjQ0NjA1OTIsMTEuMDY3MDEyNSBDMTYuNDQ2MDU5MiwxMC43MDMyODg5IDE2Ljc0MzM1NzMsMTAuNDA1NzE5NiAxNy4xMDY2OTkxLDEwLjQwNTcxOTYgTDIxLjMyMDMyODksMTAuNDA1NzE5NiBDMjEuNjgzNjkzNCwxMC40MDU3MTk2IDIxLjk4MDk2ODksMTAuNzAzMzExNiAyMS45ODA5Njg5LDExLjA2NzAxMjUgTDIxLjk4MDk2ODksMTEuMDg1NzcwOSBDMjEuOTgwOTkxNiwxMS40NDk0OTQ1IDIxLjY4MzY5MzQsMTEuNzQ3MDYzOCAyMS4zMjAzNTE2LDExLjc0NzA2MzggWiBNMjAuMzY3MjAwNiw2LjM4MzUyNjU1IEwxNi42OTk4NDI1LDguNDYwNDcwNzUgQzE2LjM4MzYwMDIsOC42Mzk1NjE5MSAxNS45Nzg0NDUzLDguNTI3MTAxOTEgMTUuNzk5NTMwOSw4LjIxMDU0NzA1IEwxNS43OTAyOTcxLDguMTk0MjE4NTUgQzE1LjYxMTM4MjcsNy44Nzc2NjM2OSAxNS43MjM3MzE3LDcuNDcyMTA4MjkgMTYuMDM5OTc0LDcuMjkzMDE3MTIgTDE5LjcwNzMzMjEsNS4yMTYwNzI5MiBDMjAuMDIzNTc0NCw1LjAzNjk4MTc1IDIwLjQyODcyOTQsNS4xNDk0NDE3NSAyMC42MDc2NDM3LDUuNDY1OTk2NjIgTDIwLjYxNjg3NzYsNS40ODIzMjUxMSBDMjAuNzk1ODE0Niw1Ljc5ODg3OTk4IDIwLjY4MzQ2NTYsNi4yMDQ0MTI2OCAyMC4zNjcyMDA2LDYuMzgzNTI2NTUgWiBNMTYuNzk0MzU5LDIuMzQzMjEwODkgTDE0LjYyNDE3NzcsNS45NTg1NzY3OCBDMTQuNDM3MDI3Nyw2LjI3MDMzOTgyIDE0LjAyOTA4MjIsNi4zNzIxNDg4MiAxMy43MTc2MjcsNi4xODQ4MzY2NCBMMTMuNzAxNTY0Miw2LjE3NTE2MjE5IEMxMy4zOTAxMDg5LDUuOTg3ODI3MjkgMTMuMjg4NDAwNSw1LjU3OTQ3ODU1IDEzLjQ3NTUyNzcsNS4yNjc3MTU1IEwxNS42NDU3MDkxLDEuNjUyMzQ5NjIgQzE1LjgzMjg1OSwxLjM0MDU4NjU3IDE2LjI0MDgwNDUsMS4yMzg3Nzc1OCAxNi41NTIyNTk4LDEuNDI2MDg5NzUgTDE2LjU2ODMyMjYsMS40MzU3NDE1MSBDMTYuODc5Nzc3OCwxLjYyMzA5OTExIDE2Ljk4MTUwOSwyLjAzMTQ0Nzg1IDE2Ljc5NDM1OSwyLjM0MzIxMDg5IFogTTExLjY1OTU5MDMsMC42ODkxMjcxMiBMMTEuNjM3ODEwMiw0LjkwNjg3NjEgQzExLjYzNTkyNzIsNS4yNzA1NzY5NSAxMS4zMzcxMDg5LDUuNTY2NjI0NjcgMTAuOTczNzY3Miw1LjU2NDczOTc0IEwxMC45NTUwMjcyLDUuNTY0NjQ4OTEgQzEwLjU5MTY4NTUsNS41NjI3NjM5OSAxMC4yOTU5MzAxLDUuMjYzNjUwNDEgMTAuMjk3ODEzMSw0Ljg5OTk0OTU1IEwxMC4zMTk1OTMyLDAuNjgyMjAwNTc1IEMxMC4zMjE0NzYzLDAuMzE4NDk5NzE3IDEwLjYyMDI5NDUsMC4wMjI0NTIwMDU1IDEwLjk4MzYzNjMsMC4wMjQzMzY5MjczIEwxMS4wMDIzNzYyLDAuMDI0NDI3NzYyNCBDMTEuMzY1NzE4LDAuMDI2Mjg5OTgxIDExLjY2MTQ3MzQsMC4zMjU0MjYyNjIgMTEuNjU5NTkwMywwLjY4OTEyNzEyIFogTTYuNDYwOTEwNzEsMS42NDQ4MzI1OSBMOC41NzYwMDY2Miw1LjI5Mjc2NDYzIEM4Ljc1ODM5MjE2LDUuNjA3MzQzNzIgOC42NTA1MTI2Nyw2LjAxNDEwMjc3IDguMzM2MjQ0MTcsNi4xOTY2Njg1NSBMOC4zMjAwMjI1NCw2LjIwNjA5MzIgQzguMDA1NzU0MDYsNi4zODg2NTkwMSA3LjU5OTM5NjYzLDYuMjgwNjcyODkgNy40MTcwMTExMSw1Ljk2NjA5Mzc5IEw1LjMwMTkxNTIsMi4zMTgxNjE3NCBDNS4xMTk1Mjk2NSwyLjAwMzU4MjY2IDUuMjI3NDA5MTQsMS41OTY4MjM2MSA1LjU0MTY3NzY1LDEuNDE0MjU3ODMgTDUuNTU3ODk5MjcsMS40MDQ4MzMxNyBDNS44NzIxNjc3NSwxLjIyMjI2NzM5IDYuMjc4NTAyNDgsMS4zMzAyNzYyMSA2LjQ2MDkxMDcxLDEuNjQ0ODMyNTkgWiBNMi4zNDIwMjQyLDUuMjA3Mzc0OTkgTDUuOTk1OTA1ODcsNy4zMDc5ODMwMiBDNi4zMTA5OTExLDcuNDg5MTE4MDggNi40MjA3MzA5OSw3Ljg5NTM3NzUgNi4yMzk3NzQ3Niw4LjIxMDc3NDE1IEw2LjIzMDQ1MDE2LDguMjI3MDM0NTEgQzYuMDQ5NDkzOTUsOC41NDI0MzExNiA1LjY0MzYzNTY1LDguNjUyMjc5NTEgNS4zMjg1NTA0Miw4LjQ3MTE0NDQzIEwxLjY3NDY0NjA2LDYuMzcwNTU5MTMgQzEuMzU5NTYwODMsNi4xODk0MjQwNyAxLjI0OTgyMDk0LDUuNzgzMTY0NjQgMS40MzA3NzcxNyw1LjQ2Nzc2OCBMMS40NDAxMDE3Nyw1LjQ1MTUwNzY0IEMxLjYyMTA4MDY2LDUuMTM2MDg4MjQgMi4wMjY5Mzg5NCw1LjAyNjIzOTkxIDIuMzQyMDI0Miw1LjIwNzM3NDk5IFogTTE5LjY5MzE1MjQsMTYuNzU1MzkzNyBMMTYuMDQ0MDM1MSwxNC42NDY0OTY1IEMxNS43MjkzNTgyLDE0LjQ2NDYzNDcgMTUuNjIwNTQ4NSwxNC4wNTgxMjU1IDE1LjgwMjIzMDcsMTMuNzQzMTM3NiBMMTUuODExNjAwNywxMy43MjY5IEMxNS45OTMyODI5LDEzLjQxMTkxMjEgMTYuMzk5MzkwOCwxMy4zMDI5OTQ5IDE2LjcxNDA2NzcsMTMuNDg0ODU2NyBMMjAuMzYzMTg0OSwxNS41OTM3NTM5IEMyMC42Nzc4NjE4LDE1Ljc3NTYxNTYgMjAuNzg2NjcxNSwxNi4xODIxMjQ5IDIwLjYwNDk4OTMsMTYuNDk3MTEyNyBMMjAuNTk1NjE5MywxNi41MTMzNTA0IEMyMC40MTM5MTQ0LDE2LjgyODMzODMgMjAuMDA3ODA2NSwxNi45MzcyNTU1IDE5LjY5MzE1MjQsMTYuNzU1MzkzNyBaIE02LjAyNjk2NTE3LDE0LjU5NDQ5MDYgTDIuMzkwNzExNzYsMTYuNzI1NTUyOCBDMi4wNzcxNDY1OCwxNi45MDkzMjIyIDEuNjcwMzgwNzksMTYuODAyODU3NiAxLjQ4Njc5MjgxLDE2LjQ4ODk4MjUgTDEuNDc3MzMyMDgsMTYuNDcyNzkwMyBDMS4yOTM3NDQxLDE2LjE1ODkxNTIgMS40MDAxMDM1MywxNS43NTE3NDc0IDEuNzEzNjY4NywxNS41Njc5NzggTDUuMzQ5OTIyMTIsMTMuNDM2OTE1OCBDNS42NjM0ODcyOSwxMy4yNTMxNDY0IDYuMDcwMjUzMDksMTMuMzU5NjEwOSA2LjI1Mzg0MTA3LDEzLjY3MzQ4NiBMNi4yNjMzMDE4LDEzLjY4OTY3ODMgQzYuNDQ2ODY3MDgsMTQuMDAzNTUzMyA2LjM0MDUzMDM1LDE0LjQxMDcyMTIgNi4wMjY5NjUxNywxNC41OTQ0OTA2IFogTTguNTY1MTM5MjUsMTYuNTc1OTYxOSBMNi40NzY1ODc4MiwyMC4yMzkxNzc4IEM2LjI5NjQ5MzcyLDIwLjU1NTA3NDEgNS44OTA5MzAzOSwyMC42NjYwMTI1IDUuNTc1MzQ2MDIsMjAuNDg1NzQwNCBMNS41NTkwNzkwMSwyMC40NzY0NTIgQzUuMjQzNDk0NjQsMjAuMjk2MTc5OSA1LjEzMjY2NTc2LDE5Ljg5MDIxNTcgNS4zMTI3NTk4NiwxOS41NzQzMTk1IEw3LjQwMTMxMTI5LDE1LjkxMTEwMzYgQzcuNTgxNDA1MzksMTUuNTk1MjA3MyA3Ljk4Njk2ODcyLDE1LjQ4NDI2ODkgOC4zMDI1NTMwOSwxNS42NjQ1NDEgTDguMzE4ODQyNzgsMTUuNjczODI5NCBDOC42MzQ0MDQ0NywxNS44NTQxMjQxIDguNzQ1MjU2MDMsMTYuMjYwMDg4MyA4LjU2NTEzOTI1LDE2LjU3NTk2MTkgWiBNMTEuNjk1MzkxNCwxNy4wOTYzMzkxIEwxMS42Nzk2OTE1LDIxLjMxNDExMDggQzExLjY3ODMzMDMsMjEuNjc3ODM0NCAxMS4zNzk5NDMxLDIxLjk3NDI5MDkgMTEuMDE2NTc4NywyMS45NzI5MjgzIEwxMC45OTc4Mzg3LDIxLjk3Mjg2MDEgQzEwLjYzNDQ3NDMsMjEuOTcxNDk3NiAxMC4zMzgzMTA1LDIxLjY3MjgxNTUgMTAuMzM5NjQ5MSwyMS4zMDkwOTE5IEwxMC4zNTUzNDg5LDE3LjA5MTMyMDIgQzEwLjM1NjcxMDEsMTYuNzI3NTk2NiAxMC42NTUwOTczLDE2LjQzMTE0MDEgMTEuMDE4NDYxOCwxNi40MzI0OCBMMTEuMDM3MjAxNywxNi40MzI1NDgyIEMxMS40MDA1NjYxLDE2LjQzMzkzMzUgMTEuNjk2NzUyNiwxNi43MzI2MTU2IDExLjY5NTM5MTQsMTcuMDk2MzM5MSBaIE0xNC42ODg3MjM5LDE1Ljk4NTQ3ODggTDE2Ljc0OTkzNjgsMTkuNjY0MTgzIEMxNi45Mjc2NzEzLDE5Ljk4MTQxOTEgMTYuODEzODI1LDIwLjM4NjUyMDMgMTYuNDk2OTAyMSwyMC41NjQ0NTMzIEwxNi40ODA1NDQzLDIwLjU3MzYyODEgQzE2LjE2MzYyMTQsMjAuNzUxNTM4NCAxNS43NTg5MjAyLDIwLjYzNzU3OTUgMTUuNTgxMTYyOSwyMC4zMjAzNDM0IEwxMy41MTk5NSwxNi42NDE2MzkyIEMxMy4zNDIyMTU0LDE2LjMyNDQwMzEgMTMuNDU2MDYxOCwxNS45MTkzMDE5IDEzLjc3Mjk4NDcsMTUuNzQxMzY4OSBMMTMuNzg5MzQyNCwxNS43MzIxOTQxIEMxNC4xMDYyNjU0LDE1LjU1NDI4MzkgMTQuNTEwOTg5MywxNS42NjgyNDI3IDE0LjY4ODcyMzksMTUuOTg1NDc4OCBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cmVjdCBpZD0iUmVjdGFuZ2xlLTQtQ29weSIgc3Ryb2tlPSIjOTc5Nzk3IiB4PSIwLjUiIHk9IjAuNSIgd2lkdGg9Ijk5IiBoZWlnaHQ9Ijk5IiByeD0iMTAiPjwvcmVjdD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0LjEgKDQxNDU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCAyIENvcHkgNjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEZXNrdG9wLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MC4wMDAwMDAsIC0yNzAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIiBmaWxsPSIjN0I3QjdCIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTItQ29weS02IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MC4wMDAwMDAsIDI3MC4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxnIGlkPSJsb2FkaW5nLSgyKSI+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuNjY3MDAwMSw2LjQwNzQ4OTMzIEwwLjM2ODY1NjUzLDYuNDA3NDg5MzMgQzAuMTcwNDU3NzQ5LDYuNDA3NDg5MzMgMC4wMDgzMDc0ODU3LDYuMjQ1MTY2NDMgMC4wMDgzMDc0ODU3LDYuMDQ2Nzg0MTQgTDAuMDA4MzA3NDg1Nyw2LjAzNjU1MjI1IEMwLjAwODMwNzQ4NTcsNS44MzgxNTc1OCAwLjE3MDQ3MDEyLDUuNjc1ODQ3MDUgMC4zNjg2NTY1Myw1LjY3NTg0NzA1IEwyLjY2NzAwMDEsNS42NzU4NDcwNSBDMi44NjUxOTg4OCw1LjY3NTg0NzA1IDMuMDI3MzQ5MTQsNS44MzgxNjk5NiAzLjAyNzM0OTE0LDYuMDM2NTUyMjUgTDMuMDI3MzQ5MTQsNi4wNDY3ODQxNCBDMy4wMjczNjE1Miw2LjI0NTE3ODgxIDIuODY1MTk4ODgsNi40MDc0ODkzMyAyLjY2NzAwMDEsNi40MDc0ODkzMyBaIE0xMS42MjkyODI3LDYuNDA3NDg5MzMgTDkuMzMwOTI2NzcsNi40MDc0ODkzMyBDOS4xMzI3Mjc5OSw2LjQwNzQ4OTMzIDguOTcwNTc3NzIsNi4yNDUxNjY0MyA4Ljk3MDU3NzcyLDYuMDQ2Nzg0MTQgTDguOTcwNTc3NzIsNi4wMzY1NTIyNSBDOC45NzA1Nzc3Miw1LjgzODE1NzU4IDkuMTMyNzQwMzYsNS42NzU4NDcwNSA5LjMzMDkyNjc3LDUuNjc1ODQ3MDUgTDExLjYyOTI3MDMsNS42NzU4NDcwNSBDMTEuODI3NDY5MSw1LjY3NTg0NzA1IDExLjk4OTYxOTQsNS44MzgxNjk5NiAxMS45ODk2MTk0LDYuMDM2NTUyMjUgTDExLjk4OTYxOTQsNi4wNDY3ODQxNCBDMTEuOTg5NjMxOCw2LjI0NTE3ODgxIDExLjgyNzQ2OTEsNi40MDc0ODkzMyAxMS42MjkyODI3LDYuNDA3NDg5MzMgWiBNMTEuMTA5MzgyMiwzLjQ4MTkyMzU3IEw5LjEwOTAwNTAyLDQuNjE0ODAyMjIgQzguOTM2NTA5MjEsNC43MTI0ODgzMiA4LjcxNTUxNTU5LDQuNjUxMTQ2NSA4LjYxNzkyNTk1LDQuNDc4NDgwMjEgTDguNjEyODg5Myw0LjQ2OTU3Mzc2IEM4LjUxNTI5OTY2LDQuMjk2OTA3NDcgOC41NzY1ODA5Miw0LjA3NTY5NTQzIDguNzQ5MDc2NzIsMy45NzgwMDkzNCBMMTAuNzQ5NDUzOSwyLjg0NTEzMDY4IEMxMC45MjE5NDk3LDIuNzQ3NDQ0NTkgMTEuMTQyOTQzMywyLjgwODc4NjQxIDExLjI0MDUzMjksMi45ODE0NTI3IEwxMS4yNDU1Njk2LDIuOTkwMzU5MTUgQzExLjM0MzE3MTYsMy4xNjMwMjU0NCAxMS4yODE4OTAzLDMuMzg0MjI1MSAxMS4xMDkzODIyLDMuNDgxOTIzNTcgWiBNOS4xNjA1NTk0OCwxLjI3ODExNTAzIEw3Ljk3NjgyNDE4LDMuMjUwMTMyNzkgQzcuODc0NzQyNCwzLjQyMDE4NTM2IDcuNjUyMjI2NjUsMy40NzU3MTc1NCA3LjQ4MjM0MTk4LDMuMzczNTQ3MjYgTDcuNDczNTgwNDUsMy4zNjgyNzAyOCBDNy4zMDM2OTU3OCwzLjI2NjA4NzYxIDcuMjQ4MjE4NDMsMy4wNDMzNTE5NCA3LjM1MDI4NzgzLDIuODczMjk5MzcgTDguNTM0MDIzMTIsMC45MDEyODE2MDkgQzguNjM2MTA0OSwwLjczMTIyOTA0IDguODU4NjIwNjYsMC42NzU2OTY4NjIgOS4wMjg1MDUzMiwwLjc3Nzg2NzEzOCBMOS4wMzcyNjY4NiwwLjc4MzEzMTczIEM5LjIwNzE1MTU0LDAuODg1MzI2Nzg2IDkuMjYyNjQxMjYsMS4xMDgwNjI0NiA5LjE2MDU1OTQ4LDEuMjc4MTE1MDMgWiBNNi4zNTk3NzY1NCwwLjM3NTg4NzUyIEw2LjM0Nzg5NjQ5LDIuNjc2NDc3ODcgQzYuMzQ2ODY5MzcsMi44NzQ4NjAxNiA2LjE4Mzg3NzYsMy4wMzYzNDA3MyA1Ljk4NTY5MTE5LDMuMDM1MzEyNTkgTDUuOTc1NDY5NCwzLjAzNTI2MzA0IEM1Ljc3NzI4Mjk5LDMuMDM0MjM0OSA1LjYxNTk2MTg2LDIuODcxMDgyMDQgNS42MTY5ODg5OCwyLjY3MjY5OTc1IEw1LjYyODg2OTAzLDAuMzcyMTA5NDA1IEM1LjYyOTg5NjE2LDAuMTczNzI3MTE4IDUuNzkyODg3OTIsMC4wMTIyNDY1NDg1IDUuOTkxMDc0MzMsMC4wMTMyNzQ2ODc2IEw2LjAwMTI5NjEzLDAuMDEzMzI0MjM0IEM2LjE5OTQ4MjU0LDAuMDE0MzM5OTg5NyA2LjM2MDgwMzY4LDAuMTc3NTA1MjM0IDYuMzU5Nzc2NTQsMC4zNzU4ODc1MiBaIE0zLjUyNDEzMzExLDAuODk3MTgxNDEyIEw0LjY3NzgyMTc5LDIuODg2OTYyNTMgQzQuNzc3MzA0ODEsMy4wNTg1NTExMiA0LjcxODQ2MTQ2LDMuMjgwNDE5NjkgNC41NDcwNDIyNywzLjM4MDAwMTAzIEw0LjUzODE5NDExLDMuMzg1MTQxNzUgQzQuMzY2Nzc0OTQsMy40ODQ3MjMwOSA0LjE0NTEyNTQzLDMuNDI1ODIxNTggNC4wNDU2NDI0MiwzLjI1NDIzMjk3IEwyLjg5MTk1Mzc0LDEuMjY0NDUxODYgQzIuNzkyNDcwNzIsMS4wOTI4NjMyNyAyLjg1MTMxNDA4LDAuODcwOTk0Njk0IDMuMDIyNzMzMjYsMC43NzE0MTMzNiBMMy4wMzE1ODE0MiwwLjc2NjI3MjY0IEMzLjIwMzAwMDU5LDAuNjY2NjkxMzA1IDMuNDI0NjM3NzIsMC43MjU2MDUyMDQgMy41MjQxMzMxMSwwLjg5NzE4MTQxMiBaIE0xLjI3NzQ2Nzc0LDIuODQwMzg2MzYgTDMuMjcwNDk0MTEsMy45ODYxNzI1NiBDMy40NDIzNTg3OCw0LjA4NDk3MzUgMy41MDIyMTY5LDQuMzA2NTY5NTUgMy40MDM1MTM1MSw0LjQ3ODYwNDA4IEwzLjM5ODQyNzM2LDQuNDg3NDczMzcgQzMuMjk5NzIzOTcsNC42NTk1MDc5IDMuMDc4MzQ2NzIsNC43MTk0MjUxOSAyLjkwNjQ4MjA1LDQuNjIwNjI0MjQgTDAuOTEzNDQzMzA4LDMuNDc0ODUwNDMgQzAuNzQxNTc4NjM2LDMuMzc2MDQ5NDkgMC42ODE3MjA1MTMsMy4xNTQ0NTM0NCAwLjc4MDQyMzkxMiwyLjk4MjQxODkxIEwwLjc4NTUxMDA1OSwyLjk3MzU0OTYyIEMwLjg4NDIyNTgxNywyLjgwMTUwMjY4IDEuMTA1NjAzMDYsMi43NDE1ODU0MSAxLjI3NzQ2Nzc0LDIuODQwMzg2MzYgWiBNMTAuNzQxNzE5NSw5LjEzOTMwNTY2IEw4Ljc1MTI5MTg2LDcuOTg4OTk4MSBDOC41Nzk2NDk5Myw3Ljg4OTgwMDc2IDguNTIwMjk5Miw3LjY2ODA2ODQ2IDguNjE5Mzk4NTksNy40OTYyNTY4OSBMOC42MjQ1MDk0OCw3LjQ4NzM5OTk4IEM4LjcyMzYwODg3LDcuMzE1NTg4NDEgOC45NDUxMjIyNSw3LjI1NjE3OTAzIDkuMTE2NzY0MTcsNy4zNTUzNzYzNiBMMTEuMTA3MTkxOCw4LjUwNTY4MzkyIEMxMS4yNzg4MzM3LDguNjA0ODgxMjYgMTEuMzM4MTg0NCw4LjgyNjYxMzU2IDExLjIzOTA4NSw4Ljk5ODQyNTEzIEwxMS4yMzM5NzQyLDkuMDA3MjgyMDQgQzExLjEzNDg2MjQsOS4xNzkwOTM2MSAxMC45MTMzNDksOS4yMzg1MDI5OSAxMC43NDE3MTk1LDkuMTM5MzA1NjYgWiBNMy4yODc0MzU1NSw3Ljk2MDYzMTIzIEwxLjMwNDAyNDYsOS4xMjMwMjg3OCBDMS4xMzI5ODkwNSw5LjIyMzI2NjY1IDAuOTExMTE2NzkzLDkuMTY1MTk1MDcgMC44MTA5Nzc4OTUsOC45OTM5OTA0OCBMMC44MDU4MTc0OTYsOC45ODUxNTgzNSBDMC43MDU2Nzg1OTgsOC44MTM5NTM3NiAwLjc2MzY5MjgzNCw4LjU5MTg2MjIyIDAuOTM0NzI4Mzg0LDguNDkxNjI0MzUgTDIuOTE4MTM5MzQsNy4zMjkyMjY4MSBDMy4wODkxNzQ4OSw3LjIyODk4ODk0IDMuMzExMDQ3MTQsNy4yODcwNjA1MSAzLjQxMTE4NjA0LDcuNDU4MjY1MSBMMy40MTYzNDY0NCw3LjQ2NzA5NzIzIEMzLjUxNjQ3Mjk1LDcuNjM4MzAxODIgMy40NTg0NzExLDcuODYwMzkzMzYgMy4yODc0MzU1NSw3Ljk2MDYzMTIzIFogTTQuNjcxODk0MTQsOS4wNDE0MzM3NiBMMy41MzI2ODQyNiwxMS4wMzk1NTE1IEMzLjQzNDQ1MTEyLDExLjIxMTg1ODYgMy4yMTMyMzQ3NiwxMS4yNzIzNzA0IDMuMDQxMDk3ODMsMTEuMTc0MDQwMiBMMy4wMzIyMjQ5MSwxMS4xNjg5NzM4IEMyLjg2MDA4Nzk5LDExLjA3MDY0MzYgMi43OTk2MzU4NywxMC44NDkyMDg2IDIuODk3ODY5MDEsMTAuNjc2OTAxNSBMNC4wMzcwNzg4OSw4LjY3ODc4Mzc3IEM0LjEzNTMxMjAzLDguNTA2NDc2NzEgNC4zNTY1Mjg0LDguNDQ1OTY0ODUgNC41Mjg2NjUzMiw4LjU0NDI5NTA4IEw0LjUzNzU1MDYxLDguNTQ5MzYxNDcgQzQuNzA5Njc1MTYsOC42NDc3MDQwNyA0Ljc3MDEzOTY1LDguODY5MTM5MDkgNC42NzE4OTQxNCw5LjA0MTQzMzc2IFogTTYuMzc5MzA0MzgsOS4zMjUyNzU4OSBMNi4zNzA3NDA4NCwxMS42MjU4Nzg2IEM2LjM2OTk5ODM0LDExLjgyNDI3MzMgNi4yMDcyNDE3LDExLjk4NTk3NjggNi4wMDkwNDI5MSwxMS45ODUyMzM2IEw1Ljk5ODgyMTEyLDExLjk4NTE5NjQgQzUuODAwNjIyMzQsMTEuOTg0NDUzMiA1LjYzOTA3ODQ1LDExLjgyMTUzNTcgNS42Mzk4MDg1OCwxMS42MjMxNDEgTDUuNjQ4MzcyMTEsOS4zMjI1MzgyOSBDNS42NDkxMTQ2MSw5LjEyNDE0MzYyIDUuODExODcxMjUsOC45NjI0NDAwOCA2LjAxMDA3MDA1LDguOTYzMTcwOTMgTDYuMDIwMjkxODQsOC45NjMyMDgwOSBDNi4yMTg0OTA2Miw4Ljk2Mzk2MzcyIDYuMzgwMDQ2ODgsOS4xMjY4ODEyMiA2LjM3OTMwNDM4LDkuMzI1Mjc1ODkgWiBNOC4wMTIwMzEyLDguNzE5MzUyMSBMOS4xMzYzMjkxNCwxMC43MjU5MTggQzkuMjMzMjc1MjcsMTAuODk4OTU1OSA5LjE3MTE3NzI3LDExLjExOTkyMDIgOC45OTgzMTAyMiwxMS4yMTY5NzQ1IEw4Ljk4OTM4NzgsMTEuMjIxOTc5IEM4LjgxNjUyMDc1LDExLjMxOTAyMDkgOC41OTU3NzQ2MywxMS4yNTY4NjE2IDguNDk4ODE2MTIsMTEuMDgzODIzNyBMNy4zNzQ1MTgxOCw5LjA3NzI1Nzc3IEM3LjI3NzU3MjA1LDguOTA0MjE5ODYgNy4zMzk2NzAwNSw4LjY4MzI1NTU3IDcuNTEyNTM3MSw4LjU4NjIwMTIzIEw3LjUyMTQ1OTUxLDguNTgxMTk2NzcgQzcuNjk0MzI2NTYsOC40ODQxNTQ4MyA3LjkxNTA4NTA2LDguNTQ2MzE0MTkgOC4wMTIwMzEyLDguNzE5MzUyMSBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+";
},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTJweCIgaGVpZ2h0PSI2NHB4IiB2aWV3Qm94PSIwIDAgNTIgNjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5TaGFwZTwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJQaG90b19sb2FkLV9mYWlsZWQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xNTU5LjAwMDAwMCwgLTU2OC4wMDAwMDApIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGZpbGw9IiM3QjdCN0IiPgogICAgICAgICAgICA8ZyBpZD0i5Yi35pawLSg1KS1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg1LjAwMDAwMCwgNTk5Ljc1MDAwMCkgc2NhbGUoLTEsIDEpIHJvdGF0ZSg5MC4wMDAwMDApIHRyYW5zbGF0ZSgtMTU4NS4wMDAwMDAsIC01OTkuNzUwMDAwKSB0cmFuc2xhdGUoMTU1My41MDAwMDAsIDU3My43NTAwMDApIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02Mi42NTk1NzU5LDIzLjg4ODg5MDQgTDU1LjI3MzU4MTYsMzEuNDIxNzU5NCBDNTQuNjY2MjQ1MiwzMi4wMTc3NzU4IDUzLjY4MTA3MjgsMzIuMDE3Nzc1OCA1My4wNzMwMzY3LDMxLjQyMTc1OTQgTDQ1LjczNTMyMTUsMjMuODg4ODkwNCBDNDQuODYyODAwMiwyMi44NTUyMzk2IDQ1LjQ0NTY0NzIsMjIuNDg3NzY1NyA0Ni4wNTM2ODMzLDIxLjg5MTA1NDYgTDUyLjc3Mjg2NywyMS44OTEwNTQ2IEM1MC45MTg2NzE4LDExLjcyODkwNTkgNDIuMTA1OTk2Nyw0LjAyMzc2MTc5IDMxLjQ5MjMwMzMsNC4wMjM3NjE3OSBDMjMuMjg2OTY0Nyw0LjAyMzc2MTc5IDE2LjE0OTM2MjYsOC42MjcyNTg5MiAxMi40NzU5NTcsMTUuNDExMjg2OCBMOC44MTA5NDc2OCwxMy45MzMwNTUxIEMxMy4wODMyOTM0LDUuNjg4ODU2NSAyMS42MjkzODQxLDAuMDUzNzkyNTYyMSAzMS40OTIzMDMzLDAuMDUzNzkyNTYyMSBDNDQuMjg0MTUxMywwLjA1Mzc5MjU2MjEgNTQuODUyMzY0NCw5LjUyODIzMDA3IDU2Ljc1MDY0MDUsMjEuODkxMDU0NiBMNjIuMzQxOTEzOCwyMS44OTEwNTQ2IEM2Mi45NDkyNTAyLDIyLjQ4Nzc2NTcgNjMuMjY3NjEyLDIzLjI5MjE3OTQgNjIuNjU5NTc1OSwyMy44ODg4OTA0IFogTTkuOTk0ODMzODQsMjIuMjg3MDA5NiBMMTcuMzgxNTI3OCwyOS44MTk4Nzg2IEMxNy45ODg4NjQyLDMwLjQxNTg5NDkgMTcuNjcxMjAyMSwzMS4yMjE2OTggMTcuMDYzMTY2LDMxLjgxNzcxNDQgTDEwLjY2NzI0MiwzMS44MTc3MTQ0IEMxMy4yMzcyMjY2LDQwLjk4MjMzNDUgMjEuNTgxODA0OCw0Ny42OTk2NzUzIDMxLjQ5MjMwMzMsNDcuNjk5Njc1MyBDMzkuMDM0MzI5OSw0Ny42OTk2NzUzIDQ1LjY2OTU1LDQzLjgwNjgxMyA0OS41NDY1NjczLDM3LjkwOTE2ODUgTDUzLjI0OTM2MDIsMzkuNDAyNjgyNyBDNDguNzM5ODE3NCw0Ni43NTQ5NDA3IDQwLjY5NTQwODksNTEuNjcwMzM5MSAzMS40OTIzMDMzLDUxLjY3MDMzOTEgQzE5LjM5NjY1MzIsNTEuNjcwMzM5MSA5LjMwNTYzMjk3LDQzLjE5MzQzMDIgNi42Mzc2OTA5MywzMS44MTc3MTQ0IEwwLjc3NDkzNTUzMSwzMS44MTc3MTQ0IEMwLjE2NzU5OTEzMiwzMS4yMjE2OTggLTAuNDE1MjQ3ODk2LDMwLjg1MzUyOTQgMC40NTcyNzM0MDYsMjkuODE5ODc4NiBMNy43OTQyODg5NCwyMi4yODcwMDk2IEM4LjQwMTYyNTM0LDIxLjY5MDk5MzIgOS4zODc0OTc0NCwyMS42OTA5OTMyIDkuOTk0ODMzODQsMjIuMjg3MDA5NiBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNjdweCIgaGVpZ2h0PSI0NnB4IiB2aWV3Qm94PSIwIDAgNjcgNDYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ0LjEgKDQxNDU1KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT5Hcm91cCAyIENvcHkgNDwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJEZXNrdG9wLTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMTg3LjAwMDAwMCwgLTQ3My4wMDAwMDApIiBmaWxsPSIjN0I3QjdCIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwLTItQ29weS00IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTg3LjAwMDAwMCwgNDczLjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPHRleHQgaWQ9IkxvYWRpbmfigKYtQ29weSIgZm9udC1mYW1pbHk9IkdvdGhhbS1Cb29rLCBHb3RoYW0iIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSIzMDAiPgogICAgICAgICAgICAgICAgICAgIDx0c3BhbiB4PSIwLjE1MiIgeT0iNDMiPkxvYWRpbmfigKY8L3RzcGFuPgogICAgICAgICAgICAgICAgPC90ZXh0PgogICAgICAgICAgICAgICAgPGcgaWQ9ImxvYWRpbmctKDIpIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMy4wMDAwMDAsIDAuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNC44ODk1MDAxNywxMS43NDcwNjM4IEwwLjY3NTg3MDMwNiwxMS43NDcwNjM4IEMwLjMxMjUwNTg3MywxMS43NDcwNjM4IDAuMDE1MjMwMzkwNSwxMS40NDk0NzE4IDAuMDE1MjMwMzkwNSwxMS4wODU3NzA5IEwwLjAxNTIzMDM5MDUsMTEuMDY3MDEyNSBDMC4wMTUyMzAzOTA1LDEwLjcwMzI4ODkgMC4zMTI1Mjg1NTQsMTAuNDA1NzE5NiAwLjY3NTg3MDMwNiwxMC40MDU3MTk2IEw0Ljg4OTUwMDE3LDEwLjQwNTcxOTYgQzUuMjUyODY0NjEsMTAuNDA1NzE5NiA1LjU1MDE0MDA5LDEwLjcwMzMxMTYgNS41NTAxNDAwOSwxMS4wNjcwMTI1IEw1LjU1MDE0MDA5LDExLjA4NTc3MDkgQzUuNTUwMTYyNzksMTEuNDQ5NDk0NSA1LjI1Mjg2NDYxLDExLjc0NzA2MzggNC44ODk1MDAxNywxMS43NDcwNjM4IFogTTIxLjMyMDM1MTYsMTEuNzQ3MDYzOCBMMTcuMTA2Njk5MSwxMS43NDcwNjM4IEMxNi43NDMzMzQ2LDExLjc0NzA2MzggMTYuNDQ2MDU5MiwxMS40NDk0NzE4IDE2LjQ0NjA1OTIsMTEuMDg1NzcwOSBMMTYuNDQ2MDU5MiwxMS4wNjcwMTI1IEMxNi40NDYwNTkyLDEwLjcwMzI4ODkgMTYuNzQzMzU3MywxMC40MDU3MTk2IDE3LjEwNjY5OTEsMTAuNDA1NzE5NiBMMjEuMzIwMzI4OSwxMC40MDU3MTk2IEMyMS42ODM2OTM0LDEwLjQwNTcxOTYgMjEuOTgwOTY4OSwxMC43MDMzMTE2IDIxLjk4MDk2ODksMTEuMDY3MDEyNSBMMjEuOTgwOTY4OSwxMS4wODU3NzA5IEMyMS45ODA5OTE2LDExLjQ0OTQ5NDUgMjEuNjgzNjkzNCwxMS43NDcwNjM4IDIxLjMyMDM1MTYsMTEuNzQ3MDYzOCBaIE0yMC4zNjcyMDA2LDYuMzgzNTI2NTUgTDE2LjY5OTg0MjUsOC40NjA0NzA3NSBDMTYuMzgzNjAwMiw4LjYzOTU2MTkxIDE1Ljk3ODQ0NTMsOC41MjcxMDE5MSAxNS43OTk1MzA5LDguMjEwNTQ3MDUgTDE1Ljc5MDI5NzEsOC4xOTQyMTg1NSBDMTUuNjExMzgyNyw3Ljg3NzY2MzY5IDE1LjcyMzczMTcsNy40NzIxMDgyOSAxNi4wMzk5NzQsNy4yOTMwMTcxMiBMMTkuNzA3MzMyMSw1LjIxNjA3MjkyIEMyMC4wMjM1NzQ0LDUuMDM2OTgxNzUgMjAuNDI4NzI5NCw1LjE0OTQ0MTc1IDIwLjYwNzY0MzcsNS40NjU5OTY2MiBMMjAuNjE2ODc3Niw1LjQ4MjMyNTExIEMyMC43OTU4MTQ2LDUuNzk4ODc5OTggMjAuNjgzNDY1Niw2LjIwNDQxMjY4IDIwLjM2NzIwMDYsNi4zODM1MjY1NSBaIE0xNi43OTQzNTksMi4zNDMyMTA4OSBMMTQuNjI0MTc3Nyw1Ljk1ODU3Njc4IEMxNC40MzcwMjc3LDYuMjcwMzM5ODIgMTQuMDI5MDgyMiw2LjM3MjE0ODgyIDEzLjcxNzYyNyw2LjE4NDgzNjY0IEwxMy43MDE1NjQyLDYuMTc1MTYyMTkgQzEzLjM5MDEwODksNS45ODc4MjcyOSAxMy4yODg0MDA1LDUuNTc5NDc4NTUgMTMuNDc1NTI3Nyw1LjI2NzcxNTUgTDE1LjY0NTcwOTEsMS42NTIzNDk2MiBDMTUuODMyODU5LDEuMzQwNTg2NTcgMTYuMjQwODA0NSwxLjIzODc3NzU4IDE2LjU1MjI1OTgsMS40MjYwODk3NSBMMTYuNTY4MzIyNiwxLjQzNTc0MTUxIEMxNi44Nzk3Nzc4LDEuNjIzMDk5MTEgMTYuOTgxNTA5LDIuMDMxNDQ3ODUgMTYuNzk0MzU5LDIuMzQzMjEwODkgWiBNMTEuNjU5NTkwMywwLjY4OTEyNzEyIEwxMS42Mzc4MTAyLDQuOTA2ODc2MSBDMTEuNjM1OTI3Miw1LjI3MDU3Njk1IDExLjMzNzEwODksNS41NjY2MjQ2NyAxMC45NzM3NjcyLDUuNTY0NzM5NzQgTDEwLjk1NTAyNzIsNS41NjQ2NDg5MSBDMTAuNTkxNjg1NSw1LjU2Mjc2Mzk5IDEwLjI5NTkzMDEsNS4yNjM2NTA0MSAxMC4yOTc4MTMxLDQuODk5OTQ5NTUgTDEwLjMxOTU5MzIsMC42ODIyMDA1NzUgQzEwLjMyMTQ3NjMsMC4zMTg0OTk3MTcgMTAuNjIwMjk0NSwwLjAyMjQ1MjAwNTUgMTAuOTgzNjM2MywwLjAyNDMzNjkyNzMgTDExLjAwMjM3NjIsMC4wMjQ0Mjc3NjI0IEMxMS4zNjU3MTgsMC4wMjYyODk5ODEgMTEuNjYxNDczNCwwLjMyNTQyNjI2MiAxMS42NTk1OTAzLDAuNjg5MTI3MTIgWiBNNi40NjA5MTA3MSwxLjY0NDgzMjU5IEw4LjU3NjAwNjYyLDUuMjkyNzY0NjMgQzguNzU4MzkyMTYsNS42MDczNDM3MiA4LjY1MDUxMjY3LDYuMDE0MTAyNzcgOC4zMzYyNDQxNyw2LjE5NjY2ODU1IEw4LjMyMDAyMjU0LDYuMjA2MDkzMiBDOC4wMDU3NTQwNiw2LjM4ODY1OTAxIDcuNTk5Mzk2NjMsNi4yODA2NzI4OSA3LjQxNzAxMTExLDUuOTY2MDkzNzkgTDUuMzAxOTE1MiwyLjMxODE2MTc0IEM1LjExOTUyOTY1LDIuMDAzNTgyNjYgNS4yMjc0MDkxNCwxLjU5NjgyMzYxIDUuNTQxNjc3NjUsMS40MTQyNTc4MyBMNS41NTc4OTkyNywxLjQwNDgzMzE3IEM1Ljg3MjE2Nzc1LDEuMjIyMjY3MzkgNi4yNzg1MDI0OCwxLjMzMDI3NjIxIDYuNDYwOTEwNzEsMS42NDQ4MzI1OSBaIE0yLjM0MjAyNDIsNS4yMDczNzQ5OSBMNS45OTU5MDU4Nyw3LjMwNzk4MzAyIEM2LjMxMDk5MTEsNy40ODkxMTgwOCA2LjQyMDczMDk5LDcuODk1Mzc3NSA2LjIzOTc3NDc2LDguMjEwNzc0MTUgTDYuMjMwNDUwMTYsOC4yMjcwMzQ1MSBDNi4wNDk0OTM5NSw4LjU0MjQzMTE2IDUuNjQzNjM1NjUsOC42NTIyNzk1MSA1LjMyODU1MDQyLDguNDcxMTQ0NDMgTDEuNjc0NjQ2MDYsNi4zNzA1NTkxMyBDMS4zNTk1NjA4Myw2LjE4OTQyNDA3IDEuMjQ5ODIwOTQsNS43ODMxNjQ2NCAxLjQzMDc3NzE3LDUuNDY3NzY4IEwxLjQ0MDEwMTc3LDUuNDUxNTA3NjQgQzEuNjIxMDgwNjYsNS4xMzYwODgyNCAyLjAyNjkzODk0LDUuMDI2MjM5OTEgMi4zNDIwMjQyLDUuMjA3Mzc0OTkgWiBNMTkuNjkzMTUyNCwxNi43NTUzOTM3IEwxNi4wNDQwMzUxLDE0LjY0NjQ5NjUgQzE1LjcyOTM1ODIsMTQuNDY0NjM0NyAxNS42MjA1NDg1LDE0LjA1ODEyNTUgMTUuODAyMjMwNywxMy43NDMxMzc2IEwxNS44MTE2MDA3LDEzLjcyNjkgQzE1Ljk5MzI4MjksMTMuNDExOTEyMSAxNi4zOTkzOTA4LDEzLjMwMjk5NDkgMTYuNzE0MDY3NywxMy40ODQ4NTY3IEwyMC4zNjMxODQ5LDE1LjU5Mzc1MzkgQzIwLjY3Nzg2MTgsMTUuNzc1NjE1NiAyMC43ODY2NzE1LDE2LjE4MjEyNDkgMjAuNjA0OTg5MywxNi40OTcxMTI3IEwyMC41OTU2MTkzLDE2LjUxMzM1MDQgQzIwLjQxMzkxNDQsMTYuODI4MzM4MyAyMC4wMDc4MDY1LDE2LjkzNzI1NTUgMTkuNjkzMTUyNCwxNi43NTUzOTM3IFogTTYuMDI2OTY1MTcsMTQuNTk0NDkwNiBMMi4zOTA3MTE3NiwxNi43MjU1NTI4IEMyLjA3NzE0NjU4LDE2LjkwOTMyMjIgMS42NzAzODA3OSwxNi44MDI4NTc2IDEuNDg2NzkyODEsMTYuNDg4OTgyNSBMMS40NzczMzIwOCwxNi40NzI3OTAzIEMxLjI5Mzc0NDEsMTYuMTU4OTE1MiAxLjQwMDEwMzUzLDE1Ljc1MTc0NzQgMS43MTM2Njg3LDE1LjU2Nzk3OCBMNS4zNDk5MjIxMiwxMy40MzY5MTU4IEM1LjY2MzQ4NzI5LDEzLjI1MzE0NjQgNi4wNzAyNTMwOSwxMy4zNTk2MTA5IDYuMjUzODQxMDcsMTMuNjczNDg2IEw2LjI2MzMwMTgsMTMuNjg5Njc4MyBDNi40NDY4NjcwOCwxNC4wMDM1NTMzIDYuMzQwNTMwMzUsMTQuNDEwNzIxMiA2LjAyNjk2NTE3LDE0LjU5NDQ5MDYgWiBNOC41NjUxMzkyNSwxNi41NzU5NjE5IEw2LjQ3NjU4NzgyLDIwLjIzOTE3NzggQzYuMjk2NDkzNzIsMjAuNTU1MDc0MSA1Ljg5MDkzMDM5LDIwLjY2NjAxMjUgNS41NzUzNDYwMiwyMC40ODU3NDA0IEw1LjU1OTA3OTAxLDIwLjQ3NjQ1MiBDNS4yNDM0OTQ2NCwyMC4yOTYxNzk5IDUuMTMyNjY1NzYsMTkuODkwMjE1NyA1LjMxMjc1OTg2LDE5LjU3NDMxOTUgTDcuNDAxMzExMjksMTUuOTExMTAzNiBDNy41ODE0MDUzOSwxNS41OTUyMDczIDcuOTg2OTY4NzIsMTUuNDg0MjY4OSA4LjMwMjU1MzA5LDE1LjY2NDU0MSBMOC4zMTg4NDI3OCwxNS42NzM4Mjk0IEM4LjYzNDQwNDQ3LDE1Ljg1NDEyNDEgOC43NDUyNTYwMywxNi4yNjAwODgzIDguNTY1MTM5MjUsMTYuNTc1OTYxOSBaIE0xMS42OTUzOTE0LDE3LjA5NjMzOTEgTDExLjY3OTY5MTUsMjEuMzE0MTEwOCBDMTEuNjc4MzMwMywyMS42Nzc4MzQ0IDExLjM3OTk0MzEsMjEuOTc0MjkwOSAxMS4wMTY1Nzg3LDIxLjk3MjkyODMgTDEwLjk5NzgzODcsMjEuOTcyODYwMSBDMTAuNjM0NDc0MywyMS45NzE0OTc2IDEwLjMzODMxMDUsMjEuNjcyODE1NSAxMC4zMzk2NDkxLDIxLjMwOTA5MTkgTDEwLjM1NTM0ODksMTcuMDkxMzIwMiBDMTAuMzU2NzEwMSwxNi43Mjc1OTY2IDEwLjY1NTA5NzMsMTYuNDMxMTQwMSAxMS4wMTg0NjE4LDE2LjQzMjQ4IEwxMS4wMzcyMDE3LDE2LjQzMjU0ODIgQzExLjQwMDU2NjEsMTYuNDMzOTMzNSAxMS42OTY3NTI2LDE2LjczMjYxNTYgMTEuNjk1MzkxNCwxNy4wOTYzMzkxIFogTTE0LjY4ODcyMzksMTUuOTg1NDc4OCBMMTYuNzQ5OTM2OCwxOS42NjQxODMgQzE2LjkyNzY3MTMsMTkuOTgxNDE5MSAxNi44MTM4MjUsMjAuMzg2NTIwMyAxNi40OTY5MDIxLDIwLjU2NDQ1MzMgTDE2LjQ4MDU0NDMsMjAuNTczNjI4MSBDMTYuMTYzNjIxNCwyMC43NTE1Mzg0IDE1Ljc1ODkyMDIsMjAuNjM3NTc5NSAxNS41ODExNjI5LDIwLjMyMDM0MzQgTDEzLjUxOTk1LDE2LjY0MTYzOTIgQzEzLjM0MjIxNTQsMTYuMzI0NDAzMSAxMy40NTYwNjE4LDE1LjkxOTMwMTkgMTMuNzcyOTg0NywxNS43NDEzNjg5IEwxMy43ODkzNDI0LDE1LjczMjE5NDEgQzE0LjEwNjI2NTQsMTUuNTU0MjgzOSAxNC41MTA5ODkzLDE1LjY2ODI0MjcgMTQuNjg4NzIzOSwxNS45ODU0Nzg4IFoiIGlkPSJTaGFwZSI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IiB2aWV3Qm94PSIwIDAgMjIgMjIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzICgzODk5OSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+5LiL6L29PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGRlZnM+PC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTMuMDAwMDAwLCAtMTA1LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i5LiL6L29IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5My4wMDAwMDAsIDEwNS4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMiIgeD0iMCIgeT0iMCIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIj48L3JlY3Q+CiAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSJPdmFsIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0iI0ZGQTUwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBjeD0iMTEiIGN5PSIxMSIgcj0iMTAiPjwvY2lyY2xlPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLDEyLjg4ODY3MTkgTDEwLjQ0NTMxMjUsMTIuODg4NjcxOSBDMTAuMTExMzI4MSwxMi44ODg2NzE5IDkuODkwNjI1LDEyLjY2NjAxNTYgOS44OTA2MjUsMTIuMzMzOTg0NCBMOS44OTA2MjUsNi4yMjI2NTYyNSBDOS44OTA2MjUsNS44ODg2NzE4NyAxMC4xMTMyODEyLDUuNjY3OTY4NzUgMTAuNDQ1MzEyNSw1LjY2Nzk2ODc1IEwxMiw1LjY2Nzk2ODc1IEMxMi4zMzM5ODQ0LDUuNjY3OTY4NzUgMTIuNTU0Njg3NSw1Ljg5MDYyNSAxMi41NTQ2ODc1LDYuMjIyNjU2MjUgTDEyLjU1NDY4NzUsMTIuMzMzOTg0NCBDMTIuNTU0Njg3NSwxMi42NjYwMTU2IDEyLjMzMzk4NDQsMTIuODg4NjcxOSAxMiwxMi44ODg2NzE5IFoiIGlkPSJTaGFwZSIgZmlsbD0iI0ZGRkZGRiIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIsMTYuMzMzOTg0NCBMMTAuNDQ1MzEyNSwxNi4zMzM5ODQ0IEMxMC4xMTEzMjgxLDE2LjMzMzk4NDQgOS44OTA2MjUsMTYuMTExMzI4MSA5Ljg5MDYyNSwxNS43NzkyOTY5IEw5Ljg5MDYyNSwxNC44OTA2MjUgQzkuODkwNjI1LDE0LjU1NjY0MDYgMTAuMTEzMjgxMiwxNC4zMzU5Mzc1IDEwLjQ0NTMxMjUsMTQuMzM1OTM3NSBMMTIsMTQuMzM1OTM3NSBDMTIuMzMzOTg0NCwxNC4zMzU5Mzc1IDEyLjU1NDY4NzUsMTQuNTU4NTkzOCAxMi41NTQ2ODc1LDE0Ljg5MDYyNSBMMTIuNTU0Njg3NSwxNS43NzkyOTY5IEMxMi41NTQ2ODc1LDE2LjExMTMyODEgMTIuMzMzOTg0NCwxNi4zMzM5ODQ0IDEyLDE2LjMzMzk4NDQgWiIgaWQ9IlNoYXBlIiBmaWxsPSIjRkZGRkZGIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjI3NzcgOTUgMjQgMjQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIG9wYWNpdHk6IDAuNzsKICAgICAgfQoKICAgICAgLmNscy0yIHsKICAgICAgICBmaWxsOiAjZmZmOwogICAgICAgIGZpbGwtcnVsZTogZXZlbm9kZDsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9Ikdyb3VwXzEwNSIgZGF0YS1uYW1lPSJHcm91cCAxMDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5MDMgLTM4KSI+CiAgICA8Y2lyY2xlIGlkPSJFbGxpcHNlXzUiIGRhdGEtbmFtZT0iRWxsaXBzZSA1IiBjbGFzcz0iY2xzLTEiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODc0IDEzMykiLz4KICAgIDxnIGlkPSJHcm91cF81IiBkYXRhLW5hbWU9Ikdyb3VwIDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYxOSAxMzkpIj4KICAgICAgPGcgaWQ9IkRlbGV0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYyIDEpIj4KICAgICAgICA8ZyBpZD0iR3JvdXAtNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAwKSI+CiAgICAgICAgICA8cGF0aCBpZD0iRGVsZXRlLTIiIGRhdGEtbmFtZT0iRGVsZXRlIiBjbGFzcz0iY2xzLTIiIGQ9Ik01LDQuODEyLDEuNDM2LDEuMjQ3QS44NC44NCwwLDEsMCwuMjQ3LDIuNDM2TDMuODEyLDYsLjI0Nyw5LjU2NGEuODQuODQsMCwxLDAsMS4xODgsMS4xODhMNSw3LjE4OGwzLjU2NCwzLjU2NEEuODQuODQsMCwxLDAsOS43NTMsOS41NjRMNi4xODgsNiw5Ljc1MywyLjQzNkEuODQuODQsMCwxLDAsOC41NjQsMS4yNDdaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xKSIvPgogICAgICAgIDwvZz4KICAgICAgPC9nPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSItMTM2NiAtMTE4NCAyMCAyMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgc3Ryb2tlOiAjZDZkNmQ2OwogICAgICAgIHN0cm9rZS13aWR0aDogMC41cHg7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzYTNhM2E7CiAgICAgIH0KCiAgICAgIC5jbHMtMyB7CiAgICAgICAgc3Ryb2tlOiBub25lOwogICAgICB9CgogICAgICAuY2xzLTQgewogICAgICAgIGZpbGw6IG5vbmU7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJncmF5IiBzdG9wLW9wYWNpdHk9IjAuMzIyIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0iZ3JvdXAtMTI4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTczMSAtMTIzNikiPgogICAgPGcgaWQ9InJlY3RhbmdsZS0zMCIgY2xhc3M9ImNscy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNjUgNTIpIj4KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiLz4KICAgICAgPHJlY3QgY2xhc3M9ImNscy00IiB4PSIwLjI1IiB5PSIwLjI1IiB3aWR0aD0iMTkuNSIgaGVpZ2h0PSIxOS41Ii8+CiAgICA8L2c+CiAgICA8cGF0aCBpZD0icGF0aC0yNSIgY2xhc3M9ImNscy0yIiBkPSJNNC43NjgsNS4wOS41LDkuMjExLDAsOC43MjcsNC4yNjYsNC42MDYsMCwuNDg0LjUsMCw0Ljc2OCw0LjEyMSw5LjAzMywwbC41LjQ4NEw1LjI2OCw0LjYwNiw5LjUzNSw4LjcyN2wtLjUuNDg0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzcwIDU3KSIvPgogIDwvZz4KPC9zdmc+Cg=="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSItMTM4OSAtMTE4NCAyMCAyMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgc3Ryb2tlOiAjZDZkNmQ2OwogICAgICAgIHN0cm9rZS13aWR0aDogMC41cHg7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMzYTNhM2E7CiAgICAgIH0KCiAgICAgIC5jbHMtMyB7CiAgICAgICAgc3Ryb2tlOiBub25lOwogICAgICB9CgogICAgICAuY2xzLTQgewogICAgICAgIGZpbGw6IG5vbmU7CiAgICAgIH0KICAgIDwvc3R5bGU+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudCIgeDE9IjAuNSIgeDI9IjAuNSIgeTI9IjEiIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJncmF5IiBzdG9wLW9wYWNpdHk9IjAuMzIyIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBpZD0iZ3JvdXAtMTI3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyOCAtMTE5OSkiPgogICAgPGcgaWQ9InJlY3RhbmdsZS0zMCIgY2xhc3M9ImNscy0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMzkgMTUpIj4KICAgICAgPHJlY3QgY2xhc3M9ImNscy0zIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiLz4KICAgICAgPHJlY3QgY2xhc3M9ImNscy00IiB4PSIwLjI1IiB5PSIwLjI1IiB3aWR0aD0iMTkuNSIgaGVpZ2h0PSIxOS41Ii8+CiAgICA8L2c+CiAgICA8ZyBpZD0i5q2j56GuXzFfIiBkYXRhLW5hbWU9Iuato+ehriAoMSkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM0My4yNTYgMjAuNzc1KSI+CiAgICAgIDxnIGlkPSJncm91cCI+CiAgICAgICAgPHBhdGggaWQ9InBhdGgiIGNsYXNzPSJjbHMtMiIgZD0iTTI2Ljc0Nyw0My43MDdsLTcuNSw3LjUtLjAyOC0uMDI4LS4wNDcuMDQ3LTQuNDE3LTQuMzU4LjQ2NC0uNDY5TDE5LjIsNTAuMzI2bDcuMDgtNy4wODhaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTQuNzU5IC00My4yMzgpIi8+CiAgICAgIDwvZz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="},function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0zNDk0LjQ0OSAtMTIxNiAxMCAxMCI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogI2ZmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9Iue8lui+kSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM1NDEuODE0IC0xMjU0LjAyNSkiPgogICAgPGcgaWQ9Imdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg0Ny4zNjUgMzguMDI1KSI+CiAgICAgIDxwYXRoIGlkPSJwYXRoIiBjbGFzcz0iY2xzLTEiIGQ9Ik01Ni45NCw0OC4wMjVINDcuOTgzYS40MzEuNDMxLDAsMCwxLS4yNDgtLjA4NGMtLjAxLDAtLjAyLDAtLjAzLDBhLjM1Mi4zNTIsMCwwLDEtLjIxOS0uMDc1LjMxLjMxLDAsMCwxLS4xMTktLjI3OGwuMy0yLjc0OGEuMzA3LjMwNywwLDAsMSwuMDc4LS4xNzJsNC4yODQtNC44MzJhLjM1NS4zNTUsMCwwLDEsLjQ4LS4wMzhsMi41MTcsMi4wMDdhLjMwNi4zMDYsMCwwLDEsLjA0LjQ0OWwtNC4yNzUsNC44MjFhLjM0LjM0LDAsMCwxLS4xNjguMWwtLjgxOS4yMTlINTYuOTJjLjIzNSwwLC40NDQtLjAxMi40NDQuMjA4YS40MjcuNDI3LDAsMCwxLS40MjUuNDE3Wk01NS44LDQxLjQ0N2wtMy4wNDctMi40MDguNDg5LS41NDZhMS40MjgsMS40MjgsMCwwLDEsMS4wNjUtLjQ2OSwxLjQsMS40LDAsMCwxLC44NjIuMjk0bC45NzIuNzY4YTEuMjM1LDEuMjM1LDAsMCwxLC4xNDcsMS44MTRsLS40ODkuNTQ2WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQ3LjM2NSAtMzguMDI1KSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+Cg=="},552,,function(e,t,n){e.exports=n(1)(101)},function(e,t,n){e.exports=n(1)(1030)},function(e,t,n){e.exports=n(1)(1038)},function(e,t,n){e.exports=n(1)(1073)},function(e,t,n){e.exports=n(1)(1074)},function(e,t,n){e.exports=n(1)(1079)},function(e,t,n){e.exports=n(1)(11)},function(e,t,n){e.exports=n(1)(111)},function(e,t,n){e.exports=n(1)(113)},function(e,t,n){e.exports=n(1)(127)},function(e,t,n){e.exports=n(1)(129)},function(e,t,n){e.exports=n(1)(156)},function(e,t,n){e.exports=n(1)(157)},function(e,t,n){e.exports=n(1)(158)},function(e,t,n){e.exports=n(1)(170)},function(e,t,n){e.exports=n(1)(173)},function(e,t,n){e.exports=n(1)(216)},function(e,t,n){e.exports=n(1)(225)},function(e,t,n){e.exports=n(1)(227)},function(e,t,n){e.exports=n(1)(257)},function(e,t,n){e.exports=n(1)(265)},function(e,t,n){e.exports=n(1)(3)},function(e,t,n){e.exports=n(1)(324)},function(e,t,n){e.exports=n(1)(327)},function(e,t,n){e.exports=n(1)(328)},function(e,t,n){e.exports=n(1)(330)},function(e,t,n){e.exports=n(1)(332)},function(e,t,n){e.exports=n(1)(338)},function(e,t,n){e.exports=n(1)(349)},function(e,t,n){e.exports=n(1)(416)},function(e,t,n){e.exports=n(1)(417)},function(e,t,n){e.exports=n(1)(421)},function(e,t,n){e.exports=n(1)(442)},function(e,t,n){e.exports=n(1)(443)},function(e,t,n){e.exports=n(1)(445)},function(e,t,n){e.exports=n(1)(447)},function(e,t,n){e.exports=n(1)(453)},function(e,t,n){e.exports=n(1)(464)},function(e,t,n){e.exports=n(1)(61)},function(e,t,n){e.exports=n(1)(67)},function(e,t,n){e.exports=n(1)(692)},function(e,t,n){e.exports=n(1)(719)},function(e,t,n){e.exports=n(1)(739)},function(e,t,n){e.exports=n(1)(752)},function(e,t,n){e.exports=n(1)(761)},function(e,t,n){e.exports=n(1)(769)},function(e,t,n){e.exports=n(1)(770)},function(e,t,n){e.exports=n(1)(771)},function(e,t,n){e.exports=n(1)(777)},function(e,t,n){e.exports=n(1)(778)},function(e,t,n){e.exports=n(1)(799)},function(e,t,n){e.exports=n(1)(830)},function(e,t,n){e.exports=n(1)(864)},function(e,t,n){e.exports=n(1)(874)},function(e,t,n){e.exports=n(1)(90)},function(e,t,n){e.exports=n(1)(922)},function(e,t,n){e.exports=n(1)(98)},function(e,t,n){e.exports=n(1)(99)},function(e,t,n){e.exports=n(1)(991)},function(e,t,n){e.exports=n(1)(998)}]));